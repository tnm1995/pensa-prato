(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function XC(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var s_={exports:{}},od={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tS;function x2(){if(tS)return od;tS=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,s,a){var l=null;if(a!==void 0&&(l=""+a),s.key!==void 0&&(l=""+s.key),"key"in s){a={};for(var c in s)c!=="key"&&(a[c]=s[c])}else a=s;return s=a.ref,{$$typeof:n,type:i,key:l,ref:s!==void 0?s:null,props:a}}return od.Fragment=e,od.jsx=t,od.jsxs=t,od}var nS;function C2(){return nS||(nS=1,s_.exports=x2()),s_.exports}var T=C2(),o_={exports:{}},Ge={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iS;function b2(){if(iS)return Ge;iS=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),I=Symbol.iterator;function x(F){return F===null||typeof F!="object"?null:(F=I&&F[I]||F["@@iterator"],typeof F=="function"?F:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,B={};function z(F,te,_e){this.props=F,this.context=te,this.refs=B,this.updater=_e||k}z.prototype.isReactComponent={},z.prototype.setState=function(F,te){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,te,"setState")},z.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function G(){}G.prototype=z.prototype;function J(F,te,_e){this.props=F,this.context=te,this.refs=B,this.updater=_e||k}var se=J.prototype=new G;se.constructor=J,V(se,z.prototype),se.isPureReactComponent=!0;var de=Array.isArray;function le(){}var N={H:null,A:null,T:null,S:null},P=Object.prototype.hasOwnProperty;function R(F,te,_e){var we=_e.ref;return{$$typeof:n,type:F,key:te,ref:we!==void 0?we:null,props:_e}}function D(F,te){return R(F.type,te,F.props)}function O(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function L(F){var te={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(_e){return te[_e]})}var M=/\/+/g;function De(F,te){return typeof F=="object"&&F!==null&&F.key!=null?L(""+F.key):te.toString(36)}function We(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(le,le):(F.status="pending",F.then(function(te){F.status==="pending"&&(F.status="fulfilled",F.value=te)},function(te){F.status==="pending"&&(F.status="rejected",F.reason=te)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function Z(F,te,_e,we,Fe){var qe=typeof F;(qe==="undefined"||qe==="boolean")&&(F=null);var Ye=!1;if(F===null)Ye=!0;else switch(qe){case"bigint":case"string":case"number":Ye=!0;break;case"object":switch(F.$$typeof){case n:case e:Ye=!0;break;case _:return Ye=F._init,Z(Ye(F._payload),te,_e,we,Fe)}}if(Ye)return Fe=Fe(F),Ye=we===""?"."+De(F,0):we,de(Fe)?(_e="",Ye!=null&&(_e=Ye.replace(M,"$&/")+"/"),Z(Fe,te,_e,"",function(bi){return bi})):Fe!=null&&(O(Fe)&&(Fe=D(Fe,_e+(Fe.key==null||F&&F.key===Fe.key?"":(""+Fe.key).replace(M,"$&/")+"/")+Ye)),te.push(Fe)),1;Ye=0;var kt=we===""?".":we+":";if(de(F))for(var pt=0;pt<F.length;pt++)we=F[pt],qe=kt+De(we,pt),Ye+=Z(we,te,_e,qe,Fe);else if(pt=x(F),typeof pt=="function")for(F=pt.call(F),pt=0;!(we=F.next()).done;)we=we.value,qe=kt+De(we,pt++),Ye+=Z(we,te,_e,qe,Fe);else if(qe==="object"){if(typeof F.then=="function")return Z(We(F),te,_e,we,Fe);throw te=String(F),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return Ye}function ne(F,te,_e){if(F==null)return F;var we=[],Fe=0;return Z(F,we,"","",function(qe){return te.call(_e,qe,Fe++)}),we}function ve(F){if(F._status===-1){var te=F._result;te=te(),te.then(function(_e){(F._status===0||F._status===-1)&&(F._status=1,F._result=_e)},function(_e){(F._status===0||F._status===-1)&&(F._status=2,F._result=_e)}),F._status===-1&&(F._status=0,F._result=te)}if(F._status===1)return F._result.default;throw F._result}var je=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},Ke={map:ne,forEach:function(F,te,_e){ne(F,function(){te.apply(this,arguments)},_e)},count:function(F){var te=0;return ne(F,function(){te++}),te},toArray:function(F){return ne(F,function(te){return te})||[]},only:function(F){if(!O(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return Ge.Activity=E,Ge.Children=Ke,Ge.Component=z,Ge.Fragment=t,Ge.Profiler=s,Ge.PureComponent=J,Ge.StrictMode=i,Ge.Suspense=f,Ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Ge.__COMPILER_RUNTIME={__proto__:null,c:function(F){return N.H.useMemoCache(F)}},Ge.cache=function(F){return function(){return F.apply(null,arguments)}},Ge.cacheSignal=function(){return null},Ge.cloneElement=function(F,te,_e){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var we=V({},F.props),Fe=F.key;if(te!=null)for(qe in te.key!==void 0&&(Fe=""+te.key),te)!P.call(te,qe)||qe==="key"||qe==="__self"||qe==="__source"||qe==="ref"&&te.ref===void 0||(we[qe]=te[qe]);var qe=arguments.length-2;if(qe===1)we.children=_e;else if(1<qe){for(var Ye=Array(qe),kt=0;kt<qe;kt++)Ye[kt]=arguments[kt+2];we.children=Ye}return R(F.type,Fe,we)},Ge.createContext=function(F){return F={$$typeof:l,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:a,_context:F},F},Ge.createElement=function(F,te,_e){var we,Fe={},qe=null;if(te!=null)for(we in te.key!==void 0&&(qe=""+te.key),te)P.call(te,we)&&we!=="key"&&we!=="__self"&&we!=="__source"&&(Fe[we]=te[we]);var Ye=arguments.length-2;if(Ye===1)Fe.children=_e;else if(1<Ye){for(var kt=Array(Ye),pt=0;pt<Ye;pt++)kt[pt]=arguments[pt+2];Fe.children=kt}if(F&&F.defaultProps)for(we in Ye=F.defaultProps,Ye)Fe[we]===void 0&&(Fe[we]=Ye[we]);return R(F,qe,Fe)},Ge.createRef=function(){return{current:null}},Ge.forwardRef=function(F){return{$$typeof:c,render:F}},Ge.isValidElement=O,Ge.lazy=function(F){return{$$typeof:_,_payload:{_status:-1,_result:F},_init:ve}},Ge.memo=function(F,te){return{$$typeof:h,type:F,compare:te===void 0?null:te}},Ge.startTransition=function(F){var te=N.T,_e={};N.T=_e;try{var we=F(),Fe=N.S;Fe!==null&&Fe(_e,we),typeof we=="object"&&we!==null&&typeof we.then=="function"&&we.then(le,je)}catch(qe){je(qe)}finally{te!==null&&_e.types!==null&&(te.types=_e.types),N.T=te}},Ge.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Ge.use=function(F){return N.H.use(F)},Ge.useActionState=function(F,te,_e){return N.H.useActionState(F,te,_e)},Ge.useCallback=function(F,te){return N.H.useCallback(F,te)},Ge.useContext=function(F){return N.H.useContext(F)},Ge.useDebugValue=function(){},Ge.useDeferredValue=function(F,te){return N.H.useDeferredValue(F,te)},Ge.useEffect=function(F,te){return N.H.useEffect(F,te)},Ge.useEffectEvent=function(F){return N.H.useEffectEvent(F)},Ge.useId=function(){return N.H.useId()},Ge.useImperativeHandle=function(F,te,_e){return N.H.useImperativeHandle(F,te,_e)},Ge.useInsertionEffect=function(F,te){return N.H.useInsertionEffect(F,te)},Ge.useLayoutEffect=function(F,te){return N.H.useLayoutEffect(F,te)},Ge.useMemo=function(F,te){return N.H.useMemo(F,te)},Ge.useOptimistic=function(F,te){return N.H.useOptimistic(F,te)},Ge.useReducer=function(F,te,_e){return N.H.useReducer(F,te,_e)},Ge.useRef=function(F){return N.H.useRef(F)},Ge.useState=function(F){return N.H.useState(F)},Ge.useSyncExternalStore=function(F,te,_e){return N.H.useSyncExternalStore(F,te,_e)},Ge.useTransition=function(){return N.H.useTransition()},Ge.version="19.2.0",Ge}var rS;function kv(){return rS||(rS=1,o_.exports=b2()),o_.exports}var ce=kv();const ZC=XC(ce);var a_={exports:{}},ad={},l_={exports:{}},u_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sS;function R2(){return sS||(sS=1,(function(n){function e(Z,ne){var ve=Z.length;Z.push(ne);e:for(;0<ve;){var je=ve-1>>>1,Ke=Z[je];if(0<s(Ke,ne))Z[je]=ne,Z[ve]=Ke,ve=je;else break e}}function t(Z){return Z.length===0?null:Z[0]}function i(Z){if(Z.length===0)return null;var ne=Z[0],ve=Z.pop();if(ve!==ne){Z[0]=ve;e:for(var je=0,Ke=Z.length,F=Ke>>>1;je<F;){var te=2*(je+1)-1,_e=Z[te],we=te+1,Fe=Z[we];if(0>s(_e,ve))we<Ke&&0>s(Fe,_e)?(Z[je]=Fe,Z[we]=ve,je=we):(Z[je]=_e,Z[te]=ve,je=te);else if(we<Ke&&0>s(Fe,ve))Z[je]=Fe,Z[we]=ve,je=we;else break e}}return ne}function s(Z,ne){var ve=Z.sortIndex-ne.sortIndex;return ve!==0?ve:Z.id-ne.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var f=[],h=[],_=1,E=null,I=3,x=!1,k=!1,V=!1,B=!1,z=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;function se(Z){for(var ne=t(h);ne!==null;){if(ne.callback===null)i(h);else if(ne.startTime<=Z)i(h),ne.sortIndex=ne.expirationTime,e(f,ne);else break;ne=t(h)}}function de(Z){if(V=!1,se(Z),!k)if(t(f)!==null)k=!0,le||(le=!0,L());else{var ne=t(h);ne!==null&&We(de,ne.startTime-Z)}}var le=!1,N=-1,P=5,R=-1;function D(){return B?!0:!(n.unstable_now()-R<P)}function O(){if(B=!1,le){var Z=n.unstable_now();R=Z;var ne=!0;try{e:{k=!1,V&&(V=!1,G(N),N=-1),x=!0;var ve=I;try{t:{for(se(Z),E=t(f);E!==null&&!(E.expirationTime>Z&&D());){var je=E.callback;if(typeof je=="function"){E.callback=null,I=E.priorityLevel;var Ke=je(E.expirationTime<=Z);if(Z=n.unstable_now(),typeof Ke=="function"){E.callback=Ke,se(Z),ne=!0;break t}E===t(f)&&i(f),se(Z)}else i(f);E=t(f)}if(E!==null)ne=!0;else{var F=t(h);F!==null&&We(de,F.startTime-Z),ne=!1}}break e}finally{E=null,I=ve,x=!1}ne=void 0}}finally{ne?L():le=!1}}}var L;if(typeof J=="function")L=function(){J(O)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,De=M.port2;M.port1.onmessage=O,L=function(){De.postMessage(null)}}else L=function(){z(O,0)};function We(Z,ne){N=z(function(){Z(n.unstable_now())},ne)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Z){Z.callback=null},n.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<Z?Math.floor(1e3/Z):5},n.unstable_getCurrentPriorityLevel=function(){return I},n.unstable_next=function(Z){switch(I){case 1:case 2:case 3:var ne=3;break;default:ne=I}var ve=I;I=ne;try{return Z()}finally{I=ve}},n.unstable_requestPaint=function(){B=!0},n.unstable_runWithPriority=function(Z,ne){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var ve=I;I=Z;try{return ne()}finally{I=ve}},n.unstable_scheduleCallback=function(Z,ne,ve){var je=n.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?je+ve:je):ve=je,Z){case 1:var Ke=-1;break;case 2:Ke=250;break;case 5:Ke=1073741823;break;case 4:Ke=1e4;break;default:Ke=5e3}return Ke=ve+Ke,Z={id:_++,callback:ne,priorityLevel:Z,startTime:ve,expirationTime:Ke,sortIndex:-1},ve>je?(Z.sortIndex=ve,e(h,Z),t(f)===null&&Z===t(h)&&(V?(G(N),N=-1):V=!0,We(de,ve-je))):(Z.sortIndex=Ke,e(f,Z),k||x||(k=!0,le||(le=!0,L()))),Z},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(Z){var ne=I;return function(){var ve=I;I=ne;try{return Z.apply(this,arguments)}finally{I=ve}}}})(u_)),u_}var oS;function N2(){return oS||(oS=1,l_.exports=R2()),l_.exports}var c_={exports:{}},qn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aS;function P2(){if(aS)return qn;aS=1;var n=kv();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)h+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(f,h,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:E==null?null:""+E,children:f,containerInfo:h,implementation:_}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return qn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,qn.createPortal=function(f,h){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(f,h,null,_)},qn.flushSync=function(f){var h=l.T,_=i.p;try{if(l.T=null,i.p=2,f)return f()}finally{l.T=h,i.p=_,i.d.f()}},qn.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(f,h))},qn.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},qn.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var _=h.as,E=c(_,h.crossOrigin),I=typeof h.integrity=="string"?h.integrity:void 0,x=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;_==="style"?i.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:E,integrity:I,fetchPriority:x}):_==="script"&&i.d.X(f,{crossOrigin:E,integrity:I,fetchPriority:x,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},qn.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var _=c(h.as,h.crossOrigin);i.d.M(f,{crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(f)},qn.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var _=h.as,E=c(_,h.crossOrigin);i.d.L(f,_,{crossOrigin:E,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},qn.preloadModule=function(f,h){if(typeof f=="string")if(h){var _=c(h.as,h.crossOrigin);i.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(f)},qn.requestFormReset=function(f){i.d.r(f)},qn.unstable_batchedUpdates=function(f,h){return f(h)},qn.useFormState=function(f,h,_){return l.H.useFormState(f,h,_)},qn.useFormStatus=function(){return l.H.useHostTransitionStatus()},qn.version="19.2.0",qn}var lS;function D2(){if(lS)return c_.exports;lS=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),c_.exports=P2(),c_.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uS;function M2(){if(uS)return ad;uS=1;var n=N2(),e=kv(),t=D2();function i(r){var o="https://react.dev/errors/"+r;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function a(r){var o=r,u=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(u=o.return),r=o.return;while(r)}return o.tag===3?u:null}function l(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function c(r){if(r.tag===31){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function f(r){if(a(r)!==r)throw Error(i(188))}function h(r){var o=r.alternate;if(!o){if(o=a(r),o===null)throw Error(i(188));return o!==r?null:r}for(var u=r,d=o;;){var y=u.return;if(y===null)break;var v=y.alternate;if(v===null){if(d=y.return,d!==null){u=d;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===u)return f(y),r;if(v===d)return f(y),o;v=v.sibling}throw Error(i(188))}if(u.return!==d.return)u=y,d=v;else{for(var S=!1,C=y.child;C;){if(C===u){S=!0,u=y,d=v;break}if(C===d){S=!0,d=y,u=v;break}C=C.sibling}if(!S){for(C=v.child;C;){if(C===u){S=!0,u=v,d=y;break}if(C===d){S=!0,d=v,u=y;break}C=C.sibling}if(!S)throw Error(i(189))}}if(u.alternate!==d)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?r:o}function _(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r;for(r=r.child;r!==null;){if(o=_(r),o!==null)return o;r=r.sibling}return null}var E=Object.assign,I=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),G=Symbol.for("react.consumer"),J=Symbol.for("react.context"),se=Symbol.for("react.forward_ref"),de=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function L(r){return r===null||typeof r!="object"?null:(r=O&&r[O]||r["@@iterator"],typeof r=="function"?r:null)}var M=Symbol.for("react.client.reference");function De(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===M?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case V:return"Fragment";case z:return"Profiler";case B:return"StrictMode";case de:return"Suspense";case le:return"SuspenseList";case R:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case k:return"Portal";case J:return r.displayName||"Context";case G:return(r._context.displayName||"Context")+".Consumer";case se:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case N:return o=r.displayName||null,o!==null?o:De(r.type)||"Memo";case P:o=r._payload,r=r._init;try{return De(r(o))}catch{}}return null}var We=Array.isArray,Z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},je=[],Ke=-1;function F(r){return{current:r}}function te(r){0>Ke||(r.current=je[Ke],je[Ke]=null,Ke--)}function _e(r,o){Ke++,je[Ke]=r.current,r.current=o}var we=F(null),Fe=F(null),qe=F(null),Ye=F(null);function kt(r,o){switch(_e(qe,o),_e(Fe,r),_e(we,null),o.nodeType){case 9:case 11:r=(r=o.documentElement)&&(r=r.namespaceURI)?Sw(r):0;break;default:if(r=o.tagName,o=o.namespaceURI)o=Sw(o),r=Aw(o,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}te(we),_e(we,r)}function pt(){te(we),te(Fe),te(qe)}function bi(r){r.memoizedState!==null&&_e(Ye,r);var o=we.current,u=Aw(o,r.type);o!==u&&(_e(Fe,r),_e(we,u))}function ge(r){Fe.current===r&&(te(we),te(Fe)),Ye.current===r&&(te(Ye),nd._currentValue=ve)}var Ae,be;function Le(r){if(Ae===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);Ae=o&&o[1]||"",be=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ae+r+be}var ke=!1;function ot(r,o){if(!r||ke)return"";ke=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(o){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(ee){var W=ee}Reflect.construct(r,[],oe)}else{try{oe.call()}catch(ee){W=ee}r.call(oe.prototype)}}else{try{throw Error()}catch(ee){W=ee}(oe=r())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(ee){if(ee&&W&&typeof ee.stack=="string")return[ee.stack,W.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=d.DetermineComponentFrameRoot(),S=v[0],C=v[1];if(S&&C){var U=S.split(`
`),Y=C.split(`
`);for(y=d=0;d<U.length&&!U[d].includes("DetermineComponentFrameRoot");)d++;for(;y<Y.length&&!Y[y].includes("DetermineComponentFrameRoot");)y++;if(d===U.length||y===Y.length)for(d=U.length-1,y=Y.length-1;1<=d&&0<=y&&U[d]!==Y[y];)y--;for(;1<=d&&0<=y;d--,y--)if(U[d]!==Y[y]){if(d!==1||y!==1)do if(d--,y--,0>y||U[d]!==Y[y]){var ie=`
`+U[d].replace(" at new "," at ");return r.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",r.displayName)),ie}while(1<=d&&0<=y);break}}}finally{ke=!1,Error.prepareStackTrace=u}return(u=r?r.displayName||r.name:"")?Le(u):""}function Qt(r,o){switch(r.tag){case 26:case 27:case 5:return Le(r.type);case 16:return Le("Lazy");case 13:return r.child!==o&&o!==null?Le("Suspense Fallback"):Le("Suspense");case 19:return Le("SuspenseList");case 0:case 15:return ot(r.type,!1);case 11:return ot(r.type.render,!1);case 1:return ot(r.type,!0);case 31:return Le("Activity");default:return""}}function Cn(r){try{var o="",u=null;do o+=Qt(r,u),u=r,r=r.return;while(r);return o}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var Ct=Object.prototype.hasOwnProperty,Vt=n.unstable_scheduleCallback,bn=n.unstable_cancelCallback,Yo=n.unstable_shouldYield,dr=n.unstable_requestPaint,ue=n.unstable_now,me=n.unstable_getCurrentPriorityLevel,Ve=n.unstable_ImmediatePriority,at=n.unstable_UserBlockingPriority,ei=n.unstable_NormalPriority,oc=n.unstable_LowPriority,rl=n.unstable_IdlePriority,At=n.log,Rn=n.unstable_setDisableYieldValue,Nn=null,Gt=null;function Ri(r){if(typeof At=="function"&&Rn(r),Gt&&typeof Gt.setStrictMode=="function")try{Gt.setStrictMode(Nn,r)}catch{}}var Xt=Math.clz32?Math.clz32:Gf,Bf=Math.log,sl=Math.LN2;function Gf(r){return r>>>=0,r===0?32:31-(Bf(r)/sl|0)|0}var fr=256,Jo=262144,on=4194304;function hr(r){var o=r&42;if(o!==0)return o;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function mr(r,o,u){var d=r.pendingLanes;if(d===0)return 0;var y=0,v=r.suspendedLanes,S=r.pingedLanes;r=r.warmLanes;var C=d&134217727;return C!==0?(d=C&~v,d!==0?y=hr(d):(S&=C,S!==0?y=hr(S):u||(u=C&~r,u!==0&&(y=hr(u))))):(C=d&~v,C!==0?y=hr(C):S!==0?y=hr(S):u||(u=d&~r,u!==0&&(y=hr(u)))),y===0?0:o!==0&&o!==y&&(o&v)===0&&(v=y&-y,u=o&-o,v>=u||v===32&&(u&4194048)!==0)?o:y}function Ki(r,o){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&o)===0}function ug(r,o){switch(r){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zf(){var r=on;return on<<=1,(on&62914560)===0&&(on=4194304),r}function pr(r){for(var o=[],u=0;31>u;u++)o.push(r);return o}function Wo(r,o){r.pendingLanes|=o,o!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function cg(r,o,u,d,y,v){var S=r.pendingLanes;r.pendingLanes=u,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=u,r.entangledLanes&=u,r.errorRecoveryDisabledLanes&=u,r.shellSuspendCounter=0;var C=r.entanglements,U=r.expirationTimes,Y=r.hiddenUpdates;for(u=S&~u;0<u;){var ie=31-Xt(u),oe=1<<ie;C[ie]=0,U[ie]=-1;var W=Y[ie];if(W!==null)for(Y[ie]=null,ie=0;ie<W.length;ie++){var ee=W[ie];ee!==null&&(ee.lane&=-536870913)}u&=~oe}d!==0&&Qo(r,d,0),v!==0&&y===0&&r.tag!==0&&(r.suspendedLanes|=v&~(S&~o))}function Qo(r,o,u){r.pendingLanes|=o,r.suspendedLanes&=~o;var d=31-Xt(o);r.entangledLanes|=o,r.entanglements[d]=r.entanglements[d]|1073741824|u&261930}function ac(r,o){var u=r.entangledLanes|=o;for(r=r.entanglements;u;){var d=31-Xt(u),y=1<<d;y&o|r[d]&o&&(r[d]|=o),u&=~y}}function lc(r,o){var u=o&-o;return u=(u&42)!==0?1:Xo(u),(u&(r.suspendedLanes|o))!==0?0:u}function Xo(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Xr(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Hf(){var r=ne.p;return r!==0?r:(r=window.event,r===void 0?32:Yw(r.type))}function Yi(r,o){var u=ne.p;try{return ne.p=r,o()}finally{ne.p=u}}var Ji=Math.random().toString(36).slice(2),an="__reactFiber$"+Ji,Tn="__reactProps$"+Ji,gr="__reactContainer$"+Ji,ol="__reactEvents$"+Ji,dg="__reactListeners$"+Ji,$f="__reactHandles$"+Ji,jf="__reactResources$"+Ji,yr="__reactMarker$"+Ji;function al(r){delete r[an],delete r[Tn],delete r[ol],delete r[dg],delete r[$f]}function _r(r){var o=r[an];if(o)return o;for(var u=r.parentNode;u;){if(o=u[gr]||u[an]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(r=Dw(r);r!==null;){if(u=r[an])return u;r=Dw(r)}return o}r=u,u=r.parentNode}return null}function Ni(r){if(r=r[an]||r[gr]){var o=r.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return r}return null}function fi(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r.stateNode;throw Error(i(33))}function vr(r){var o=r[jf];return o||(o=r[jf]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function ln(r){r[yr]=!0}var uc=new Set,cc={};function Er(r,o){Tr(r,o),Tr(r+"Capture",o)}function Tr(r,o){for(cc[r]=o,r=0;r<o.length;r++)uc.add(o[r])}var dc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),fc={},hc={};function Kf(r){return Ct.call(hc,r)?!0:Ct.call(fc,r)?!1:dc.test(r)?hc[r]=!0:(fc[r]=!0,!1)}function ll(r,o,u){if(Kf(o))if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":r.removeAttribute(o);return;case"boolean":var d=o.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){r.removeAttribute(o);return}}r.setAttribute(o,""+u)}}function hi(r,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttribute(o,""+u)}}function un(r,o,u,d){if(d===null)r.removeAttribute(u);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(u);return}r.setAttributeNS(o,u,""+d)}}function In(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Ms(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function mc(r,o,u){var d=Object.getOwnPropertyDescriptor(r.constructor.prototype,o);if(!r.hasOwnProperty(o)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var y=d.get,v=d.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return y.call(this)},set:function(S){u=""+S,v.call(this,S)}}),Object.defineProperty(r,o,{enumerable:d.enumerable}),{getValue:function(){return u},setValue:function(S){u=""+S},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function gt(r){if(!r._valueTracker){var o=Ms(r)?"checked":"value";r._valueTracker=mc(r,o,""+r[o])}}function Zo(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var u=o.getValue(),d="";return r&&(d=Ms(r)?r.checked?"true":"false":r.value),r=d,r!==u?(o.setValue(r),!0):!1}function Ir(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var ea=/[\n"\\]/g;function ti(r){return r.replace(ea,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function ul(r,o,u,d,y,v,S,C){r.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?r.type=S:r.removeAttribute("type"),o!=null?S==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+In(o)):r.value!==""+In(o)&&(r.value=""+In(o)):S!=="submit"&&S!=="reset"||r.removeAttribute("value"),o!=null?pc(r,S,In(o)):u!=null?pc(r,S,In(u)):d!=null&&r.removeAttribute("value"),y==null&&v!=null&&(r.defaultChecked=!!v),y!=null&&(r.checked=y&&typeof y!="function"&&typeof y!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?r.name=""+In(C):r.removeAttribute("name")}function Yf(r,o,u,d,y,v,S,C){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(r.type=v),o!=null||u!=null){if(!(v!=="submit"&&v!=="reset"||o!=null)){gt(r);return}u=u!=null?""+In(u):"",o=o!=null?""+In(o):u,C||o===r.value||(r.value=o),r.defaultValue=o}d=d??y,d=typeof d!="function"&&typeof d!="symbol"&&!!d,r.checked=C?r.checked:!!d,r.defaultChecked=!!d,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(r.name=S),gt(r)}function pc(r,o,u){o==="number"&&Ir(r.ownerDocument)===r||r.defaultValue===""+u||(r.defaultValue=""+u)}function ks(r,o,u,d){if(r=r.options,o){o={};for(var y=0;y<u.length;y++)o["$"+u[y]]=!0;for(u=0;u<r.length;u++)y=o.hasOwnProperty("$"+r[u].value),r[u].selected!==y&&(r[u].selected=y),y&&d&&(r[u].defaultSelected=!0)}else{for(u=""+In(u),o=null,y=0;y<r.length;y++){if(r[y].value===u){r[y].selected=!0,d&&(r[y].defaultSelected=!0);return}o!==null||r[y].disabled||(o=r[y])}o!==null&&(o.selected=!0)}}function Jf(r,o,u){if(o!=null&&(o=""+In(o),o!==r.value&&(r.value=o),u==null)){r.defaultValue!==o&&(r.defaultValue=o);return}r.defaultValue=u!=null?""+In(u):""}function Vs(r,o,u,d){if(o==null){if(d!=null){if(u!=null)throw Error(i(92));if(We(d)){if(1<d.length)throw Error(i(93));d=d[0]}u=d}u==null&&(u=""),o=u}u=In(o),r.defaultValue=u,d=r.textContent,d===u&&d!==""&&d!==null&&(r.value=d),gt(r)}function ni(r,o){if(o){var u=r.firstChild;if(u&&u===r.lastChild&&u.nodeType===3){u.nodeValue=o;return}}r.textContent=o}var Wf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gc(r,o,u){var d=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?d?r.setProperty(o,""):o==="float"?r.cssFloat="":r[o]="":d?r.setProperty(o,u):typeof u!="number"||u===0||Wf.has(o)?o==="float"?r.cssFloat=u:r[o]=(""+u).trim():r[o]=u+"px"}function yc(r,o,u){if(o!=null&&typeof o!="object")throw Error(i(62));if(r=r.style,u!=null){for(var d in u)!u.hasOwnProperty(d)||o!=null&&o.hasOwnProperty(d)||(d.indexOf("--")===0?r.setProperty(d,""):d==="float"?r.cssFloat="":r[d]="");for(var y in o)d=o[y],o.hasOwnProperty(y)&&u[y]!==d&&gc(r,y,d)}else for(var v in o)o.hasOwnProperty(v)&&gc(r,v,o[v])}function cl(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ls=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function dl(r){return Ls.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Wi(){}var _c=null;function Pi(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Os=null,wr=null;function ta(r){var o=Ni(r);if(o&&(r=o.stateNode)){var u=r[Tn]||null;e:switch(r=o.stateNode,o.type){case"input":if(ul(r,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=r;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+ti(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var d=u[o];if(d!==r&&d.form===r.form){var y=d[Tn]||null;if(!y)throw Error(i(90));ul(d,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(o=0;o<u.length;o++)d=u[o],d.form===r.form&&Zo(d)}break e;case"textarea":Jf(r,u.value,u.defaultValue);break e;case"select":o=u.value,o!=null&&ks(r,!!u.multiple,o,!1)}}}var fl=!1;function Us(r,o,u){if(fl)return r(o,u);fl=!0;try{var d=r(o);return d}finally{if(fl=!1,(Os!==null||wr!==null)&&(Hh(),Os&&(o=Os,r=wr,wr=Os=null,ta(o),r)))for(o=0;o<r.length;o++)ta(r[o])}}function Qi(r,o){var u=r.stateNode;if(u===null)return null;var d=u[Tn]||null;if(d===null)return null;u=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(r=r.type,d=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!d;break e;default:r=!1}if(r)return null;if(u&&typeof u!="function")throw Error(i(231,o,typeof u));return u}var Di=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),na=!1;if(Di)try{var Tt={};Object.defineProperty(Tt,"passive",{get:function(){na=!0}}),window.addEventListener("test",Tt,Tt),window.removeEventListener("test",Tt,Tt)}catch{na=!1}var Sr=null,vc=null,ia=null;function Ec(){if(ia)return ia;var r,o=vc,u=o.length,d,y="value"in Sr?Sr.value:Sr.textContent,v=y.length;for(r=0;r<u&&o[r]===y[r];r++);var S=u-r;for(d=1;d<=S&&o[u-d]===y[v-d];d++);return ia=y.slice(r,1<d?1-d:void 0)}function ra(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function Zr(){return!0}function Xi(){return!1}function Pn(r){function o(u,d,y,v,S){this._reactName=u,this._targetInst=y,this.type=d,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var C in r)r.hasOwnProperty(C)&&(u=r[C],this[C]=u?u(v):v[C]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Zr:Xi,this.isPropagationStopped=Xi,this}return E(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Zr)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Zr)},persist:function(){},isPersistent:Zr}),o}var es={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ar=Pn(es),Fs=E({},es,{view:0,detail:0}),Tc=Pn(Fs),qs,hl,xr,ml=E({},Fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bs,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==xr&&(xr&&r.type==="mousemove"?(qs=r.screenX-xr.screenX,hl=r.screenY-xr.screenY):hl=qs=0,xr=r),qs)},movementY:function(r){return"movementY"in r?r.movementY:hl}}),Ic=Pn(ml),sa=E({},ml,{dataTransfer:0}),Xf=Pn(sa),Zf=E({},Fs,{relatedTarget:0}),oa=Pn(Zf),wc=E({},es,{animationName:0,elapsedTime:0,pseudoElement:0}),eh=Pn(wc),pl=E({},es,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),th=Pn(pl),nh=E({},es,{data:0}),Cr=Pn(nh),ih={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oh(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=sh[r])?!!o[r]:!1}function Bs(){return oh}var Kn=E({},Fs,{key:function(r){if(r.key){var o=ih[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=ra(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?rh[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bs,charCode:function(r){return r.type==="keypress"?ra(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ra(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),ah=Pn(Kn),lh=E({},ml,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ts=Pn(lh),g=E({},Fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bs}),w=Pn(g),A=E({},es,{propertyName:0,elapsedTime:0,pseudoElement:0}),b=Pn(A),j=E({},ml,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),X=Pn(j),pe=E({},es,{newState:0,oldState:0}),ze=Pn(pe),Zt=[9,13,27,32],ft=Di&&"CompositionEvent"in window,Lt=null;Di&&"documentMode"in document&&(Lt=document.documentMode);var Mi=Di&&"TextEvent"in window&&!Lt,br=Di&&(!ft||Lt&&8<Lt&&11>=Lt),Zi=" ",er=!1;function aa(r,o){switch(r){case"keyup":return Zt.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gl(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var yl=!1;function WP(r,o){switch(r){case"compositionend":return gl(o);case"keypress":return o.which!==32?null:(er=!0,Zi);case"textInput":return r=o.data,r===Zi&&er?null:r;default:return null}}function QP(r,o){if(yl)return r==="compositionend"||!ft&&aa(r,o)?(r=Ec(),ia=vc=Sr=null,yl=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return br&&o.locale!=="ko"?null:o.data;default:return null}}var XP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function VE(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!XP[r.type]:o==="textarea"}function LE(r,o,u,d){Os?wr?wr.push(d):wr=[d]:Os=d,o=Qh(o,"onChange"),0<o.length&&(u=new Ar("onChange","change",null,u,d),r.push({event:u,listeners:o}))}var Sc=null,Ac=null;function ZP(r){_w(r,0)}function uh(r){var o=fi(r);if(Zo(o))return r}function OE(r,o){if(r==="change")return o}var UE=!1;if(Di){var fg;if(Di){var hg="oninput"in document;if(!hg){var FE=document.createElement("div");FE.setAttribute("oninput","return;"),hg=typeof FE.oninput=="function"}fg=hg}else fg=!1;UE=fg&&(!document.documentMode||9<document.documentMode)}function qE(){Sc&&(Sc.detachEvent("onpropertychange",BE),Ac=Sc=null)}function BE(r){if(r.propertyName==="value"&&uh(Ac)){var o=[];LE(o,Ac,r,Pi(r)),Us(ZP,o)}}function eD(r,o,u){r==="focusin"?(qE(),Sc=o,Ac=u,Sc.attachEvent("onpropertychange",BE)):r==="focusout"&&qE()}function tD(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return uh(Ac)}function nD(r,o){if(r==="click")return uh(o)}function iD(r,o){if(r==="input"||r==="change")return uh(o)}function rD(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var mi=typeof Object.is=="function"?Object.is:rD;function xc(r,o){if(mi(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var u=Object.keys(r),d=Object.keys(o);if(u.length!==d.length)return!1;for(d=0;d<u.length;d++){var y=u[d];if(!Ct.call(o,y)||!mi(r[y],o[y]))return!1}return!0}function GE(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function zE(r,o){var u=GE(r);r=0;for(var d;u;){if(u.nodeType===3){if(d=r+u.textContent.length,r<=o&&d>=o)return{node:u,offset:o-r};r=d}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=GE(u)}}function HE(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?HE(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function $E(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var o=Ir(r.document);o instanceof r.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)r=o.contentWindow;else break;o=Ir(r.document)}return o}function mg(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}var sD=Di&&"documentMode"in document&&11>=document.documentMode,_l=null,pg=null,Cc=null,gg=!1;function jE(r,o,u){var d=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;gg||_l==null||_l!==Ir(d)||(d=_l,"selectionStart"in d&&mg(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Cc&&xc(Cc,d)||(Cc=d,d=Qh(pg,"onSelect"),0<d.length&&(o=new Ar("onSelect","select",null,o,u),r.push({event:o,listeners:d}),o.target=_l)))}function la(r,o){var u={};return u[r.toLowerCase()]=o.toLowerCase(),u["Webkit"+r]="webkit"+o,u["Moz"+r]="moz"+o,u}var vl={animationend:la("Animation","AnimationEnd"),animationiteration:la("Animation","AnimationIteration"),animationstart:la("Animation","AnimationStart"),transitionrun:la("Transition","TransitionRun"),transitionstart:la("Transition","TransitionStart"),transitioncancel:la("Transition","TransitionCancel"),transitionend:la("Transition","TransitionEnd")},yg={},KE={};Di&&(KE=document.createElement("div").style,"AnimationEvent"in window||(delete vl.animationend.animation,delete vl.animationiteration.animation,delete vl.animationstart.animation),"TransitionEvent"in window||delete vl.transitionend.transition);function ua(r){if(yg[r])return yg[r];if(!vl[r])return r;var o=vl[r],u;for(u in o)if(o.hasOwnProperty(u)&&u in KE)return yg[r]=o[u];return r}var YE=ua("animationend"),JE=ua("animationiteration"),WE=ua("animationstart"),oD=ua("transitionrun"),aD=ua("transitionstart"),lD=ua("transitioncancel"),QE=ua("transitionend"),XE=new Map,_g="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_g.push("scrollEnd");function tr(r,o){XE.set(r,o),Er(o,[r])}var ch=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},ki=[],El=0,vg=0;function dh(){for(var r=El,o=vg=El=0;o<r;){var u=ki[o];ki[o++]=null;var d=ki[o];ki[o++]=null;var y=ki[o];ki[o++]=null;var v=ki[o];if(ki[o++]=null,d!==null&&y!==null){var S=d.pending;S===null?y.next=y:(y.next=S.next,S.next=y),d.pending=y}v!==0&&ZE(u,y,v)}}function fh(r,o,u,d){ki[El++]=r,ki[El++]=o,ki[El++]=u,ki[El++]=d,vg|=d,r.lanes|=d,r=r.alternate,r!==null&&(r.lanes|=d)}function Eg(r,o,u,d){return fh(r,o,u,d),hh(r)}function ca(r,o){return fh(r,null,null,o),hh(r)}function ZE(r,o,u){r.lanes|=u;var d=r.alternate;d!==null&&(d.lanes|=u);for(var y=!1,v=r.return;v!==null;)v.childLanes|=u,d=v.alternate,d!==null&&(d.childLanes|=u),v.tag===22&&(r=v.stateNode,r===null||r._visibility&1||(y=!0)),r=v,v=v.return;return r.tag===3?(v=r.stateNode,y&&o!==null&&(y=31-Xt(u),r=v.hiddenUpdates,d=r[y],d===null?r[y]=[o]:d.push(o),o.lane=u|536870912),v):null}function hh(r){if(50<Jc)throw Jc=0,Ry=null,Error(i(185));for(var o=r.return;o!==null;)r=o,o=r.return;return r.tag===3?r.stateNode:null}var Tl={};function uD(r,o,u,d){this.tag=r,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pi(r,o,u,d){return new uD(r,o,u,d)}function Tg(r){return r=r.prototype,!(!r||!r.isReactComponent)}function ns(r,o){var u=r.alternate;return u===null?(u=pi(r.tag,o,r.key,r.mode),u.elementType=r.elementType,u.type=r.type,u.stateNode=r.stateNode,u.alternate=r,r.alternate=u):(u.pendingProps=o,u.type=r.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=r.flags&65011712,u.childLanes=r.childLanes,u.lanes=r.lanes,u.child=r.child,u.memoizedProps=r.memoizedProps,u.memoizedState=r.memoizedState,u.updateQueue=r.updateQueue,o=r.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=r.sibling,u.index=r.index,u.ref=r.ref,u.refCleanup=r.refCleanup,u}function eT(r,o){r.flags&=65011714;var u=r.alternate;return u===null?(r.childLanes=0,r.lanes=o,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=u.childLanes,r.lanes=u.lanes,r.child=u.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=u.memoizedProps,r.memoizedState=u.memoizedState,r.updateQueue=u.updateQueue,r.type=u.type,o=u.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),r}function mh(r,o,u,d,y,v){var S=0;if(d=r,typeof r=="function")Tg(r)&&(S=1);else if(typeof r=="string")S=m2(r,u,we.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case R:return r=pi(31,u,o,y),r.elementType=R,r.lanes=v,r;case V:return da(u.children,y,v,o);case B:S=8,y|=24;break;case z:return r=pi(12,u,o,y|2),r.elementType=z,r.lanes=v,r;case de:return r=pi(13,u,o,y),r.elementType=de,r.lanes=v,r;case le:return r=pi(19,u,o,y),r.elementType=le,r.lanes=v,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case J:S=10;break e;case G:S=9;break e;case se:S=11;break e;case N:S=14;break e;case P:S=16,d=null;break e}S=29,u=Error(i(130,r===null?"null":typeof r,"")),d=null}return o=pi(S,u,o,y),o.elementType=r,o.type=d,o.lanes=v,o}function da(r,o,u,d){return r=pi(7,r,d,o),r.lanes=u,r}function Ig(r,o,u){return r=pi(6,r,null,o),r.lanes=u,r}function tT(r){var o=pi(18,null,null,0);return o.stateNode=r,o}function wg(r,o,u){return o=pi(4,r.children!==null?r.children:[],r.key,o),o.lanes=u,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}var nT=new WeakMap;function Vi(r,o){if(typeof r=="object"&&r!==null){var u=nT.get(r);return u!==void 0?u:(o={value:r,source:o,stack:Cn(o)},nT.set(r,o),o)}return{value:r,source:o,stack:Cn(o)}}var Il=[],wl=0,ph=null,bc=0,Li=[],Oi=0,Gs=null,Rr=1,Nr="";function is(r,o){Il[wl++]=bc,Il[wl++]=ph,ph=r,bc=o}function iT(r,o,u){Li[Oi++]=Rr,Li[Oi++]=Nr,Li[Oi++]=Gs,Gs=r;var d=Rr;r=Nr;var y=32-Xt(d)-1;d&=~(1<<y),u+=1;var v=32-Xt(o)+y;if(30<v){var S=y-y%5;v=(d&(1<<S)-1).toString(32),d>>=S,y-=S,Rr=1<<32-Xt(o)+y|u<<y|d,Nr=v+r}else Rr=1<<v|u<<y|d,Nr=r}function Sg(r){r.return!==null&&(is(r,1),iT(r,1,0))}function Ag(r){for(;r===ph;)ph=Il[--wl],Il[wl]=null,bc=Il[--wl],Il[wl]=null;for(;r===Gs;)Gs=Li[--Oi],Li[Oi]=null,Nr=Li[--Oi],Li[Oi]=null,Rr=Li[--Oi],Li[Oi]=null}function rT(r,o){Li[Oi++]=Rr,Li[Oi++]=Nr,Li[Oi++]=Gs,Rr=o.id,Nr=o.overflow,Gs=r}var Dn=null,Nt=null,rt=!1,zs=null,Ui=!1,xg=Error(i(519));function Hs(r){var o=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Rc(Vi(o,r)),xg}function sT(r){var o=r.stateNode,u=r.type,d=r.memoizedProps;switch(o[an]=r,o[Tn]=d,u){case"dialog":Xe("cancel",o),Xe("close",o);break;case"iframe":case"object":case"embed":Xe("load",o);break;case"video":case"audio":for(u=0;u<Qc.length;u++)Xe(Qc[u],o);break;case"source":Xe("error",o);break;case"img":case"image":case"link":Xe("error",o),Xe("load",o);break;case"details":Xe("toggle",o);break;case"input":Xe("invalid",o),Yf(o,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":Xe("invalid",o);break;case"textarea":Xe("invalid",o),Vs(o,d.value,d.defaultValue,d.children)}u=d.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||d.suppressHydrationWarning===!0||Iw(o.textContent,u)?(d.popover!=null&&(Xe("beforetoggle",o),Xe("toggle",o)),d.onScroll!=null&&Xe("scroll",o),d.onScrollEnd!=null&&Xe("scrollend",o),d.onClick!=null&&(o.onclick=Wi),o=!0):o=!1,o||Hs(r,!0)}function oT(r){for(Dn=r.return;Dn;)switch(Dn.tag){case 5:case 31:case 13:Ui=!1;return;case 27:case 3:Ui=!0;return;default:Dn=Dn.return}}function Sl(r){if(r!==Dn)return!1;if(!rt)return oT(r),rt=!0,!1;var o=r.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=r.type,u=!(u!=="form"&&u!=="button")||Hy(r.type,r.memoizedProps)),u=!u),u&&Nt&&Hs(r),oT(r),o===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));Nt=Pw(r)}else if(o===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));Nt=Pw(r)}else o===27?(o=Nt,ro(r.type)?(r=Jy,Jy=null,Nt=r):Nt=o):Nt=Dn?qi(r.stateNode.nextSibling):null;return!0}function fa(){Nt=Dn=null,rt=!1}function Cg(){var r=zs;return r!==null&&(oi===null?oi=r:oi.push.apply(oi,r),zs=null),r}function Rc(r){zs===null?zs=[r]:zs.push(r)}var bg=F(null),ha=null,rs=null;function $s(r,o,u){_e(bg,o._currentValue),o._currentValue=u}function ss(r){r._currentValue=bg.current,te(bg)}function Rg(r,o,u){for(;r!==null;){var d=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),r===u)break;r=r.return}}function Ng(r,o,u,d){var y=r.child;for(y!==null&&(y.return=r);y!==null;){var v=y.dependencies;if(v!==null){var S=y.child;v=v.firstContext;e:for(;v!==null;){var C=v;v=y;for(var U=0;U<o.length;U++)if(C.context===o[U]){v.lanes|=u,C=v.alternate,C!==null&&(C.lanes|=u),Rg(v.return,u,r),d||(S=null);break e}v=C.next}}else if(y.tag===18){if(S=y.return,S===null)throw Error(i(341));S.lanes|=u,v=S.alternate,v!==null&&(v.lanes|=u),Rg(S,u,r),S=null}else S=y.child;if(S!==null)S.return=y;else for(S=y;S!==null;){if(S===r){S=null;break}if(y=S.sibling,y!==null){y.return=S.return,S=y;break}S=S.return}y=S}}function Al(r,o,u,d){r=null;for(var y=o,v=!1;y!==null;){if(!v){if((y.flags&524288)!==0)v=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var S=y.alternate;if(S===null)throw Error(i(387));if(S=S.memoizedProps,S!==null){var C=y.type;mi(y.pendingProps.value,S.value)||(r!==null?r.push(C):r=[C])}}else if(y===Ye.current){if(S=y.alternate,S===null)throw Error(i(387));S.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(r!==null?r.push(nd):r=[nd])}y=y.return}r!==null&&Ng(o,r,u,d),o.flags|=262144}function gh(r){for(r=r.firstContext;r!==null;){if(!mi(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function ma(r){ha=r,rs=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Mn(r){return aT(ha,r)}function yh(r,o){return ha===null&&ma(r),aT(r,o)}function aT(r,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},rs===null){if(r===null)throw Error(i(308));rs=o,r.dependencies={lanes:0,firstContext:o},r.flags|=524288}else rs=rs.next=o;return u}var cD=typeof AbortController<"u"?AbortController:function(){var r=[],o=this.signal={aborted:!1,addEventListener:function(u,d){r.push(d)}};this.abort=function(){o.aborted=!0,r.forEach(function(u){return u()})}},dD=n.unstable_scheduleCallback,fD=n.unstable_NormalPriority,cn={$$typeof:J,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pg(){return{controller:new cD,data:new Map,refCount:0}}function Nc(r){r.refCount--,r.refCount===0&&dD(fD,function(){r.controller.abort()})}var Pc=null,Dg=0,xl=0,Cl=null;function hD(r,o){if(Pc===null){var u=Pc=[];Dg=0,xl=Vy(),Cl={status:"pending",value:void 0,then:function(d){u.push(d)}}}return Dg++,o.then(lT,lT),o}function lT(){if(--Dg===0&&Pc!==null){Cl!==null&&(Cl.status="fulfilled");var r=Pc;Pc=null,xl=0,Cl=null;for(var o=0;o<r.length;o++)(0,r[o])()}}function mD(r,o){var u=[],d={status:"pending",value:null,reason:null,then:function(y){u.push(y)}};return r.then(function(){d.status="fulfilled",d.value=o;for(var y=0;y<u.length;y++)(0,u[y])(o)},function(y){for(d.status="rejected",d.reason=y,y=0;y<u.length;y++)(0,u[y])(void 0)}),d}var uT=Z.S;Z.S=function(r,o){jI=ue(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&hD(r,o),uT!==null&&uT(r,o)};var pa=F(null);function Mg(){var r=pa.current;return r!==null?r:xt.pooledCache}function _h(r,o){o===null?_e(pa,pa.current):_e(pa,o.pool)}function cT(){var r=Mg();return r===null?null:{parent:cn._currentValue,pool:r}}var bl=Error(i(460)),kg=Error(i(474)),vh=Error(i(542)),Eh={then:function(){}};function dT(r){return r=r.status,r==="fulfilled"||r==="rejected"}function fT(r,o,u){switch(u=r[u],u===void 0?r.push(o):u!==o&&(o.then(Wi,Wi),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,mT(r),r;default:if(typeof o.status=="string")o.then(Wi,Wi);else{if(r=xt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=o,r.status="pending",r.then(function(d){if(o.status==="pending"){var y=o;y.status="fulfilled",y.value=d}},function(d){if(o.status==="pending"){var y=o;y.status="rejected",y.reason=d}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,mT(r),r}throw ya=o,bl}}function ga(r){try{var o=r._init;return o(r._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(ya=u,bl):u}}var ya=null;function hT(){if(ya===null)throw Error(i(459));var r=ya;return ya=null,r}function mT(r){if(r===bl||r===vh)throw Error(i(483))}var Rl=null,Dc=0;function Th(r){var o=Dc;return Dc+=1,Rl===null&&(Rl=[]),fT(Rl,r,o)}function Mc(r,o){o=o.props.ref,r.ref=o!==void 0?o:null}function Ih(r,o){throw o.$$typeof===I?Error(i(525)):(r=Object.prototype.toString.call(o),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r)))}function pT(r){function o(H,q){if(r){var K=H.deletions;K===null?(H.deletions=[q],H.flags|=16):K.push(q)}}function u(H,q){if(!r)return null;for(;q!==null;)o(H,q),q=q.sibling;return null}function d(H){for(var q=new Map;H!==null;)H.key!==null?q.set(H.key,H):q.set(H.index,H),H=H.sibling;return q}function y(H,q){return H=ns(H,q),H.index=0,H.sibling=null,H}function v(H,q,K){return H.index=K,r?(K=H.alternate,K!==null?(K=K.index,K<q?(H.flags|=67108866,q):K):(H.flags|=67108866,q)):(H.flags|=1048576,q)}function S(H){return r&&H.alternate===null&&(H.flags|=67108866),H}function C(H,q,K,re){return q===null||q.tag!==6?(q=Ig(K,H.mode,re),q.return=H,q):(q=y(q,K),q.return=H,q)}function U(H,q,K,re){var Me=K.type;return Me===V?ie(H,q,K.props.children,re,K.key):q!==null&&(q.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===P&&ga(Me)===q.type)?(q=y(q,K.props),Mc(q,K),q.return=H,q):(q=mh(K.type,K.key,K.props,null,H.mode,re),Mc(q,K),q.return=H,q)}function Y(H,q,K,re){return q===null||q.tag!==4||q.stateNode.containerInfo!==K.containerInfo||q.stateNode.implementation!==K.implementation?(q=wg(K,H.mode,re),q.return=H,q):(q=y(q,K.children||[]),q.return=H,q)}function ie(H,q,K,re,Me){return q===null||q.tag!==7?(q=da(K,H.mode,re,Me),q.return=H,q):(q=y(q,K),q.return=H,q)}function oe(H,q,K){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=Ig(""+q,H.mode,K),q.return=H,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case x:return K=mh(q.type,q.key,q.props,null,H.mode,K),Mc(K,q),K.return=H,K;case k:return q=wg(q,H.mode,K),q.return=H,q;case P:return q=ga(q),oe(H,q,K)}if(We(q)||L(q))return q=da(q,H.mode,K,null),q.return=H,q;if(typeof q.then=="function")return oe(H,Th(q),K);if(q.$$typeof===J)return oe(H,yh(H,q),K);Ih(H,q)}return null}function W(H,q,K,re){var Me=q!==null?q.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return Me!==null?null:C(H,q,""+K,re);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case x:return K.key===Me?U(H,q,K,re):null;case k:return K.key===Me?Y(H,q,K,re):null;case P:return K=ga(K),W(H,q,K,re)}if(We(K)||L(K))return Me!==null?null:ie(H,q,K,re,null);if(typeof K.then=="function")return W(H,q,Th(K),re);if(K.$$typeof===J)return W(H,q,yh(H,K),re);Ih(H,K)}return null}function ee(H,q,K,re,Me){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return H=H.get(K)||null,C(q,H,""+re,Me);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case x:return H=H.get(re.key===null?K:re.key)||null,U(q,H,re,Me);case k:return H=H.get(re.key===null?K:re.key)||null,Y(q,H,re,Me);case P:return re=ga(re),ee(H,q,K,re,Me)}if(We(re)||L(re))return H=H.get(K)||null,ie(q,H,re,Me,null);if(typeof re.then=="function")return ee(H,q,K,Th(re),Me);if(re.$$typeof===J)return ee(H,q,K,yh(q,re),Me);Ih(q,re)}return null}function xe(H,q,K,re){for(var Me=null,lt=null,Re=q,Je=q=0,nt=null;Re!==null&&Je<K.length;Je++){Re.index>Je?(nt=Re,Re=null):nt=Re.sibling;var ut=W(H,Re,K[Je],re);if(ut===null){Re===null&&(Re=nt);break}r&&Re&&ut.alternate===null&&o(H,Re),q=v(ut,q,Je),lt===null?Me=ut:lt.sibling=ut,lt=ut,Re=nt}if(Je===K.length)return u(H,Re),rt&&is(H,Je),Me;if(Re===null){for(;Je<K.length;Je++)Re=oe(H,K[Je],re),Re!==null&&(q=v(Re,q,Je),lt===null?Me=Re:lt.sibling=Re,lt=Re);return rt&&is(H,Je),Me}for(Re=d(Re);Je<K.length;Je++)nt=ee(Re,H,Je,K[Je],re),nt!==null&&(r&&nt.alternate!==null&&Re.delete(nt.key===null?Je:nt.key),q=v(nt,q,Je),lt===null?Me=nt:lt.sibling=nt,lt=nt);return r&&Re.forEach(function(uo){return o(H,uo)}),rt&&is(H,Je),Me}function Ue(H,q,K,re){if(K==null)throw Error(i(151));for(var Me=null,lt=null,Re=q,Je=q=0,nt=null,ut=K.next();Re!==null&&!ut.done;Je++,ut=K.next()){Re.index>Je?(nt=Re,Re=null):nt=Re.sibling;var uo=W(H,Re,ut.value,re);if(uo===null){Re===null&&(Re=nt);break}r&&Re&&uo.alternate===null&&o(H,Re),q=v(uo,q,Je),lt===null?Me=uo:lt.sibling=uo,lt=uo,Re=nt}if(ut.done)return u(H,Re),rt&&is(H,Je),Me;if(Re===null){for(;!ut.done;Je++,ut=K.next())ut=oe(H,ut.value,re),ut!==null&&(q=v(ut,q,Je),lt===null?Me=ut:lt.sibling=ut,lt=ut);return rt&&is(H,Je),Me}for(Re=d(Re);!ut.done;Je++,ut=K.next())ut=ee(Re,H,Je,ut.value,re),ut!==null&&(r&&ut.alternate!==null&&Re.delete(ut.key===null?Je:ut.key),q=v(ut,q,Je),lt===null?Me=ut:lt.sibling=ut,lt=ut);return r&&Re.forEach(function(A2){return o(H,A2)}),rt&&is(H,Je),Me}function St(H,q,K,re){if(typeof K=="object"&&K!==null&&K.type===V&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case x:e:{for(var Me=K.key;q!==null;){if(q.key===Me){if(Me=K.type,Me===V){if(q.tag===7){u(H,q.sibling),re=y(q,K.props.children),re.return=H,H=re;break e}}else if(q.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===P&&ga(Me)===q.type){u(H,q.sibling),re=y(q,K.props),Mc(re,K),re.return=H,H=re;break e}u(H,q);break}else o(H,q);q=q.sibling}K.type===V?(re=da(K.props.children,H.mode,re,K.key),re.return=H,H=re):(re=mh(K.type,K.key,K.props,null,H.mode,re),Mc(re,K),re.return=H,H=re)}return S(H);case k:e:{for(Me=K.key;q!==null;){if(q.key===Me)if(q.tag===4&&q.stateNode.containerInfo===K.containerInfo&&q.stateNode.implementation===K.implementation){u(H,q.sibling),re=y(q,K.children||[]),re.return=H,H=re;break e}else{u(H,q);break}else o(H,q);q=q.sibling}re=wg(K,H.mode,re),re.return=H,H=re}return S(H);case P:return K=ga(K),St(H,q,K,re)}if(We(K))return xe(H,q,K,re);if(L(K)){if(Me=L(K),typeof Me!="function")throw Error(i(150));return K=Me.call(K),Ue(H,q,K,re)}if(typeof K.then=="function")return St(H,q,Th(K),re);if(K.$$typeof===J)return St(H,q,yh(H,K),re);Ih(H,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,q!==null&&q.tag===6?(u(H,q.sibling),re=y(q,K),re.return=H,H=re):(u(H,q),re=Ig(K,H.mode,re),re.return=H,H=re),S(H)):u(H,q)}return function(H,q,K,re){try{Dc=0;var Me=St(H,q,K,re);return Rl=null,Me}catch(Re){if(Re===bl||Re===vh)throw Re;var lt=pi(29,Re,null,H.mode);return lt.lanes=re,lt.return=H,lt}finally{}}}var _a=pT(!0),gT=pT(!1),js=!1;function Vg(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Lg(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Ks(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Ys(r,o,u){var d=r.updateQueue;if(d===null)return null;if(d=d.shared,(ht&2)!==0){var y=d.pending;return y===null?o.next=o:(o.next=y.next,y.next=o),d.pending=o,o=hh(r),ZE(r,null,u),o}return fh(r,d,o,u),hh(r)}function kc(r,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var d=o.lanes;d&=r.pendingLanes,u|=d,o.lanes=u,ac(r,u)}}function Og(r,o){var u=r.updateQueue,d=r.alternate;if(d!==null&&(d=d.updateQueue,u===d)){var y=null,v=null;if(u=u.firstBaseUpdate,u!==null){do{var S={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};v===null?y=v=S:v=v.next=S,u=u.next}while(u!==null);v===null?y=v=o:v=v.next=o}else y=v=o;u={baseState:d.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:d.shared,callbacks:d.callbacks},r.updateQueue=u;return}r=u.lastBaseUpdate,r===null?u.firstBaseUpdate=o:r.next=o,u.lastBaseUpdate=o}var Ug=!1;function Vc(){if(Ug){var r=Cl;if(r!==null)throw r}}function Lc(r,o,u,d){Ug=!1;var y=r.updateQueue;js=!1;var v=y.firstBaseUpdate,S=y.lastBaseUpdate,C=y.shared.pending;if(C!==null){y.shared.pending=null;var U=C,Y=U.next;U.next=null,S===null?v=Y:S.next=Y,S=U;var ie=r.alternate;ie!==null&&(ie=ie.updateQueue,C=ie.lastBaseUpdate,C!==S&&(C===null?ie.firstBaseUpdate=Y:C.next=Y,ie.lastBaseUpdate=U))}if(v!==null){var oe=y.baseState;S=0,ie=Y=U=null,C=v;do{var W=C.lane&-536870913,ee=W!==C.lane;if(ee?(tt&W)===W:(d&W)===W){W!==0&&W===xl&&(Ug=!0),ie!==null&&(ie=ie.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var xe=r,Ue=C;W=o;var St=u;switch(Ue.tag){case 1:if(xe=Ue.payload,typeof xe=="function"){oe=xe.call(St,oe,W);break e}oe=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=Ue.payload,W=typeof xe=="function"?xe.call(St,oe,W):xe,W==null)break e;oe=E({},oe,W);break e;case 2:js=!0}}W=C.callback,W!==null&&(r.flags|=64,ee&&(r.flags|=8192),ee=y.callbacks,ee===null?y.callbacks=[W]:ee.push(W))}else ee={lane:W,tag:C.tag,payload:C.payload,callback:C.callback,next:null},ie===null?(Y=ie=ee,U=oe):ie=ie.next=ee,S|=W;if(C=C.next,C===null){if(C=y.shared.pending,C===null)break;ee=C,C=ee.next,ee.next=null,y.lastBaseUpdate=ee,y.shared.pending=null}}while(!0);ie===null&&(U=oe),y.baseState=U,y.firstBaseUpdate=Y,y.lastBaseUpdate=ie,v===null&&(y.shared.lanes=0),Zs|=S,r.lanes=S,r.memoizedState=oe}}function yT(r,o){if(typeof r!="function")throw Error(i(191,r));r.call(o)}function _T(r,o){var u=r.callbacks;if(u!==null)for(r.callbacks=null,r=0;r<u.length;r++)yT(u[r],o)}var Nl=F(null),wh=F(0);function vT(r,o){r=ms,_e(wh,r),_e(Nl,o),ms=r|o.baseLanes}function Fg(){_e(wh,ms),_e(Nl,Nl.current)}function qg(){ms=wh.current,te(Nl),te(wh)}var gi=F(null),Fi=null;function Js(r){var o=r.alternate;_e(en,en.current&1),_e(gi,r),Fi===null&&(o===null||Nl.current!==null||o.memoizedState!==null)&&(Fi=r)}function Bg(r){_e(en,en.current),_e(gi,r),Fi===null&&(Fi=r)}function ET(r){r.tag===22?(_e(en,en.current),_e(gi,r),Fi===null&&(Fi=r)):Ws()}function Ws(){_e(en,en.current),_e(gi,gi.current)}function yi(r){te(gi),Fi===r&&(Fi=null),te(en)}var en=F(0);function Sh(r){for(var o=r;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||Ky(u)||Yy(u)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var os=0,He=null,It=null,dn=null,Ah=!1,Pl=!1,va=!1,xh=0,Oc=0,Dl=null,pD=0;function jt(){throw Error(i(321))}function Gg(r,o){if(o===null)return!1;for(var u=0;u<o.length&&u<r.length;u++)if(!mi(r[u],o[u]))return!1;return!0}function zg(r,o,u,d,y,v){return os=v,He=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Z.H=r===null||r.memoizedState===null?iI:ry,va=!1,v=u(d,y),va=!1,Pl&&(v=IT(o,u,d,y)),TT(r),v}function TT(r){Z.H=qc;var o=It!==null&&It.next!==null;if(os=0,dn=It=He=null,Ah=!1,Oc=0,Dl=null,o)throw Error(i(300));r===null||fn||(r=r.dependencies,r!==null&&gh(r)&&(fn=!0))}function IT(r,o,u,d){He=r;var y=0;do{if(Pl&&(Dl=null),Oc=0,Pl=!1,25<=y)throw Error(i(301));if(y+=1,dn=It=null,r.updateQueue!=null){var v=r.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}Z.H=rI,v=o(u,d)}while(Pl);return v}function gD(){var r=Z.H,o=r.useState()[0];return o=typeof o.then=="function"?Uc(o):o,r=r.useState()[0],(It!==null?It.memoizedState:null)!==r&&(He.flags|=1024),o}function Hg(){var r=xh!==0;return xh=0,r}function $g(r,o,u){o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~u}function jg(r){if(Ah){for(r=r.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Ah=!1}os=0,dn=It=He=null,Pl=!1,Oc=xh=0,Dl=null}function Yn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dn===null?He.memoizedState=dn=r:dn=dn.next=r,dn}function tn(){if(It===null){var r=He.alternate;r=r!==null?r.memoizedState:null}else r=It.next;var o=dn===null?He.memoizedState:dn.next;if(o!==null)dn=o,It=r;else{if(r===null)throw He.alternate===null?Error(i(467)):Error(i(310));It=r,r={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},dn===null?He.memoizedState=dn=r:dn=dn.next=r}return dn}function Ch(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Uc(r){var o=Oc;return Oc+=1,Dl===null&&(Dl=[]),r=fT(Dl,r,o),o=He,(dn===null?o.memoizedState:dn.next)===null&&(o=o.alternate,Z.H=o===null||o.memoizedState===null?iI:ry),r}function bh(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Uc(r);if(r.$$typeof===J)return Mn(r)}throw Error(i(438,String(r)))}function Kg(r){var o=null,u=He.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var d=He.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(o={data:d.data.map(function(y){return y.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=Ch(),He.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(r),d=0;d<r;d++)u[d]=D;return o.index++,u}function as(r,o){return typeof o=="function"?o(r):o}function Rh(r){var o=tn();return Yg(o,It,r)}function Yg(r,o,u){var d=r.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=u;var y=r.baseQueue,v=d.pending;if(v!==null){if(y!==null){var S=y.next;y.next=v.next,v.next=S}o.baseQueue=y=v,d.pending=null}if(v=r.baseState,y===null)r.memoizedState=v;else{o=y.next;var C=S=null,U=null,Y=o,ie=!1;do{var oe=Y.lane&-536870913;if(oe!==Y.lane?(tt&oe)===oe:(os&oe)===oe){var W=Y.revertLane;if(W===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),oe===xl&&(ie=!0);else if((os&W)===W){Y=Y.next,W===xl&&(ie=!0);continue}else oe={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},U===null?(C=U=oe,S=v):U=U.next=oe,He.lanes|=W,Zs|=W;oe=Y.action,va&&u(v,oe),v=Y.hasEagerState?Y.eagerState:u(v,oe)}else W={lane:oe,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},U===null?(C=U=W,S=v):U=U.next=W,He.lanes|=oe,Zs|=oe;Y=Y.next}while(Y!==null&&Y!==o);if(U===null?S=v:U.next=C,!mi(v,r.memoizedState)&&(fn=!0,ie&&(u=Cl,u!==null)))throw u;r.memoizedState=v,r.baseState=S,r.baseQueue=U,d.lastRenderedState=v}return y===null&&(d.lanes=0),[r.memoizedState,d.dispatch]}function Jg(r){var o=tn(),u=o.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=r;var d=u.dispatch,y=u.pending,v=o.memoizedState;if(y!==null){u.pending=null;var S=y=y.next;do v=r(v,S.action),S=S.next;while(S!==y);mi(v,o.memoizedState)||(fn=!0),o.memoizedState=v,o.baseQueue===null&&(o.baseState=v),u.lastRenderedState=v}return[v,d]}function wT(r,o,u){var d=He,y=tn(),v=rt;if(v){if(u===void 0)throw Error(i(407));u=u()}else u=o();var S=!mi((It||y).memoizedState,u);if(S&&(y.memoizedState=u,fn=!0),y=y.queue,Xg(xT.bind(null,d,y,r),[r]),y.getSnapshot!==o||S||dn!==null&&dn.memoizedState.tag&1){if(d.flags|=2048,Ml(9,{destroy:void 0},AT.bind(null,d,y,u,o),null),xt===null)throw Error(i(349));v||(os&127)!==0||ST(d,o,u)}return u}function ST(r,o,u){r.flags|=16384,r={getSnapshot:o,value:u},o=He.updateQueue,o===null?(o=Ch(),He.updateQueue=o,o.stores=[r]):(u=o.stores,u===null?o.stores=[r]:u.push(r))}function AT(r,o,u,d){o.value=u,o.getSnapshot=d,CT(o)&&bT(r)}function xT(r,o,u){return u(function(){CT(o)&&bT(r)})}function CT(r){var o=r.getSnapshot;r=r.value;try{var u=o();return!mi(r,u)}catch{return!0}}function bT(r){var o=ca(r,2);o!==null&&ai(o,r,2)}function Wg(r){var o=Yn();if(typeof r=="function"){var u=r;if(r=u(),va){Ri(!0);try{u()}finally{Ri(!1)}}}return o.memoizedState=o.baseState=r,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:as,lastRenderedState:r},o}function RT(r,o,u,d){return r.baseState=u,Yg(r,It,typeof d=="function"?d:as)}function yD(r,o,u,d,y){if(Dh(r))throw Error(i(485));if(r=o.action,r!==null){var v={payload:y,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){v.listeners.push(S)}};Z.T!==null?u(!0):v.isTransition=!1,d(v),u=o.pending,u===null?(v.next=o.pending=v,NT(o,v)):(v.next=u.next,o.pending=u.next=v)}}function NT(r,o){var u=o.action,d=o.payload,y=r.state;if(o.isTransition){var v=Z.T,S={};Z.T=S;try{var C=u(y,d),U=Z.S;U!==null&&U(S,C),PT(r,o,C)}catch(Y){Qg(r,o,Y)}finally{v!==null&&S.types!==null&&(v.types=S.types),Z.T=v}}else try{v=u(y,d),PT(r,o,v)}catch(Y){Qg(r,o,Y)}}function PT(r,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(d){DT(r,o,d)},function(d){return Qg(r,o,d)}):DT(r,o,u)}function DT(r,o,u){o.status="fulfilled",o.value=u,MT(o),r.state=u,o=r.pending,o!==null&&(u=o.next,u===o?r.pending=null:(u=u.next,o.next=u,NT(r,u)))}function Qg(r,o,u){var d=r.pending;if(r.pending=null,d!==null){d=d.next;do o.status="rejected",o.reason=u,MT(o),o=o.next;while(o!==d)}r.action=null}function MT(r){r=r.listeners;for(var o=0;o<r.length;o++)(0,r[o])()}function kT(r,o){return o}function VT(r,o){if(rt){var u=xt.formState;if(u!==null){e:{var d=He;if(rt){if(Nt){t:{for(var y=Nt,v=Ui;y.nodeType!==8;){if(!v){y=null;break t}if(y=qi(y.nextSibling),y===null){y=null;break t}}v=y.data,y=v==="F!"||v==="F"?y:null}if(y){Nt=qi(y.nextSibling),d=y.data==="F!";break e}}Hs(d)}d=!1}d&&(o=u[0])}}return u=Yn(),u.memoizedState=u.baseState=o,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:kT,lastRenderedState:o},u.queue=d,u=eI.bind(null,He,d),d.dispatch=u,d=Wg(!1),v=iy.bind(null,He,!1,d.queue),d=Yn(),y={state:o,dispatch:null,action:r,pending:null},d.queue=y,u=yD.bind(null,He,y,v,u),y.dispatch=u,d.memoizedState=r,[o,u,!1]}function LT(r){var o=tn();return OT(o,It,r)}function OT(r,o,u){if(o=Yg(r,o,kT)[0],r=Rh(as)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var d=Uc(o)}catch(S){throw S===bl?vh:S}else d=o;o=tn();var y=o.queue,v=y.dispatch;return u!==o.memoizedState&&(He.flags|=2048,Ml(9,{destroy:void 0},_D.bind(null,y,u),null)),[d,v,r]}function _D(r,o){r.action=o}function UT(r){var o=tn(),u=It;if(u!==null)return OT(o,u,r);tn(),o=o.memoizedState,u=tn();var d=u.queue.dispatch;return u.memoizedState=r,[o,d,!1]}function Ml(r,o,u,d){return r={tag:r,create:u,deps:d,inst:o,next:null},o=He.updateQueue,o===null&&(o=Ch(),He.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=r.next=r:(d=u.next,u.next=r,r.next=d,o.lastEffect=r),r}function FT(){return tn().memoizedState}function Nh(r,o,u,d){var y=Yn();He.flags|=r,y.memoizedState=Ml(1|o,{destroy:void 0},u,d===void 0?null:d)}function Ph(r,o,u,d){var y=tn();d=d===void 0?null:d;var v=y.memoizedState.inst;It!==null&&d!==null&&Gg(d,It.memoizedState.deps)?y.memoizedState=Ml(o,v,u,d):(He.flags|=r,y.memoizedState=Ml(1|o,v,u,d))}function qT(r,o){Nh(8390656,8,r,o)}function Xg(r,o){Ph(2048,8,r,o)}function vD(r){He.flags|=4;var o=He.updateQueue;if(o===null)o=Ch(),He.updateQueue=o,o.events=[r];else{var u=o.events;u===null?o.events=[r]:u.push(r)}}function BT(r){var o=tn().memoizedState;return vD({ref:o,nextImpl:r}),function(){if((ht&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}function GT(r,o){return Ph(4,2,r,o)}function zT(r,o){return Ph(4,4,r,o)}function HT(r,o){if(typeof o=="function"){r=r();var u=o(r);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function $T(r,o,u){u=u!=null?u.concat([r]):null,Ph(4,4,HT.bind(null,o,r),u)}function Zg(){}function jT(r,o){var u=tn();o=o===void 0?null:o;var d=u.memoizedState;return o!==null&&Gg(o,d[1])?d[0]:(u.memoizedState=[r,o],r)}function KT(r,o){var u=tn();o=o===void 0?null:o;var d=u.memoizedState;if(o!==null&&Gg(o,d[1]))return d[0];if(d=r(),va){Ri(!0);try{r()}finally{Ri(!1)}}return u.memoizedState=[d,o],d}function ey(r,o,u){return u===void 0||(os&1073741824)!==0&&(tt&261930)===0?r.memoizedState=o:(r.memoizedState=u,r=YI(),He.lanes|=r,Zs|=r,u)}function YT(r,o,u,d){return mi(u,o)?u:Nl.current!==null?(r=ey(r,u,d),mi(r,o)||(fn=!0),r):(os&42)===0||(os&1073741824)!==0&&(tt&261930)===0?(fn=!0,r.memoizedState=u):(r=YI(),He.lanes|=r,Zs|=r,o)}function JT(r,o,u,d,y){var v=ne.p;ne.p=v!==0&&8>v?v:8;var S=Z.T,C={};Z.T=C,iy(r,!1,o,u);try{var U=y(),Y=Z.S;if(Y!==null&&Y(C,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var ie=mD(U,d);Fc(r,o,ie,Ei(r))}else Fc(r,o,d,Ei(r))}catch(oe){Fc(r,o,{then:function(){},status:"rejected",reason:oe},Ei())}finally{ne.p=v,S!==null&&C.types!==null&&(S.types=C.types),Z.T=S}}function ED(){}function ty(r,o,u,d){if(r.tag!==5)throw Error(i(476));var y=WT(r).queue;JT(r,y,o,ve,u===null?ED:function(){return QT(r),u(d)})}function WT(r){var o=r.memoizedState;if(o!==null)return o;o={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:as,lastRenderedState:ve},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:as,lastRenderedState:u},next:null},r.memoizedState=o,r=r.alternate,r!==null&&(r.memoizedState=o),o}function QT(r){var o=WT(r);o.next===null&&(o=r.alternate.memoizedState),Fc(r,o.next.queue,{},Ei())}function ny(){return Mn(nd)}function XT(){return tn().memoizedState}function ZT(){return tn().memoizedState}function TD(r){for(var o=r.return;o!==null;){switch(o.tag){case 24:case 3:var u=Ei();r=Ks(u);var d=Ys(o,r,u);d!==null&&(ai(d,o,u),kc(d,o,u)),o={cache:Pg()},r.payload=o;return}o=o.return}}function ID(r,o,u){var d=Ei();u={lane:d,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Dh(r)?tI(o,u):(u=Eg(r,o,u,d),u!==null&&(ai(u,r,d),nI(u,o,d)))}function eI(r,o,u){var d=Ei();Fc(r,o,u,d)}function Fc(r,o,u,d){var y={lane:d,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(Dh(r))tI(o,y);else{var v=r.alternate;if(r.lanes===0&&(v===null||v.lanes===0)&&(v=o.lastRenderedReducer,v!==null))try{var S=o.lastRenderedState,C=v(S,u);if(y.hasEagerState=!0,y.eagerState=C,mi(C,S))return fh(r,o,y,0),xt===null&&dh(),!1}catch{}finally{}if(u=Eg(r,o,y,d),u!==null)return ai(u,r,d),nI(u,o,d),!0}return!1}function iy(r,o,u,d){if(d={lane:2,revertLane:Vy(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Dh(r)){if(o)throw Error(i(479))}else o=Eg(r,u,d,2),o!==null&&ai(o,r,2)}function Dh(r){var o=r.alternate;return r===He||o!==null&&o===He}function tI(r,o){Pl=Ah=!0;var u=r.pending;u===null?o.next=o:(o.next=u.next,u.next=o),r.pending=o}function nI(r,o,u){if((u&4194048)!==0){var d=o.lanes;d&=r.pendingLanes,u|=d,o.lanes=u,ac(r,u)}}var qc={readContext:Mn,use:bh,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useLayoutEffect:jt,useInsertionEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useSyncExternalStore:jt,useId:jt,useHostTransitionStatus:jt,useFormState:jt,useActionState:jt,useOptimistic:jt,useMemoCache:jt,useCacheRefresh:jt};qc.useEffectEvent=jt;var iI={readContext:Mn,use:bh,useCallback:function(r,o){return Yn().memoizedState=[r,o===void 0?null:o],r},useContext:Mn,useEffect:qT,useImperativeHandle:function(r,o,u){u=u!=null?u.concat([r]):null,Nh(4194308,4,HT.bind(null,o,r),u)},useLayoutEffect:function(r,o){return Nh(4194308,4,r,o)},useInsertionEffect:function(r,o){Nh(4,2,r,o)},useMemo:function(r,o){var u=Yn();o=o===void 0?null:o;var d=r();if(va){Ri(!0);try{r()}finally{Ri(!1)}}return u.memoizedState=[d,o],d},useReducer:function(r,o,u){var d=Yn();if(u!==void 0){var y=u(o);if(va){Ri(!0);try{u(o)}finally{Ri(!1)}}}else y=o;return d.memoizedState=d.baseState=y,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:y},d.queue=r,r=r.dispatch=ID.bind(null,He,r),[d.memoizedState,r]},useRef:function(r){var o=Yn();return r={current:r},o.memoizedState=r},useState:function(r){r=Wg(r);var o=r.queue,u=eI.bind(null,He,o);return o.dispatch=u,[r.memoizedState,u]},useDebugValue:Zg,useDeferredValue:function(r,o){var u=Yn();return ey(u,r,o)},useTransition:function(){var r=Wg(!1);return r=JT.bind(null,He,r.queue,!0,!1),Yn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,o,u){var d=He,y=Yn();if(rt){if(u===void 0)throw Error(i(407));u=u()}else{if(u=o(),xt===null)throw Error(i(349));(tt&127)!==0||ST(d,o,u)}y.memoizedState=u;var v={value:u,getSnapshot:o};return y.queue=v,qT(xT.bind(null,d,v,r),[r]),d.flags|=2048,Ml(9,{destroy:void 0},AT.bind(null,d,v,u,o),null),u},useId:function(){var r=Yn(),o=xt.identifierPrefix;if(rt){var u=Nr,d=Rr;u=(d&~(1<<32-Xt(d)-1)).toString(32)+u,o="_"+o+"R_"+u,u=xh++,0<u&&(o+="H"+u.toString(32)),o+="_"}else u=pD++,o="_"+o+"r_"+u.toString(32)+"_";return r.memoizedState=o},useHostTransitionStatus:ny,useFormState:VT,useActionState:VT,useOptimistic:function(r){var o=Yn();o.memoizedState=o.baseState=r;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=iy.bind(null,He,!0,u),u.dispatch=o,[r,o]},useMemoCache:Kg,useCacheRefresh:function(){return Yn().memoizedState=TD.bind(null,He)},useEffectEvent:function(r){var o=Yn(),u={impl:r};return o.memoizedState=u,function(){if((ht&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}},ry={readContext:Mn,use:bh,useCallback:jT,useContext:Mn,useEffect:Xg,useImperativeHandle:$T,useInsertionEffect:GT,useLayoutEffect:zT,useMemo:KT,useReducer:Rh,useRef:FT,useState:function(){return Rh(as)},useDebugValue:Zg,useDeferredValue:function(r,o){var u=tn();return YT(u,It.memoizedState,r,o)},useTransition:function(){var r=Rh(as)[0],o=tn().memoizedState;return[typeof r=="boolean"?r:Uc(r),o]},useSyncExternalStore:wT,useId:XT,useHostTransitionStatus:ny,useFormState:LT,useActionState:LT,useOptimistic:function(r,o){var u=tn();return RT(u,It,r,o)},useMemoCache:Kg,useCacheRefresh:ZT};ry.useEffectEvent=BT;var rI={readContext:Mn,use:bh,useCallback:jT,useContext:Mn,useEffect:Xg,useImperativeHandle:$T,useInsertionEffect:GT,useLayoutEffect:zT,useMemo:KT,useReducer:Jg,useRef:FT,useState:function(){return Jg(as)},useDebugValue:Zg,useDeferredValue:function(r,o){var u=tn();return It===null?ey(u,r,o):YT(u,It.memoizedState,r,o)},useTransition:function(){var r=Jg(as)[0],o=tn().memoizedState;return[typeof r=="boolean"?r:Uc(r),o]},useSyncExternalStore:wT,useId:XT,useHostTransitionStatus:ny,useFormState:UT,useActionState:UT,useOptimistic:function(r,o){var u=tn();return It!==null?RT(u,It,r,o):(u.baseState=r,[r,u.queue.dispatch])},useMemoCache:Kg,useCacheRefresh:ZT};rI.useEffectEvent=BT;function sy(r,o,u,d){o=r.memoizedState,u=u(d,o),u=u==null?o:E({},o,u),r.memoizedState=u,r.lanes===0&&(r.updateQueue.baseState=u)}var oy={enqueueSetState:function(r,o,u){r=r._reactInternals;var d=Ei(),y=Ks(d);y.payload=o,u!=null&&(y.callback=u),o=Ys(r,y,d),o!==null&&(ai(o,r,d),kc(o,r,d))},enqueueReplaceState:function(r,o,u){r=r._reactInternals;var d=Ei(),y=Ks(d);y.tag=1,y.payload=o,u!=null&&(y.callback=u),o=Ys(r,y,d),o!==null&&(ai(o,r,d),kc(o,r,d))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var u=Ei(),d=Ks(u);d.tag=2,o!=null&&(d.callback=o),o=Ys(r,d,u),o!==null&&(ai(o,r,u),kc(o,r,u))}};function sI(r,o,u,d,y,v,S){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(d,v,S):o.prototype&&o.prototype.isPureReactComponent?!xc(u,d)||!xc(y,v):!0}function oI(r,o,u,d){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,d),o.state!==r&&oy.enqueueReplaceState(o,o.state,null)}function Ea(r,o){var u=o;if("ref"in o){u={};for(var d in o)d!=="ref"&&(u[d]=o[d])}if(r=r.defaultProps){u===o&&(u=E({},u));for(var y in r)u[y]===void 0&&(u[y]=r[y])}return u}function aI(r){ch(r)}function lI(r){console.error(r)}function uI(r){ch(r)}function Mh(r,o){try{var u=r.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(d){setTimeout(function(){throw d})}}function cI(r,o,u){try{var d=r.onCaughtError;d(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function ay(r,o,u){return u=Ks(u),u.tag=3,u.payload={element:null},u.callback=function(){Mh(r,o)},u}function dI(r){return r=Ks(r),r.tag=3,r}function fI(r,o,u,d){var y=u.type.getDerivedStateFromError;if(typeof y=="function"){var v=d.value;r.payload=function(){return y(v)},r.callback=function(){cI(o,u,d)}}var S=u.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(r.callback=function(){cI(o,u,d),typeof y!="function"&&(eo===null?eo=new Set([this]):eo.add(this));var C=d.stack;this.componentDidCatch(d.value,{componentStack:C!==null?C:""})})}function wD(r,o,u,d,y){if(u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(o=u.alternate,o!==null&&Al(o,u,y,!0),u=gi.current,u!==null){switch(u.tag){case 31:case 13:return Fi===null?$h():u.alternate===null&&Kt===0&&(Kt=3),u.flags&=-257,u.flags|=65536,u.lanes=y,d===Eh?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([d]):o.add(d),Dy(r,d,y)),!1;case 22:return u.flags|=65536,d===Eh?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([d])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([d]):u.add(d)),Dy(r,d,y)),!1}throw Error(i(435,u.tag))}return Dy(r,d,y),$h(),!1}if(rt)return o=gi.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=y,d!==xg&&(r=Error(i(422),{cause:d}),Rc(Vi(r,u)))):(d!==xg&&(o=Error(i(423),{cause:d}),Rc(Vi(o,u))),r=r.current.alternate,r.flags|=65536,y&=-y,r.lanes|=y,d=Vi(d,u),y=ay(r.stateNode,d,y),Og(r,y),Kt!==4&&(Kt=2)),!1;var v=Error(i(520),{cause:d});if(v=Vi(v,u),Yc===null?Yc=[v]:Yc.push(v),Kt!==4&&(Kt=2),o===null)return!0;d=Vi(d,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,r=y&-y,u.lanes|=r,r=ay(u.stateNode,d,r),Og(u,r),!1;case 1:if(o=u.type,v=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(eo===null||!eo.has(v))))return u.flags|=65536,y&=-y,u.lanes|=y,y=dI(y),fI(y,r,u,d),Og(u,y),!1}u=u.return}while(u!==null);return!1}var ly=Error(i(461)),fn=!1;function kn(r,o,u,d){o.child=r===null?gT(o,null,u,d):_a(o,r.child,u,d)}function hI(r,o,u,d,y){u=u.render;var v=o.ref;if("ref"in d){var S={};for(var C in d)C!=="ref"&&(S[C]=d[C])}else S=d;return ma(o),d=zg(r,o,u,S,v,y),C=Hg(),r!==null&&!fn?($g(r,o,y),ls(r,o,y)):(rt&&C&&Sg(o),o.flags|=1,kn(r,o,d,y),o.child)}function mI(r,o,u,d,y){if(r===null){var v=u.type;return typeof v=="function"&&!Tg(v)&&v.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=v,pI(r,o,v,d,y)):(r=mh(u.type,null,d,o,o.mode,y),r.ref=o.ref,r.return=o,o.child=r)}if(v=r.child,!gy(r,y)){var S=v.memoizedProps;if(u=u.compare,u=u!==null?u:xc,u(S,d)&&r.ref===o.ref)return ls(r,o,y)}return o.flags|=1,r=ns(v,d),r.ref=o.ref,r.return=o,o.child=r}function pI(r,o,u,d,y){if(r!==null){var v=r.memoizedProps;if(xc(v,d)&&r.ref===o.ref)if(fn=!1,o.pendingProps=d=v,gy(r,y))(r.flags&131072)!==0&&(fn=!0);else return o.lanes=r.lanes,ls(r,o,y)}return uy(r,o,u,d,y)}function gI(r,o,u,d){var y=d.children,v=r!==null?r.memoizedState:null;if(r===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((o.flags&128)!==0){if(v=v!==null?v.baseLanes|u:u,r!==null){for(d=o.child=r.child,y=0;d!==null;)y=y|d.lanes|d.childLanes,d=d.sibling;d=y&~v}else d=0,o.child=null;return yI(r,o,v,u,d)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},r!==null&&_h(o,v!==null?v.cachePool:null),v!==null?vT(o,v):Fg(),ET(o);else return d=o.lanes=536870912,yI(r,o,v!==null?v.baseLanes|u:u,u,d)}else v!==null?(_h(o,v.cachePool),vT(o,v),Ws(),o.memoizedState=null):(r!==null&&_h(o,null),Fg(),Ws());return kn(r,o,y,u),o.child}function Bc(r,o){return r!==null&&r.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function yI(r,o,u,d,y){var v=Mg();return v=v===null?null:{parent:cn._currentValue,pool:v},o.memoizedState={baseLanes:u,cachePool:v},r!==null&&_h(o,null),Fg(),ET(o),r!==null&&Al(r,o,d,!0),o.childLanes=y,null}function kh(r,o){return o=Lh({mode:o.mode,children:o.children},r.mode),o.ref=r.ref,r.child=o,o.return=r,o}function _I(r,o,u){return _a(o,r.child,null,u),r=kh(o,o.pendingProps),r.flags|=2,yi(o),o.memoizedState=null,r}function SD(r,o,u){var d=o.pendingProps,y=(o.flags&128)!==0;if(o.flags&=-129,r===null){if(rt){if(d.mode==="hidden")return r=kh(o,d),o.lanes=536870912,Bc(null,r);if(Bg(o),(r=Nt)?(r=Nw(r,Ui),r=r!==null&&r.data==="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:Gs!==null?{id:Rr,overflow:Nr}:null,retryLane:536870912,hydrationErrors:null},u=tT(r),u.return=o,o.child=u,Dn=o,Nt=null)):r=null,r===null)throw Hs(o);return o.lanes=536870912,null}return kh(o,d)}var v=r.memoizedState;if(v!==null){var S=v.dehydrated;if(Bg(o),y)if(o.flags&256)o.flags&=-257,o=_I(r,o,u);else if(o.memoizedState!==null)o.child=r.child,o.flags|=128,o=null;else throw Error(i(558));else if(fn||Al(r,o,u,!1),y=(u&r.childLanes)!==0,fn||y){if(d=xt,d!==null&&(S=lc(d,u),S!==0&&S!==v.retryLane))throw v.retryLane=S,ca(r,S),ai(d,r,S),ly;$h(),o=_I(r,o,u)}else r=v.treeContext,Nt=qi(S.nextSibling),Dn=o,rt=!0,zs=null,Ui=!1,r!==null&&rT(o,r),o=kh(o,d),o.flags|=4096;return o}return r=ns(r.child,{mode:d.mode,children:d.children}),r.ref=o.ref,o.child=r,r.return=o,r}function Vh(r,o){var u=o.ref;if(u===null)r!==null&&r.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(r===null||r.ref!==u)&&(o.flags|=4194816)}}function uy(r,o,u,d,y){return ma(o),u=zg(r,o,u,d,void 0,y),d=Hg(),r!==null&&!fn?($g(r,o,y),ls(r,o,y)):(rt&&d&&Sg(o),o.flags|=1,kn(r,o,u,y),o.child)}function vI(r,o,u,d,y,v){return ma(o),o.updateQueue=null,u=IT(o,d,u,y),TT(r),d=Hg(),r!==null&&!fn?($g(r,o,v),ls(r,o,v)):(rt&&d&&Sg(o),o.flags|=1,kn(r,o,u,v),o.child)}function EI(r,o,u,d,y){if(ma(o),o.stateNode===null){var v=Tl,S=u.contextType;typeof S=="object"&&S!==null&&(v=Mn(S)),v=new u(d,v),o.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=oy,o.stateNode=v,v._reactInternals=o,v=o.stateNode,v.props=d,v.state=o.memoizedState,v.refs={},Vg(o),S=u.contextType,v.context=typeof S=="object"&&S!==null?Mn(S):Tl,v.state=o.memoizedState,S=u.getDerivedStateFromProps,typeof S=="function"&&(sy(o,u,S,d),v.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(S=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),S!==v.state&&oy.enqueueReplaceState(v,v.state,null),Lc(o,d,v,y),Vc(),v.state=o.memoizedState),typeof v.componentDidMount=="function"&&(o.flags|=4194308),d=!0}else if(r===null){v=o.stateNode;var C=o.memoizedProps,U=Ea(u,C);v.props=U;var Y=v.context,ie=u.contextType;S=Tl,typeof ie=="object"&&ie!==null&&(S=Mn(ie));var oe=u.getDerivedStateFromProps;ie=typeof oe=="function"||typeof v.getSnapshotBeforeUpdate=="function",C=o.pendingProps!==C,ie||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(C||Y!==S)&&oI(o,v,d,S),js=!1;var W=o.memoizedState;v.state=W,Lc(o,d,v,y),Vc(),Y=o.memoizedState,C||W!==Y||js?(typeof oe=="function"&&(sy(o,u,oe,d),Y=o.memoizedState),(U=js||sI(o,u,U,d,W,Y,S))?(ie||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(o.flags|=4194308)):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=Y),v.props=d,v.state=Y,v.context=S,d=U):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{v=o.stateNode,Lg(r,o),S=o.memoizedProps,ie=Ea(u,S),v.props=ie,oe=o.pendingProps,W=v.context,Y=u.contextType,U=Tl,typeof Y=="object"&&Y!==null&&(U=Mn(Y)),C=u.getDerivedStateFromProps,(Y=typeof C=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==oe||W!==U)&&oI(o,v,d,U),js=!1,W=o.memoizedState,v.state=W,Lc(o,d,v,y),Vc();var ee=o.memoizedState;S!==oe||W!==ee||js||r!==null&&r.dependencies!==null&&gh(r.dependencies)?(typeof C=="function"&&(sy(o,u,C,d),ee=o.memoizedState),(ie=js||sI(o,u,ie,d,W,ee,U)||r!==null&&r.dependencies!==null&&gh(r.dependencies))?(Y||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(d,ee,U),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(d,ee,U)),typeof v.componentDidUpdate=="function"&&(o.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===r.memoizedProps&&W===r.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===r.memoizedProps&&W===r.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=ee),v.props=d,v.state=ee,v.context=U,d=ie):(typeof v.componentDidUpdate!="function"||S===r.memoizedProps&&W===r.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===r.memoizedProps&&W===r.memoizedState||(o.flags|=1024),d=!1)}return v=d,Vh(r,o),d=(o.flags&128)!==0,v||d?(v=o.stateNode,u=d&&typeof u.getDerivedStateFromError!="function"?null:v.render(),o.flags|=1,r!==null&&d?(o.child=_a(o,r.child,null,y),o.child=_a(o,null,u,y)):kn(r,o,u,y),o.memoizedState=v.state,r=o.child):r=ls(r,o,y),r}function TI(r,o,u,d){return fa(),o.flags|=256,kn(r,o,u,d),o.child}var cy={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function dy(r){return{baseLanes:r,cachePool:cT()}}function fy(r,o,u){return r=r!==null?r.childLanes&~u:0,o&&(r|=vi),r}function II(r,o,u){var d=o.pendingProps,y=!1,v=(o.flags&128)!==0,S;if((S=v)||(S=r!==null&&r.memoizedState===null?!1:(en.current&2)!==0),S&&(y=!0,o.flags&=-129),S=(o.flags&32)!==0,o.flags&=-33,r===null){if(rt){if(y?Js(o):Ws(),(r=Nt)?(r=Nw(r,Ui),r=r!==null&&r.data!=="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:Gs!==null?{id:Rr,overflow:Nr}:null,retryLane:536870912,hydrationErrors:null},u=tT(r),u.return=o,o.child=u,Dn=o,Nt=null)):r=null,r===null)throw Hs(o);return Yy(r)?o.lanes=32:o.lanes=536870912,null}var C=d.children;return d=d.fallback,y?(Ws(),y=o.mode,C=Lh({mode:"hidden",children:C},y),d=da(d,y,u,null),C.return=o,d.return=o,C.sibling=d,o.child=C,d=o.child,d.memoizedState=dy(u),d.childLanes=fy(r,S,u),o.memoizedState=cy,Bc(null,d)):(Js(o),hy(o,C))}var U=r.memoizedState;if(U!==null&&(C=U.dehydrated,C!==null)){if(v)o.flags&256?(Js(o),o.flags&=-257,o=my(r,o,u)):o.memoizedState!==null?(Ws(),o.child=r.child,o.flags|=128,o=null):(Ws(),C=d.fallback,y=o.mode,d=Lh({mode:"visible",children:d.children},y),C=da(C,y,u,null),C.flags|=2,d.return=o,C.return=o,d.sibling=C,o.child=d,_a(o,r.child,null,u),d=o.child,d.memoizedState=dy(u),d.childLanes=fy(r,S,u),o.memoizedState=cy,o=Bc(null,d));else if(Js(o),Yy(C)){if(S=C.nextSibling&&C.nextSibling.dataset,S)var Y=S.dgst;S=Y,d=Error(i(419)),d.stack="",d.digest=S,Rc({value:d,source:null,stack:null}),o=my(r,o,u)}else if(fn||Al(r,o,u,!1),S=(u&r.childLanes)!==0,fn||S){if(S=xt,S!==null&&(d=lc(S,u),d!==0&&d!==U.retryLane))throw U.retryLane=d,ca(r,d),ai(S,r,d),ly;Ky(C)||$h(),o=my(r,o,u)}else Ky(C)?(o.flags|=192,o.child=r.child,o=null):(r=U.treeContext,Nt=qi(C.nextSibling),Dn=o,rt=!0,zs=null,Ui=!1,r!==null&&rT(o,r),o=hy(o,d.children),o.flags|=4096);return o}return y?(Ws(),C=d.fallback,y=o.mode,U=r.child,Y=U.sibling,d=ns(U,{mode:"hidden",children:d.children}),d.subtreeFlags=U.subtreeFlags&65011712,Y!==null?C=ns(Y,C):(C=da(C,y,u,null),C.flags|=2),C.return=o,d.return=o,d.sibling=C,o.child=d,Bc(null,d),d=o.child,C=r.child.memoizedState,C===null?C=dy(u):(y=C.cachePool,y!==null?(U=cn._currentValue,y=y.parent!==U?{parent:U,pool:U}:y):y=cT(),C={baseLanes:C.baseLanes|u,cachePool:y}),d.memoizedState=C,d.childLanes=fy(r,S,u),o.memoizedState=cy,Bc(r.child,d)):(Js(o),u=r.child,r=u.sibling,u=ns(u,{mode:"visible",children:d.children}),u.return=o,u.sibling=null,r!==null&&(S=o.deletions,S===null?(o.deletions=[r],o.flags|=16):S.push(r)),o.child=u,o.memoizedState=null,u)}function hy(r,o){return o=Lh({mode:"visible",children:o},r.mode),o.return=r,r.child=o}function Lh(r,o){return r=pi(22,r,null,o),r.lanes=0,r}function my(r,o,u){return _a(o,r.child,null,u),r=hy(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function wI(r,o,u){r.lanes|=o;var d=r.alternate;d!==null&&(d.lanes|=o),Rg(r.return,o,u)}function py(r,o,u,d,y,v){var S=r.memoizedState;S===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:u,tailMode:y,treeForkCount:v}:(S.isBackwards=o,S.rendering=null,S.renderingStartTime=0,S.last=d,S.tail=u,S.tailMode=y,S.treeForkCount=v)}function SI(r,o,u){var d=o.pendingProps,y=d.revealOrder,v=d.tail;d=d.children;var S=en.current,C=(S&2)!==0;if(C?(S=S&1|2,o.flags|=128):S&=1,_e(en,S),kn(r,o,d,u),d=rt?bc:0,!C&&r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&wI(r,u,o);else if(r.tag===19)wI(r,u,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(y){case"forwards":for(u=o.child,y=null;u!==null;)r=u.alternate,r!==null&&Sh(r)===null&&(y=u),u=u.sibling;u=y,u===null?(y=o.child,o.child=null):(y=u.sibling,u.sibling=null),py(o,!1,y,u,v,d);break;case"backwards":case"unstable_legacy-backwards":for(u=null,y=o.child,o.child=null;y!==null;){if(r=y.alternate,r!==null&&Sh(r)===null){o.child=y;break}r=y.sibling,y.sibling=u,u=y,y=r}py(o,!0,u,null,v,d);break;case"together":py(o,!1,null,null,void 0,d);break;default:o.memoizedState=null}return o.child}function ls(r,o,u){if(r!==null&&(o.dependencies=r.dependencies),Zs|=o.lanes,(u&o.childLanes)===0)if(r!==null){if(Al(r,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(r!==null&&o.child!==r.child)throw Error(i(153));if(o.child!==null){for(r=o.child,u=ns(r,r.pendingProps),o.child=u,u.return=o;r.sibling!==null;)r=r.sibling,u=u.sibling=ns(r,r.pendingProps),u.return=o;u.sibling=null}return o.child}function gy(r,o){return(r.lanes&o)!==0?!0:(r=r.dependencies,!!(r!==null&&gh(r)))}function AD(r,o,u){switch(o.tag){case 3:kt(o,o.stateNode.containerInfo),$s(o,cn,r.memoizedState.cache),fa();break;case 27:case 5:bi(o);break;case 4:kt(o,o.stateNode.containerInfo);break;case 10:$s(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Bg(o),null;break;case 13:var d=o.memoizedState;if(d!==null)return d.dehydrated!==null?(Js(o),o.flags|=128,null):(u&o.child.childLanes)!==0?II(r,o,u):(Js(o),r=ls(r,o,u),r!==null?r.sibling:null);Js(o);break;case 19:var y=(r.flags&128)!==0;if(d=(u&o.childLanes)!==0,d||(Al(r,o,u,!1),d=(u&o.childLanes)!==0),y){if(d)return SI(r,o,u);o.flags|=128}if(y=o.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),_e(en,en.current),d)break;return null;case 22:return o.lanes=0,gI(r,o,u,o.pendingProps);case 24:$s(o,cn,r.memoizedState.cache)}return ls(r,o,u)}function AI(r,o,u){if(r!==null)if(r.memoizedProps!==o.pendingProps)fn=!0;else{if(!gy(r,u)&&(o.flags&128)===0)return fn=!1,AD(r,o,u);fn=(r.flags&131072)!==0}else fn=!1,rt&&(o.flags&1048576)!==0&&iT(o,bc,o.index);switch(o.lanes=0,o.tag){case 16:e:{var d=o.pendingProps;if(r=ga(o.elementType),o.type=r,typeof r=="function")Tg(r)?(d=Ea(r,d),o.tag=1,o=EI(null,o,r,d,u)):(o.tag=0,o=uy(null,o,r,d,u));else{if(r!=null){var y=r.$$typeof;if(y===se){o.tag=11,o=hI(null,o,r,d,u);break e}else if(y===N){o.tag=14,o=mI(null,o,r,d,u);break e}}throw o=De(r)||r,Error(i(306,o,""))}}return o;case 0:return uy(r,o,o.type,o.pendingProps,u);case 1:return d=o.type,y=Ea(d,o.pendingProps),EI(r,o,d,y,u);case 3:e:{if(kt(o,o.stateNode.containerInfo),r===null)throw Error(i(387));d=o.pendingProps;var v=o.memoizedState;y=v.element,Lg(r,o),Lc(o,d,null,u);var S=o.memoizedState;if(d=S.cache,$s(o,cn,d),d!==v.cache&&Ng(o,[cn],u,!0),Vc(),d=S.element,v.isDehydrated)if(v={element:d,isDehydrated:!1,cache:S.cache},o.updateQueue.baseState=v,o.memoizedState=v,o.flags&256){o=TI(r,o,d,u);break e}else if(d!==y){y=Vi(Error(i(424)),o),Rc(y),o=TI(r,o,d,u);break e}else{switch(r=o.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Nt=qi(r.firstChild),Dn=o,rt=!0,zs=null,Ui=!0,u=gT(o,null,d,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(fa(),d===y){o=ls(r,o,u);break e}kn(r,o,d,u)}o=o.child}return o;case 26:return Vh(r,o),r===null?(u=Lw(o.type,null,o.pendingProps,null))?o.memoizedState=u:rt||(u=o.type,r=o.pendingProps,d=Xh(qe.current).createElement(u),d[an]=o,d[Tn]=r,Vn(d,u,r),ln(d),o.stateNode=d):o.memoizedState=Lw(o.type,r.memoizedProps,o.pendingProps,r.memoizedState),null;case 27:return bi(o),r===null&&rt&&(d=o.stateNode=Mw(o.type,o.pendingProps,qe.current),Dn=o,Ui=!0,y=Nt,ro(o.type)?(Jy=y,Nt=qi(d.firstChild)):Nt=y),kn(r,o,o.pendingProps.children,u),Vh(r,o),r===null&&(o.flags|=4194304),o.child;case 5:return r===null&&rt&&((y=d=Nt)&&(d=t2(d,o.type,o.pendingProps,Ui),d!==null?(o.stateNode=d,Dn=o,Nt=qi(d.firstChild),Ui=!1,y=!0):y=!1),y||Hs(o)),bi(o),y=o.type,v=o.pendingProps,S=r!==null?r.memoizedProps:null,d=v.children,Hy(y,v)?d=null:S!==null&&Hy(y,S)&&(o.flags|=32),o.memoizedState!==null&&(y=zg(r,o,gD,null,null,u),nd._currentValue=y),Vh(r,o),kn(r,o,d,u),o.child;case 6:return r===null&&rt&&((r=u=Nt)&&(u=n2(u,o.pendingProps,Ui),u!==null?(o.stateNode=u,Dn=o,Nt=null,r=!0):r=!1),r||Hs(o)),null;case 13:return II(r,o,u);case 4:return kt(o,o.stateNode.containerInfo),d=o.pendingProps,r===null?o.child=_a(o,null,d,u):kn(r,o,d,u),o.child;case 11:return hI(r,o,o.type,o.pendingProps,u);case 7:return kn(r,o,o.pendingProps,u),o.child;case 8:return kn(r,o,o.pendingProps.children,u),o.child;case 12:return kn(r,o,o.pendingProps.children,u),o.child;case 10:return d=o.pendingProps,$s(o,o.type,d.value),kn(r,o,d.children,u),o.child;case 9:return y=o.type._context,d=o.pendingProps.children,ma(o),y=Mn(y),d=d(y),o.flags|=1,kn(r,o,d,u),o.child;case 14:return mI(r,o,o.type,o.pendingProps,u);case 15:return pI(r,o,o.type,o.pendingProps,u);case 19:return SI(r,o,u);case 31:return SD(r,o,u);case 22:return gI(r,o,u,o.pendingProps);case 24:return ma(o),d=Mn(cn),r===null?(y=Mg(),y===null&&(y=xt,v=Pg(),y.pooledCache=v,v.refCount++,v!==null&&(y.pooledCacheLanes|=u),y=v),o.memoizedState={parent:d,cache:y},Vg(o),$s(o,cn,y)):((r.lanes&u)!==0&&(Lg(r,o),Lc(o,null,null,u),Vc()),y=r.memoizedState,v=o.memoizedState,y.parent!==d?(y={parent:d,cache:d},o.memoizedState=y,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=y),$s(o,cn,d)):(d=v.cache,$s(o,cn,d),d!==y.cache&&Ng(o,[cn],u,!0))),kn(r,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function us(r){r.flags|=4}function yy(r,o,u,d,y){if((o=(r.mode&32)!==0)&&(o=!1),o){if(r.flags|=16777216,(y&335544128)===y)if(r.stateNode.complete)r.flags|=8192;else if(XI())r.flags|=8192;else throw ya=Eh,kg}else r.flags&=-16777217}function xI(r,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Bw(o))if(XI())r.flags|=8192;else throw ya=Eh,kg}function Oh(r,o){o!==null&&(r.flags|=4),r.flags&16384&&(o=r.tag!==22?zf():536870912,r.lanes|=o,Ol|=o)}function Gc(r,o){if(!rt)switch(r.tailMode){case"hidden":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r.tail=null:u.sibling=null;break;case"collapsed":u=r.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:d.sibling=null}}function Pt(r){var o=r.alternate!==null&&r.alternate.child===r.child,u=0,d=0;if(o)for(var y=r.child;y!==null;)u|=y.lanes|y.childLanes,d|=y.subtreeFlags&65011712,d|=y.flags&65011712,y.return=r,y=y.sibling;else for(y=r.child;y!==null;)u|=y.lanes|y.childLanes,d|=y.subtreeFlags,d|=y.flags,y.return=r,y=y.sibling;return r.subtreeFlags|=d,r.childLanes=u,o}function xD(r,o,u){var d=o.pendingProps;switch(Ag(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pt(o),null;case 1:return Pt(o),null;case 3:return u=o.stateNode,d=null,r!==null&&(d=r.memoizedState.cache),o.memoizedState.cache!==d&&(o.flags|=2048),ss(cn),pt(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(r===null||r.child===null)&&(Sl(o)?us(o):r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Cg())),Pt(o),null;case 26:var y=o.type,v=o.memoizedState;return r===null?(us(o),v!==null?(Pt(o),xI(o,v)):(Pt(o),yy(o,y,null,d,u))):v?v!==r.memoizedState?(us(o),Pt(o),xI(o,v)):(Pt(o),o.flags&=-16777217):(r=r.memoizedProps,r!==d&&us(o),Pt(o),yy(o,y,r,d,u)),null;case 27:if(ge(o),u=qe.current,y=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==d&&us(o);else{if(!d){if(o.stateNode===null)throw Error(i(166));return Pt(o),null}r=we.current,Sl(o)?sT(o):(r=Mw(y,d,u),o.stateNode=r,us(o))}return Pt(o),null;case 5:if(ge(o),y=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==d&&us(o);else{if(!d){if(o.stateNode===null)throw Error(i(166));return Pt(o),null}if(v=we.current,Sl(o))sT(o);else{var S=Xh(qe.current);switch(v){case 1:v=S.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:v=S.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":v=S.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":v=S.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":v=S.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof d.is=="string"?S.createElement("select",{is:d.is}):S.createElement("select"),d.multiple?v.multiple=!0:d.size&&(v.size=d.size);break;default:v=typeof d.is=="string"?S.createElement(y,{is:d.is}):S.createElement(y)}}v[an]=o,v[Tn]=d;e:for(S=o.child;S!==null;){if(S.tag===5||S.tag===6)v.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===o)break e;for(;S.sibling===null;){if(S.return===null||S.return===o)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}o.stateNode=v;e:switch(Vn(v,y,d),y){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&us(o)}}return Pt(o),yy(o,o.type,r===null?null:r.memoizedProps,o.pendingProps,u),null;case 6:if(r&&o.stateNode!=null)r.memoizedProps!==d&&us(o);else{if(typeof d!="string"&&o.stateNode===null)throw Error(i(166));if(r=qe.current,Sl(o)){if(r=o.stateNode,u=o.memoizedProps,d=null,y=Dn,y!==null)switch(y.tag){case 27:case 5:d=y.memoizedProps}r[an]=o,r=!!(r.nodeValue===u||d!==null&&d.suppressHydrationWarning===!0||Iw(r.nodeValue,u)),r||Hs(o,!0)}else r=Xh(r).createTextNode(d),r[an]=o,o.stateNode=r}return Pt(o),null;case 31:if(u=o.memoizedState,r===null||r.memoizedState!==null){if(d=Sl(o),u!==null){if(r===null){if(!d)throw Error(i(318));if(r=o.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[an]=o}else fa(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Pt(o),r=!1}else u=Cg(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=u),r=!0;if(!r)return o.flags&256?(yi(o),o):(yi(o),null);if((o.flags&128)!==0)throw Error(i(558))}return Pt(o),null;case 13:if(d=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(y=Sl(o),d!==null&&d.dehydrated!==null){if(r===null){if(!y)throw Error(i(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[an]=o}else fa(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Pt(o),y=!1}else y=Cg(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=y),y=!0;if(!y)return o.flags&256?(yi(o),o):(yi(o),null)}return yi(o),(o.flags&128)!==0?(o.lanes=u,o):(u=d!==null,r=r!==null&&r.memoizedState!==null,u&&(d=o.child,y=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(y=d.alternate.memoizedState.cachePool.pool),v=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(v=d.memoizedState.cachePool.pool),v!==y&&(d.flags|=2048)),u!==r&&u&&(o.child.flags|=8192),Oh(o,o.updateQueue),Pt(o),null);case 4:return pt(),r===null&&Fy(o.stateNode.containerInfo),Pt(o),null;case 10:return ss(o.type),Pt(o),null;case 19:if(te(en),d=o.memoizedState,d===null)return Pt(o),null;if(y=(o.flags&128)!==0,v=d.rendering,v===null)if(y)Gc(d,!1);else{if(Kt!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(v=Sh(r),v!==null){for(o.flags|=128,Gc(d,!1),r=v.updateQueue,o.updateQueue=r,Oh(o,r),o.subtreeFlags=0,r=u,u=o.child;u!==null;)eT(u,r),u=u.sibling;return _e(en,en.current&1|2),rt&&is(o,d.treeForkCount),o.child}r=r.sibling}d.tail!==null&&ue()>Gh&&(o.flags|=128,y=!0,Gc(d,!1),o.lanes=4194304)}else{if(!y)if(r=Sh(v),r!==null){if(o.flags|=128,y=!0,r=r.updateQueue,o.updateQueue=r,Oh(o,r),Gc(d,!0),d.tail===null&&d.tailMode==="hidden"&&!v.alternate&&!rt)return Pt(o),null}else 2*ue()-d.renderingStartTime>Gh&&u!==536870912&&(o.flags|=128,y=!0,Gc(d,!1),o.lanes=4194304);d.isBackwards?(v.sibling=o.child,o.child=v):(r=d.last,r!==null?r.sibling=v:o.child=v,d.last=v)}return d.tail!==null?(r=d.tail,d.rendering=r,d.tail=r.sibling,d.renderingStartTime=ue(),r.sibling=null,u=en.current,_e(en,y?u&1|2:u&1),rt&&is(o,d.treeForkCount),r):(Pt(o),null);case 22:case 23:return yi(o),qg(),d=o.memoizedState!==null,r!==null?r.memoizedState!==null!==d&&(o.flags|=8192):d&&(o.flags|=8192),d?(u&536870912)!==0&&(o.flags&128)===0&&(Pt(o),o.subtreeFlags&6&&(o.flags|=8192)):Pt(o),u=o.updateQueue,u!==null&&Oh(o,u.retryQueue),u=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==u&&(o.flags|=2048),r!==null&&te(pa),null;case 24:return u=null,r!==null&&(u=r.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),ss(cn),Pt(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function CD(r,o){switch(Ag(o),o.tag){case 1:return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return ss(cn),pt(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 26:case 27:case 5:return ge(o),null;case 31:if(o.memoizedState!==null){if(yi(o),o.alternate===null)throw Error(i(340));fa()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 13:if(yi(o),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(i(340));fa()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return te(en),null;case 4:return pt(),null;case 10:return ss(o.type),null;case 22:case 23:return yi(o),qg(),r!==null&&te(pa),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 24:return ss(cn),null;case 25:return null;default:return null}}function CI(r,o){switch(Ag(o),o.tag){case 3:ss(cn),pt();break;case 26:case 27:case 5:ge(o);break;case 4:pt();break;case 31:o.memoizedState!==null&&yi(o);break;case 13:yi(o);break;case 19:te(en);break;case 10:ss(o.type);break;case 22:case 23:yi(o),qg(),r!==null&&te(pa);break;case 24:ss(cn)}}function zc(r,o){try{var u=o.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var y=d.next;u=y;do{if((u.tag&r)===r){d=void 0;var v=u.create,S=u.inst;d=v(),S.destroy=d}u=u.next}while(u!==y)}}catch(C){_t(o,o.return,C)}}function Qs(r,o,u){try{var d=o.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var v=y.next;d=v;do{if((d.tag&r)===r){var S=d.inst,C=S.destroy;if(C!==void 0){S.destroy=void 0,y=o;var U=u,Y=C;try{Y()}catch(ie){_t(y,U,ie)}}}d=d.next}while(d!==v)}}catch(ie){_t(o,o.return,ie)}}function bI(r){var o=r.updateQueue;if(o!==null){var u=r.stateNode;try{_T(o,u)}catch(d){_t(r,r.return,d)}}}function RI(r,o,u){u.props=Ea(r.type,r.memoizedProps),u.state=r.memoizedState;try{u.componentWillUnmount()}catch(d){_t(r,o,d)}}function Hc(r,o){try{var u=r.ref;if(u!==null){switch(r.tag){case 26:case 27:case 5:var d=r.stateNode;break;case 30:d=r.stateNode;break;default:d=r.stateNode}typeof u=="function"?r.refCleanup=u(d):u.current=d}}catch(y){_t(r,o,y)}}function Pr(r,o){var u=r.ref,d=r.refCleanup;if(u!==null)if(typeof d=="function")try{d()}catch(y){_t(r,o,y)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(y){_t(r,o,y)}else u.current=null}function NI(r){var o=r.type,u=r.memoizedProps,d=r.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&d.focus();break e;case"img":u.src?d.src=u.src:u.srcSet&&(d.srcset=u.srcSet)}}catch(y){_t(r,r.return,y)}}function _y(r,o,u){try{var d=r.stateNode;JD(d,r.type,u,o),d[Tn]=o}catch(y){_t(r,r.return,y)}}function PI(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&ro(r.type)||r.tag===4}function vy(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||PI(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&ro(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Ey(r,o,u){var d=r.tag;if(d===5||d===6)r=r.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(r,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(r),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Wi));else if(d!==4&&(d===27&&ro(r.type)&&(u=r.stateNode,o=null),r=r.child,r!==null))for(Ey(r,o,u),r=r.sibling;r!==null;)Ey(r,o,u),r=r.sibling}function Uh(r,o,u){var d=r.tag;if(d===5||d===6)r=r.stateNode,o?u.insertBefore(r,o):u.appendChild(r);else if(d!==4&&(d===27&&ro(r.type)&&(u=r.stateNode),r=r.child,r!==null))for(Uh(r,o,u),r=r.sibling;r!==null;)Uh(r,o,u),r=r.sibling}function DI(r){var o=r.stateNode,u=r.memoizedProps;try{for(var d=r.type,y=o.attributes;y.length;)o.removeAttributeNode(y[0]);Vn(o,d,u),o[an]=r,o[Tn]=u}catch(v){_t(r,r.return,v)}}var cs=!1,hn=!1,Ty=!1,MI=typeof WeakSet=="function"?WeakSet:Set,wn=null;function bD(r,o){if(r=r.containerInfo,Gy=sm,r=$E(r),mg(r)){if("selectionStart"in r)var u={start:r.selectionStart,end:r.selectionEnd};else e:{u=(u=r.ownerDocument)&&u.defaultView||window;var d=u.getSelection&&u.getSelection();if(d&&d.rangeCount!==0){u=d.anchorNode;var y=d.anchorOffset,v=d.focusNode;d=d.focusOffset;try{u.nodeType,v.nodeType}catch{u=null;break e}var S=0,C=-1,U=-1,Y=0,ie=0,oe=r,W=null;t:for(;;){for(var ee;oe!==u||y!==0&&oe.nodeType!==3||(C=S+y),oe!==v||d!==0&&oe.nodeType!==3||(U=S+d),oe.nodeType===3&&(S+=oe.nodeValue.length),(ee=oe.firstChild)!==null;)W=oe,oe=ee;for(;;){if(oe===r)break t;if(W===u&&++Y===y&&(C=S),W===v&&++ie===d&&(U=S),(ee=oe.nextSibling)!==null)break;oe=W,W=oe.parentNode}oe=ee}u=C===-1||U===-1?null:{start:C,end:U}}else u=null}u=u||{start:0,end:0}}else u=null;for(zy={focusedElem:r,selectionRange:u},sm=!1,wn=o;wn!==null;)if(o=wn,r=o.child,(o.subtreeFlags&1028)!==0&&r!==null)r.return=o,wn=r;else for(;wn!==null;){switch(o=wn,v=o.alternate,r=o.flags,o.tag){case 0:if((r&4)!==0&&(r=o.updateQueue,r=r!==null?r.events:null,r!==null))for(u=0;u<r.length;u++)y=r[u],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&v!==null){r=void 0,u=o,y=v.memoizedProps,v=v.memoizedState,d=u.stateNode;try{var xe=Ea(u.type,y);r=d.getSnapshotBeforeUpdate(xe,v),d.__reactInternalSnapshotBeforeUpdate=r}catch(Ue){_t(u,u.return,Ue)}}break;case 3:if((r&1024)!==0){if(r=o.stateNode.containerInfo,u=r.nodeType,u===9)jy(r);else if(u===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":jy(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=o.sibling,r!==null){r.return=o.return,wn=r;break}wn=o.return}}function kI(r,o,u){var d=u.flags;switch(u.tag){case 0:case 11:case 15:fs(r,u),d&4&&zc(5,u);break;case 1:if(fs(r,u),d&4)if(r=u.stateNode,o===null)try{r.componentDidMount()}catch(S){_t(u,u.return,S)}else{var y=Ea(u.type,o.memoizedProps);o=o.memoizedState;try{r.componentDidUpdate(y,o,r.__reactInternalSnapshotBeforeUpdate)}catch(S){_t(u,u.return,S)}}d&64&&bI(u),d&512&&Hc(u,u.return);break;case 3:if(fs(r,u),d&64&&(r=u.updateQueue,r!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{_T(r,o)}catch(S){_t(u,u.return,S)}}break;case 27:o===null&&d&4&&DI(u);case 26:case 5:fs(r,u),o===null&&d&4&&NI(u),d&512&&Hc(u,u.return);break;case 12:fs(r,u);break;case 31:fs(r,u),d&4&&OI(r,u);break;case 13:fs(r,u),d&4&&UI(r,u),d&64&&(r=u.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(u=OD.bind(null,u),i2(r,u))));break;case 22:if(d=u.memoizedState!==null||cs,!d){o=o!==null&&o.memoizedState!==null||hn,y=cs;var v=hn;cs=d,(hn=o)&&!v?hs(r,u,(u.subtreeFlags&8772)!==0):fs(r,u),cs=y,hn=v}break;case 30:break;default:fs(r,u)}}function VI(r){var o=r.alternate;o!==null&&(r.alternate=null,VI(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&al(o)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Ot=null,ii=!1;function ds(r,o,u){for(u=u.child;u!==null;)LI(r,o,u),u=u.sibling}function LI(r,o,u){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(Nn,u)}catch{}switch(u.tag){case 26:hn||Pr(u,o),ds(r,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:hn||Pr(u,o);var d=Ot,y=ii;ro(u.type)&&(Ot=u.stateNode,ii=!1),ds(r,o,u),Zc(u.stateNode),Ot=d,ii=y;break;case 5:hn||Pr(u,o);case 6:if(d=Ot,y=ii,Ot=null,ds(r,o,u),Ot=d,ii=y,Ot!==null)if(ii)try{(Ot.nodeType===9?Ot.body:Ot.nodeName==="HTML"?Ot.ownerDocument.body:Ot).removeChild(u.stateNode)}catch(v){_t(u,o,v)}else try{Ot.removeChild(u.stateNode)}catch(v){_t(u,o,v)}break;case 18:Ot!==null&&(ii?(r=Ot,bw(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,u.stateNode),$l(r)):bw(Ot,u.stateNode));break;case 4:d=Ot,y=ii,Ot=u.stateNode.containerInfo,ii=!0,ds(r,o,u),Ot=d,ii=y;break;case 0:case 11:case 14:case 15:Qs(2,u,o),hn||Qs(4,u,o),ds(r,o,u);break;case 1:hn||(Pr(u,o),d=u.stateNode,typeof d.componentWillUnmount=="function"&&RI(u,o,d)),ds(r,o,u);break;case 21:ds(r,o,u);break;case 22:hn=(d=hn)||u.memoizedState!==null,ds(r,o,u),hn=d;break;default:ds(r,o,u)}}function OI(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{$l(r)}catch(u){_t(o,o.return,u)}}}function UI(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{$l(r)}catch(u){_t(o,o.return,u)}}function RD(r){switch(r.tag){case 31:case 13:case 19:var o=r.stateNode;return o===null&&(o=r.stateNode=new MI),o;case 22:return r=r.stateNode,o=r._retryCache,o===null&&(o=r._retryCache=new MI),o;default:throw Error(i(435,r.tag))}}function Fh(r,o){var u=RD(r);o.forEach(function(d){if(!u.has(d)){u.add(d);var y=UD.bind(null,r,d);d.then(y,y)}})}function ri(r,o){var u=o.deletions;if(u!==null)for(var d=0;d<u.length;d++){var y=u[d],v=r,S=o,C=S;e:for(;C!==null;){switch(C.tag){case 27:if(ro(C.type)){Ot=C.stateNode,ii=!1;break e}break;case 5:Ot=C.stateNode,ii=!1;break e;case 3:case 4:Ot=C.stateNode.containerInfo,ii=!0;break e}C=C.return}if(Ot===null)throw Error(i(160));LI(v,S,y),Ot=null,ii=!1,v=y.alternate,v!==null&&(v.return=null),y.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)FI(o,r),o=o.sibling}var nr=null;function FI(r,o){var u=r.alternate,d=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:ri(o,r),si(r),d&4&&(Qs(3,r,r.return),zc(3,r),Qs(5,r,r.return));break;case 1:ri(o,r),si(r),d&512&&(hn||u===null||Pr(u,u.return)),d&64&&cs&&(r=r.updateQueue,r!==null&&(d=r.callbacks,d!==null&&(u=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=u===null?d:u.concat(d))));break;case 26:var y=nr;if(ri(o,r),si(r),d&512&&(hn||u===null||Pr(u,u.return)),d&4){var v=u!==null?u.memoizedState:null;if(d=r.memoizedState,u===null)if(d===null)if(r.stateNode===null){e:{d=r.type,u=r.memoizedProps,y=y.ownerDocument||y;t:switch(d){case"title":v=y.getElementsByTagName("title")[0],(!v||v[yr]||v[an]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=y.createElement(d),y.head.insertBefore(v,y.querySelector("head > title"))),Vn(v,d,u),v[an]=r,ln(v),d=v;break e;case"link":var S=Fw("link","href",y).get(d+(u.href||""));if(S){for(var C=0;C<S.length;C++)if(v=S[C],v.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&v.getAttribute("rel")===(u.rel==null?null:u.rel)&&v.getAttribute("title")===(u.title==null?null:u.title)&&v.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){S.splice(C,1);break t}}v=y.createElement(d),Vn(v,d,u),y.head.appendChild(v);break;case"meta":if(S=Fw("meta","content",y).get(d+(u.content||""))){for(C=0;C<S.length;C++)if(v=S[C],v.getAttribute("content")===(u.content==null?null:""+u.content)&&v.getAttribute("name")===(u.name==null?null:u.name)&&v.getAttribute("property")===(u.property==null?null:u.property)&&v.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&v.getAttribute("charset")===(u.charSet==null?null:u.charSet)){S.splice(C,1);break t}}v=y.createElement(d),Vn(v,d,u),y.head.appendChild(v);break;default:throw Error(i(468,d))}v[an]=r,ln(v),d=v}r.stateNode=d}else qw(y,r.type,r.stateNode);else r.stateNode=Uw(y,d,r.memoizedProps);else v!==d?(v===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):v.count--,d===null?qw(y,r.type,r.stateNode):Uw(y,d,r.memoizedProps)):d===null&&r.stateNode!==null&&_y(r,r.memoizedProps,u.memoizedProps)}break;case 27:ri(o,r),si(r),d&512&&(hn||u===null||Pr(u,u.return)),u!==null&&d&4&&_y(r,r.memoizedProps,u.memoizedProps);break;case 5:if(ri(o,r),si(r),d&512&&(hn||u===null||Pr(u,u.return)),r.flags&32){y=r.stateNode;try{ni(y,"")}catch(xe){_t(r,r.return,xe)}}d&4&&r.stateNode!=null&&(y=r.memoizedProps,_y(r,y,u!==null?u.memoizedProps:y)),d&1024&&(Ty=!0);break;case 6:if(ri(o,r),si(r),d&4){if(r.stateNode===null)throw Error(i(162));d=r.memoizedProps,u=r.stateNode;try{u.nodeValue=d}catch(xe){_t(r,r.return,xe)}}break;case 3:if(tm=null,y=nr,nr=Zh(o.containerInfo),ri(o,r),nr=y,si(r),d&4&&u!==null&&u.memoizedState.isDehydrated)try{$l(o.containerInfo)}catch(xe){_t(r,r.return,xe)}Ty&&(Ty=!1,qI(r));break;case 4:d=nr,nr=Zh(r.stateNode.containerInfo),ri(o,r),si(r),nr=d;break;case 12:ri(o,r),si(r);break;case 31:ri(o,r),si(r),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,Fh(r,d)));break;case 13:ri(o,r),si(r),r.child.flags&8192&&r.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Bh=ue()),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,Fh(r,d)));break;case 22:y=r.memoizedState!==null;var U=u!==null&&u.memoizedState!==null,Y=cs,ie=hn;if(cs=Y||y,hn=ie||U,ri(o,r),hn=ie,cs=Y,si(r),d&8192)e:for(o=r.stateNode,o._visibility=y?o._visibility&-2:o._visibility|1,y&&(u===null||U||cs||hn||Ta(r)),u=null,o=r;;){if(o.tag===5||o.tag===26){if(u===null){U=u=o;try{if(v=U.stateNode,y)S=v.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{C=U.stateNode;var oe=U.memoizedProps.style,W=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;C.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(xe){_t(U,U.return,xe)}}}else if(o.tag===6){if(u===null){U=o;try{U.stateNode.nodeValue=y?"":U.memoizedProps}catch(xe){_t(U,U.return,xe)}}}else if(o.tag===18){if(u===null){U=o;try{var ee=U.stateNode;y?Rw(ee,!0):Rw(U.stateNode,!1)}catch(xe){_t(U,U.return,xe)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===r)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break e;for(;o.sibling===null;){if(o.return===null||o.return===r)break e;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}d&4&&(d=r.updateQueue,d!==null&&(u=d.retryQueue,u!==null&&(d.retryQueue=null,Fh(r,u))));break;case 19:ri(o,r),si(r),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,Fh(r,d)));break;case 30:break;case 21:break;default:ri(o,r),si(r)}}function si(r){var o=r.flags;if(o&2){try{for(var u,d=r.return;d!==null;){if(PI(d)){u=d;break}d=d.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var y=u.stateNode,v=vy(r);Uh(r,v,y);break;case 5:var S=u.stateNode;u.flags&32&&(ni(S,""),u.flags&=-33);var C=vy(r);Uh(r,C,S);break;case 3:case 4:var U=u.stateNode.containerInfo,Y=vy(r);Ey(r,Y,U);break;default:throw Error(i(161))}}catch(ie){_t(r,r.return,ie)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function qI(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var o=r;qI(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),r=r.sibling}}function fs(r,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)kI(r,o.alternate,o),o=o.sibling}function Ta(r){for(r=r.child;r!==null;){var o=r;switch(o.tag){case 0:case 11:case 14:case 15:Qs(4,o,o.return),Ta(o);break;case 1:Pr(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&RI(o,o.return,u),Ta(o);break;case 27:Zc(o.stateNode);case 26:case 5:Pr(o,o.return),Ta(o);break;case 22:o.memoizedState===null&&Ta(o);break;case 30:Ta(o);break;default:Ta(o)}r=r.sibling}}function hs(r,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var d=o.alternate,y=r,v=o,S=v.flags;switch(v.tag){case 0:case 11:case 15:hs(y,v,u),zc(4,v);break;case 1:if(hs(y,v,u),d=v,y=d.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(Y){_t(d,d.return,Y)}if(d=v,y=d.updateQueue,y!==null){var C=d.stateNode;try{var U=y.shared.hiddenCallbacks;if(U!==null)for(y.shared.hiddenCallbacks=null,y=0;y<U.length;y++)yT(U[y],C)}catch(Y){_t(d,d.return,Y)}}u&&S&64&&bI(v),Hc(v,v.return);break;case 27:DI(v);case 26:case 5:hs(y,v,u),u&&d===null&&S&4&&NI(v),Hc(v,v.return);break;case 12:hs(y,v,u);break;case 31:hs(y,v,u),u&&S&4&&OI(y,v);break;case 13:hs(y,v,u),u&&S&4&&UI(y,v);break;case 22:v.memoizedState===null&&hs(y,v,u),Hc(v,v.return);break;case 30:break;default:hs(y,v,u)}o=o.sibling}}function Iy(r,o){var u=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),r=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(r=o.memoizedState.cachePool.pool),r!==u&&(r!=null&&r.refCount++,u!=null&&Nc(u))}function wy(r,o){r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&Nc(r))}function ir(r,o,u,d){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)BI(r,o,u,d),o=o.sibling}function BI(r,o,u,d){var y=o.flags;switch(o.tag){case 0:case 11:case 15:ir(r,o,u,d),y&2048&&zc(9,o);break;case 1:ir(r,o,u,d);break;case 3:ir(r,o,u,d),y&2048&&(r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&Nc(r)));break;case 12:if(y&2048){ir(r,o,u,d),r=o.stateNode;try{var v=o.memoizedProps,S=v.id,C=v.onPostCommit;typeof C=="function"&&C(S,o.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(U){_t(o,o.return,U)}}else ir(r,o,u,d);break;case 31:ir(r,o,u,d);break;case 13:ir(r,o,u,d);break;case 23:break;case 22:v=o.stateNode,S=o.alternate,o.memoizedState!==null?v._visibility&2?ir(r,o,u,d):$c(r,o):v._visibility&2?ir(r,o,u,d):(v._visibility|=2,kl(r,o,u,d,(o.subtreeFlags&10256)!==0||!1)),y&2048&&Iy(S,o);break;case 24:ir(r,o,u,d),y&2048&&wy(o.alternate,o);break;default:ir(r,o,u,d)}}function kl(r,o,u,d,y){for(y=y&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var v=r,S=o,C=u,U=d,Y=S.flags;switch(S.tag){case 0:case 11:case 15:kl(v,S,C,U,y),zc(8,S);break;case 23:break;case 22:var ie=S.stateNode;S.memoizedState!==null?ie._visibility&2?kl(v,S,C,U,y):$c(v,S):(ie._visibility|=2,kl(v,S,C,U,y)),y&&Y&2048&&Iy(S.alternate,S);break;case 24:kl(v,S,C,U,y),y&&Y&2048&&wy(S.alternate,S);break;default:kl(v,S,C,U,y)}o=o.sibling}}function $c(r,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=r,d=o,y=d.flags;switch(d.tag){case 22:$c(u,d),y&2048&&Iy(d.alternate,d);break;case 24:$c(u,d),y&2048&&wy(d.alternate,d);break;default:$c(u,d)}o=o.sibling}}var jc=8192;function Vl(r,o,u){if(r.subtreeFlags&jc)for(r=r.child;r!==null;)GI(r,o,u),r=r.sibling}function GI(r,o,u){switch(r.tag){case 26:Vl(r,o,u),r.flags&jc&&r.memoizedState!==null&&p2(u,nr,r.memoizedState,r.memoizedProps);break;case 5:Vl(r,o,u);break;case 3:case 4:var d=nr;nr=Zh(r.stateNode.containerInfo),Vl(r,o,u),nr=d;break;case 22:r.memoizedState===null&&(d=r.alternate,d!==null&&d.memoizedState!==null?(d=jc,jc=16777216,Vl(r,o,u),jc=d):Vl(r,o,u));break;default:Vl(r,o,u)}}function zI(r){var o=r.alternate;if(o!==null&&(r=o.child,r!==null)){o.child=null;do o=r.sibling,r.sibling=null,r=o;while(r!==null)}}function Kc(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var d=o[u];wn=d,$I(d,r)}zI(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)HI(r),r=r.sibling}function HI(r){switch(r.tag){case 0:case 11:case 15:Kc(r),r.flags&2048&&Qs(9,r,r.return);break;case 3:Kc(r);break;case 12:Kc(r);break;case 22:var o=r.stateNode;r.memoizedState!==null&&o._visibility&2&&(r.return===null||r.return.tag!==13)?(o._visibility&=-3,qh(r)):Kc(r);break;default:Kc(r)}}function qh(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var d=o[u];wn=d,$I(d,r)}zI(r)}for(r=r.child;r!==null;){switch(o=r,o.tag){case 0:case 11:case 15:Qs(8,o,o.return),qh(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,qh(o));break;default:qh(o)}r=r.sibling}}function $I(r,o){for(;wn!==null;){var u=wn;switch(u.tag){case 0:case 11:case 15:Qs(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var d=u.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Nc(u.memoizedState.cache)}if(d=u.child,d!==null)d.return=u,wn=d;else e:for(u=r;wn!==null;){d=wn;var y=d.sibling,v=d.return;if(VI(d),d===u){wn=null;break e}if(y!==null){y.return=v,wn=y;break e}wn=v}}}var ND={getCacheForType:function(r){var o=Mn(cn),u=o.data.get(r);return u===void 0&&(u=r(),o.data.set(r,u)),u},cacheSignal:function(){return Mn(cn).controller.signal}},PD=typeof WeakMap=="function"?WeakMap:Map,ht=0,xt=null,Qe=null,tt=0,yt=0,_i=null,Xs=!1,Ll=!1,Sy=!1,ms=0,Kt=0,Zs=0,Ia=0,Ay=0,vi=0,Ol=0,Yc=null,oi=null,xy=!1,Bh=0,jI=0,Gh=1/0,zh=null,eo=null,yn=0,to=null,Ul=null,ps=0,Cy=0,by=null,KI=null,Jc=0,Ry=null;function Ei(){return(ht&2)!==0&&tt!==0?tt&-tt:Z.T!==null?Vy():Hf()}function YI(){if(vi===0)if((tt&536870912)===0||rt){var r=Jo;Jo<<=1,(Jo&3932160)===0&&(Jo=262144),vi=r}else vi=536870912;return r=gi.current,r!==null&&(r.flags|=32),vi}function ai(r,o,u){(r===xt&&(yt===2||yt===9)||r.cancelPendingCommit!==null)&&(Fl(r,0),no(r,tt,vi,!1)),Wo(r,u),((ht&2)===0||r!==xt)&&(r===xt&&((ht&2)===0&&(Ia|=u),Kt===4&&no(r,tt,vi,!1)),Dr(r))}function JI(r,o,u){if((ht&6)!==0)throw Error(i(327));var d=!u&&(o&127)===0&&(o&r.expiredLanes)===0||Ki(r,o),y=d?kD(r,o):Py(r,o,!0),v=d;do{if(y===0){Ll&&!d&&no(r,o,0,!1);break}else{if(u=r.current.alternate,v&&!DD(u)){y=Py(r,o,!1),v=!1;continue}if(y===2){if(v=o,r.errorRecoveryDisabledLanes&v)var S=0;else S=r.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){o=S;e:{var C=r;y=Yc;var U=C.current.memoizedState.isDehydrated;if(U&&(Fl(C,S).flags|=256),S=Py(C,S,!1),S!==2){if(Sy&&!U){C.errorRecoveryDisabledLanes|=v,Ia|=v,y=4;break e}v=oi,oi=y,v!==null&&(oi===null?oi=v:oi.push.apply(oi,v))}y=S}if(v=!1,y!==2)continue}}if(y===1){Fl(r,0),no(r,o,0,!0);break}e:{switch(d=r,v=y,v){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:no(d,o,vi,!Xs);break e;case 2:oi=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(y=Bh+300-ue(),10<y)){if(no(d,o,vi,!Xs),mr(d,0,!0)!==0)break e;ps=o,d.timeoutHandle=xw(WI.bind(null,d,u,oi,zh,xy,o,vi,Ia,Ol,Xs,v,"Throttled",-0,0),y);break e}WI(d,u,oi,zh,xy,o,vi,Ia,Ol,Xs,v,null,-0,0)}}break}while(!0);Dr(r)}function WI(r,o,u,d,y,v,S,C,U,Y,ie,oe,W,ee){if(r.timeoutHandle=-1,oe=o.subtreeFlags,oe&8192||(oe&16785408)===16785408){oe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Wi},GI(o,v,oe);var xe=(v&62914560)===v?Bh-ue():(v&4194048)===v?jI-ue():0;if(xe=g2(oe,xe),xe!==null){ps=v,r.cancelPendingCommit=xe(rw.bind(null,r,o,v,u,d,y,S,C,U,ie,oe,null,W,ee)),no(r,v,S,!Y);return}}rw(r,o,v,u,d,y,S,C,U)}function DD(r){for(var o=r;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var d=0;d<u.length;d++){var y=u[d],v=y.getSnapshot;y=y.value;try{if(!mi(v(),y))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function no(r,o,u,d){o&=~Ay,o&=~Ia,r.suspendedLanes|=o,r.pingedLanes&=~o,d&&(r.warmLanes|=o),d=r.expirationTimes;for(var y=o;0<y;){var v=31-Xt(y),S=1<<v;d[v]=-1,y&=~S}u!==0&&Qo(r,u,o)}function Hh(){return(ht&6)===0?(Wc(0),!1):!0}function Ny(){if(Qe!==null){if(yt===0)var r=Qe.return;else r=Qe,rs=ha=null,jg(r),Rl=null,Dc=0,r=Qe;for(;r!==null;)CI(r.alternate,r),r=r.return;Qe=null}}function Fl(r,o){var u=r.timeoutHandle;u!==-1&&(r.timeoutHandle=-1,XD(u)),u=r.cancelPendingCommit,u!==null&&(r.cancelPendingCommit=null,u()),ps=0,Ny(),xt=r,Qe=u=ns(r.current,null),tt=o,yt=0,_i=null,Xs=!1,Ll=Ki(r,o),Sy=!1,Ol=vi=Ay=Ia=Zs=Kt=0,oi=Yc=null,xy=!1,(o&8)!==0&&(o|=o&32);var d=r.entangledLanes;if(d!==0)for(r=r.entanglements,d&=o;0<d;){var y=31-Xt(d),v=1<<y;o|=r[y],d&=~v}return ms=o,dh(),u}function QI(r,o){He=null,Z.H=qc,o===bl||o===vh?(o=hT(),yt=3):o===kg?(o=hT(),yt=4):yt=o===ly?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,_i=o,Qe===null&&(Kt=1,Mh(r,Vi(o,r.current)))}function XI(){var r=gi.current;return r===null?!0:(tt&4194048)===tt?Fi===null:(tt&62914560)===tt||(tt&536870912)!==0?r===Fi:!1}function ZI(){var r=Z.H;return Z.H=qc,r===null?qc:r}function ew(){var r=Z.A;return Z.A=ND,r}function $h(){Kt=4,Xs||(tt&4194048)!==tt&&gi.current!==null||(Ll=!0),(Zs&134217727)===0&&(Ia&134217727)===0||xt===null||no(xt,tt,vi,!1)}function Py(r,o,u){var d=ht;ht|=2;var y=ZI(),v=ew();(xt!==r||tt!==o)&&(zh=null,Fl(r,o)),o=!1;var S=Kt;e:do try{if(yt!==0&&Qe!==null){var C=Qe,U=_i;switch(yt){case 8:Ny(),S=6;break e;case 3:case 2:case 9:case 6:gi.current===null&&(o=!0);var Y=yt;if(yt=0,_i=null,ql(r,C,U,Y),u&&Ll){S=0;break e}break;default:Y=yt,yt=0,_i=null,ql(r,C,U,Y)}}MD(),S=Kt;break}catch(ie){QI(r,ie)}while(!0);return o&&r.shellSuspendCounter++,rs=ha=null,ht=d,Z.H=y,Z.A=v,Qe===null&&(xt=null,tt=0,dh()),S}function MD(){for(;Qe!==null;)tw(Qe)}function kD(r,o){var u=ht;ht|=2;var d=ZI(),y=ew();xt!==r||tt!==o?(zh=null,Gh=ue()+500,Fl(r,o)):Ll=Ki(r,o);e:do try{if(yt!==0&&Qe!==null){o=Qe;var v=_i;t:switch(yt){case 1:yt=0,_i=null,ql(r,o,v,1);break;case 2:case 9:if(dT(v)){yt=0,_i=null,nw(o);break}o=function(){yt!==2&&yt!==9||xt!==r||(yt=7),Dr(r)},v.then(o,o);break e;case 3:yt=7;break e;case 4:yt=5;break e;case 7:dT(v)?(yt=0,_i=null,nw(o)):(yt=0,_i=null,ql(r,o,v,7));break;case 5:var S=null;switch(Qe.tag){case 26:S=Qe.memoizedState;case 5:case 27:var C=Qe;if(S?Bw(S):C.stateNode.complete){yt=0,_i=null;var U=C.sibling;if(U!==null)Qe=U;else{var Y=C.return;Y!==null?(Qe=Y,jh(Y)):Qe=null}break t}}yt=0,_i=null,ql(r,o,v,5);break;case 6:yt=0,_i=null,ql(r,o,v,6);break;case 8:Ny(),Kt=6;break e;default:throw Error(i(462))}}VD();break}catch(ie){QI(r,ie)}while(!0);return rs=ha=null,Z.H=d,Z.A=y,ht=u,Qe!==null?0:(xt=null,tt=0,dh(),Kt)}function VD(){for(;Qe!==null&&!Yo();)tw(Qe)}function tw(r){var o=AI(r.alternate,r,ms);r.memoizedProps=r.pendingProps,o===null?jh(r):Qe=o}function nw(r){var o=r,u=o.alternate;switch(o.tag){case 15:case 0:o=vI(u,o,o.pendingProps,o.type,void 0,tt);break;case 11:o=vI(u,o,o.pendingProps,o.type.render,o.ref,tt);break;case 5:jg(o);default:CI(u,o),o=Qe=eT(o,ms),o=AI(u,o,ms)}r.memoizedProps=r.pendingProps,o===null?jh(r):Qe=o}function ql(r,o,u,d){rs=ha=null,jg(o),Rl=null,Dc=0;var y=o.return;try{if(wD(r,y,o,u,tt)){Kt=1,Mh(r,Vi(u,r.current)),Qe=null;return}}catch(v){if(y!==null)throw Qe=y,v;Kt=1,Mh(r,Vi(u,r.current)),Qe=null;return}o.flags&32768?(rt||d===1?r=!0:Ll||(tt&536870912)!==0?r=!1:(Xs=r=!0,(d===2||d===9||d===3||d===6)&&(d=gi.current,d!==null&&d.tag===13&&(d.flags|=16384))),iw(o,r)):jh(o)}function jh(r){var o=r;do{if((o.flags&32768)!==0){iw(o,Xs);return}r=o.return;var u=xD(o.alternate,o,ms);if(u!==null){Qe=u;return}if(o=o.sibling,o!==null){Qe=o;return}Qe=o=r}while(o!==null);Kt===0&&(Kt=5)}function iw(r,o){do{var u=CD(r.alternate,r);if(u!==null){u.flags&=32767,Qe=u;return}if(u=r.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(r=r.sibling,r!==null)){Qe=r;return}Qe=r=u}while(r!==null);Kt=6,Qe=null}function rw(r,o,u,d,y,v,S,C,U){r.cancelPendingCommit=null;do Kh();while(yn!==0);if((ht&6)!==0)throw Error(i(327));if(o!==null){if(o===r.current)throw Error(i(177));if(v=o.lanes|o.childLanes,v|=vg,cg(r,u,v,S,C,U),r===xt&&(Qe=xt=null,tt=0),Ul=o,to=r,ps=u,Cy=v,by=y,KI=d,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,FD(ei,function(){return uw(),null})):(r.callbackNode=null,r.callbackPriority=0),d=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||d){d=Z.T,Z.T=null,y=ne.p,ne.p=2,S=ht,ht|=4;try{bD(r,o,u)}finally{ht=S,ne.p=y,Z.T=d}}yn=1,sw(),ow(),aw()}}function sw(){if(yn===1){yn=0;var r=to,o=Ul,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=Z.T,Z.T=null;var d=ne.p;ne.p=2;var y=ht;ht|=4;try{FI(o,r);var v=zy,S=$E(r.containerInfo),C=v.focusedElem,U=v.selectionRange;if(S!==C&&C&&C.ownerDocument&&HE(C.ownerDocument.documentElement,C)){if(U!==null&&mg(C)){var Y=U.start,ie=U.end;if(ie===void 0&&(ie=Y),"selectionStart"in C)C.selectionStart=Y,C.selectionEnd=Math.min(ie,C.value.length);else{var oe=C.ownerDocument||document,W=oe&&oe.defaultView||window;if(W.getSelection){var ee=W.getSelection(),xe=C.textContent.length,Ue=Math.min(U.start,xe),St=U.end===void 0?Ue:Math.min(U.end,xe);!ee.extend&&Ue>St&&(S=St,St=Ue,Ue=S);var H=zE(C,Ue),q=zE(C,St);if(H&&q&&(ee.rangeCount!==1||ee.anchorNode!==H.node||ee.anchorOffset!==H.offset||ee.focusNode!==q.node||ee.focusOffset!==q.offset)){var K=oe.createRange();K.setStart(H.node,H.offset),ee.removeAllRanges(),Ue>St?(ee.addRange(K),ee.extend(q.node,q.offset)):(K.setEnd(q.node,q.offset),ee.addRange(K))}}}}for(oe=[],ee=C;ee=ee.parentNode;)ee.nodeType===1&&oe.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<oe.length;C++){var re=oe[C];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}sm=!!Gy,zy=Gy=null}finally{ht=y,ne.p=d,Z.T=u}}r.current=o,yn=2}}function ow(){if(yn===2){yn=0;var r=to,o=Ul,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=Z.T,Z.T=null;var d=ne.p;ne.p=2;var y=ht;ht|=4;try{kI(r,o.alternate,o)}finally{ht=y,ne.p=d,Z.T=u}}yn=3}}function aw(){if(yn===4||yn===3){yn=0,dr();var r=to,o=Ul,u=ps,d=KI;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?yn=5:(yn=0,Ul=to=null,lw(r,r.pendingLanes));var y=r.pendingLanes;if(y===0&&(eo=null),Xr(u),o=o.stateNode,Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(Nn,o,void 0,(o.current.flags&128)===128)}catch{}if(d!==null){o=Z.T,y=ne.p,ne.p=2,Z.T=null;try{for(var v=r.onRecoverableError,S=0;S<d.length;S++){var C=d[S];v(C.value,{componentStack:C.stack})}}finally{Z.T=o,ne.p=y}}(ps&3)!==0&&Kh(),Dr(r),y=r.pendingLanes,(u&261930)!==0&&(y&42)!==0?r===Ry?Jc++:(Jc=0,Ry=r):Jc=0,Wc(0)}}function lw(r,o){(r.pooledCacheLanes&=o)===0&&(o=r.pooledCache,o!=null&&(r.pooledCache=null,Nc(o)))}function Kh(){return sw(),ow(),aw(),uw()}function uw(){if(yn!==5)return!1;var r=to,o=Cy;Cy=0;var u=Xr(ps),d=Z.T,y=ne.p;try{ne.p=32>u?32:u,Z.T=null,u=by,by=null;var v=to,S=ps;if(yn=0,Ul=to=null,ps=0,(ht&6)!==0)throw Error(i(331));var C=ht;if(ht|=4,HI(v.current),BI(v,v.current,S,u),ht=C,Wc(0,!1),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(Nn,v)}catch{}return!0}finally{ne.p=y,Z.T=d,lw(r,o)}}function cw(r,o,u){o=Vi(u,o),o=ay(r.stateNode,o,2),r=Ys(r,o,2),r!==null&&(Wo(r,2),Dr(r))}function _t(r,o,u){if(r.tag===3)cw(r,r,u);else for(;o!==null;){if(o.tag===3){cw(o,r,u);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(eo===null||!eo.has(d))){r=Vi(u,r),u=dI(2),d=Ys(o,u,2),d!==null&&(fI(u,d,o,r),Wo(d,2),Dr(d));break}}o=o.return}}function Dy(r,o,u){var d=r.pingCache;if(d===null){d=r.pingCache=new PD;var y=new Set;d.set(o,y)}else y=d.get(o),y===void 0&&(y=new Set,d.set(o,y));y.has(u)||(Sy=!0,y.add(u),r=LD.bind(null,r,o,u),o.then(r,r))}function LD(r,o,u){var d=r.pingCache;d!==null&&d.delete(o),r.pingedLanes|=r.suspendedLanes&u,r.warmLanes&=~u,xt===r&&(tt&u)===u&&(Kt===4||Kt===3&&(tt&62914560)===tt&&300>ue()-Bh?(ht&2)===0&&Fl(r,0):Ay|=u,Ol===tt&&(Ol=0)),Dr(r)}function dw(r,o){o===0&&(o=zf()),r=ca(r,o),r!==null&&(Wo(r,o),Dr(r))}function OD(r){var o=r.memoizedState,u=0;o!==null&&(u=o.retryLane),dw(r,u)}function UD(r,o){var u=0;switch(r.tag){case 31:case 13:var d=r.stateNode,y=r.memoizedState;y!==null&&(u=y.retryLane);break;case 19:d=r.stateNode;break;case 22:d=r.stateNode._retryCache;break;default:throw Error(i(314))}d!==null&&d.delete(o),dw(r,u)}function FD(r,o){return Vt(r,o)}var Yh=null,Bl=null,My=!1,Jh=!1,ky=!1,io=0;function Dr(r){r!==Bl&&r.next===null&&(Bl===null?Yh=Bl=r:Bl=Bl.next=r),Jh=!0,My||(My=!0,BD())}function Wc(r,o){if(!ky&&Jh){ky=!0;do for(var u=!1,d=Yh;d!==null;){if(r!==0){var y=d.pendingLanes;if(y===0)var v=0;else{var S=d.suspendedLanes,C=d.pingedLanes;v=(1<<31-Xt(42|r)+1)-1,v&=y&~(S&~C),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(u=!0,pw(d,v))}else v=tt,v=mr(d,d===xt?v:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(v&3)===0||Ki(d,v)||(u=!0,pw(d,v));d=d.next}while(u);ky=!1}}function qD(){fw()}function fw(){Jh=My=!1;var r=0;io!==0&&QD()&&(r=io);for(var o=ue(),u=null,d=Yh;d!==null;){var y=d.next,v=hw(d,o);v===0?(d.next=null,u===null?Yh=y:u.next=y,y===null&&(Bl=u)):(u=d,(r!==0||(v&3)!==0)&&(Jh=!0)),d=y}yn!==0&&yn!==5||Wc(r),io!==0&&(io=0)}function hw(r,o){for(var u=r.suspendedLanes,d=r.pingedLanes,y=r.expirationTimes,v=r.pendingLanes&-62914561;0<v;){var S=31-Xt(v),C=1<<S,U=y[S];U===-1?((C&u)===0||(C&d)!==0)&&(y[S]=ug(C,o)):U<=o&&(r.expiredLanes|=C),v&=~C}if(o=xt,u=tt,u=mr(r,r===o?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),d=r.callbackNode,u===0||r===o&&(yt===2||yt===9)||r.cancelPendingCommit!==null)return d!==null&&d!==null&&bn(d),r.callbackNode=null,r.callbackPriority=0;if((u&3)===0||Ki(r,u)){if(o=u&-u,o===r.callbackPriority)return o;switch(d!==null&&bn(d),Xr(u)){case 2:case 8:u=at;break;case 32:u=ei;break;case 268435456:u=rl;break;default:u=ei}return d=mw.bind(null,r),u=Vt(u,d),r.callbackPriority=o,r.callbackNode=u,o}return d!==null&&d!==null&&bn(d),r.callbackPriority=2,r.callbackNode=null,2}function mw(r,o){if(yn!==0&&yn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var u=r.callbackNode;if(Kh()&&r.callbackNode!==u)return null;var d=tt;return d=mr(r,r===xt?d:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),d===0?null:(JI(r,d,o),hw(r,ue()),r.callbackNode!=null&&r.callbackNode===u?mw.bind(null,r):null)}function pw(r,o){if(Kh())return null;JI(r,o,!0)}function BD(){ZD(function(){(ht&6)!==0?Vt(Ve,qD):fw()})}function Vy(){if(io===0){var r=xl;r===0&&(r=fr,fr<<=1,(fr&261888)===0&&(fr=256)),io=r}return io}function gw(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:dl(""+r)}function yw(r,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,r.id&&u.setAttribute("form",r.id),o.parentNode.insertBefore(u,o),r=new FormData(r),u.parentNode.removeChild(u),r}function GD(r,o,u,d,y){if(o==="submit"&&u&&u.stateNode===y){var v=gw((y[Tn]||null).action),S=d.submitter;S&&(o=(o=S[Tn]||null)?gw(o.formAction):S.getAttribute("formAction"),o!==null&&(v=o,S=null));var C=new Ar("action","action",null,d,y);r.push({event:C,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(io!==0){var U=S?yw(y,S):new FormData(y);ty(u,{pending:!0,data:U,method:y.method,action:v},null,U)}}else typeof v=="function"&&(C.preventDefault(),U=S?yw(y,S):new FormData(y),ty(u,{pending:!0,data:U,method:y.method,action:v},v,U))},currentTarget:y}]})}}for(var Ly=0;Ly<_g.length;Ly++){var Oy=_g[Ly],zD=Oy.toLowerCase(),HD=Oy[0].toUpperCase()+Oy.slice(1);tr(zD,"on"+HD)}tr(YE,"onAnimationEnd"),tr(JE,"onAnimationIteration"),tr(WE,"onAnimationStart"),tr("dblclick","onDoubleClick"),tr("focusin","onFocus"),tr("focusout","onBlur"),tr(oD,"onTransitionRun"),tr(aD,"onTransitionStart"),tr(lD,"onTransitionCancel"),tr(QE,"onTransitionEnd"),Tr("onMouseEnter",["mouseout","mouseover"]),Tr("onMouseLeave",["mouseout","mouseover"]),Tr("onPointerEnter",["pointerout","pointerover"]),Tr("onPointerLeave",["pointerout","pointerover"]),Er("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Er("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Er("onBeforeInput",["compositionend","keypress","textInput","paste"]),Er("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Er("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Er("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$D=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Qc));function _w(r,o){o=(o&4)!==0;for(var u=0;u<r.length;u++){var d=r[u],y=d.event;d=d.listeners;e:{var v=void 0;if(o)for(var S=d.length-1;0<=S;S--){var C=d[S],U=C.instance,Y=C.currentTarget;if(C=C.listener,U!==v&&y.isPropagationStopped())break e;v=C,y.currentTarget=Y;try{v(y)}catch(ie){ch(ie)}y.currentTarget=null,v=U}else for(S=0;S<d.length;S++){if(C=d[S],U=C.instance,Y=C.currentTarget,C=C.listener,U!==v&&y.isPropagationStopped())break e;v=C,y.currentTarget=Y;try{v(y)}catch(ie){ch(ie)}y.currentTarget=null,v=U}}}}function Xe(r,o){var u=o[ol];u===void 0&&(u=o[ol]=new Set);var d=r+"__bubble";u.has(d)||(vw(o,r,2,!1),u.add(d))}function Uy(r,o,u){var d=0;o&&(d|=4),vw(u,r,d,o)}var Wh="_reactListening"+Math.random().toString(36).slice(2);function Fy(r){if(!r[Wh]){r[Wh]=!0,uc.forEach(function(u){u!=="selectionchange"&&($D.has(u)||Uy(u,!1,r),Uy(u,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[Wh]||(o[Wh]=!0,Uy("selectionchange",!1,o))}}function vw(r,o,u,d){switch(Yw(o)){case 2:var y=v2;break;case 8:y=E2;break;default:y=e_}u=y.bind(null,o,u,r),y=void 0,!na||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(y=!0),d?y!==void 0?r.addEventListener(o,u,{capture:!0,passive:y}):r.addEventListener(o,u,!0):y!==void 0?r.addEventListener(o,u,{passive:y}):r.addEventListener(o,u,!1)}function qy(r,o,u,d,y){var v=d;if((o&1)===0&&(o&2)===0&&d!==null)e:for(;;){if(d===null)return;var S=d.tag;if(S===3||S===4){var C=d.stateNode.containerInfo;if(C===y)break;if(S===4)for(S=d.return;S!==null;){var U=S.tag;if((U===3||U===4)&&S.stateNode.containerInfo===y)return;S=S.return}for(;C!==null;){if(S=_r(C),S===null)return;if(U=S.tag,U===5||U===6||U===26||U===27){d=v=S;continue e}C=C.parentNode}}d=d.return}Us(function(){var Y=v,ie=Pi(u),oe=[];e:{var W=XE.get(r);if(W!==void 0){var ee=Ar,xe=r;switch(r){case"keypress":if(ra(u)===0)break e;case"keydown":case"keyup":ee=ah;break;case"focusin":xe="focus",ee=oa;break;case"focusout":xe="blur",ee=oa;break;case"beforeblur":case"afterblur":ee=oa;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=Ic;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=Xf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=w;break;case YE:case JE:case WE:ee=eh;break;case QE:ee=b;break;case"scroll":case"scrollend":ee=Tc;break;case"wheel":ee=X;break;case"copy":case"cut":case"paste":ee=th;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=ts;break;case"toggle":case"beforetoggle":ee=ze}var Ue=(o&4)!==0,St=!Ue&&(r==="scroll"||r==="scrollend"),H=Ue?W!==null?W+"Capture":null:W;Ue=[];for(var q=Y,K;q!==null;){var re=q;if(K=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||K===null||H===null||(re=Qi(q,H),re!=null&&Ue.push(Xc(q,re,K))),St)break;q=q.return}0<Ue.length&&(W=new ee(W,xe,null,u,ie),oe.push({event:W,listeners:Ue}))}}if((o&7)===0){e:{if(W=r==="mouseover"||r==="pointerover",ee=r==="mouseout"||r==="pointerout",W&&u!==_c&&(xe=u.relatedTarget||u.fromElement)&&(_r(xe)||xe[gr]))break e;if((ee||W)&&(W=ie.window===ie?ie:(W=ie.ownerDocument)?W.defaultView||W.parentWindow:window,ee?(xe=u.relatedTarget||u.toElement,ee=Y,xe=xe?_r(xe):null,xe!==null&&(St=a(xe),Ue=xe.tag,xe!==St||Ue!==5&&Ue!==27&&Ue!==6)&&(xe=null)):(ee=null,xe=Y),ee!==xe)){if(Ue=Ic,re="onMouseLeave",H="onMouseEnter",q="mouse",(r==="pointerout"||r==="pointerover")&&(Ue=ts,re="onPointerLeave",H="onPointerEnter",q="pointer"),St=ee==null?W:fi(ee),K=xe==null?W:fi(xe),W=new Ue(re,q+"leave",ee,u,ie),W.target=St,W.relatedTarget=K,re=null,_r(ie)===Y&&(Ue=new Ue(H,q+"enter",xe,u,ie),Ue.target=K,Ue.relatedTarget=St,re=Ue),St=re,ee&&xe)t:{for(Ue=jD,H=ee,q=xe,K=0,re=H;re;re=Ue(re))K++;re=0;for(var Me=q;Me;Me=Ue(Me))re++;for(;0<K-re;)H=Ue(H),K--;for(;0<re-K;)q=Ue(q),re--;for(;K--;){if(H===q||q!==null&&H===q.alternate){Ue=H;break t}H=Ue(H),q=Ue(q)}Ue=null}else Ue=null;ee!==null&&Ew(oe,W,ee,Ue,!1),xe!==null&&St!==null&&Ew(oe,St,xe,Ue,!0)}}e:{if(W=Y?fi(Y):window,ee=W.nodeName&&W.nodeName.toLowerCase(),ee==="select"||ee==="input"&&W.type==="file")var lt=OE;else if(VE(W))if(UE)lt=iD;else{lt=tD;var Re=eD}else ee=W.nodeName,!ee||ee.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?Y&&cl(Y.elementType)&&(lt=OE):lt=nD;if(lt&&(lt=lt(r,Y))){LE(oe,lt,u,ie);break e}Re&&Re(r,W,Y),r==="focusout"&&Y&&W.type==="number"&&Y.memoizedProps.value!=null&&pc(W,"number",W.value)}switch(Re=Y?fi(Y):window,r){case"focusin":(VE(Re)||Re.contentEditable==="true")&&(_l=Re,pg=Y,Cc=null);break;case"focusout":Cc=pg=_l=null;break;case"mousedown":gg=!0;break;case"contextmenu":case"mouseup":case"dragend":gg=!1,jE(oe,u,ie);break;case"selectionchange":if(sD)break;case"keydown":case"keyup":jE(oe,u,ie)}var Je;if(ft)e:{switch(r){case"compositionstart":var nt="onCompositionStart";break e;case"compositionend":nt="onCompositionEnd";break e;case"compositionupdate":nt="onCompositionUpdate";break e}nt=void 0}else yl?aa(r,u)&&(nt="onCompositionEnd"):r==="keydown"&&u.keyCode===229&&(nt="onCompositionStart");nt&&(br&&u.locale!=="ko"&&(yl||nt!=="onCompositionStart"?nt==="onCompositionEnd"&&yl&&(Je=Ec()):(Sr=ie,vc="value"in Sr?Sr.value:Sr.textContent,yl=!0)),Re=Qh(Y,nt),0<Re.length&&(nt=new Cr(nt,r,null,u,ie),oe.push({event:nt,listeners:Re}),Je?nt.data=Je:(Je=gl(u),Je!==null&&(nt.data=Je)))),(Je=Mi?WP(r,u):QP(r,u))&&(nt=Qh(Y,"onBeforeInput"),0<nt.length&&(Re=new Cr("onBeforeInput","beforeinput",null,u,ie),oe.push({event:Re,listeners:nt}),Re.data=Je)),GD(oe,r,Y,u,ie)}_w(oe,o)})}function Xc(r,o,u){return{instance:r,listener:o,currentTarget:u}}function Qh(r,o){for(var u=o+"Capture",d=[];r!==null;){var y=r,v=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||v===null||(y=Qi(r,u),y!=null&&d.unshift(Xc(r,y,v)),y=Qi(r,o),y!=null&&d.push(Xc(r,y,v))),r.tag===3)return d;r=r.return}return[]}function jD(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function Ew(r,o,u,d,y){for(var v=o._reactName,S=[];u!==null&&u!==d;){var C=u,U=C.alternate,Y=C.stateNode;if(C=C.tag,U!==null&&U===d)break;C!==5&&C!==26&&C!==27||Y===null||(U=Y,y?(Y=Qi(u,v),Y!=null&&S.unshift(Xc(u,Y,U))):y||(Y=Qi(u,v),Y!=null&&S.push(Xc(u,Y,U)))),u=u.return}S.length!==0&&r.push({event:o,listeners:S})}var KD=/\r\n?/g,YD=/\u0000|\uFFFD/g;function Tw(r){return(typeof r=="string"?r:""+r).replace(KD,`
`).replace(YD,"")}function Iw(r,o){return o=Tw(o),Tw(r)===o}function wt(r,o,u,d,y,v){switch(u){case"children":typeof d=="string"?o==="body"||o==="textarea"&&d===""||ni(r,d):(typeof d=="number"||typeof d=="bigint")&&o!=="body"&&ni(r,""+d);break;case"className":hi(r,"class",d);break;case"tabIndex":hi(r,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":hi(r,u,d);break;case"style":yc(r,d,v);break;case"data":if(o!=="object"){hi(r,"data",d);break}case"src":case"href":if(d===""&&(o!=="a"||u!=="href")){r.removeAttribute(u);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(u);break}d=dl(""+d),r.setAttribute(u,d);break;case"action":case"formAction":if(typeof d=="function"){r.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(u==="formAction"?(o!=="input"&&wt(r,o,"name",y.name,y,null),wt(r,o,"formEncType",y.formEncType,y,null),wt(r,o,"formMethod",y.formMethod,y,null),wt(r,o,"formTarget",y.formTarget,y,null)):(wt(r,o,"encType",y.encType,y,null),wt(r,o,"method",y.method,y,null),wt(r,o,"target",y.target,y,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(u);break}d=dl(""+d),r.setAttribute(u,d);break;case"onClick":d!=null&&(r.onclick=Wi);break;case"onScroll":d!=null&&Xe("scroll",r);break;case"onScrollEnd":d!=null&&Xe("scrollend",r);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(u=d.__html,u!=null){if(y.children!=null)throw Error(i(60));r.innerHTML=u}}break;case"multiple":r.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":r.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){r.removeAttribute("xlink:href");break}u=dl(""+d),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(u,""+d):r.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(u,""):r.removeAttribute(u);break;case"capture":case"download":d===!0?r.setAttribute(u,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(u,d):r.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?r.setAttribute(u,d):r.removeAttribute(u);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?r.removeAttribute(u):r.setAttribute(u,d);break;case"popover":Xe("beforetoggle",r),Xe("toggle",r),ll(r,"popover",d);break;case"xlinkActuate":un(r,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":un(r,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":un(r,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":un(r,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":un(r,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":un(r,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":un(r,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":un(r,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":un(r,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":ll(r,"is",d);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=Qf.get(u)||u,ll(r,u,d))}}function By(r,o,u,d,y,v){switch(u){case"style":yc(r,d,v);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(u=d.__html,u!=null){if(y.children!=null)throw Error(i(60));r.innerHTML=u}}break;case"children":typeof d=="string"?ni(r,d):(typeof d=="number"||typeof d=="bigint")&&ni(r,""+d);break;case"onScroll":d!=null&&Xe("scroll",r);break;case"onScrollEnd":d!=null&&Xe("scrollend",r);break;case"onClick":d!=null&&(r.onclick=Wi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!cc.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(y=u.endsWith("Capture"),o=u.slice(2,y?u.length-7:void 0),v=r[Tn]||null,v=v!=null?v[u]:null,typeof v=="function"&&r.removeEventListener(o,v,y),typeof d=="function")){typeof v!="function"&&v!==null&&(u in r?r[u]=null:r.hasAttribute(u)&&r.removeAttribute(u)),r.addEventListener(o,d,y);break e}u in r?r[u]=d:d===!0?r.setAttribute(u,""):ll(r,u,d)}}}function Vn(r,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xe("error",r),Xe("load",r);var d=!1,y=!1,v;for(v in u)if(u.hasOwnProperty(v)){var S=u[v];if(S!=null)switch(v){case"src":d=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:wt(r,o,v,S,u,null)}}y&&wt(r,o,"srcSet",u.srcSet,u,null),d&&wt(r,o,"src",u.src,u,null);return;case"input":Xe("invalid",r);var C=v=S=y=null,U=null,Y=null;for(d in u)if(u.hasOwnProperty(d)){var ie=u[d];if(ie!=null)switch(d){case"name":y=ie;break;case"type":S=ie;break;case"checked":U=ie;break;case"defaultChecked":Y=ie;break;case"value":v=ie;break;case"defaultValue":C=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(137,o));break;default:wt(r,o,d,ie,u,null)}}Yf(r,v,C,U,Y,S,y,!1);return;case"select":Xe("invalid",r),d=S=v=null;for(y in u)if(u.hasOwnProperty(y)&&(C=u[y],C!=null))switch(y){case"value":v=C;break;case"defaultValue":S=C;break;case"multiple":d=C;default:wt(r,o,y,C,u,null)}o=v,u=S,r.multiple=!!d,o!=null?ks(r,!!d,o,!1):u!=null&&ks(r,!!d,u,!0);return;case"textarea":Xe("invalid",r),v=y=d=null;for(S in u)if(u.hasOwnProperty(S)&&(C=u[S],C!=null))switch(S){case"value":d=C;break;case"defaultValue":y=C;break;case"children":v=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(i(91));break;default:wt(r,o,S,C,u,null)}Vs(r,d,y,v);return;case"option":for(U in u)if(u.hasOwnProperty(U)&&(d=u[U],d!=null))switch(U){case"selected":r.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:wt(r,o,U,d,u,null)}return;case"dialog":Xe("beforetoggle",r),Xe("toggle",r),Xe("cancel",r),Xe("close",r);break;case"iframe":case"object":Xe("load",r);break;case"video":case"audio":for(d=0;d<Qc.length;d++)Xe(Qc[d],r);break;case"image":Xe("error",r),Xe("load",r);break;case"details":Xe("toggle",r);break;case"embed":case"source":case"link":Xe("error",r),Xe("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in u)if(u.hasOwnProperty(Y)&&(d=u[Y],d!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:wt(r,o,Y,d,u,null)}return;default:if(cl(o)){for(ie in u)u.hasOwnProperty(ie)&&(d=u[ie],d!==void 0&&By(r,o,ie,d,u,void 0));return}}for(C in u)u.hasOwnProperty(C)&&(d=u[C],d!=null&&wt(r,o,C,d,u,null))}function JD(r,o,u,d){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,v=null,S=null,C=null,U=null,Y=null,ie=null;for(ee in u){var oe=u[ee];if(u.hasOwnProperty(ee)&&oe!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":U=oe;default:d.hasOwnProperty(ee)||wt(r,o,ee,null,d,oe)}}for(var W in d){var ee=d[W];if(oe=u[W],d.hasOwnProperty(W)&&(ee!=null||oe!=null))switch(W){case"type":v=ee;break;case"name":y=ee;break;case"checked":Y=ee;break;case"defaultChecked":ie=ee;break;case"value":S=ee;break;case"defaultValue":C=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,o));break;default:ee!==oe&&wt(r,o,W,ee,d,oe)}}ul(r,S,C,U,Y,ie,v,y);return;case"select":ee=S=C=W=null;for(v in u)if(U=u[v],u.hasOwnProperty(v)&&U!=null)switch(v){case"value":break;case"multiple":ee=U;default:d.hasOwnProperty(v)||wt(r,o,v,null,d,U)}for(y in d)if(v=d[y],U=u[y],d.hasOwnProperty(y)&&(v!=null||U!=null))switch(y){case"value":W=v;break;case"defaultValue":C=v;break;case"multiple":S=v;default:v!==U&&wt(r,o,y,v,d,U)}o=C,u=S,d=ee,W!=null?ks(r,!!u,W,!1):!!d!=!!u&&(o!=null?ks(r,!!u,o,!0):ks(r,!!u,u?[]:"",!1));return;case"textarea":ee=W=null;for(C in u)if(y=u[C],u.hasOwnProperty(C)&&y!=null&&!d.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:wt(r,o,C,null,d,y)}for(S in d)if(y=d[S],v=u[S],d.hasOwnProperty(S)&&(y!=null||v!=null))switch(S){case"value":W=y;break;case"defaultValue":ee=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==v&&wt(r,o,S,y,d,v)}Jf(r,W,ee);return;case"option":for(var xe in u)if(W=u[xe],u.hasOwnProperty(xe)&&W!=null&&!d.hasOwnProperty(xe))switch(xe){case"selected":r.selected=!1;break;default:wt(r,o,xe,null,d,W)}for(U in d)if(W=d[U],ee=u[U],d.hasOwnProperty(U)&&W!==ee&&(W!=null||ee!=null))switch(U){case"selected":r.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:wt(r,o,U,W,d,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ue in u)W=u[Ue],u.hasOwnProperty(Ue)&&W!=null&&!d.hasOwnProperty(Ue)&&wt(r,o,Ue,null,d,W);for(Y in d)if(W=d[Y],ee=u[Y],d.hasOwnProperty(Y)&&W!==ee&&(W!=null||ee!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,o));break;default:wt(r,o,Y,W,d,ee)}return;default:if(cl(o)){for(var St in u)W=u[St],u.hasOwnProperty(St)&&W!==void 0&&!d.hasOwnProperty(St)&&By(r,o,St,void 0,d,W);for(ie in d)W=d[ie],ee=u[ie],!d.hasOwnProperty(ie)||W===ee||W===void 0&&ee===void 0||By(r,o,ie,W,d,ee);return}}for(var H in u)W=u[H],u.hasOwnProperty(H)&&W!=null&&!d.hasOwnProperty(H)&&wt(r,o,H,null,d,W);for(oe in d)W=d[oe],ee=u[oe],!d.hasOwnProperty(oe)||W===ee||W==null&&ee==null||wt(r,o,oe,W,d,ee)}function ww(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function WD(){if(typeof performance.getEntriesByType=="function"){for(var r=0,o=0,u=performance.getEntriesByType("resource"),d=0;d<u.length;d++){var y=u[d],v=y.transferSize,S=y.initiatorType,C=y.duration;if(v&&C&&ww(S)){for(S=0,C=y.responseEnd,d+=1;d<u.length;d++){var U=u[d],Y=U.startTime;if(Y>C)break;var ie=U.transferSize,oe=U.initiatorType;ie&&ww(oe)&&(U=U.responseEnd,S+=ie*(U<C?1:(C-Y)/(U-Y)))}if(--d,o+=8*(v+S)/(y.duration/1e3),r++,10<r)break}}if(0<r)return o/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Gy=null,zy=null;function Xh(r){return r.nodeType===9?r:r.ownerDocument}function Sw(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Aw(r,o){if(r===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&o==="foreignObject"?0:r}function Hy(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var $y=null;function QD(){var r=window.event;return r&&r.type==="popstate"?r===$y?!1:($y=r,!0):($y=null,!1)}var xw=typeof setTimeout=="function"?setTimeout:void 0,XD=typeof clearTimeout=="function"?clearTimeout:void 0,Cw=typeof Promise=="function"?Promise:void 0,ZD=typeof queueMicrotask=="function"?queueMicrotask:typeof Cw<"u"?function(r){return Cw.resolve(null).then(r).catch(e2)}:xw;function e2(r){setTimeout(function(){throw r})}function ro(r){return r==="head"}function bw(r,o){var u=o,d=0;do{var y=u.nextSibling;if(r.removeChild(u),y&&y.nodeType===8)if(u=y.data,u==="/$"||u==="/&"){if(d===0){r.removeChild(y),$l(o);return}d--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")d++;else if(u==="html")Zc(r.ownerDocument.documentElement);else if(u==="head"){u=r.ownerDocument.head,Zc(u);for(var v=u.firstChild;v;){var S=v.nextSibling,C=v.nodeName;v[yr]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&v.rel.toLowerCase()==="stylesheet"||u.removeChild(v),v=S}}else u==="body"&&Zc(r.ownerDocument.body);u=y}while(u);$l(o)}function Rw(r,o){var u=r;r=0;do{var d=u.nextSibling;if(u.nodeType===1?o?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(o?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),d&&d.nodeType===8)if(u=d.data,u==="/$"){if(r===0)break;r--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||r++;u=d}while(u)}function jy(r){var o=r.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":jy(u),al(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}r.removeChild(u)}}function t2(r,o,u,d){for(;r.nodeType===1;){var y=u;if(r.nodeName.toLowerCase()!==o.toLowerCase()){if(!d&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(d){if(!r[yr])switch(o){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(v=r.getAttribute("rel"),v==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(v!==y.rel||r.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||r.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||r.getAttribute("title")!==(y.title==null?null:y.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(v=r.getAttribute("src"),(v!==(y.src==null?null:y.src)||r.getAttribute("type")!==(y.type==null?null:y.type)||r.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&v&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(o==="input"&&r.type==="hidden"){var v=y.name==null?null:""+y.name;if(y.type==="hidden"&&r.getAttribute("name")===v)return r}else return r;if(r=qi(r.nextSibling),r===null)break}return null}function n2(r,o,u){if(o==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!u||(r=qi(r.nextSibling),r===null))return null;return r}function Nw(r,o){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=qi(r.nextSibling),r===null))return null;return r}function Ky(r){return r.data==="$?"||r.data==="$~"}function Yy(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function i2(r,o){var u=r.ownerDocument;if(r.data==="$~")r._reactRetry=o;else if(r.data!=="$?"||u.readyState!=="loading")o();else{var d=function(){o(),u.removeEventListener("DOMContentLoaded",d)};u.addEventListener("DOMContentLoaded",d),r._reactRetry=d}}function qi(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return r}var Jy=null;function Pw(r){r=r.nextSibling;for(var o=0;r;){if(r.nodeType===8){var u=r.data;if(u==="/$"||u==="/&"){if(o===0)return qi(r.nextSibling);o--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||o++}r=r.nextSibling}return null}function Dw(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var u=r.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(o===0)return r;o--}else u!=="/$"&&u!=="/&"||o++}r=r.previousSibling}return null}function Mw(r,o,u){switch(o=Xh(u),r){case"html":if(r=o.documentElement,!r)throw Error(i(452));return r;case"head":if(r=o.head,!r)throw Error(i(453));return r;case"body":if(r=o.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Zc(r){for(var o=r.attributes;o.length;)r.removeAttributeNode(o[0]);al(r)}var Bi=new Map,kw=new Set;function Zh(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var gs=ne.d;ne.d={f:r2,r:s2,D:o2,C:a2,L:l2,m:u2,X:d2,S:c2,M:f2};function r2(){var r=gs.f(),o=Hh();return r||o}function s2(r){var o=Ni(r);o!==null&&o.tag===5&&o.type==="form"?QT(o):gs.r(r)}var Gl=typeof document>"u"?null:document;function Vw(r,o,u){var d=Gl;if(d&&typeof o=="string"&&o){var y=ti(o);y='link[rel="'+r+'"][href="'+y+'"]',typeof u=="string"&&(y+='[crossorigin="'+u+'"]'),kw.has(y)||(kw.add(y),r={rel:r,crossOrigin:u,href:o},d.querySelector(y)===null&&(o=d.createElement("link"),Vn(o,"link",r),ln(o),d.head.appendChild(o)))}}function o2(r){gs.D(r),Vw("dns-prefetch",r,null)}function a2(r,o){gs.C(r,o),Vw("preconnect",r,o)}function l2(r,o,u){gs.L(r,o,u);var d=Gl;if(d&&r&&o){var y='link[rel="preload"][as="'+ti(o)+'"]';o==="image"&&u&&u.imageSrcSet?(y+='[imagesrcset="'+ti(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(y+='[imagesizes="'+ti(u.imageSizes)+'"]')):y+='[href="'+ti(r)+'"]';var v=y;switch(o){case"style":v=zl(r);break;case"script":v=Hl(r)}Bi.has(v)||(r=E({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:r,as:o},u),Bi.set(v,r),d.querySelector(y)!==null||o==="style"&&d.querySelector(ed(v))||o==="script"&&d.querySelector(td(v))||(o=d.createElement("link"),Vn(o,"link",r),ln(o),d.head.appendChild(o)))}}function u2(r,o){gs.m(r,o);var u=Gl;if(u&&r){var d=o&&typeof o.as=="string"?o.as:"script",y='link[rel="modulepreload"][as="'+ti(d)+'"][href="'+ti(r)+'"]',v=y;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Hl(r)}if(!Bi.has(v)&&(r=E({rel:"modulepreload",href:r},o),Bi.set(v,r),u.querySelector(y)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(td(v)))return}d=u.createElement("link"),Vn(d,"link",r),ln(d),u.head.appendChild(d)}}}function c2(r,o,u){gs.S(r,o,u);var d=Gl;if(d&&r){var y=vr(d).hoistableStyles,v=zl(r);o=o||"default";var S=y.get(v);if(!S){var C={loading:0,preload:null};if(S=d.querySelector(ed(v)))C.loading=5;else{r=E({rel:"stylesheet",href:r,"data-precedence":o},u),(u=Bi.get(v))&&Wy(r,u);var U=S=d.createElement("link");ln(U),Vn(U,"link",r),U._p=new Promise(function(Y,ie){U.onload=Y,U.onerror=ie}),U.addEventListener("load",function(){C.loading|=1}),U.addEventListener("error",function(){C.loading|=2}),C.loading|=4,em(S,o,d)}S={type:"stylesheet",instance:S,count:1,state:C},y.set(v,S)}}}function d2(r,o){gs.X(r,o);var u=Gl;if(u&&r){var d=vr(u).hoistableScripts,y=Hl(r),v=d.get(y);v||(v=u.querySelector(td(y)),v||(r=E({src:r,async:!0},o),(o=Bi.get(y))&&Qy(r,o),v=u.createElement("script"),ln(v),Vn(v,"link",r),u.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(y,v))}}function f2(r,o){gs.M(r,o);var u=Gl;if(u&&r){var d=vr(u).hoistableScripts,y=Hl(r),v=d.get(y);v||(v=u.querySelector(td(y)),v||(r=E({src:r,async:!0,type:"module"},o),(o=Bi.get(y))&&Qy(r,o),v=u.createElement("script"),ln(v),Vn(v,"link",r),u.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(y,v))}}function Lw(r,o,u,d){var y=(y=qe.current)?Zh(y):null;if(!y)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=zl(u.href),u=vr(y).hoistableStyles,d=u.get(o),d||(d={type:"style",instance:null,count:0,state:null},u.set(o,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){r=zl(u.href);var v=vr(y).hoistableStyles,S=v.get(r);if(S||(y=y.ownerDocument||y,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(r,S),(v=y.querySelector(ed(r)))&&!v._p&&(S.instance=v,S.state.loading=5),Bi.has(r)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},Bi.set(r,u),v||h2(y,r,u,S.state))),o&&d===null)throw Error(i(528,""));return S}if(o&&d!==null)throw Error(i(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Hl(u),u=vr(y).hoistableScripts,d=u.get(o),d||(d={type:"script",instance:null,count:0,state:null},u.set(o,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function zl(r){return'href="'+ti(r)+'"'}function ed(r){return'link[rel="stylesheet"]['+r+"]"}function Ow(r){return E({},r,{"data-precedence":r.precedence,precedence:null})}function h2(r,o,u,d){r.querySelector('link[rel="preload"][as="style"]['+o+"]")?d.loading=1:(o=r.createElement("link"),d.preload=o,o.addEventListener("load",function(){return d.loading|=1}),o.addEventListener("error",function(){return d.loading|=2}),Vn(o,"link",u),ln(o),r.head.appendChild(o))}function Hl(r){return'[src="'+ti(r)+'"]'}function td(r){return"script[async]"+r}function Uw(r,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var d=r.querySelector('style[data-href~="'+ti(u.href)+'"]');if(d)return o.instance=d,ln(d),d;var y=E({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return d=(r.ownerDocument||r).createElement("style"),ln(d),Vn(d,"style",y),em(d,u.precedence,r),o.instance=d;case"stylesheet":y=zl(u.href);var v=r.querySelector(ed(y));if(v)return o.state.loading|=4,o.instance=v,ln(v),v;d=Ow(u),(y=Bi.get(y))&&Wy(d,y),v=(r.ownerDocument||r).createElement("link"),ln(v);var S=v;return S._p=new Promise(function(C,U){S.onload=C,S.onerror=U}),Vn(v,"link",d),o.state.loading|=4,em(v,u.precedence,r),o.instance=v;case"script":return v=Hl(u.src),(y=r.querySelector(td(v)))?(o.instance=y,ln(y),y):(d=u,(y=Bi.get(v))&&(d=E({},u),Qy(d,y)),r=r.ownerDocument||r,y=r.createElement("script"),ln(y),Vn(y,"link",d),r.head.appendChild(y),o.instance=y);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(d=o.instance,o.state.loading|=4,em(d,u.precedence,r));return o.instance}function em(r,o,u){for(var d=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=d.length?d[d.length-1]:null,v=y,S=0;S<d.length;S++){var C=d[S];if(C.dataset.precedence===o)v=C;else if(v!==y)break}v?v.parentNode.insertBefore(r,v.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(r,o.firstChild))}function Wy(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.title==null&&(r.title=o.title)}function Qy(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.integrity==null&&(r.integrity=o.integrity)}var tm=null;function Fw(r,o,u){if(tm===null){var d=new Map,y=tm=new Map;y.set(u,d)}else y=tm,d=y.get(u),d||(d=new Map,y.set(u,d));if(d.has(r))return d;for(d.set(r,null),u=u.getElementsByTagName(r),y=0;y<u.length;y++){var v=u[y];if(!(v[yr]||v[an]||r==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var S=v.getAttribute(o)||"";S=r+S;var C=d.get(S);C?C.push(v):d.set(S,[v])}}return d}function qw(r,o,u){r=r.ownerDocument||r,r.head.insertBefore(u,o==="title"?r.querySelector("head > title"):null)}function m2(r,o,u){if(u===1||o.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return r=o.disabled,typeof o.precedence=="string"&&r==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function Bw(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function p2(r,o,u,d){if(u.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var y=zl(d.href),v=o.querySelector(ed(y));if(v){o=v._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(r.count++,r=nm.bind(r),o.then(r,r)),u.state.loading|=4,u.instance=v,ln(v);return}v=o.ownerDocument||o,d=Ow(d),(y=Bi.get(y))&&Wy(d,y),v=v.createElement("link"),ln(v);var S=v;S._p=new Promise(function(C,U){S.onload=C,S.onerror=U}),Vn(v,"link",d),u.instance=v}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(u,o),(o=u.state.preload)&&(u.state.loading&3)===0&&(r.count++,u=nm.bind(r),o.addEventListener("load",u),o.addEventListener("error",u))}}var Xy=0;function g2(r,o){return r.stylesheets&&r.count===0&&rm(r,r.stylesheets),0<r.count||0<r.imgCount?function(u){var d=setTimeout(function(){if(r.stylesheets&&rm(r,r.stylesheets),r.unsuspend){var v=r.unsuspend;r.unsuspend=null,v()}},6e4+o);0<r.imgBytes&&Xy===0&&(Xy=62500*WD());var y=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&rm(r,r.stylesheets),r.unsuspend)){var v=r.unsuspend;r.unsuspend=null,v()}},(r.imgBytes>Xy?50:800)+o);return r.unsuspend=u,function(){r.unsuspend=null,clearTimeout(d),clearTimeout(y)}}:null}function nm(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)rm(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var im=null;function rm(r,o){r.stylesheets=null,r.unsuspend!==null&&(r.count++,im=new Map,o.forEach(y2,r),im=null,nm.call(r))}function y2(r,o){if(!(o.state.loading&4)){var u=im.get(r);if(u)var d=u.get(null);else{u=new Map,im.set(r,u);for(var y=r.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<y.length;v++){var S=y[v];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(u.set(S.dataset.precedence,S),d=S)}d&&u.set(null,d)}y=o.instance,S=y.getAttribute("data-precedence"),v=u.get(S)||d,v===d&&u.set(null,y),u.set(S,y),this.count++,d=nm.bind(this),y.addEventListener("load",d),y.addEventListener("error",d),v?v.parentNode.insertBefore(y,v.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(y,r.firstChild)),o.state.loading|=4}}var nd={$$typeof:J,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function _2(r,o,u,d,y,v,S,C,U){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=pr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pr(0),this.hiddenUpdates=pr(null),this.identifierPrefix=d,this.onUncaughtError=y,this.onCaughtError=v,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function Gw(r,o,u,d,y,v,S,C,U,Y,ie,oe){return r=new _2(r,o,u,S,U,Y,ie,oe,C),o=1,v===!0&&(o|=24),v=pi(3,null,null,o),r.current=v,v.stateNode=r,o=Pg(),o.refCount++,r.pooledCache=o,o.refCount++,v.memoizedState={element:d,isDehydrated:u,cache:o},Vg(v),r}function zw(r){return r?(r=Tl,r):Tl}function Hw(r,o,u,d,y,v){y=zw(y),d.context===null?d.context=y:d.pendingContext=y,d=Ks(o),d.payload={element:u},v=v===void 0?null:v,v!==null&&(d.callback=v),u=Ys(r,d,o),u!==null&&(ai(u,r,o),kc(u,r,o))}function $w(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var u=r.retryLane;r.retryLane=u!==0&&u<o?u:o}}function Zy(r,o){$w(r,o),(r=r.alternate)&&$w(r,o)}function jw(r){if(r.tag===13||r.tag===31){var o=ca(r,67108864);o!==null&&ai(o,r,67108864),Zy(r,67108864)}}function Kw(r){if(r.tag===13||r.tag===31){var o=Ei();o=Xo(o);var u=ca(r,o);u!==null&&ai(u,r,o),Zy(r,o)}}var sm=!0;function v2(r,o,u,d){var y=Z.T;Z.T=null;var v=ne.p;try{ne.p=2,e_(r,o,u,d)}finally{ne.p=v,Z.T=y}}function E2(r,o,u,d){var y=Z.T;Z.T=null;var v=ne.p;try{ne.p=8,e_(r,o,u,d)}finally{ne.p=v,Z.T=y}}function e_(r,o,u,d){if(sm){var y=t_(d);if(y===null)qy(r,o,d,om,u),Jw(r,d);else if(I2(y,r,o,u,d))d.stopPropagation();else if(Jw(r,d),o&4&&-1<T2.indexOf(r)){for(;y!==null;){var v=Ni(y);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var S=hr(v.pendingLanes);if(S!==0){var C=v;for(C.pendingLanes|=2,C.entangledLanes|=2;S;){var U=1<<31-Xt(S);C.entanglements[1]|=U,S&=~U}Dr(v),(ht&6)===0&&(Gh=ue()+500,Wc(0))}}break;case 31:case 13:C=ca(v,2),C!==null&&ai(C,v,2),Hh(),Zy(v,2)}if(v=t_(d),v===null&&qy(r,o,d,om,u),v===y)break;y=v}y!==null&&d.stopPropagation()}else qy(r,o,d,null,u)}}function t_(r){return r=Pi(r),n_(r)}var om=null;function n_(r){if(om=null,r=_r(r),r!==null){var o=a(r);if(o===null)r=null;else{var u=o.tag;if(u===13){if(r=l(o),r!==null)return r;r=null}else if(u===31){if(r=c(o),r!==null)return r;r=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return om=r,null}function Yw(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(me()){case Ve:return 2;case at:return 8;case ei:case oc:return 32;case rl:return 268435456;default:return 32}default:return 32}}var i_=!1,so=null,oo=null,ao=null,id=new Map,rd=new Map,lo=[],T2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Jw(r,o){switch(r){case"focusin":case"focusout":so=null;break;case"dragenter":case"dragleave":oo=null;break;case"mouseover":case"mouseout":ao=null;break;case"pointerover":case"pointerout":id.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":rd.delete(o.pointerId)}}function sd(r,o,u,d,y,v){return r===null||r.nativeEvent!==v?(r={blockedOn:o,domEventName:u,eventSystemFlags:d,nativeEvent:v,targetContainers:[y]},o!==null&&(o=Ni(o),o!==null&&jw(o)),r):(r.eventSystemFlags|=d,o=r.targetContainers,y!==null&&o.indexOf(y)===-1&&o.push(y),r)}function I2(r,o,u,d,y){switch(o){case"focusin":return so=sd(so,r,o,u,d,y),!0;case"dragenter":return oo=sd(oo,r,o,u,d,y),!0;case"mouseover":return ao=sd(ao,r,o,u,d,y),!0;case"pointerover":var v=y.pointerId;return id.set(v,sd(id.get(v)||null,r,o,u,d,y)),!0;case"gotpointercapture":return v=y.pointerId,rd.set(v,sd(rd.get(v)||null,r,o,u,d,y)),!0}return!1}function Ww(r){var o=_r(r.target);if(o!==null){var u=a(o);if(u!==null){if(o=u.tag,o===13){if(o=l(u),o!==null){r.blockedOn=o,Yi(r.priority,function(){Kw(u)});return}}else if(o===31){if(o=c(u),o!==null){r.blockedOn=o,Yi(r.priority,function(){Kw(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){r.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}r.blockedOn=null}function am(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var u=t_(r.nativeEvent);if(u===null){u=r.nativeEvent;var d=new u.constructor(u.type,u);_c=d,u.target.dispatchEvent(d),_c=null}else return o=Ni(u),o!==null&&jw(o),r.blockedOn=u,!1;o.shift()}return!0}function Qw(r,o,u){am(r)&&u.delete(o)}function w2(){i_=!1,so!==null&&am(so)&&(so=null),oo!==null&&am(oo)&&(oo=null),ao!==null&&am(ao)&&(ao=null),id.forEach(Qw),rd.forEach(Qw)}function lm(r,o){r.blockedOn===o&&(r.blockedOn=null,i_||(i_=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,w2)))}var um=null;function Xw(r){um!==r&&(um=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){um===r&&(um=null);for(var o=0;o<r.length;o+=3){var u=r[o],d=r[o+1],y=r[o+2];if(typeof d!="function"){if(n_(d||u)===null)continue;break}var v=Ni(u);v!==null&&(r.splice(o,3),o-=3,ty(v,{pending:!0,data:y,method:u.method,action:d},d,y))}}))}function $l(r){function o(U){return lm(U,r)}so!==null&&lm(so,r),oo!==null&&lm(oo,r),ao!==null&&lm(ao,r),id.forEach(o),rd.forEach(o);for(var u=0;u<lo.length;u++){var d=lo[u];d.blockedOn===r&&(d.blockedOn=null)}for(;0<lo.length&&(u=lo[0],u.blockedOn===null);)Ww(u),u.blockedOn===null&&lo.shift();if(u=(r.ownerDocument||r).$$reactFormReplay,u!=null)for(d=0;d<u.length;d+=3){var y=u[d],v=u[d+1],S=y[Tn]||null;if(typeof v=="function")S||Xw(u);else if(S){var C=null;if(v&&v.hasAttribute("formAction")){if(y=v,S=v[Tn]||null)C=S.formAction;else if(n_(y)!==null)continue}else C=S.action;typeof C=="function"?u[d+1]=C:(u.splice(d,3),d-=3),Xw(u)}}}function Zw(){function r(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(S){return y=S})},focusReset:"manual",scroll:"manual"})}function o(){y!==null&&(y(),y=null),d||setTimeout(u,20)}function u(){if(!d&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,y=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(u,100),function(){d=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),y!==null&&(y(),y=null)}}}function r_(r){this._internalRoot=r}cm.prototype.render=r_.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(i(409));var u=o.current,d=Ei();Hw(u,d,r,o,null,null)},cm.prototype.unmount=r_.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;Hw(r.current,2,null,r,null,null),Hh(),o[gr]=null}};function cm(r){this._internalRoot=r}cm.prototype.unstable_scheduleHydration=function(r){if(r){var o=Hf();r={blockedOn:null,target:r,priority:o};for(var u=0;u<lo.length&&o!==0&&o<lo[u].priority;u++);lo.splice(u,0,r),u===0&&Ww(r)}};var eS=e.version;if(eS!=="19.2.0")throw Error(i(527,eS,"19.2.0"));ne.findDOMNode=function(r){var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=h(o),r=r!==null?_(r):null,r=r===null?null:r.stateNode,r};var S2={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dm.isDisabled&&dm.supportsFiber)try{Nn=dm.inject(S2),Gt=dm}catch{}}return ad.createRoot=function(r,o){if(!s(r))throw Error(i(299));var u=!1,d="",y=aI,v=lI,S=uI;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError)),o=Gw(r,1,!1,null,null,u,d,null,y,v,S,Zw),r[gr]=o.current,Fy(r),new r_(o)},ad.hydrateRoot=function(r,o,u){if(!s(r))throw Error(i(299));var d=!1,y="",v=aI,S=lI,C=uI,U=null;return u!=null&&(u.unstable_strictMode===!0&&(d=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onUncaughtError!==void 0&&(v=u.onUncaughtError),u.onCaughtError!==void 0&&(S=u.onCaughtError),u.onRecoverableError!==void 0&&(C=u.onRecoverableError),u.formState!==void 0&&(U=u.formState)),o=Gw(r,1,!0,o,u??null,d,y,U,v,S,C,Zw),o.context=zw(null),u=o.current,d=Ei(),d=Xo(d),y=Ks(d),y.callback=null,Ys(u,y,d),u=d,o.current.lanes=u,Wo(o,u),Dr(o),r[gr]=o.current,Fy(r),new cm(o)},ad.version="19.2.0",ad}var cS;function k2(){if(cS)return a_.exports;cS=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),a_.exports=M2(),a_.exports}var V2=k2();const L2=XC(V2);var _n=(n=>(n.ANY="Todos os jeitos",n.AIRFRYER="AirFryer",n.STOVE="Fogo",n.OVEN="Forno",n))(_n||{}),Te=(n=>(n.LOGIN="LOGIN",n.REGISTER="REGISTER",n.FORGOT_PASSWORD="FORGOT_PASSWORD",n.WELCOME="WELCOME",n.FAMILY_SELECTION="FAMILY_SELECTION",n.COOKING_METHOD="COOKING_METHOD",n.PROFILE_EDITOR="PROFILE_EDITOR",n.UPLOAD="UPLOAD",n.ANALYZING="ANALYZING",n.RESULTS="RESULTS",n.RECIPES="RECIPES",n.RECIPE_DETAIL="RECIPE_DETAIL",n.PROFILE="PROFILE",n.SHOPPING_LIST="SHOPPING_LIST",n))(Te||{});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let O2,U2;function F2(){return{geminiUrl:O2,vertexUrl:U2}}function q2(n,e,t,i){var s,a;if(!(n!=null&&n.baseUrl)){const l=F2();return e?(s=l.vertexUrl)!==null&&s!==void 0?s:t:(a=l.geminiUrl)!==null&&a!==void 0?a:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class As{}function Ie(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const a=e[s];return a!=null?String(a):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function p(n,e,t){for(let a=0;a<e.length-1;a++){const l=e[a];if(l.endsWith("[]")){const c=l.slice(0,-2);if(!(c in n))if(Array.isArray(t))n[c]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(n[c])){const f=n[c];if(Array.isArray(t))for(let h=0;h<f.length;h++){const _=f[h];p(_,e.slice(a+1),t[h])}else for(const h of f)p(h,e.slice(a+1),t)}return}else if(l.endsWith("[0]")){const c=l.slice(0,-3);c in n||(n[c]=[{}]);const f=n[c];p(f[0],e.slice(a+1),t);return}(!n[l]||typeof n[l]!="object")&&(n[l]={}),n=n[l]}const i=e[e.length-1],s=n[i];if(s!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===s)return;if(typeof s=="object"&&typeof t=="object"&&s!==null&&t!==null)Object.assign(s,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function m(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;const s=e[i];if(s.endsWith("[]")){const a=s.slice(0,-2);if(a in n){const l=n[a];return Array.isArray(l)?l.map(c=>m(c,e.slice(i+1),t)):t}else return t}else n=n[s]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function B2(n,e){for(const[t,i]of Object.entries(e)){const s=t.split("."),a=i.split("."),l=new Set;let c=-1;for(let f=0;f<s.length;f++)if(s[f]==="*"){c=f;break}if(c!==-1&&a.length>c)for(let f=c;f<a.length;f++){const h=a[f];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&l.add(h)}k_(n,s,a,0,l)}}function k_(n,e,t,i,s){if(i>=e.length||typeof n!="object"||n===null)return;const a=e[i];if(a.endsWith("[]")){const l=a.slice(0,-2),c=n;if(l in c&&Array.isArray(c[l]))for(const f of c[l])k_(f,e,t,i+1,s)}else if(a==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const l=n,c=Object.keys(l).filter(h=>!h.startsWith("_")&&!s.has(h)),f={};for(const h of c)f[h]=l[h];for(const[h,_]of Object.entries(f)){const E=[];for(const I of t.slice(i))I==="*"?E.push(h):E.push(I);p(l,E,_)}for(const h of c)delete l[h]}}else{const l=n;a in l&&k_(l[a],e,t,i+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Vv(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function G2(n){const e={},t=m(n,["operationName"]);t!=null&&p(e,["operationName"],t);const i=m(n,["resourceName"]);return i!=null&&p(e,["_url","resourceName"],i),e}function z2(n){const e={},t=m(n,["name"]);t!=null&&p(e,["name"],t);const i=m(n,["metadata"]);i!=null&&p(e,["metadata"],i);const s=m(n,["done"]);s!=null&&p(e,["done"],s);const a=m(n,["error"]);a!=null&&p(e,["error"],a);const l=m(n,["response","generateVideoResponse"]);return l!=null&&p(e,["response"],$2(l)),e}function H2(n){const e={},t=m(n,["name"]);t!=null&&p(e,["name"],t);const i=m(n,["metadata"]);i!=null&&p(e,["metadata"],i);const s=m(n,["done"]);s!=null&&p(e,["done"],s);const a=m(n,["error"]);a!=null&&p(e,["error"],a);const l=m(n,["response"]);return l!=null&&p(e,["response"],j2(l)),e}function $2(n){const e={},t=m(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>K2(l))),p(e,["generatedVideos"],a)}const i=m(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const s=m(n,["raiMediaFilteredReasons"]);return s!=null&&p(e,["raiMediaFilteredReasons"],s),e}function j2(n){const e={},t=m(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>Y2(l))),p(e,["generatedVideos"],a)}const i=m(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const s=m(n,["raiMediaFilteredReasons"]);return s!=null&&p(e,["raiMediaFilteredReasons"],s),e}function K2(n){const e={},t=m(n,["video"]);return t!=null&&p(e,["video"],eM(t)),e}function Y2(n){const e={},t=m(n,["_self"]);return t!=null&&p(e,["video"],tM(t)),e}function J2(n){const e={},t=m(n,["operationName"]);return t!=null&&p(e,["_url","operationName"],t),e}function W2(n){const e={},t=m(n,["operationName"]);return t!=null&&p(e,["_url","operationName"],t),e}function Q2(n){const e={},t=m(n,["name"]);t!=null&&p(e,["name"],t);const i=m(n,["metadata"]);i!=null&&p(e,["metadata"],i);const s=m(n,["done"]);s!=null&&p(e,["done"],s);const a=m(n,["error"]);a!=null&&p(e,["error"],a);const l=m(n,["response"]);return l!=null&&p(e,["response"],X2(l)),e}function X2(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=m(n,["parent"]);i!=null&&p(e,["parent"],i);const s=m(n,["documentName"]);return s!=null&&p(e,["documentName"],s),e}function eb(n){const e={},t=m(n,["name"]);t!=null&&p(e,["name"],t);const i=m(n,["metadata"]);i!=null&&p(e,["metadata"],i);const s=m(n,["done"]);s!=null&&p(e,["done"],s);const a=m(n,["error"]);a!=null&&p(e,["error"],a);const l=m(n,["response"]);return l!=null&&p(e,["response"],Z2(l)),e}function Z2(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=m(n,["parent"]);i!=null&&p(e,["parent"],i);const s=m(n,["documentName"]);return s!=null&&p(e,["documentName"],s),e}function eM(n){const e={},t=m(n,["uri"]);t!=null&&p(e,["uri"],t);const i=m(n,["encodedVideo"]);i!=null&&p(e,["videoBytes"],Vv(i));const s=m(n,["encoding"]);return s!=null&&p(e,["mimeType"],s),e}function tM(n){const e={},t=m(n,["gcsUri"]);t!=null&&p(e,["uri"],t);const i=m(n,["bytesBase64Encoded"]);i!=null&&p(e,["videoBytes"],Vv(i));const s=m(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var dS;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(dS||(dS={}));var fS;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(fS||(fS={}));var hS;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(hS||(hS={}));var _o;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(_o||(_o={}));var mS;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(mS||(mS={}));var pS;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(pS||(pS={}));var gS;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(gS||(gS={}));var yS;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(yS||(yS={}));var _S;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(_S||(_S={}));var vS;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.HIGH="HIGH"})(vS||(vS={}));var Fr;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Fr||(Fr={}));var ES;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(ES||(ES={}));var qr;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(qr||(qr={}));var TS;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(TS||(TS={}));var IS;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(IS||(IS={}));var wS;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(wS||(wS={}));var SS;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(SS||(SS={}));var AS;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(AS||(AS={}));var xS;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(xS||(xS={}));var qm;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(qm||(qm={}));var CS;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(CS||(CS={}));var bS;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(bS||(bS={}));var RS;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(RS||(RS={}));var V_;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(V_||(V_={}));var NS;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(NS||(NS={}));var PS;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(PS||(PS={}));var DS;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(DS||(DS={}));var MS;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(MS||(MS={}));var kS;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(kS||(kS={}));var VS;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(VS||(VS={}));var LS;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(LS||(LS={}));var OS;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(OS||(OS={}));var US;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(US||(US={}));var FS;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(FS||(FS={}));var qS;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(qS||(qS={}));var BS;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(BS||(BS={}));var GS;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(GS||(GS={}));var zS;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(zS||(zS={}));var HS;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(HS||(HS={}));var $S;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})($S||($S={}));var jS;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(jS||(jS={}));var KS;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(KS||(KS={}));var YS;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(YS||(YS={}));var JS;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(JS||(JS={}));var WS;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(WS||(WS={}));var QS;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(QS||(QS={}));var XS;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(XS||(XS={}));var ZS;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(ZS||(ZS={}));var eA;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(eA||(eA={}));var tA;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(tA||(tA={}));var nA;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(nA||(nA={}));var iA;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(iA||(iA={}));var rA;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(rA||(rA={}));var sA;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(sA||(sA={}));var ru;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(ru||(ru={}));class L_{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class ld{get text(){var e,t,i,s,a,l,c,f;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",_=!1;const E=[];for(const I of(f=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&f!==void 0?f:[]){for(const[x,k]of Object.entries(I))x!=="text"&&x!=="thought"&&x!=="thoughtSignature"&&(k!==null||k!==void 0)&&E.push(x);if(typeof I.text=="string"){if(typeof I.thought=="boolean"&&I.thought)continue;_=!0,h+=I.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?h:void 0}get data(){var e,t,i,s,a,l,c,f;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const _=[];for(const E of(f=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&f!==void 0?f:[]){for(const[I,x]of Object.entries(E))I!=="inlineData"&&(x!==null||x!==void 0)&&_.push(I);E.inlineData&&typeof E.inlineData.data=="string"&&(h+=atob(E.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,t,i,s,a,l,c,f;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(f=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||f===void 0?void 0:f.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,t,i,s,a,l,c,f,h;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(f=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||f===void 0?void 0:f.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,t,i,s,a,l,c,f,h;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(f=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||f===void 0?void 0:f.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.output}}class oA{}class aA{}class nM{}class iM{}class rM{}class sM{}class lA{}class uA{}class cA{}class oM{}class Bm{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Bm;let s;const a=e;return t?s=H2(a):s=z2(a),Object.assign(i,s),i}}class dA{}class fA{}class hA{}class aM{}class lM{}class uM{}class Lv{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Lv,a=Q2(e);return Object.assign(i,a),i}}class cM{}class dM{}class fM{}class mA{}class hM{get text(){var e,t,i;let s="",a=!1;const l=[];for(const c of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[f,h]of Object.entries(c))f!=="text"&&f!=="thought"&&h!==null&&l.push(f);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;a=!0,s+=c.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?s:void 0}get data(){var e,t,i;let s="";const a=[];for(const l of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[c,f]of Object.entries(l))c!=="inlineData"&&f!==null&&a.push(c);l.inlineData&&typeof l.inlineData.data=="string"&&(s+=atob(l.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class mM{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Ov{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Ov,a=eb(e);return Object.assign(i,a),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dt(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function tb(n,e){const t=dt(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function nb(n){return Array.isArray(n)?n.map(e=>Gm(e)):[Gm(n)]}function Gm(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function ib(n){const e=Gm(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function rb(n){const e=Gm(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function pA(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function sb(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>pA(e)):[pA(n)]}function O_(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function gA(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function yA(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function Hn(n){if(n==null)throw new Error("ContentUnion is required");return O_(n)?n:{role:"user",parts:sb(n)}}function Uv(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=Hn(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=Hn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>Hn(t)):[Hn(e)]}function zi(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(gA(n)||yA(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Hn(n)]}const e=[],t=[],i=O_(n[0]);for(const s of n){const a=O_(s);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(s);else{if(gA(s)||yA(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(s)}}return i||e.push({role:"user",parts:sb(t)}),e}function pM(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(_o).includes(t[0].toUpperCase())?t[0].toUpperCase():_o.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(_o).includes(i.toUpperCase())?i.toUpperCase():_o.TYPE_UNSPECIFIED})}}function au(n){const e={},t=["items"],i=["anyOf"],s=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=n.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,n=a[1]):a[1].type==="null"&&(e.nullable=!0,n=a[0])),n.type instanceof Array&&pM(n.type,e);for(const[l,c]of Object.entries(n))if(c!=null)if(l=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;e.type=Object.values(_o).includes(c.toUpperCase())?c.toUpperCase():_o.TYPE_UNSPECIFIED}else if(t.includes(l))e[l]=au(c);else if(i.includes(l)){const f=[];for(const h of c){if(h.type=="null"){e.nullable=!0;continue}f.push(au(h))}e[l]=f}else if(s.includes(l)){const f={};for(const[h,_]of Object.entries(c))f[h]=au(_);e[l]=f}else{if(l==="additionalProperties")continue;e[l]=c}return e}function Fv(n){return au(n)}function qv(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Bv(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Hu(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=au(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=au(e.response));return n}function $u(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function gM(n,e,t,i=1){const s=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:s?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:s?`${t}/${e}`:e}function xs(n,e){if(typeof e!="string")throw new Error("name must be a string");return gM(n,e,"cachedContents")}function ob(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function qo(n){return Vv(n)}function yM(n){return n!=null&&typeof n=="object"&&"name"in n}function _M(n){return n!=null&&typeof n=="object"&&"video"in n}function vM(n){return n!=null&&typeof n=="object"&&"uri"in n}function ab(n){var e;let t;if(yM(n)&&(t=n.name),!(vM(n)&&(t=n.uri,t===void 0))&&!(_M(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const s=t.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${t}`);t=s[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function lb(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function ub(n){for(const e of["models","tunedModels","publisherModels"])if(EM(n,e))return n[e];return[]}function EM(n,e){return n!==null&&typeof n=="object"&&e in n}function TM(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function IM(n,e={}){const t=[],i=new Set;for(const s of n){const a=s.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const l=TM(s,e);l.functionDeclarations&&t.push(...l.functionDeclarations)}return{functionDeclarations:t}}function cb(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,s=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(s>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function wM(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function db(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const s=t.inlinedResponses;if(!Array.isArray(s)||s.length===0)return n;let a=!1;for(const l of s){if(typeof l!="object"||l===null)continue;const f=l.response;if(typeof f!="object"||f===null)continue;if(f.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function ju(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function fb(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function SM(n){const e={},t=m(n,["responsesFile"]);t!=null&&p(e,["fileName"],t);const i=m(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>rk(l))),p(e,["inlinedResponses"],a)}const s=m(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),p(e,["inlinedEmbedContentResponses"],a)}return e}function AM(n){const e={},t=m(n,["predictionsFormat"]);t!=null&&p(e,["format"],t);const i=m(n,["gcsDestination","outputUriPrefix"]);i!=null&&p(e,["gcsUri"],i);const s=m(n,["bigqueryDestination","outputUri"]);return s!=null&&p(e,["bigqueryUri"],s),e}function xM(n){const e={},t=m(n,["format"]);t!=null&&p(e,["predictionsFormat"],t);const i=m(n,["gcsUri"]);i!=null&&p(e,["gcsDestination","outputUriPrefix"],i);const s=m(n,["bigqueryUri"]);if(s!=null&&p(e,["bigqueryDestination","outputUri"],s),m(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(m(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Im(n){const e={},t=m(n,["name"]);t!=null&&p(e,["name"],t);const i=m(n,["metadata","displayName"]);i!=null&&p(e,["displayName"],i);const s=m(n,["metadata","state"]);s!=null&&p(e,["state"],fb(s));const a=m(n,["metadata","createTime"]);a!=null&&p(e,["createTime"],a);const l=m(n,["metadata","endTime"]);l!=null&&p(e,["endTime"],l);const c=m(n,["metadata","updateTime"]);c!=null&&p(e,["updateTime"],c);const f=m(n,["metadata","model"]);f!=null&&p(e,["model"],f);const h=m(n,["metadata","output"]);return h!=null&&p(e,["dest"],SM(db(h))),e}function U_(n){const e={},t=m(n,["name"]);t!=null&&p(e,["name"],t);const i=m(n,["displayName"]);i!=null&&p(e,["displayName"],i);const s=m(n,["state"]);s!=null&&p(e,["state"],fb(s));const a=m(n,["error"]);a!=null&&p(e,["error"],a);const l=m(n,["createTime"]);l!=null&&p(e,["createTime"],l);const c=m(n,["startTime"]);c!=null&&p(e,["startTime"],c);const f=m(n,["endTime"]);f!=null&&p(e,["endTime"],f);const h=m(n,["updateTime"]);h!=null&&p(e,["updateTime"],h);const _=m(n,["model"]);_!=null&&p(e,["model"],_);const E=m(n,["inputConfig"]);E!=null&&p(e,["src"],CM(E));const I=m(n,["outputConfig"]);I!=null&&p(e,["dest"],AM(db(I)));const x=m(n,["completionStats"]);return x!=null&&p(e,["completionStats"],x),e}function CM(n){const e={},t=m(n,["instancesFormat"]);t!=null&&p(e,["format"],t);const i=m(n,["gcsSource","uris"]);i!=null&&p(e,["gcsUri"],i);const s=m(n,["bigquerySource","inputUri"]);return s!=null&&p(e,["bigqueryUri"],s),e}function bM(n,e){const t={};if(m(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(m(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=m(e,["fileName"]);i!=null&&p(t,["fileName"],i);const s=m(e,["inlinedRequests"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>ik(n,l))),p(t,["requests","requests"],a)}return t}function RM(n){const e={},t=m(n,["format"]);t!=null&&p(e,["instancesFormat"],t);const i=m(n,["gcsUri"]);i!=null&&p(e,["gcsSource","uris"],i);const s=m(n,["bigqueryUri"]);if(s!=null&&p(e,["bigquerySource","inputUri"],s),m(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(m(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function NM(n){const e={},t=m(n,["data"]);if(t!=null&&p(e,["data"],t),m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function PM(n,e){const t={},i=m(e,["name"]);return i!=null&&p(t,["_url","name"],ju(n,i)),t}function DM(n,e){const t={},i=m(e,["name"]);return i!=null&&p(t,["_url","name"],ju(n,i)),t}function MM(n){const e={},t=m(n,["content"]);t!=null&&p(e,["content"],t);const i=m(n,["citationMetadata"]);i!=null&&p(e,["citationMetadata"],kM(i));const s=m(n,["tokenCount"]);s!=null&&p(e,["tokenCount"],s);const a=m(n,["finishReason"]);a!=null&&p(e,["finishReason"],a);const l=m(n,["avgLogprobs"]);l!=null&&p(e,["avgLogprobs"],l);const c=m(n,["groundingMetadata"]);c!=null&&p(e,["groundingMetadata"],c);const f=m(n,["index"]);f!=null&&p(e,["index"],f);const h=m(n,["logprobsResult"]);h!=null&&p(e,["logprobsResult"],h);const _=m(n,["safetyRatings"]);if(_!=null){let I=_;Array.isArray(I)&&(I=I.map(x=>x)),p(e,["safetyRatings"],I)}const E=m(n,["urlContextMetadata"]);return E!=null&&p(e,["urlContextMetadata"],E),e}function kM(n){const e={},t=m(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>s)),p(e,["citations"],i)}return e}function hb(n){const e={},t=m(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>dk(a))),p(e,["parts"],s)}const i=m(n,["role"]);return i!=null&&p(e,["role"],i),e}function VM(n,e){const t={},i=m(n,["displayName"]);if(e!==void 0&&i!=null&&p(e,["batch","displayName"],i),m(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function LM(n,e){const t={},i=m(n,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const s=m(n,["dest"]);return e!==void 0&&s!=null&&p(e,["outputConfig"],xM(wM(s))),t}function _A(n,e){const t={},i=m(e,["model"]);i!=null&&p(t,["_url","model"],dt(n,i));const s=m(e,["src"]);s!=null&&p(t,["batch","inputConfig"],bM(n,cb(n,s)));const a=m(e,["config"]);return a!=null&&VM(a,t),t}function OM(n,e){const t={},i=m(e,["model"]);i!=null&&p(t,["model"],dt(n,i));const s=m(e,["src"]);s!=null&&p(t,["inputConfig"],RM(cb(n,s)));const a=m(e,["config"]);return a!=null&&LM(a,t),t}function UM(n,e){const t={},i=m(n,["displayName"]);return e!==void 0&&i!=null&&p(e,["batch","displayName"],i),t}function FM(n,e){const t={},i=m(e,["model"]);i!=null&&p(t,["_url","model"],dt(n,i));const s=m(e,["src"]);s!=null&&p(t,["batch","inputConfig"],jM(n,s));const a=m(e,["config"]);return a!=null&&UM(a,t),t}function qM(n,e){const t={},i=m(e,["name"]);return i!=null&&p(t,["_url","name"],ju(n,i)),t}function BM(n,e){const t={},i=m(e,["name"]);return i!=null&&p(t,["_url","name"],ju(n,i)),t}function GM(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=m(n,["name"]);i!=null&&p(e,["name"],i);const s=m(n,["done"]);s!=null&&p(e,["done"],s);const a=m(n,["error"]);return a!=null&&p(e,["error"],a),e}function zM(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=m(n,["name"]);i!=null&&p(e,["name"],i);const s=m(n,["done"]);s!=null&&p(e,["done"],s);const a=m(n,["error"]);return a!=null&&p(e,["error"],a),e}function HM(n,e){const t={},i=m(e,["contents"]);if(i!=null){let a=Uv(n,i);Array.isArray(a)&&(a=a.map(l=>l)),p(t,["requests[]","request","content"],a)}const s=m(e,["config"]);return s!=null&&(p(t,["_self"],$M(s,t)),B2(t,{"requests[].*":"requests[].request.*"})),t}function $M(n,e){const t={},i=m(n,["taskType"]);e!==void 0&&i!=null&&p(e,["requests[]","taskType"],i);const s=m(n,["title"]);e!==void 0&&s!=null&&p(e,["requests[]","title"],s);const a=m(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&p(e,["requests[]","outputDimensionality"],a),m(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function jM(n,e){const t={},i=m(e,["fileName"]);i!=null&&p(t,["file_name"],i);const s=m(e,["inlinedRequests"]);return s!=null&&p(t,["requests"],HM(n,s)),t}function KM(n){const e={};if(m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=m(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=m(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function YM(n){const e={},t=m(n,["id"]);t!=null&&p(e,["id"],t);const i=m(n,["args"]);i!=null&&p(e,["args"],i);const s=m(n,["name"]);if(s!=null&&p(e,["name"],s),m(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function JM(n){const e={},t=m(n,["mode"]);t!=null&&p(e,["mode"],t);const i=m(n,["allowedFunctionNames"]);if(i!=null&&p(e,["allowedFunctionNames"],i),m(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function WM(n,e,t){const i={},s=m(e,["systemInstruction"]);t!==void 0&&s!=null&&p(t,["systemInstruction"],hb(Hn(s)));const a=m(e,["temperature"]);a!=null&&p(i,["temperature"],a);const l=m(e,["topP"]);l!=null&&p(i,["topP"],l);const c=m(e,["topK"]);c!=null&&p(i,["topK"],c);const f=m(e,["candidateCount"]);f!=null&&p(i,["candidateCount"],f);const h=m(e,["maxOutputTokens"]);h!=null&&p(i,["maxOutputTokens"],h);const _=m(e,["stopSequences"]);_!=null&&p(i,["stopSequences"],_);const E=m(e,["responseLogprobs"]);E!=null&&p(i,["responseLogprobs"],E);const I=m(e,["logprobs"]);I!=null&&p(i,["logprobs"],I);const x=m(e,["presencePenalty"]);x!=null&&p(i,["presencePenalty"],x);const k=m(e,["frequencyPenalty"]);k!=null&&p(i,["frequencyPenalty"],k);const V=m(e,["seed"]);V!=null&&p(i,["seed"],V);const B=m(e,["responseMimeType"]);B!=null&&p(i,["responseMimeType"],B);const z=m(e,["responseSchema"]);z!=null&&p(i,["responseSchema"],Fv(z));const G=m(e,["responseJsonSchema"]);if(G!=null&&p(i,["responseJsonSchema"],G),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const J=m(e,["safetySettings"]);if(t!==void 0&&J!=null){let L=J;Array.isArray(L)&&(L=L.map(M=>fk(M))),p(t,["safetySettings"],L)}const se=m(e,["tools"]);if(t!==void 0&&se!=null){let L=$u(se);Array.isArray(L)&&(L=L.map(M=>mk(Hu(M)))),p(t,["tools"],L)}const de=m(e,["toolConfig"]);if(t!==void 0&&de!=null&&p(t,["toolConfig"],hk(de)),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const le=m(e,["cachedContent"]);t!==void 0&&le!=null&&p(t,["cachedContent"],xs(n,le));const N=m(e,["responseModalities"]);N!=null&&p(i,["responseModalities"],N);const P=m(e,["mediaResolution"]);P!=null&&p(i,["mediaResolution"],P);const R=m(e,["speechConfig"]);if(R!=null&&p(i,["speechConfig"],qv(R)),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const D=m(e,["thinkingConfig"]);D!=null&&p(i,["thinkingConfig"],D);const O=m(e,["imageConfig"]);return O!=null&&p(i,["imageConfig"],nk(O)),i}function QM(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=m(n,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(h=>MM(h))),p(e,["candidates"],f)}const s=m(n,["modelVersion"]);s!=null&&p(e,["modelVersion"],s);const a=m(n,["promptFeedback"]);a!=null&&p(e,["promptFeedback"],a);const l=m(n,["responseId"]);l!=null&&p(e,["responseId"],l);const c=m(n,["usageMetadata"]);return c!=null&&p(e,["usageMetadata"],c),e}function XM(n,e){const t={},i=m(e,["name"]);return i!=null&&p(t,["_url","name"],ju(n,i)),t}function ZM(n,e){const t={},i=m(e,["name"]);return i!=null&&p(t,["_url","name"],ju(n,i)),t}function ek(n){const e={};if(m(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=m(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function tk(n){const e={};if(m(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=m(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function nk(n){const e={},t=m(n,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);const i=m(n,["imageSize"]);if(i!=null&&p(e,["imageSize"],i),m(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(m(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function ik(n,e){const t={},i=m(e,["model"]);i!=null&&p(t,["request","model"],dt(n,i));const s=m(e,["contents"]);if(s!=null){let c=zi(s);Array.isArray(c)&&(c=c.map(f=>hb(f))),p(t,["request","contents"],c)}const a=m(e,["metadata"]);a!=null&&p(t,["metadata"],a);const l=m(e,["config"]);return l!=null&&p(t,["request","generationConfig"],WM(n,l,m(t,["request"],{}))),t}function rk(n){const e={},t=m(n,["response"]);t!=null&&p(e,["response"],QM(t));const i=m(n,["error"]);return i!=null&&p(e,["error"],i),e}function sk(n,e){const t={},i=m(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const s=m(n,["pageToken"]);if(e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),m(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function ok(n,e){const t={},i=m(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const s=m(n,["pageToken"]);e!==void 0&&s!=null&&p(e,["_query","pageToken"],s);const a=m(n,["filter"]);return e!==void 0&&a!=null&&p(e,["_query","filter"],a),t}function ak(n){const e={},t=m(n,["config"]);return t!=null&&sk(t,e),e}function lk(n){const e={},t=m(n,["config"]);return t!=null&&ok(t,e),e}function uk(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=m(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const s=m(n,["operations"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>Im(l))),p(e,["batchJobs"],a)}return e}function ck(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=m(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const s=m(n,["batchPredictionJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>U_(l))),p(e,["batchJobs"],a)}return e}function dk(n){const e={},t=m(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=m(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const s=m(n,["executableCode"]);s!=null&&p(e,["executableCode"],s);const a=m(n,["fileData"]);a!=null&&p(e,["fileData"],KM(a));const l=m(n,["functionCall"]);l!=null&&p(e,["functionCall"],YM(l));const c=m(n,["functionResponse"]);c!=null&&p(e,["functionResponse"],c);const f=m(n,["inlineData"]);f!=null&&p(e,["inlineData"],NM(f));const h=m(n,["text"]);h!=null&&p(e,["text"],h);const _=m(n,["thought"]);_!=null&&p(e,["thought"],_);const E=m(n,["thoughtSignature"]);E!=null&&p(e,["thoughtSignature"],E);const I=m(n,["videoMetadata"]);return I!=null&&p(e,["videoMetadata"],I),e}function fk(n){const e={},t=m(n,["category"]);if(t!=null&&p(e,["category"],t),m(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=m(n,["threshold"]);return i!=null&&p(e,["threshold"],i),e}function hk(n){const e={},t=m(n,["functionCallingConfig"]);t!=null&&p(e,["functionCallingConfig"],JM(t));const i=m(n,["retrievalConfig"]);return i!=null&&p(e,["retrievalConfig"],i),e}function mk(n){const e={},t=m(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(E=>E)),p(e,["functionDeclarations"],_)}if(m(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(n,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const s=m(n,["computerUse"]);s!=null&&p(e,["computerUse"],s);const a=m(n,["fileSearch"]);a!=null&&p(e,["fileSearch"],a);const l=m(n,["codeExecution"]);if(l!=null&&p(e,["codeExecution"],l),m(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=m(n,["googleMaps"]);c!=null&&p(e,["googleMaps"],ek(c));const f=m(n,["googleSearch"]);f!=null&&p(e,["googleSearch"],tk(f));const h=m(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Es;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(Es||(Es={}));class Qa{constructor(e,t,i,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,s)}init(e,t,i){var s,a;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!i||Object.keys(i).length===0?l={config:{}}:typeof i=="object"?l=Object.assign({},i):l=i,l.config&&(l.config.pageToken=t.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(a=(s=l.config)===null||s===void 0?void 0:s.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pk extends As{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)},this.list=async(t={})=>new Qa(Es.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=_A(this.apiClient,e),i=t._url,s=Ie("{model}:batchGenerateContent",i),c=t.batch.inputConfig.requests,f=c.requests,h=[];for(const _ of f){const E=Object.assign({},_);if(E.systemInstruction){const I=E.systemInstruction;delete E.systemInstruction;const x=E.request;x.systemInstruction=I,E.request=x}h.push(E)}return c.requests=h,delete t.config,delete t._url,delete t._query,{path:s,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const i=t?Object.assign({},t):{},s=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${s}`),i.dest===void 0){const a=this.getGcsUri(e),l=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${s}`;else if(l)i.dest=`${l}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,s,a;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=OM(this.apiClient,e);return c=Ie("batchPredictionJobs",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),l.then(_=>U_(_))}else{const h=_A(this.apiClient,e);return c=Ie("{model}:batchGenerateContent",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),l.then(_=>Im(_))}}async createEmbeddingsInternal(e){var t,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=FM(this.apiClient,e);return a=Ie("{model}:asyncBatchEmbedContent",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Im(f))}}async get(e){var t,i,s,a;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=ZM(this.apiClient,e);return c=Ie("batchPredictionJobs/{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),l.then(_=>U_(_))}else{const h=XM(this.apiClient,e);return c=Ie("batches/{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),l.then(_=>Im(_))}}async cancel(e){var t,i,s,a;let l="",c={};if(this.apiClient.isVertexAI()){const f=DM(this.apiClient,e);l=Ie("batchPredictionJobs/{name}:cancel",f._url),c=f._query,delete f._url,delete f._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const f=PM(this.apiClient,e);l=Ie("batches/{name}:cancel",f._url),c=f._query,delete f._url,delete f._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var t,i,s,a;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=lk(e);return c=Ie("batchPredictionJobs",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const I=E;return I.sdkHttpResponse={headers:_.headers},I})),l.then(_=>{const E=ck(_),I=new mA;return Object.assign(I,E),I})}else{const h=ak(e);return c=Ie("batches",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const I=E;return I.sdkHttpResponse={headers:_.headers},I})),l.then(_=>{const E=uk(_),I=new mA;return Object.assign(I,E),I})}}async delete(e){var t,i,s,a;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=BM(this.apiClient,e);return c=Ie("batchPredictionJobs/{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const I=E;return I.sdkHttpResponse={headers:_.headers},I})),l.then(_=>zM(_))}else{const h=qM(this.apiClient,e);return c=Ie("batches/{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const I=E;return I.sdkHttpResponse={headers:_.headers},I})),l.then(_=>GM(_))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gk(n){const e={},t=m(n,["data"]);if(t!=null&&p(e,["data"],t),m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function vA(n){const e={},t=m(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>Fk(a))),p(e,["parts"],s)}const i=m(n,["role"]);return i!=null&&p(e,["role"],i),e}function yk(n,e){const t={},i=m(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const s=m(n,["expireTime"]);e!==void 0&&s!=null&&p(e,["expireTime"],s);const a=m(n,["displayName"]);e!==void 0&&a!=null&&p(e,["displayName"],a);const l=m(n,["contents"]);if(e!==void 0&&l!=null){let _=zi(l);Array.isArray(_)&&(_=_.map(E=>vA(E))),p(e,["contents"],_)}const c=m(n,["systemInstruction"]);e!==void 0&&c!=null&&p(e,["systemInstruction"],vA(Hn(c)));const f=m(n,["tools"]);if(e!==void 0&&f!=null){let _=f;Array.isArray(_)&&(_=_.map(E=>Bk(E))),p(e,["tools"],_)}const h=m(n,["toolConfig"]);if(e!==void 0&&h!=null&&p(e,["toolConfig"],qk(h)),m(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function _k(n,e){const t={},i=m(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const s=m(n,["expireTime"]);e!==void 0&&s!=null&&p(e,["expireTime"],s);const a=m(n,["displayName"]);e!==void 0&&a!=null&&p(e,["displayName"],a);const l=m(n,["contents"]);if(e!==void 0&&l!=null){let E=zi(l);Array.isArray(E)&&(E=E.map(I=>I)),p(e,["contents"],E)}const c=m(n,["systemInstruction"]);e!==void 0&&c!=null&&p(e,["systemInstruction"],Hn(c));const f=m(n,["tools"]);if(e!==void 0&&f!=null){let E=f;Array.isArray(E)&&(E=E.map(I=>Gk(I))),p(e,["tools"],E)}const h=m(n,["toolConfig"]);e!==void 0&&h!=null&&p(e,["toolConfig"],h);const _=m(n,["kmsKeyName"]);return e!==void 0&&_!=null&&p(e,["encryption_spec","kmsKeyName"],_),t}function vk(n,e){const t={},i=m(e,["model"]);i!=null&&p(t,["model"],tb(n,i));const s=m(e,["config"]);return s!=null&&yk(s,t),t}function Ek(n,e){const t={},i=m(e,["model"]);i!=null&&p(t,["model"],tb(n,i));const s=m(e,["config"]);return s!=null&&_k(s,t),t}function Tk(n,e){const t={},i=m(e,["name"]);return i!=null&&p(t,["_url","name"],xs(n,i)),t}function Ik(n,e){const t={},i=m(e,["name"]);return i!=null&&p(t,["_url","name"],xs(n,i)),t}function wk(n){const e={},t=m(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function Sk(n){const e={},t=m(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function Ak(n){const e={};if(m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=m(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=m(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function xk(n){const e={},t=m(n,["id"]);t!=null&&p(e,["id"],t);const i=m(n,["args"]);i!=null&&p(e,["args"],i);const s=m(n,["name"]);if(s!=null&&p(e,["name"],s),m(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Ck(n){const e={},t=m(n,["mode"]);t!=null&&p(e,["mode"],t);const i=m(n,["allowedFunctionNames"]);if(i!=null&&p(e,["allowedFunctionNames"],i),m(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function bk(n){const e={};if(m(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=m(n,["description"]);t!=null&&p(e,["description"],t);const i=m(n,["name"]);i!=null&&p(e,["name"],i);const s=m(n,["parameters"]);s!=null&&p(e,["parameters"],s);const a=m(n,["parametersJsonSchema"]);a!=null&&p(e,["parametersJsonSchema"],a);const l=m(n,["response"]);l!=null&&p(e,["response"],l);const c=m(n,["responseJsonSchema"]);return c!=null&&p(e,["responseJsonSchema"],c),e}function Rk(n,e){const t={},i=m(e,["name"]);return i!=null&&p(t,["_url","name"],xs(n,i)),t}function Nk(n,e){const t={},i=m(e,["name"]);return i!=null&&p(t,["_url","name"],xs(n,i)),t}function Pk(n){const e={};if(m(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=m(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function Dk(n){const e={};if(m(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=m(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function Mk(n,e){const t={},i=m(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const s=m(n,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),t}function kk(n,e){const t={},i=m(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const s=m(n,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),t}function Vk(n){const e={},t=m(n,["config"]);return t!=null&&Mk(t,e),e}function Lk(n){const e={},t=m(n,["config"]);return t!=null&&kk(t,e),e}function Ok(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=m(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const s=m(n,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),p(e,["cachedContents"],a)}return e}function Uk(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=m(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const s=m(n,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),p(e,["cachedContents"],a)}return e}function Fk(n){const e={},t=m(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=m(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const s=m(n,["executableCode"]);s!=null&&p(e,["executableCode"],s);const a=m(n,["fileData"]);a!=null&&p(e,["fileData"],Ak(a));const l=m(n,["functionCall"]);l!=null&&p(e,["functionCall"],xk(l));const c=m(n,["functionResponse"]);c!=null&&p(e,["functionResponse"],c);const f=m(n,["inlineData"]);f!=null&&p(e,["inlineData"],gk(f));const h=m(n,["text"]);h!=null&&p(e,["text"],h);const _=m(n,["thought"]);_!=null&&p(e,["thought"],_);const E=m(n,["thoughtSignature"]);E!=null&&p(e,["thoughtSignature"],E);const I=m(n,["videoMetadata"]);return I!=null&&p(e,["videoMetadata"],I),e}function qk(n){const e={},t=m(n,["functionCallingConfig"]);t!=null&&p(e,["functionCallingConfig"],Ck(t));const i=m(n,["retrievalConfig"]);return i!=null&&p(e,["retrievalConfig"],i),e}function Bk(n){const e={},t=m(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(E=>E)),p(e,["functionDeclarations"],_)}if(m(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(n,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const s=m(n,["computerUse"]);s!=null&&p(e,["computerUse"],s);const a=m(n,["fileSearch"]);a!=null&&p(e,["fileSearch"],a);const l=m(n,["codeExecution"]);if(l!=null&&p(e,["codeExecution"],l),m(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=m(n,["googleMaps"]);c!=null&&p(e,["googleMaps"],Pk(c));const f=m(n,["googleSearch"]);f!=null&&p(e,["googleSearch"],Dk(f));const h=m(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function Gk(n){const e={},t=m(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(I=>bk(I))),p(e,["functionDeclarations"],E)}const i=m(n,["retrieval"]);i!=null&&p(e,["retrieval"],i);const s=m(n,["googleSearchRetrieval"]);s!=null&&p(e,["googleSearchRetrieval"],s);const a=m(n,["computerUse"]);if(a!=null&&p(e,["computerUse"],a),m(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=m(n,["codeExecution"]);l!=null&&p(e,["codeExecution"],l);const c=m(n,["enterpriseWebSearch"]);c!=null&&p(e,["enterpriseWebSearch"],c);const f=m(n,["googleMaps"]);f!=null&&p(e,["googleMaps"],f);const h=m(n,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const _=m(n,["urlContext"]);return _!=null&&p(e,["urlContext"],_),e}function zk(n,e){const t={},i=m(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const s=m(n,["expireTime"]);return e!==void 0&&s!=null&&p(e,["expireTime"],s),t}function Hk(n,e){const t={},i=m(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const s=m(n,["expireTime"]);return e!==void 0&&s!=null&&p(e,["expireTime"],s),t}function $k(n,e){const t={},i=m(e,["name"]);i!=null&&p(t,["_url","name"],xs(n,i));const s=m(e,["config"]);return s!=null&&zk(s,t),t}function jk(n,e){const t={},i=m(e,["name"]);i!=null&&p(t,["_url","name"],xs(n,i));const s=m(e,["config"]);return s!=null&&Hk(s,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Kk extends As{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Qa(Es.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,s,a;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=Ek(this.apiClient,e);return c=Ie("cachedContents",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),l.then(_=>_)}else{const h=vk(this.apiClient,e);return c=Ie("cachedContents",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),l.then(_=>_)}}async get(e){var t,i,s,a;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=Nk(this.apiClient,e);return c=Ie("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),l.then(_=>_)}else{const h=Rk(this.apiClient,e);return c=Ie("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),l.then(_=>_)}}async delete(e){var t,i,s,a;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=Ik(this.apiClient,e);return c=Ie("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const I=E;return I.sdkHttpResponse={headers:_.headers},I})),l.then(_=>{const E=Sk(_),I=new fA;return Object.assign(I,E),I})}else{const h=Tk(this.apiClient,e);return c=Ie("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const I=E;return I.sdkHttpResponse={headers:_.headers},I})),l.then(_=>{const E=wk(_),I=new fA;return Object.assign(I,E),I})}}async update(e){var t,i,s,a;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=jk(this.apiClient,e);return c=Ie("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),l.then(_=>_)}else{const h=$k(this.apiClient,e);return c=Ie("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),l.then(_=>_)}}async listInternal(e){var t,i,s,a;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=Lk(e);return c=Ie("cachedContents",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const I=E;return I.sdkHttpResponse={headers:_.headers},I})),l.then(_=>{const E=Uk(_),I=new hA;return Object.assign(I,E),I})}else{const h=Vk(e);return c=Ie("cachedContents",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const I=E;return I.sdkHttpResponse={headers:_.headers},I})),l.then(_=>{const E=Ok(_),I=new hA;return Object.assign(I,E),I})}}}function EA(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Dt(n){return this instanceof Dt?(this.v=n,this):new Dt(n)}function lu(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",l),s[Symbol.asyncIterator]=function(){return this},s;function l(x){return function(k){return Promise.resolve(k).then(x,E)}}function c(x,k){i[x]&&(s[x]=function(V){return new Promise(function(B,z){a.push([x,V,B,z])>1||f(x,V)})},k&&(s[x]=k(s[x])))}function f(x,k){try{h(i[x](k))}catch(V){I(a[0][3],V)}}function h(x){x.value instanceof Dt?Promise.resolve(x.value.v).then(_,E):I(a[0][2],x)}function _(x){f("next",x)}function E(x){f("throw",x)}function I(x,k){x(k),a.shift(),a.length&&f(a[0][0],a[0][1])}}function Cd(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof EA=="function"?EA(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=n[a]&&function(l){return new Promise(function(c,f){l=n[a](l),s(c,f,l.done,l.value)})}}function s(a,l,c,f){Promise.resolve(f).then(function(h){a({value:h,done:c})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yk(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:mb(t)}function mb(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Jk(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function TA(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const s=[];let a=!0;for(;i<t&&n[i].role==="model";)s.push(n[i]),a&&!mb(n[i])&&(a=!1),i++;a?e.push(...s):e.pop()}return e}class Wk{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new Qk(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Qk{constructor(e,t,i,s={},a=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=s,this.history=a,this.sendPromise=Promise.resolve(),Jk(a)}async sendMessage(e){var t;await this.sendPromise;const i=Hn(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var a,l,c;const f=await s,h=(l=(a=f.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content,_=f.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let I=[];_!=null&&(I=(c=_.slice(E))!==null&&c!==void 0?c:[]);const x=h?[h]:[];this.recordHistory(i,x,I)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var t;await this.sendPromise;const i=Hn(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const a=await s;return this.processStreamResponse(a,i)}getHistory(e=!1){const t=e?TA(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var i,s;return lu(this,arguments,function*(){var l,c,f,h;const _=[];try{for(var E=!0,I=Cd(e),x;x=yield Dt(I.next()),l=x.done,!l;E=!0){h=x.value,E=!1;const k=h;if(Yk(k)){const V=(s=(i=k.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content;V!==void 0&&_.push(V)}yield yield Dt(k)}}catch(k){c={error:k}}finally{try{!E&&!l&&(f=I.return)&&(yield Dt(f.call(I)))}finally{if(c)throw c.error}}this.recordHistory(t,_)})}recordHistory(e,t,i){let s=[];t.length>0&&t.every(a=>a.role!==void 0)?s=t:s.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...TA(i)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ep extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Ep.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xk(n){const e={},t=m(n,["file"]);return t!=null&&p(e,["file"],t),e}function Zk(n){const e={},t=m(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function eV(n){const e={},t=m(n,["name"]);return t!=null&&p(e,["_url","file"],ab(t)),e}function tV(n){const e={},t=m(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function nV(n){const e={},t=m(n,["name"]);return t!=null&&p(e,["_url","file"],ab(t)),e}function iV(n,e){const t={},i=m(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const s=m(n,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),t}function rV(n){const e={},t=m(n,["config"]);return t!=null&&iV(t,e),e}function sV(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=m(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const s=m(n,["files"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),p(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oV extends As{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Qa(Es.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=rV(e);return a=Ie("files",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:f.headers},_})),s.then(f=>{const h=sV(f),_=new cM;return Object.assign(_,h),_})}}async createInternal(e){var t,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Xk(e);return a=Ie("upload/v1beta/files",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const h=Zk(f),_=new dM;return Object.assign(_,h),_})}}async get(e){var t,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=nV(e);return a=Ie("files/{file}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(e){var t,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=eV(e);return a=Ie("files/{file}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:f.headers},_})),s.then(f=>{const h=tV(f),_=new fM;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wm(n){const e={},t=m(n,["data"]);if(t!=null&&p(e,["data"],t),m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function aV(n){const e={},t=m(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>wV(a))),p(e,["parts"],s)}const i=m(n,["role"]);return i!=null&&p(e,["role"],i),e}function lV(n){const e={};if(m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=m(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=m(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function uV(n){const e={},t=m(n,["id"]);t!=null&&p(e,["id"],t);const i=m(n,["args"]);i!=null&&p(e,["args"],i);const s=m(n,["name"]);if(s!=null&&p(e,["name"],s),m(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function cV(n){const e={};if(m(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=m(n,["description"]);t!=null&&p(e,["description"],t);const i=m(n,["name"]);i!=null&&p(e,["name"],i);const s=m(n,["parameters"]);s!=null&&p(e,["parameters"],s);const a=m(n,["parametersJsonSchema"]);a!=null&&p(e,["parametersJsonSchema"],a);const l=m(n,["response"]);l!=null&&p(e,["response"],l);const c=m(n,["responseJsonSchema"]);return c!=null&&p(e,["responseJsonSchema"],c),e}function dV(n){const e={},t=m(n,["modelSelectionConfig"]);t!=null&&p(e,["modelConfig"],t);const i=m(n,["responseJsonSchema"]);i!=null&&p(e,["responseJsonSchema"],i);const s=m(n,["audioTimestamp"]);s!=null&&p(e,["audioTimestamp"],s);const a=m(n,["candidateCount"]);a!=null&&p(e,["candidateCount"],a);const l=m(n,["enableAffectiveDialog"]);l!=null&&p(e,["enableAffectiveDialog"],l);const c=m(n,["frequencyPenalty"]);c!=null&&p(e,["frequencyPenalty"],c);const f=m(n,["logprobs"]);f!=null&&p(e,["logprobs"],f);const h=m(n,["maxOutputTokens"]);h!=null&&p(e,["maxOutputTokens"],h);const _=m(n,["mediaResolution"]);_!=null&&p(e,["mediaResolution"],_);const E=m(n,["presencePenalty"]);E!=null&&p(e,["presencePenalty"],E);const I=m(n,["responseLogprobs"]);I!=null&&p(e,["responseLogprobs"],I);const x=m(n,["responseMimeType"]);x!=null&&p(e,["responseMimeType"],x);const k=m(n,["responseModalities"]);k!=null&&p(e,["responseModalities"],k);const V=m(n,["responseSchema"]);V!=null&&p(e,["responseSchema"],V);const B=m(n,["routingConfig"]);B!=null&&p(e,["routingConfig"],B);const z=m(n,["seed"]);z!=null&&p(e,["seed"],z);const G=m(n,["speechConfig"]);G!=null&&p(e,["speechConfig"],pb(G));const J=m(n,["stopSequences"]);J!=null&&p(e,["stopSequences"],J);const se=m(n,["temperature"]);se!=null&&p(e,["temperature"],se);const de=m(n,["thinkingConfig"]);de!=null&&p(e,["thinkingConfig"],de);const le=m(n,["topK"]);le!=null&&p(e,["topK"],le);const N=m(n,["topP"]);if(N!=null&&p(e,["topP"],N),m(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function fV(n){const e={};if(m(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=m(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function hV(n){const e={};if(m(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=m(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function mV(n,e){const t={},i=m(n,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],i);const s=m(n,["responseModalities"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","responseModalities"],s);const a=m(n,["temperature"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","temperature"],a);const l=m(n,["topP"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","topP"],l);const c=m(n,["topK"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","topK"],c);const f=m(n,["maxOutputTokens"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","maxOutputTokens"],f);const h=m(n,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const _=m(n,["seed"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","seed"],_);const E=m(n,["speechConfig"]);e!==void 0&&E!=null&&p(e,["setup","generationConfig","speechConfig"],Bv(E));const I=m(n,["thinkingConfig"]);e!==void 0&&I!=null&&p(e,["setup","generationConfig","thinkingConfig"],I);const x=m(n,["enableAffectiveDialog"]);e!==void 0&&x!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],x);const k=m(n,["systemInstruction"]);e!==void 0&&k!=null&&p(e,["setup","systemInstruction"],aV(Hn(k)));const V=m(n,["tools"]);if(e!==void 0&&V!=null){let le=$u(V);Array.isArray(le)&&(le=le.map(N=>AV(Hu(N)))),p(e,["setup","tools"],le)}const B=m(n,["sessionResumption"]);e!==void 0&&B!=null&&p(e,["setup","sessionResumption"],SV(B));const z=m(n,["inputAudioTranscription"]);e!==void 0&&z!=null&&p(e,["setup","inputAudioTranscription"],z);const G=m(n,["outputAudioTranscription"]);e!==void 0&&G!=null&&p(e,["setup","outputAudioTranscription"],G);const J=m(n,["realtimeInputConfig"]);e!==void 0&&J!=null&&p(e,["setup","realtimeInputConfig"],J);const se=m(n,["contextWindowCompression"]);e!==void 0&&se!=null&&p(e,["setup","contextWindowCompression"],se);const de=m(n,["proactivity"]);return e!==void 0&&de!=null&&p(e,["setup","proactivity"],de),t}function pV(n,e){const t={},i=m(n,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],dV(i));const s=m(n,["responseModalities"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","responseModalities"],s);const a=m(n,["temperature"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","temperature"],a);const l=m(n,["topP"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","topP"],l);const c=m(n,["topK"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","topK"],c);const f=m(n,["maxOutputTokens"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","maxOutputTokens"],f);const h=m(n,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const _=m(n,["seed"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","seed"],_);const E=m(n,["speechConfig"]);e!==void 0&&E!=null&&p(e,["setup","generationConfig","speechConfig"],pb(Bv(E)));const I=m(n,["thinkingConfig"]);e!==void 0&&I!=null&&p(e,["setup","generationConfig","thinkingConfig"],I);const x=m(n,["enableAffectiveDialog"]);e!==void 0&&x!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],x);const k=m(n,["systemInstruction"]);e!==void 0&&k!=null&&p(e,["setup","systemInstruction"],Hn(k));const V=m(n,["tools"]);if(e!==void 0&&V!=null){let le=$u(V);Array.isArray(le)&&(le=le.map(N=>xV(Hu(N)))),p(e,["setup","tools"],le)}const B=m(n,["sessionResumption"]);e!==void 0&&B!=null&&p(e,["setup","sessionResumption"],B);const z=m(n,["inputAudioTranscription"]);e!==void 0&&z!=null&&p(e,["setup","inputAudioTranscription"],z);const G=m(n,["outputAudioTranscription"]);e!==void 0&&G!=null&&p(e,["setup","outputAudioTranscription"],G);const J=m(n,["realtimeInputConfig"]);e!==void 0&&J!=null&&p(e,["setup","realtimeInputConfig"],J);const se=m(n,["contextWindowCompression"]);e!==void 0&&se!=null&&p(e,["setup","contextWindowCompression"],se);const de=m(n,["proactivity"]);return e!==void 0&&de!=null&&p(e,["setup","proactivity"],de),t}function gV(n,e){const t={},i=m(e,["model"]);i!=null&&p(t,["setup","model"],dt(n,i));const s=m(e,["config"]);return s!=null&&p(t,["config"],mV(s,t)),t}function yV(n,e){const t={},i=m(e,["model"]);i!=null&&p(t,["setup","model"],dt(n,i));const s=m(e,["config"]);return s!=null&&p(t,["config"],pV(s,t)),t}function _V(n){const e={},t=m(n,["musicGenerationConfig"]);return t!=null&&p(e,["musicGenerationConfig"],t),e}function vV(n){const e={},t=m(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>s)),p(e,["weightedPrompts"],i)}return e}function EV(n){const e={},t=m(n,["media"]);if(t!=null){let h=nb(t);Array.isArray(h)&&(h=h.map(_=>wm(_))),p(e,["mediaChunks"],h)}const i=m(n,["audio"]);i!=null&&p(e,["audio"],wm(rb(i)));const s=m(n,["audioStreamEnd"]);s!=null&&p(e,["audioStreamEnd"],s);const a=m(n,["video"]);a!=null&&p(e,["video"],wm(ib(a)));const l=m(n,["text"]);l!=null&&p(e,["text"],l);const c=m(n,["activityStart"]);c!=null&&p(e,["activityStart"],c);const f=m(n,["activityEnd"]);return f!=null&&p(e,["activityEnd"],f),e}function TV(n){const e={},t=m(n,["media"]);if(t!=null){let h=nb(t);Array.isArray(h)&&(h=h.map(_=>_)),p(e,["mediaChunks"],h)}const i=m(n,["audio"]);i!=null&&p(e,["audio"],rb(i));const s=m(n,["audioStreamEnd"]);s!=null&&p(e,["audioStreamEnd"],s);const a=m(n,["video"]);a!=null&&p(e,["video"],ib(a));const l=m(n,["text"]);l!=null&&p(e,["text"],l);const c=m(n,["activityStart"]);c!=null&&p(e,["activityStart"],c);const f=m(n,["activityEnd"]);return f!=null&&p(e,["activityEnd"],f),e}function IV(n){const e={},t=m(n,["setupComplete"]);t!=null&&p(e,["setupComplete"],t);const i=m(n,["serverContent"]);i!=null&&p(e,["serverContent"],i);const s=m(n,["toolCall"]);s!=null&&p(e,["toolCall"],s);const a=m(n,["toolCallCancellation"]);a!=null&&p(e,["toolCallCancellation"],a);const l=m(n,["usageMetadata"]);l!=null&&p(e,["usageMetadata"],CV(l));const c=m(n,["goAway"]);c!=null&&p(e,["goAway"],c);const f=m(n,["sessionResumptionUpdate"]);return f!=null&&p(e,["sessionResumptionUpdate"],f),e}function wV(n){const e={},t=m(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=m(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const s=m(n,["executableCode"]);s!=null&&p(e,["executableCode"],s);const a=m(n,["fileData"]);a!=null&&p(e,["fileData"],lV(a));const l=m(n,["functionCall"]);l!=null&&p(e,["functionCall"],uV(l));const c=m(n,["functionResponse"]);c!=null&&p(e,["functionResponse"],c);const f=m(n,["inlineData"]);f!=null&&p(e,["inlineData"],wm(f));const h=m(n,["text"]);h!=null&&p(e,["text"],h);const _=m(n,["thought"]);_!=null&&p(e,["thought"],_);const E=m(n,["thoughtSignature"]);E!=null&&p(e,["thoughtSignature"],E);const I=m(n,["videoMetadata"]);return I!=null&&p(e,["videoMetadata"],I),e}function SV(n){const e={},t=m(n,["handle"]);if(t!=null&&p(e,["handle"],t),m(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function pb(n){const e={},t=m(n,["languageCode"]);t!=null&&p(e,["languageCode"],t);const i=m(n,["voiceConfig"]);if(i!=null&&p(e,["voiceConfig"],i),m(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function AV(n){const e={},t=m(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(E=>E)),p(e,["functionDeclarations"],_)}if(m(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(n,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const s=m(n,["computerUse"]);s!=null&&p(e,["computerUse"],s);const a=m(n,["fileSearch"]);a!=null&&p(e,["fileSearch"],a);const l=m(n,["codeExecution"]);if(l!=null&&p(e,["codeExecution"],l),m(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=m(n,["googleMaps"]);c!=null&&p(e,["googleMaps"],fV(c));const f=m(n,["googleSearch"]);f!=null&&p(e,["googleSearch"],hV(f));const h=m(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function xV(n){const e={},t=m(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(I=>cV(I))),p(e,["functionDeclarations"],E)}const i=m(n,["retrieval"]);i!=null&&p(e,["retrieval"],i);const s=m(n,["googleSearchRetrieval"]);s!=null&&p(e,["googleSearchRetrieval"],s);const a=m(n,["computerUse"]);if(a!=null&&p(e,["computerUse"],a),m(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=m(n,["codeExecution"]);l!=null&&p(e,["codeExecution"],l);const c=m(n,["enterpriseWebSearch"]);c!=null&&p(e,["enterpriseWebSearch"],c);const f=m(n,["googleMaps"]);f!=null&&p(e,["googleMaps"],f);const h=m(n,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const _=m(n,["urlContext"]);return _!=null&&p(e,["urlContext"],_),e}function CV(n){const e={},t=m(n,["promptTokenCount"]);t!=null&&p(e,["promptTokenCount"],t);const i=m(n,["cachedContentTokenCount"]);i!=null&&p(e,["cachedContentTokenCount"],i);const s=m(n,["candidatesTokenCount"]);s!=null&&p(e,["responseTokenCount"],s);const a=m(n,["toolUsePromptTokenCount"]);a!=null&&p(e,["toolUsePromptTokenCount"],a);const l=m(n,["thoughtsTokenCount"]);l!=null&&p(e,["thoughtsTokenCount"],l);const c=m(n,["totalTokenCount"]);c!=null&&p(e,["totalTokenCount"],c);const f=m(n,["promptTokensDetails"]);if(f!=null){let x=f;Array.isArray(x)&&(x=x.map(k=>k)),p(e,["promptTokensDetails"],x)}const h=m(n,["cacheTokensDetails"]);if(h!=null){let x=h;Array.isArray(x)&&(x=x.map(k=>k)),p(e,["cacheTokensDetails"],x)}const _=m(n,["candidatesTokensDetails"]);if(_!=null){let x=_;Array.isArray(x)&&(x=x.map(k=>k)),p(e,["responseTokensDetails"],x)}const E=m(n,["toolUsePromptTokensDetails"]);if(E!=null){let x=E;Array.isArray(x)&&(x=x.map(k=>k)),p(e,["toolUsePromptTokensDetails"],x)}const I=m(n,["trafficType"]);return I!=null&&p(e,["trafficType"],I),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bV(n){const e={},t=m(n,["data"]);if(t!=null&&p(e,["data"],t),m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function RV(n){const e={},t=m(n,["content"]);t!=null&&p(e,["content"],t);const i=m(n,["citationMetadata"]);i!=null&&p(e,["citationMetadata"],NV(i));const s=m(n,["tokenCount"]);s!=null&&p(e,["tokenCount"],s);const a=m(n,["finishReason"]);a!=null&&p(e,["finishReason"],a);const l=m(n,["avgLogprobs"]);l!=null&&p(e,["avgLogprobs"],l);const c=m(n,["groundingMetadata"]);c!=null&&p(e,["groundingMetadata"],c);const f=m(n,["index"]);f!=null&&p(e,["index"],f);const h=m(n,["logprobsResult"]);h!=null&&p(e,["logprobsResult"],h);const _=m(n,["safetyRatings"]);if(_!=null){let I=_;Array.isArray(I)&&(I=I.map(x=>x)),p(e,["safetyRatings"],I)}const E=m(n,["urlContextMetadata"]);return E!=null&&p(e,["urlContextMetadata"],E),e}function NV(n){const e={},t=m(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>s)),p(e,["citations"],i)}return e}function PV(n,e){const t={},i=m(e,["model"]);i!=null&&p(t,["_url","model"],dt(n,i));const s=m(e,["contents"]);if(s!=null){let a=zi(s);Array.isArray(a)&&(a=a.map(l=>l)),p(t,["contents"],a)}return t}function DV(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=m(n,["tokensInfo"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),p(e,["tokensInfo"],s)}return e}function MV(n){const e={},t=m(n,["values"]);t!=null&&p(e,["values"],t);const i=m(n,["statistics"]);return i!=null&&p(e,["statistics"],kV(i)),e}function kV(n){const e={},t=m(n,["truncated"]);t!=null&&p(e,["truncated"],t);const i=m(n,["token_count"]);return i!=null&&p(e,["tokenCount"],i),e}function Tp(n){const e={},t=m(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>zL(a))),p(e,["parts"],s)}const i=m(n,["role"]);return i!=null&&p(e,["role"],i),e}function VV(n){const e={},t=m(n,["controlType"]);t!=null&&p(e,["controlType"],t);const i=m(n,["enableControlImageComputation"]);return i!=null&&p(e,["computeControl"],i),e}function LV(n){const e={};if(m(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(m(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(m(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function OV(n,e){const t={},i=m(n,["systemInstruction"]);e!==void 0&&i!=null&&p(e,["systemInstruction"],Hn(i));const s=m(n,["tools"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>Eb(c))),p(e,["tools"],l)}const a=m(n,["generationConfig"]);return e!==void 0&&a!=null&&p(e,["generationConfig"],bL(a)),t}function UV(n,e){const t={},i=m(e,["model"]);i!=null&&p(t,["_url","model"],dt(n,i));const s=m(e,["contents"]);if(s!=null){let l=zi(s);Array.isArray(l)&&(l=l.map(c=>Tp(c))),p(t,["contents"],l)}const a=m(e,["config"]);return a!=null&&LV(a),t}function FV(n,e){const t={},i=m(e,["model"]);i!=null&&p(t,["_url","model"],dt(n,i));const s=m(e,["contents"]);if(s!=null){let l=zi(s);Array.isArray(l)&&(l=l.map(c=>c)),p(t,["contents"],l)}const a=m(e,["config"]);return a!=null&&OV(a,t),t}function qV(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=m(n,["totalTokens"]);i!=null&&p(e,["totalTokens"],i);const s=m(n,["cachedContentTokenCount"]);return s!=null&&p(e,["cachedContentTokenCount"],s),e}function BV(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=m(n,["totalTokens"]);return i!=null&&p(e,["totalTokens"],i),e}function GV(n,e){const t={},i=m(e,["model"]);return i!=null&&p(t,["_url","name"],dt(n,i)),t}function zV(n,e){const t={},i=m(e,["model"]);return i!=null&&p(t,["_url","name"],dt(n,i)),t}function HV(n){const e={},t=m(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function $V(n){const e={},t=m(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function jV(n,e){const t={},i=m(n,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const s=m(n,["negativePrompt"]);e!==void 0&&s!=null&&p(e,["parameters","negativePrompt"],s);const a=m(n,["numberOfImages"]);e!==void 0&&a!=null&&p(e,["parameters","sampleCount"],a);const l=m(n,["aspectRatio"]);e!==void 0&&l!=null&&p(e,["parameters","aspectRatio"],l);const c=m(n,["guidanceScale"]);e!==void 0&&c!=null&&p(e,["parameters","guidanceScale"],c);const f=m(n,["seed"]);e!==void 0&&f!=null&&p(e,["parameters","seed"],f);const h=m(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&p(e,["parameters","safetySetting"],h);const _=m(n,["personGeneration"]);e!==void 0&&_!=null&&p(e,["parameters","personGeneration"],_);const E=m(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&p(e,["parameters","includeSafetyAttributes"],E);const I=m(n,["includeRaiReason"]);e!==void 0&&I!=null&&p(e,["parameters","includeRaiReason"],I);const x=m(n,["language"]);e!==void 0&&x!=null&&p(e,["parameters","language"],x);const k=m(n,["outputMimeType"]);e!==void 0&&k!=null&&p(e,["parameters","outputOptions","mimeType"],k);const V=m(n,["outputCompressionQuality"]);e!==void 0&&V!=null&&p(e,["parameters","outputOptions","compressionQuality"],V);const B=m(n,["addWatermark"]);e!==void 0&&B!=null&&p(e,["parameters","addWatermark"],B);const z=m(n,["labels"]);e!==void 0&&z!=null&&p(e,["labels"],z);const G=m(n,["editMode"]);e!==void 0&&G!=null&&p(e,["parameters","editMode"],G);const J=m(n,["baseSteps"]);return e!==void 0&&J!=null&&p(e,["parameters","editConfig","baseSteps"],J),t}function KV(n,e){const t={},i=m(e,["model"]);i!=null&&p(t,["_url","model"],dt(n,i));const s=m(e,["prompt"]);s!=null&&p(t,["instances[0]","prompt"],s);const a=m(e,["referenceImages"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(f=>JL(f))),p(t,["instances[0]","referenceImages"],c)}const l=m(e,["config"]);return l!=null&&jV(l,t),t}function YV(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=m(n,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>Ip(a))),p(e,["generatedImages"],s)}return e}function JV(n,e){const t={},i=m(n,["taskType"]);e!==void 0&&i!=null&&p(e,["requests[]","taskType"],i);const s=m(n,["title"]);e!==void 0&&s!=null&&p(e,["requests[]","title"],s);const a=m(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&p(e,["requests[]","outputDimensionality"],a),m(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(m(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function WV(n,e){const t={},i=m(n,["taskType"]);e!==void 0&&i!=null&&p(e,["instances[]","task_type"],i);const s=m(n,["title"]);e!==void 0&&s!=null&&p(e,["instances[]","title"],s);const a=m(n,["outputDimensionality"]);e!==void 0&&a!=null&&p(e,["parameters","outputDimensionality"],a);const l=m(n,["mimeType"]);e!==void 0&&l!=null&&p(e,["instances[]","mimeType"],l);const c=m(n,["autoTruncate"]);return e!==void 0&&c!=null&&p(e,["parameters","autoTruncate"],c),t}function QV(n,e){const t={},i=m(e,["model"]);i!=null&&p(t,["_url","model"],dt(n,i));const s=m(e,["contents"]);if(s!=null){let c=Uv(n,s);Array.isArray(c)&&(c=c.map(f=>f)),p(t,["requests[]","content"],c)}const a=m(e,["config"]);a!=null&&JV(a,t);const l=m(e,["model"]);return l!==void 0&&p(t,["requests[]","model"],dt(n,l)),t}function XV(n,e){const t={},i=m(e,["model"]);i!=null&&p(t,["_url","model"],dt(n,i));const s=m(e,["contents"]);if(s!=null){let l=Uv(n,s);Array.isArray(l)&&(l=l.map(c=>c)),p(t,["instances[]","content"],l)}const a=m(e,["config"]);return a!=null&&WV(a,t),t}function ZV(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=m(n,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),p(e,["embeddings"],a)}const s=m(n,["metadata"]);return s!=null&&p(e,["metadata"],s),e}function eL(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=m(n,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>MV(l))),p(e,["embeddings"],a)}const s=m(n,["metadata"]);return s!=null&&p(e,["metadata"],s),e}function tL(n){const e={},t=m(n,["endpoint"]);t!=null&&p(e,["name"],t);const i=m(n,["deployedModelId"]);return i!=null&&p(e,["deployedModelId"],i),e}function nL(n){const e={};if(m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=m(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=m(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function iL(n){const e={},t=m(n,["id"]);t!=null&&p(e,["id"],t);const i=m(n,["args"]);i!=null&&p(e,["args"],i);const s=m(n,["name"]);if(s!=null&&p(e,["name"],s),m(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function rL(n){const e={},t=m(n,["mode"]);t!=null&&p(e,["mode"],t);const i=m(n,["allowedFunctionNames"]);if(i!=null&&p(e,["allowedFunctionNames"],i),m(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function sL(n){const e={};if(m(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=m(n,["description"]);t!=null&&p(e,["description"],t);const i=m(n,["name"]);i!=null&&p(e,["name"],i);const s=m(n,["parameters"]);s!=null&&p(e,["parameters"],s);const a=m(n,["parametersJsonSchema"]);a!=null&&p(e,["parametersJsonSchema"],a);const l=m(n,["response"]);l!=null&&p(e,["response"],l);const c=m(n,["responseJsonSchema"]);return c!=null&&p(e,["responseJsonSchema"],c),e}function oL(n,e,t){const i={},s=m(e,["systemInstruction"]);t!==void 0&&s!=null&&p(t,["systemInstruction"],Tp(Hn(s)));const a=m(e,["temperature"]);a!=null&&p(i,["temperature"],a);const l=m(e,["topP"]);l!=null&&p(i,["topP"],l);const c=m(e,["topK"]);c!=null&&p(i,["topK"],c);const f=m(e,["candidateCount"]);f!=null&&p(i,["candidateCount"],f);const h=m(e,["maxOutputTokens"]);h!=null&&p(i,["maxOutputTokens"],h);const _=m(e,["stopSequences"]);_!=null&&p(i,["stopSequences"],_);const E=m(e,["responseLogprobs"]);E!=null&&p(i,["responseLogprobs"],E);const I=m(e,["logprobs"]);I!=null&&p(i,["logprobs"],I);const x=m(e,["presencePenalty"]);x!=null&&p(i,["presencePenalty"],x);const k=m(e,["frequencyPenalty"]);k!=null&&p(i,["frequencyPenalty"],k);const V=m(e,["seed"]);V!=null&&p(i,["seed"],V);const B=m(e,["responseMimeType"]);B!=null&&p(i,["responseMimeType"],B);const z=m(e,["responseSchema"]);z!=null&&p(i,["responseSchema"],Fv(z));const G=m(e,["responseJsonSchema"]);if(G!=null&&p(i,["responseJsonSchema"],G),m(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(m(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const J=m(e,["safetySettings"]);if(t!==void 0&&J!=null){let L=J;Array.isArray(L)&&(L=L.map(M=>WL(M))),p(t,["safetySettings"],L)}const se=m(e,["tools"]);if(t!==void 0&&se!=null){let L=$u(se);Array.isArray(L)&&(L=L.map(M=>i4(Hu(M)))),p(t,["tools"],L)}const de=m(e,["toolConfig"]);if(t!==void 0&&de!=null&&p(t,["toolConfig"],n4(de)),m(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const le=m(e,["cachedContent"]);t!==void 0&&le!=null&&p(t,["cachedContent"],xs(n,le));const N=m(e,["responseModalities"]);N!=null&&p(i,["responseModalities"],N);const P=m(e,["mediaResolution"]);P!=null&&p(i,["mediaResolution"],P);const R=m(e,["speechConfig"]);if(R!=null&&p(i,["speechConfig"],qv(R)),m(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const D=m(e,["thinkingConfig"]);D!=null&&p(i,["thinkingConfig"],D);const O=m(e,["imageConfig"]);return O!=null&&p(i,["imageConfig"],ML(O)),i}function aL(n,e,t){const i={},s=m(e,["systemInstruction"]);t!==void 0&&s!=null&&p(t,["systemInstruction"],Hn(s));const a=m(e,["temperature"]);a!=null&&p(i,["temperature"],a);const l=m(e,["topP"]);l!=null&&p(i,["topP"],l);const c=m(e,["topK"]);c!=null&&p(i,["topK"],c);const f=m(e,["candidateCount"]);f!=null&&p(i,["candidateCount"],f);const h=m(e,["maxOutputTokens"]);h!=null&&p(i,["maxOutputTokens"],h);const _=m(e,["stopSequences"]);_!=null&&p(i,["stopSequences"],_);const E=m(e,["responseLogprobs"]);E!=null&&p(i,["responseLogprobs"],E);const I=m(e,["logprobs"]);I!=null&&p(i,["logprobs"],I);const x=m(e,["presencePenalty"]);x!=null&&p(i,["presencePenalty"],x);const k=m(e,["frequencyPenalty"]);k!=null&&p(i,["frequencyPenalty"],k);const V=m(e,["seed"]);V!=null&&p(i,["seed"],V);const B=m(e,["responseMimeType"]);B!=null&&p(i,["responseMimeType"],B);const z=m(e,["responseSchema"]);z!=null&&p(i,["responseSchema"],Fv(z));const G=m(e,["responseJsonSchema"]);G!=null&&p(i,["responseJsonSchema"],G);const J=m(e,["routingConfig"]);J!=null&&p(i,["routingConfig"],J);const se=m(e,["modelSelectionConfig"]);se!=null&&p(i,["modelConfig"],se);const de=m(e,["safetySettings"]);if(t!==void 0&&de!=null){let Z=de;Array.isArray(Z)&&(Z=Z.map(ne=>ne)),p(t,["safetySettings"],Z)}const le=m(e,["tools"]);if(t!==void 0&&le!=null){let Z=$u(le);Array.isArray(Z)&&(Z=Z.map(ne=>Eb(Hu(ne)))),p(t,["tools"],Z)}const N=m(e,["toolConfig"]);t!==void 0&&N!=null&&p(t,["toolConfig"],N);const P=m(e,["labels"]);t!==void 0&&P!=null&&p(t,["labels"],P);const R=m(e,["cachedContent"]);t!==void 0&&R!=null&&p(t,["cachedContent"],xs(n,R));const D=m(e,["responseModalities"]);D!=null&&p(i,["responseModalities"],D);const O=m(e,["mediaResolution"]);O!=null&&p(i,["mediaResolution"],O);const L=m(e,["speechConfig"]);L!=null&&p(i,["speechConfig"],vb(qv(L)));const M=m(e,["audioTimestamp"]);M!=null&&p(i,["audioTimestamp"],M);const De=m(e,["thinkingConfig"]);De!=null&&p(i,["thinkingConfig"],De);const We=m(e,["imageConfig"]);return We!=null&&p(i,["imageConfig"],kL(We)),i}function IA(n,e){const t={},i=m(e,["model"]);i!=null&&p(t,["_url","model"],dt(n,i));const s=m(e,["contents"]);if(s!=null){let l=zi(s);Array.isArray(l)&&(l=l.map(c=>Tp(c))),p(t,["contents"],l)}const a=m(e,["config"]);return a!=null&&p(t,["generationConfig"],oL(n,a,t)),t}function wA(n,e){const t={},i=m(e,["model"]);i!=null&&p(t,["_url","model"],dt(n,i));const s=m(e,["contents"]);if(s!=null){let l=zi(s);Array.isArray(l)&&(l=l.map(c=>c)),p(t,["contents"],l)}const a=m(e,["config"]);return a!=null&&p(t,["generationConfig"],aL(n,a,t)),t}function SA(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=m(n,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(h=>RV(h))),p(e,["candidates"],f)}const s=m(n,["modelVersion"]);s!=null&&p(e,["modelVersion"],s);const a=m(n,["promptFeedback"]);a!=null&&p(e,["promptFeedback"],a);const l=m(n,["responseId"]);l!=null&&p(e,["responseId"],l);const c=m(n,["usageMetadata"]);return c!=null&&p(e,["usageMetadata"],c),e}function AA(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=m(n,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(_=>_)),p(e,["candidates"],h)}const s=m(n,["createTime"]);s!=null&&p(e,["createTime"],s);const a=m(n,["modelVersion"]);a!=null&&p(e,["modelVersion"],a);const l=m(n,["promptFeedback"]);l!=null&&p(e,["promptFeedback"],l);const c=m(n,["responseId"]);c!=null&&p(e,["responseId"],c);const f=m(n,["usageMetadata"]);return f!=null&&p(e,["usageMetadata"],f),e}function lL(n,e){const t={};if(m(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=m(n,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const s=m(n,["aspectRatio"]);e!==void 0&&s!=null&&p(e,["parameters","aspectRatio"],s);const a=m(n,["guidanceScale"]);if(e!==void 0&&a!=null&&p(e,["parameters","guidanceScale"],a),m(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=m(n,["safetyFilterLevel"]);e!==void 0&&l!=null&&p(e,["parameters","safetySetting"],l);const c=m(n,["personGeneration"]);e!==void 0&&c!=null&&p(e,["parameters","personGeneration"],c);const f=m(n,["includeSafetyAttributes"]);e!==void 0&&f!=null&&p(e,["parameters","includeSafetyAttributes"],f);const h=m(n,["includeRaiReason"]);e!==void 0&&h!=null&&p(e,["parameters","includeRaiReason"],h);const _=m(n,["language"]);e!==void 0&&_!=null&&p(e,["parameters","language"],_);const E=m(n,["outputMimeType"]);e!==void 0&&E!=null&&p(e,["parameters","outputOptions","mimeType"],E);const I=m(n,["outputCompressionQuality"]);if(e!==void 0&&I!=null&&p(e,["parameters","outputOptions","compressionQuality"],I),m(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(m(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const x=m(n,["imageSize"]);if(e!==void 0&&x!=null&&p(e,["parameters","sampleImageSize"],x),m(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function uL(n,e){const t={},i=m(n,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const s=m(n,["negativePrompt"]);e!==void 0&&s!=null&&p(e,["parameters","negativePrompt"],s);const a=m(n,["numberOfImages"]);e!==void 0&&a!=null&&p(e,["parameters","sampleCount"],a);const l=m(n,["aspectRatio"]);e!==void 0&&l!=null&&p(e,["parameters","aspectRatio"],l);const c=m(n,["guidanceScale"]);e!==void 0&&c!=null&&p(e,["parameters","guidanceScale"],c);const f=m(n,["seed"]);e!==void 0&&f!=null&&p(e,["parameters","seed"],f);const h=m(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&p(e,["parameters","safetySetting"],h);const _=m(n,["personGeneration"]);e!==void 0&&_!=null&&p(e,["parameters","personGeneration"],_);const E=m(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&p(e,["parameters","includeSafetyAttributes"],E);const I=m(n,["includeRaiReason"]);e!==void 0&&I!=null&&p(e,["parameters","includeRaiReason"],I);const x=m(n,["language"]);e!==void 0&&x!=null&&p(e,["parameters","language"],x);const k=m(n,["outputMimeType"]);e!==void 0&&k!=null&&p(e,["parameters","outputOptions","mimeType"],k);const V=m(n,["outputCompressionQuality"]);e!==void 0&&V!=null&&p(e,["parameters","outputOptions","compressionQuality"],V);const B=m(n,["addWatermark"]);e!==void 0&&B!=null&&p(e,["parameters","addWatermark"],B);const z=m(n,["labels"]);e!==void 0&&z!=null&&p(e,["labels"],z);const G=m(n,["imageSize"]);e!==void 0&&G!=null&&p(e,["parameters","sampleImageSize"],G);const J=m(n,["enhancePrompt"]);return e!==void 0&&J!=null&&p(e,["parameters","enhancePrompt"],J),t}function cL(n,e){const t={},i=m(e,["model"]);i!=null&&p(t,["_url","model"],dt(n,i));const s=m(e,["prompt"]);s!=null&&p(t,["instances[0]","prompt"],s);const a=m(e,["config"]);return a!=null&&lL(a,t),t}function dL(n,e){const t={},i=m(e,["model"]);i!=null&&p(t,["_url","model"],dt(n,i));const s=m(e,["prompt"]);s!=null&&p(t,["instances[0]","prompt"],s);const a=m(e,["config"]);return a!=null&&uL(a,t),t}function fL(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=m(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>SL(l))),p(e,["generatedImages"],a)}const s=m(n,["positivePromptSafetyAttributes"]);return s!=null&&p(e,["positivePromptSafetyAttributes"],yb(s)),e}function hL(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=m(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>Ip(l))),p(e,["generatedImages"],a)}const s=m(n,["positivePromptSafetyAttributes"]);return s!=null&&p(e,["positivePromptSafetyAttributes"],_b(s)),e}function mL(n,e){const t={},i=m(n,["numberOfVideos"]);if(e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i),m(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(m(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=m(n,["durationSeconds"]);if(e!==void 0&&s!=null&&p(e,["parameters","durationSeconds"],s),m(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=m(n,["aspectRatio"]);e!==void 0&&a!=null&&p(e,["parameters","aspectRatio"],a);const l=m(n,["resolution"]);e!==void 0&&l!=null&&p(e,["parameters","resolution"],l);const c=m(n,["personGeneration"]);if(e!==void 0&&c!=null&&p(e,["parameters","personGeneration"],c),m(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=m(n,["negativePrompt"]);e!==void 0&&f!=null&&p(e,["parameters","negativePrompt"],f);const h=m(n,["enhancePrompt"]);if(e!==void 0&&h!=null&&p(e,["parameters","enhancePrompt"],h),m(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const _=m(n,["lastFrame"]);e!==void 0&&_!=null&&p(e,["instances[0]","lastFrame"],wp(_));const E=m(n,["referenceImages"]);if(e!==void 0&&E!=null){let I=E;Array.isArray(I)&&(I=I.map(x=>g4(x))),p(e,["instances[0]","referenceImages"],I)}if(m(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(m(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function pL(n,e){const t={},i=m(n,["numberOfVideos"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const s=m(n,["outputGcsUri"]);e!==void 0&&s!=null&&p(e,["parameters","storageUri"],s);const a=m(n,["fps"]);e!==void 0&&a!=null&&p(e,["parameters","fps"],a);const l=m(n,["durationSeconds"]);e!==void 0&&l!=null&&p(e,["parameters","durationSeconds"],l);const c=m(n,["seed"]);e!==void 0&&c!=null&&p(e,["parameters","seed"],c);const f=m(n,["aspectRatio"]);e!==void 0&&f!=null&&p(e,["parameters","aspectRatio"],f);const h=m(n,["resolution"]);e!==void 0&&h!=null&&p(e,["parameters","resolution"],h);const _=m(n,["personGeneration"]);e!==void 0&&_!=null&&p(e,["parameters","personGeneration"],_);const E=m(n,["pubsubTopic"]);e!==void 0&&E!=null&&p(e,["parameters","pubsubTopic"],E);const I=m(n,["negativePrompt"]);e!==void 0&&I!=null&&p(e,["parameters","negativePrompt"],I);const x=m(n,["enhancePrompt"]);e!==void 0&&x!=null&&p(e,["parameters","enhancePrompt"],x);const k=m(n,["generateAudio"]);e!==void 0&&k!=null&&p(e,["parameters","generateAudio"],k);const V=m(n,["lastFrame"]);e!==void 0&&V!=null&&p(e,["instances[0]","lastFrame"],cr(V));const B=m(n,["referenceImages"]);if(e!==void 0&&B!=null){let J=B;Array.isArray(J)&&(J=J.map(se=>y4(se))),p(e,["instances[0]","referenceImages"],J)}const z=m(n,["mask"]);e!==void 0&&z!=null&&p(e,["instances[0]","mask"],p4(z));const G=m(n,["compressionQuality"]);return e!==void 0&&G!=null&&p(e,["parameters","compressionQuality"],G),t}function gL(n){const e={},t=m(n,["name"]);t!=null&&p(e,["name"],t);const i=m(n,["metadata"]);i!=null&&p(e,["metadata"],i);const s=m(n,["done"]);s!=null&&p(e,["done"],s);const a=m(n,["error"]);a!=null&&p(e,["error"],a);const l=m(n,["response","generateVideoResponse"]);return l!=null&&p(e,["response"],EL(l)),e}function yL(n){const e={},t=m(n,["name"]);t!=null&&p(e,["name"],t);const i=m(n,["metadata"]);i!=null&&p(e,["metadata"],i);const s=m(n,["done"]);s!=null&&p(e,["done"],s);const a=m(n,["error"]);a!=null&&p(e,["error"],a);const l=m(n,["response"]);return l!=null&&p(e,["response"],TL(l)),e}function _L(n,e){const t={},i=m(e,["model"]);i!=null&&p(t,["_url","model"],dt(n,i));const s=m(e,["prompt"]);s!=null&&p(t,["instances[0]","prompt"],s);const a=m(e,["image"]);a!=null&&p(t,["instances[0]","image"],wp(a));const l=m(e,["video"]);l!=null&&p(t,["instances[0]","video"],Tb(l));const c=m(e,["source"]);c!=null&&IL(c,t);const f=m(e,["config"]);return f!=null&&mL(f,t),t}function vL(n,e){const t={},i=m(e,["model"]);i!=null&&p(t,["_url","model"],dt(n,i));const s=m(e,["prompt"]);s!=null&&p(t,["instances[0]","prompt"],s);const a=m(e,["image"]);a!=null&&p(t,["instances[0]","image"],cr(a));const l=m(e,["video"]);l!=null&&p(t,["instances[0]","video"],Ib(l));const c=m(e,["source"]);c!=null&&wL(c,t);const f=m(e,["config"]);return f!=null&&pL(f,t),t}function EL(n){const e={},t=m(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>xL(l))),p(e,["generatedVideos"],a)}const i=m(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const s=m(n,["raiMediaFilteredReasons"]);return s!=null&&p(e,["raiMediaFilteredReasons"],s),e}function TL(n){const e={},t=m(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>CL(l))),p(e,["generatedVideos"],a)}const i=m(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const s=m(n,["raiMediaFilteredReasons"]);return s!=null&&p(e,["raiMediaFilteredReasons"],s),e}function IL(n,e){const t={},i=m(n,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const s=m(n,["image"]);e!==void 0&&s!=null&&p(e,["instances[0]","image"],wp(s));const a=m(n,["video"]);return e!==void 0&&a!=null&&p(e,["instances[0]","video"],Tb(a)),t}function wL(n,e){const t={},i=m(n,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const s=m(n,["image"]);e!==void 0&&s!=null&&p(e,["instances[0]","image"],cr(s));const a=m(n,["video"]);return e!==void 0&&a!=null&&p(e,["instances[0]","video"],Ib(a)),t}function SL(n){const e={},t=m(n,["_self"]);t!=null&&p(e,["image"],VL(t));const i=m(n,["raiFilteredReason"]);i!=null&&p(e,["raiFilteredReason"],i);const s=m(n,["_self"]);return s!=null&&p(e,["safetyAttributes"],yb(s)),e}function Ip(n){const e={},t=m(n,["_self"]);t!=null&&p(e,["image"],gb(t));const i=m(n,["raiFilteredReason"]);i!=null&&p(e,["raiFilteredReason"],i);const s=m(n,["_self"]);s!=null&&p(e,["safetyAttributes"],_b(s));const a=m(n,["prompt"]);return a!=null&&p(e,["enhancedPrompt"],a),e}function AL(n){const e={},t=m(n,["_self"]);t!=null&&p(e,["mask"],gb(t));const i=m(n,["labels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),p(e,["labels"],s)}return e}function xL(n){const e={},t=m(n,["video"]);return t!=null&&p(e,["video"],h4(t)),e}function CL(n){const e={},t=m(n,["_self"]);return t!=null&&p(e,["video"],m4(t)),e}function bL(n){const e={},t=m(n,["modelSelectionConfig"]);t!=null&&p(e,["modelConfig"],t);const i=m(n,["responseJsonSchema"]);i!=null&&p(e,["responseJsonSchema"],i);const s=m(n,["audioTimestamp"]);s!=null&&p(e,["audioTimestamp"],s);const a=m(n,["candidateCount"]);a!=null&&p(e,["candidateCount"],a);const l=m(n,["enableAffectiveDialog"]);l!=null&&p(e,["enableAffectiveDialog"],l);const c=m(n,["frequencyPenalty"]);c!=null&&p(e,["frequencyPenalty"],c);const f=m(n,["logprobs"]);f!=null&&p(e,["logprobs"],f);const h=m(n,["maxOutputTokens"]);h!=null&&p(e,["maxOutputTokens"],h);const _=m(n,["mediaResolution"]);_!=null&&p(e,["mediaResolution"],_);const E=m(n,["presencePenalty"]);E!=null&&p(e,["presencePenalty"],E);const I=m(n,["responseLogprobs"]);I!=null&&p(e,["responseLogprobs"],I);const x=m(n,["responseMimeType"]);x!=null&&p(e,["responseMimeType"],x);const k=m(n,["responseModalities"]);k!=null&&p(e,["responseModalities"],k);const V=m(n,["responseSchema"]);V!=null&&p(e,["responseSchema"],V);const B=m(n,["routingConfig"]);B!=null&&p(e,["routingConfig"],B);const z=m(n,["seed"]);z!=null&&p(e,["seed"],z);const G=m(n,["speechConfig"]);G!=null&&p(e,["speechConfig"],vb(G));const J=m(n,["stopSequences"]);J!=null&&p(e,["stopSequences"],J);const se=m(n,["temperature"]);se!=null&&p(e,["temperature"],se);const de=m(n,["thinkingConfig"]);de!=null&&p(e,["thinkingConfig"],de);const le=m(n,["topK"]);le!=null&&p(e,["topK"],le);const N=m(n,["topP"]);if(N!=null&&p(e,["topP"],N),m(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function RL(n,e){const t={},i=m(e,["model"]);return i!=null&&p(t,["_url","name"],dt(n,i)),t}function NL(n,e){const t={},i=m(e,["model"]);return i!=null&&p(t,["_url","name"],dt(n,i)),t}function PL(n){const e={};if(m(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=m(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function DL(n){const e={};if(m(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=m(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function ML(n){const e={},t=m(n,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);const i=m(n,["imageSize"]);if(i!=null&&p(e,["imageSize"],i),m(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(m(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function kL(n){const e={},t=m(n,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);const i=m(n,["imageSize"]);i!=null&&p(e,["imageSize"],i);const s=m(n,["outputMimeType"]);s!=null&&p(e,["imageOutputOptions","mimeType"],s);const a=m(n,["outputCompressionQuality"]);return a!=null&&p(e,["imageOutputOptions","compressionQuality"],a),e}function VL(n){const e={},t=m(n,["bytesBase64Encoded"]);t!=null&&p(e,["imageBytes"],qo(t));const i=m(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function gb(n){const e={},t=m(n,["gcsUri"]);t!=null&&p(e,["gcsUri"],t);const i=m(n,["bytesBase64Encoded"]);i!=null&&p(e,["imageBytes"],qo(i));const s=m(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function wp(n){const e={};if(m(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=m(n,["imageBytes"]);t!=null&&p(e,["bytesBase64Encoded"],qo(t));const i=m(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function cr(n){const e={},t=m(n,["gcsUri"]);t!=null&&p(e,["gcsUri"],t);const i=m(n,["imageBytes"]);i!=null&&p(e,["bytesBase64Encoded"],qo(i));const s=m(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function LL(n,e,t){const i={},s=m(e,["pageSize"]);t!==void 0&&s!=null&&p(t,["_query","pageSize"],s);const a=m(e,["pageToken"]);t!==void 0&&a!=null&&p(t,["_query","pageToken"],a);const l=m(e,["filter"]);t!==void 0&&l!=null&&p(t,["_query","filter"],l);const c=m(e,["queryBase"]);return t!==void 0&&c!=null&&p(t,["_url","models_url"],lb(n,c)),i}function OL(n,e,t){const i={},s=m(e,["pageSize"]);t!==void 0&&s!=null&&p(t,["_query","pageSize"],s);const a=m(e,["pageToken"]);t!==void 0&&a!=null&&p(t,["_query","pageToken"],a);const l=m(e,["filter"]);t!==void 0&&l!=null&&p(t,["_query","filter"],l);const c=m(e,["queryBase"]);return t!==void 0&&c!=null&&p(t,["_url","models_url"],lb(n,c)),i}function UL(n,e){const t={},i=m(e,["config"]);return i!=null&&LL(n,i,t),t}function FL(n,e){const t={},i=m(e,["config"]);return i!=null&&OL(n,i,t),t}function qL(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=m(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const s=m(n,["_self"]);if(s!=null){let a=ub(s);Array.isArray(a)&&(a=a.map(l=>F_(l))),p(e,["models"],a)}return e}function BL(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=m(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const s=m(n,["_self"]);if(s!=null){let a=ub(s);Array.isArray(a)&&(a=a.map(l=>q_(l))),p(e,["models"],a)}return e}function GL(n){const e={},t=m(n,["maskMode"]);t!=null&&p(e,["maskMode"],t);const i=m(n,["segmentationClasses"]);i!=null&&p(e,["maskClasses"],i);const s=m(n,["maskDilation"]);return s!=null&&p(e,["dilation"],s),e}function F_(n){const e={},t=m(n,["name"]);t!=null&&p(e,["name"],t);const i=m(n,["displayName"]);i!=null&&p(e,["displayName"],i);const s=m(n,["description"]);s!=null&&p(e,["description"],s);const a=m(n,["version"]);a!=null&&p(e,["version"],a);const l=m(n,["_self"]);l!=null&&p(e,["tunedModelInfo"],r4(l));const c=m(n,["inputTokenLimit"]);c!=null&&p(e,["inputTokenLimit"],c);const f=m(n,["outputTokenLimit"]);f!=null&&p(e,["outputTokenLimit"],f);const h=m(n,["supportedGenerationMethods"]);h!=null&&p(e,["supportedActions"],h);const _=m(n,["temperature"]);_!=null&&p(e,["temperature"],_);const E=m(n,["maxTemperature"]);E!=null&&p(e,["maxTemperature"],E);const I=m(n,["topP"]);I!=null&&p(e,["topP"],I);const x=m(n,["topK"]);x!=null&&p(e,["topK"],x);const k=m(n,["thinking"]);return k!=null&&p(e,["thinking"],k),e}function q_(n){const e={},t=m(n,["name"]);t!=null&&p(e,["name"],t);const i=m(n,["displayName"]);i!=null&&p(e,["displayName"],i);const s=m(n,["description"]);s!=null&&p(e,["description"],s);const a=m(n,["versionId"]);a!=null&&p(e,["version"],a);const l=m(n,["deployedModels"]);if(l!=null){let E=l;Array.isArray(E)&&(E=E.map(I=>tL(I))),p(e,["endpoints"],E)}const c=m(n,["labels"]);c!=null&&p(e,["labels"],c);const f=m(n,["_self"]);f!=null&&p(e,["tunedModelInfo"],s4(f));const h=m(n,["defaultCheckpointId"]);h!=null&&p(e,["defaultCheckpointId"],h);const _=m(n,["checkpoints"]);if(_!=null){let E=_;Array.isArray(E)&&(E=E.map(I=>I)),p(e,["checkpoints"],E)}return e}function zL(n){const e={},t=m(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=m(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const s=m(n,["executableCode"]);s!=null&&p(e,["executableCode"],s);const a=m(n,["fileData"]);a!=null&&p(e,["fileData"],nL(a));const l=m(n,["functionCall"]);l!=null&&p(e,["functionCall"],iL(l));const c=m(n,["functionResponse"]);c!=null&&p(e,["functionResponse"],c);const f=m(n,["inlineData"]);f!=null&&p(e,["inlineData"],bV(f));const h=m(n,["text"]);h!=null&&p(e,["text"],h);const _=m(n,["thought"]);_!=null&&p(e,["thought"],_);const E=m(n,["thoughtSignature"]);E!=null&&p(e,["thoughtSignature"],E);const I=m(n,["videoMetadata"]);return I!=null&&p(e,["videoMetadata"],I),e}function HL(n){const e={},t=m(n,["productImage"]);return t!=null&&p(e,["image"],cr(t)),e}function $L(n,e){const t={},i=m(n,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const s=m(n,["baseSteps"]);e!==void 0&&s!=null&&p(e,["parameters","baseSteps"],s);const a=m(n,["outputGcsUri"]);e!==void 0&&a!=null&&p(e,["parameters","storageUri"],a);const l=m(n,["seed"]);e!==void 0&&l!=null&&p(e,["parameters","seed"],l);const c=m(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&p(e,["parameters","safetySetting"],c);const f=m(n,["personGeneration"]);e!==void 0&&f!=null&&p(e,["parameters","personGeneration"],f);const h=m(n,["addWatermark"]);e!==void 0&&h!=null&&p(e,["parameters","addWatermark"],h);const _=m(n,["outputMimeType"]);e!==void 0&&_!=null&&p(e,["parameters","outputOptions","mimeType"],_);const E=m(n,["outputCompressionQuality"]);e!==void 0&&E!=null&&p(e,["parameters","outputOptions","compressionQuality"],E);const I=m(n,["enhancePrompt"]);e!==void 0&&I!=null&&p(e,["parameters","enhancePrompt"],I);const x=m(n,["labels"]);return e!==void 0&&x!=null&&p(e,["labels"],x),t}function jL(n,e){const t={},i=m(e,["model"]);i!=null&&p(t,["_url","model"],dt(n,i));const s=m(e,["source"]);s!=null&&YL(s,t);const a=m(e,["config"]);return a!=null&&$L(a,t),t}function KL(n){const e={},t=m(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>Ip(s))),p(e,["generatedImages"],i)}return e}function YL(n,e){const t={},i=m(n,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const s=m(n,["personImage"]);e!==void 0&&s!=null&&p(e,["instances[0]","personImage","image"],cr(s));const a=m(n,["productImages"]);if(e!==void 0&&a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>HL(c))),p(e,["instances[0]","productImages"],l)}return t}function JL(n){const e={},t=m(n,["referenceImage"]);t!=null&&p(e,["referenceImage"],cr(t));const i=m(n,["referenceId"]);i!=null&&p(e,["referenceId"],i);const s=m(n,["referenceType"]);s!=null&&p(e,["referenceType"],s);const a=m(n,["maskImageConfig"]);a!=null&&p(e,["maskImageConfig"],GL(a));const l=m(n,["controlImageConfig"]);l!=null&&p(e,["controlImageConfig"],VV(l));const c=m(n,["styleImageConfig"]);c!=null&&p(e,["styleImageConfig"],c);const f=m(n,["subjectImageConfig"]);return f!=null&&p(e,["subjectImageConfig"],f),e}function yb(n){const e={},t=m(n,["safetyAttributes","categories"]);t!=null&&p(e,["categories"],t);const i=m(n,["safetyAttributes","scores"]);i!=null&&p(e,["scores"],i);const s=m(n,["contentType"]);return s!=null&&p(e,["contentType"],s),e}function _b(n){const e={},t=m(n,["safetyAttributes","categories"]);t!=null&&p(e,["categories"],t);const i=m(n,["safetyAttributes","scores"]);i!=null&&p(e,["scores"],i);const s=m(n,["contentType"]);return s!=null&&p(e,["contentType"],s),e}function WL(n){const e={},t=m(n,["category"]);if(t!=null&&p(e,["category"],t),m(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=m(n,["threshold"]);return i!=null&&p(e,["threshold"],i),e}function QL(n){const e={},t=m(n,["image"]);return t!=null&&p(e,["image"],cr(t)),e}function XL(n,e){const t={},i=m(n,["mode"]);e!==void 0&&i!=null&&p(e,["parameters","mode"],i);const s=m(n,["maxPredictions"]);e!==void 0&&s!=null&&p(e,["parameters","maxPredictions"],s);const a=m(n,["confidenceThreshold"]);e!==void 0&&a!=null&&p(e,["parameters","confidenceThreshold"],a);const l=m(n,["maskDilation"]);e!==void 0&&l!=null&&p(e,["parameters","maskDilation"],l);const c=m(n,["binaryColorThreshold"]);e!==void 0&&c!=null&&p(e,["parameters","binaryColorThreshold"],c);const f=m(n,["labels"]);return e!==void 0&&f!=null&&p(e,["labels"],f),t}function ZL(n,e){const t={},i=m(e,["model"]);i!=null&&p(t,["_url","model"],dt(n,i));const s=m(e,["source"]);s!=null&&t4(s,t);const a=m(e,["config"]);return a!=null&&XL(a,t),t}function e4(n){const e={},t=m(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>AL(s))),p(e,["generatedMasks"],i)}return e}function t4(n,e){const t={},i=m(n,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const s=m(n,["image"]);e!==void 0&&s!=null&&p(e,["instances[0]","image"],cr(s));const a=m(n,["scribbleImage"]);return e!==void 0&&a!=null&&p(e,["instances[0]","scribble"],QL(a)),t}function vb(n){const e={},t=m(n,["languageCode"]);t!=null&&p(e,["languageCode"],t);const i=m(n,["voiceConfig"]);if(i!=null&&p(e,["voiceConfig"],i),m(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function n4(n){const e={},t=m(n,["functionCallingConfig"]);t!=null&&p(e,["functionCallingConfig"],rL(t));const i=m(n,["retrievalConfig"]);return i!=null&&p(e,["retrievalConfig"],i),e}function i4(n){const e={},t=m(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(E=>E)),p(e,["functionDeclarations"],_)}if(m(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(n,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const s=m(n,["computerUse"]);s!=null&&p(e,["computerUse"],s);const a=m(n,["fileSearch"]);a!=null&&p(e,["fileSearch"],a);const l=m(n,["codeExecution"]);if(l!=null&&p(e,["codeExecution"],l),m(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=m(n,["googleMaps"]);c!=null&&p(e,["googleMaps"],PL(c));const f=m(n,["googleSearch"]);f!=null&&p(e,["googleSearch"],DL(f));const h=m(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function Eb(n){const e={},t=m(n,["functionDeclarations"]);if(t!=null){let E=t;Array.isArray(E)&&(E=E.map(I=>sL(I))),p(e,["functionDeclarations"],E)}const i=m(n,["retrieval"]);i!=null&&p(e,["retrieval"],i);const s=m(n,["googleSearchRetrieval"]);s!=null&&p(e,["googleSearchRetrieval"],s);const a=m(n,["computerUse"]);if(a!=null&&p(e,["computerUse"],a),m(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=m(n,["codeExecution"]);l!=null&&p(e,["codeExecution"],l);const c=m(n,["enterpriseWebSearch"]);c!=null&&p(e,["enterpriseWebSearch"],c);const f=m(n,["googleMaps"]);f!=null&&p(e,["googleMaps"],f);const h=m(n,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const _=m(n,["urlContext"]);return _!=null&&p(e,["urlContext"],_),e}function r4(n){const e={},t=m(n,["baseModel"]);t!=null&&p(e,["baseModel"],t);const i=m(n,["createTime"]);i!=null&&p(e,["createTime"],i);const s=m(n,["updateTime"]);return s!=null&&p(e,["updateTime"],s),e}function s4(n){const e={},t=m(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&p(e,["baseModel"],t);const i=m(n,["createTime"]);i!=null&&p(e,["createTime"],i);const s=m(n,["updateTime"]);return s!=null&&p(e,["updateTime"],s),e}function o4(n,e){const t={},i=m(n,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const s=m(n,["description"]);e!==void 0&&s!=null&&p(e,["description"],s);const a=m(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&p(e,["defaultCheckpointId"],a),t}function a4(n,e){const t={},i=m(n,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const s=m(n,["description"]);e!==void 0&&s!=null&&p(e,["description"],s);const a=m(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&p(e,["defaultCheckpointId"],a),t}function l4(n,e){const t={},i=m(e,["model"]);i!=null&&p(t,["_url","name"],dt(n,i));const s=m(e,["config"]);return s!=null&&o4(s,t),t}function u4(n,e){const t={},i=m(e,["model"]);i!=null&&p(t,["_url","model"],dt(n,i));const s=m(e,["config"]);return s!=null&&a4(s,t),t}function c4(n,e){const t={},i=m(n,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const s=m(n,["safetyFilterLevel"]);e!==void 0&&s!=null&&p(e,["parameters","safetySetting"],s);const a=m(n,["personGeneration"]);e!==void 0&&a!=null&&p(e,["parameters","personGeneration"],a);const l=m(n,["includeRaiReason"]);e!==void 0&&l!=null&&p(e,["parameters","includeRaiReason"],l);const c=m(n,["outputMimeType"]);e!==void 0&&c!=null&&p(e,["parameters","outputOptions","mimeType"],c);const f=m(n,["outputCompressionQuality"]);e!==void 0&&f!=null&&p(e,["parameters","outputOptions","compressionQuality"],f);const h=m(n,["enhanceInputImage"]);e!==void 0&&h!=null&&p(e,["parameters","upscaleConfig","enhanceInputImage"],h);const _=m(n,["imagePreservationFactor"]);e!==void 0&&_!=null&&p(e,["parameters","upscaleConfig","imagePreservationFactor"],_);const E=m(n,["labels"]);e!==void 0&&E!=null&&p(e,["labels"],E);const I=m(n,["numberOfImages"]);e!==void 0&&I!=null&&p(e,["parameters","sampleCount"],I);const x=m(n,["mode"]);return e!==void 0&&x!=null&&p(e,["parameters","mode"],x),t}function d4(n,e){const t={},i=m(e,["model"]);i!=null&&p(t,["_url","model"],dt(n,i));const s=m(e,["image"]);s!=null&&p(t,["instances[0]","image"],cr(s));const a=m(e,["upscaleFactor"]);a!=null&&p(t,["parameters","upscaleConfig","upscaleFactor"],a);const l=m(e,["config"]);return l!=null&&c4(l,t),t}function f4(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=m(n,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>Ip(a))),p(e,["generatedImages"],s)}return e}function h4(n){const e={},t=m(n,["uri"]);t!=null&&p(e,["uri"],t);const i=m(n,["encodedVideo"]);i!=null&&p(e,["videoBytes"],qo(i));const s=m(n,["encoding"]);return s!=null&&p(e,["mimeType"],s),e}function m4(n){const e={},t=m(n,["gcsUri"]);t!=null&&p(e,["uri"],t);const i=m(n,["bytesBase64Encoded"]);i!=null&&p(e,["videoBytes"],qo(i));const s=m(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function p4(n){const e={},t=m(n,["image"]);t!=null&&p(e,["_self"],cr(t));const i=m(n,["maskMode"]);return i!=null&&p(e,["maskMode"],i),e}function g4(n){const e={},t=m(n,["image"]);t!=null&&p(e,["image"],wp(t));const i=m(n,["referenceType"]);return i!=null&&p(e,["referenceType"],i),e}function y4(n){const e={},t=m(n,["image"]);t!=null&&p(e,["image"],cr(t));const i=m(n,["referenceType"]);return i!=null&&p(e,["referenceType"],i),e}function Tb(n){const e={},t=m(n,["uri"]);t!=null&&p(e,["uri"],t);const i=m(n,["videoBytes"]);i!=null&&p(e,["encodedVideo"],qo(i));const s=m(n,["mimeType"]);return s!=null&&p(e,["encoding"],s),e}function Ib(n){const e={},t=m(n,["uri"]);t!=null&&p(e,["gcsUri"],t);const i=m(n,["videoBytes"]);i!=null&&p(e,["bytesBase64Encoded"],qo(i));const s=m(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _4="Content-Type",v4="X-Server-Timeout",E4="User-Agent",B_="x-goog-api-client",T4="1.30.0",I4=`google-genai-sdk/${T4}`,w4="v1beta1",S4="v1beta",xA=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class A4{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:w4,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:S4,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const s=[this.getRequestUrlInternal(t)];return i&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[l,c]of Object.entries(e.queryParams))s.searchParams.append(l,String(c));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,t,s.toString(),e.abortSignal),this.unaryApiCall(s,a,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[s,a]of Object.entries(t))typeof a=="object"?i[s]=Object.assign(Object.assign({},i[s]),a):a!==void 0&&(i[s]=a);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,t,i);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,t,s.toString(),e.abortSignal),this.streamApiCall(s,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,s){if(t&&t.timeout||s){const a=new AbortController,l=a.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const c=setTimeout(()=>a.abort(),t.timeout);c&&typeof c.unref=="function"&&c.unref()}s&&s.addEventListener("abort",()=>{a.abort()}),e.signal=l}return t&&t.extraBody!==null&&x4(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async s=>(await CA(s),new L_(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async s=>(await CA(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){var t;return lu(this,arguments,function*(){const s=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),a=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let l="";for(;;){const{done:c,value:f}=yield Dt(s.read());if(c){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=a.decode(f,{stream:!0});try{const E=JSON.parse(h);if("error"in E){const I=JSON.parse(JSON.stringify(E.error)),x=I.status,k=I.code,V=`got status: ${x}. ${JSON.stringify(E)}`;if(k>=400&&k<600)throw new Ep({message:V,status:k})}}catch(E){if(E.name==="ApiError")throw E}l+=h;let _=l.match(xA);for(;_;){const E=_[1];try{const I=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Dt(new L_(I)),l=l.slice(_[0].length),_=l.match(xA)}catch(I){throw new Error(`exception parsing stream chunk ${E}. ${I}`)}}}}finally{s.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=I4+" "+this.clientOptions.userAgentExtra;return e[E4]=t,e[B_]=t,e[_4]="application/json",e}async getHeadersInternal(e,t){const i=new Headers;if(e&&e.headers){for(const[s,a]of Object.entries(e.headers))i.append(s,a);e.timeout&&e.timeout>0&&i.append(v4,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}getFileName(e){var t;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(t=i.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),i}async uploadFile(e,t){var i;const s={};t!=null&&(s.mimeType=t.mimeType,s.name=t.name,s.displayName=t.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const a=this.clientOptions.uploader,l=await a.stat(e);s.sizeBytes=String(l.size);const c=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:l.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=c;const f={file:s},h=this.getFileName(e),_=Ie("upload/v1beta/files",f._url),E=await this.fetchUploadUrl(_,s.sizeBytes,s.mimeType,h,f,t==null?void 0:t.httpOptions);return a.upload(e,E,this)}async uploadFileToFileSearchStore(e,t,i){var s;const a=this.clientOptions.uploader,l=await a.stat(t),c=String(l.size),f=(s=i==null?void 0:i.mimeType)!==null&&s!==void 0?s:l.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,_=this.getFileName(t),E={};i!=null&&i.customMetadata&&(E.customMetadata=i.customMetadata),i!=null&&i.chunkingConfig&&(E.chunkingConfig=i.chunkingConfig);const I=await this.fetchUploadUrl(h,c,f,_,E,i==null?void 0:i.httpOptions);return a.uploadToFileSearchStore(t,I,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,i,s,a,l){var c;let f={};l?f=l:f={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${i}`},s?{"X-Goog-Upload-File-Name":s}:{})};const h=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:f});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const _=(c=h==null?void 0:h.headers)===null||c===void 0?void 0:c["x-goog-upload-url"];if(_===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return _}}async function CA(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const s=JSON.stringify(i);throw t>=400&&t<600?new Ep({message:s,status:t}):new Error(s)}}function x4(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const a=JSON.parse(n.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))t=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,l){const c=Object.assign({},a);for(const f in l)if(Object.prototype.hasOwnProperty.call(l,f)){const h=l[f],_=c[f];h&&typeof h=="object"&&!Array.isArray(h)&&_&&typeof _=="object"&&!Array.isArray(_)?c[f]=i(_,h):(_&&h&&typeof _!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${f}". Original type: ${typeof _}, New type: ${typeof h}. Overwriting.`),c[f]=h)}return c}const s=i(t,e);n.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const C4="mcp_used/unknown";let b4=!1;function wb(n){for(const e of n)if(R4(e)||typeof e=="object"&&"inputSchema"in e)return!0;return b4}function Sb(n){var e;const t=(e=n[B_])!==null&&e!==void 0?e:"";n[B_]=(t+` ${C4}`).trimStart()}function R4(n){return n!==null&&typeof n=="object"&&n instanceof Gv}function N4(n,e=100){return lu(this,arguments,function*(){let i,s=0;for(;s<e;){const a=yield Dt(n.listTools({cursor:i}));for(const l of a.tools)yield yield Dt(l),s++;if(!a.nextCursor)break;i=a.nextCursor}})}class Gv{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Gv(e,t)}async initialize(){var e,t,i,s;if(this.mcpTools.length>0)return;const a={},l=[];for(const _ of this.mcpClients)try{for(var c=!0,f=(t=void 0,Cd(N4(_))),h;h=await f.next(),e=h.done,!e;c=!0){s=h.value,c=!1;const E=s;l.push(E);const I=E.name;if(a[I])throw new Error(`Duplicate function name ${I} found in MCP tools. Please ensure function names are unique.`);a[I]=_}}catch(E){t={error:E}}finally{try{!c&&!e&&(i=f.return)&&await i.call(f)}finally{if(t)throw t.error}}this.mcpTools=l,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),IM(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const l=await s.callTool({name:i.name,arguments:i.args},void 0,a);t.push({functionResponse:{name:i.name,response:l.isError?{error:l}:l}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function P4(n,e,t){const i=new mM;let s;t.data instanceof Blob?s=JSON.parse(await t.data.text()):s=JSON.parse(t.data),Object.assign(i,s),e(i)}class D4{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),l=V4(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),f=`${s}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${c}`;let h=()=>{};const _=new Promise(J=>{h=J}),E=e.callbacks,I=function(){h({})},x=this.apiClient,k={onopen:I,onmessage:J=>{P4(x,E.onmessage,J)},onerror:(t=E==null?void 0:E.onerror)!==null&&t!==void 0?t:function(J){},onclose:(i=E==null?void 0:E.onclose)!==null&&i!==void 0?i:function(J){}},V=this.webSocketFactory.create(f,k4(l),k);V.connect(),await _;const G={setup:{model:dt(this.apiClient,e.model)}};return V.send(JSON.stringify(G)),new M4(V,this.apiClient)}}class M4{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=vV(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=_V(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(ru.PLAY)}pause(){this.sendPlaybackControl(ru.PAUSE)}stop(){this.sendPlaybackControl(ru.STOP)}resetContext(){this.sendPlaybackControl(ru.RESET_CONTEXT)}close(){this.conn.close()}}function k4(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function V4(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const L4="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function O4(n,e,t){const i=new hM;let s;t.data instanceof Blob?s=await t.data.text():t.data instanceof ArrayBuffer?s=new TextDecoder().decode(t.data):s=t.data;const a=JSON.parse(s);if(n.isVertexAI()){const l=IV(a);Object.assign(i,l)}else Object.assign(i,a);e(i)}class U4{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new D4(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,s,a,l,c;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const f=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let _;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&wb(e.config.tools)&&Sb(E);const I=G4(E);if(this.apiClient.isVertexAI())_=`${f}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(I,_);else{const R=this.apiClient.getApiKey();let D="BidiGenerateContent",O="key";R!=null&&R.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),D="BidiGenerateContentConstrained",O="access_token"),_=`${f}/ws/google.ai.generativelanguage.${h}.GenerativeService.${D}?${O}=${R}`}let x=()=>{};const k=new Promise(R=>{x=R}),V=e.callbacks,B=function(){var R;(R=V==null?void 0:V.onopen)===null||R===void 0||R.call(V),x({})},z=this.apiClient,G={onopen:B,onmessage:R=>{O4(z,V.onmessage,R)},onerror:(t=V==null?void 0:V.onerror)!==null&&t!==void 0?t:function(R){},onclose:(i=V==null?void 0:V.onclose)!==null&&i!==void 0?i:function(R){}},J=this.webSocketFactory.create(_,B4(I),G);J.connect(),await k;let se=dt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&se.startsWith("publishers/")){const R=this.apiClient.getProject(),D=this.apiClient.getLocation();se=`projects/${R}/locations/${D}/`+se}let de={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[qm.AUDIO]}:e.config.responseModalities=[qm.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const le=(c=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[],N=[];for(const R of le)if(this.isCallableTool(R)){const D=R;N.push(await D.tool())}else N.push(R);N.length>0&&(e.config.tools=N);const P={model:se,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?de=yV(this.apiClient,P):de=gV(this.apiClient,P),delete de.config,J.send(JSON.stringify(de)),new q4(J,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const F4={turnComplete:!0};class q4{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=zi(t.turns),e.isVertexAI()||(i=i.map(s=>Tp(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(L4)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},F4),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:TV(e)}:t={realtimeInput:EV(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function B4(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function G4(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bA=10;function RA(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const l of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(uu(l)){s=!0;break}if(!s)return!0;const a=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function uu(n){return"callTool"in n&&typeof n.callTool=="function"}function z4(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(s=>uu(s)))!==null&&i!==void 0?i:!1}function NA(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((i,s)=>{if(uu(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&t.push(s)}),t}function PA(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class H4 extends As{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,s,a,l,c;const f=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!z4(t)||RA(t.config))return await this.generateContentInternal(f);const h=NA(t);if(h.length>0){const V=h.map(B=>`tools[${B}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${V}.`)}let _,E;const I=zi(f.contents),x=(a=(s=(i=f.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:bA;let k=0;for(;k<x&&(_=await this.generateContentInternal(f),!(!_.functionCalls||_.functionCalls.length===0));){const V=_.candidates[0].content,B=[];for(const z of(c=(l=t.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[])if(uu(z)){const J=await z.callTool(_.functionCalls);B.push(...J)}k++,E={role:"user",parts:B},f.contents=zi(f.contents),f.contents.push(V),f.contents.push(E),PA(f.config)&&(I.push(V),I.push(E))}return PA(f.config)&&(_.automaticFunctionCallingHistory=I),_},this.generateContentStream=async t=>{var i,s,a,l,c;if(this.maybeMoveToResponseJsonSchem(t),RA(t.config)){const E=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(E)}const f=NA(t);if(f.length>0){const E=f.map(I=>`tools[${I}]`).join(", ");throw new Error(`Incompatible tools found at ${E}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(a=(s=(i=t==null?void 0:t.config)===null||i===void 0?void 0:i.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,_=(c=(l=t==null?void 0:t.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||c===void 0?void 0:c.disable;if(h&&!_)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var s;let a;const l=[];if(i!=null&&i.generatedImages)for(const f of i.generatedImages)f&&(f!=null&&f.safetyAttributes)&&((s=f==null?void 0:f.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?a=f==null?void 0:f.safetyAttributes:l.push(f);let c;return a?c={generatedImages:l,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:c={generatedImages:l,sdkHttpResponse:i.sdkHttpResponse},c}),this.list=async t=>{var i;const l={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((i=l.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new Qa(Es.PAGED_ITEM_MODELS,c=>this.listInternal(c),await this.listInternal(l),l)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const s={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(s)},this.generateVideos=async t=>{var i,s,a,l,c,f;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((s=t.video)===null||s===void 0)&&s.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((l=(a=t.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.uri&&(!((f=(c=t.source)===null||c===void 0?void 0:c.video)===null||f===void 0)&&f.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,s;const a=(t=e.config)===null||t===void 0?void 0:t.tools;if(!a)return e;const l=await Promise.all(a.map(async f=>uu(f)?await f.tool():f)),c={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(c.config.tools=l,e.config&&e.config.tools&&wb(e.config.tools)){const f=(s=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&s!==void 0?s:{};let h=Object.assign({},f);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),Sb(h),c.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return c}async initAfcToolsMap(e){var t,i,s;const a=new Map;for(const l of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(uu(l)){const c=l,f=await c.tool();for(const h of(s=f.functionDeclarations)!==null&&s!==void 0?s:[]){if(!h.name)throw new Error("Function declaration name is required.");if(a.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);a.set(h.name,c)}}return a}async processAfcStream(e){var t,i,s;const a=(s=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:bA;let l=!1,c=0;const f=await this.initAfcToolsMap(e);return(function(h,_,E){var I,x;return lu(this,arguments,function*(){for(var k,V,B,z;c<a;){l&&(c++,l=!1);const de=yield Dt(h.processParamsMaybeAddMcpUsage(E)),le=yield Dt(h.generateContentStreamInternal(de)),N=[],P=[];try{for(var G=!0,J=(V=void 0,Cd(le)),se;se=yield Dt(J.next()),k=se.done,!k;G=!0){z=se.value,G=!1;const R=z;if(yield yield Dt(R),R.candidates&&(!((I=R.candidates[0])===null||I===void 0)&&I.content)){P.push(R.candidates[0].content);for(const D of(x=R.candidates[0].content.parts)!==null&&x!==void 0?x:[])if(c<a&&D.functionCall){if(!D.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(D.functionCall.name)){const O=yield Dt(_.get(D.functionCall.name).callTool([D.functionCall]));N.push(...O)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${D.functionCall.name}`)}}}}catch(R){V={error:R}}finally{try{!G&&!k&&(B=J.return)&&(yield Dt(B.call(J)))}finally{if(V)throw V.error}}if(N.length>0){l=!0;const R=new ld;R.candidates=[{content:{role:"user",parts:N}}],yield yield Dt(R);const D=[];D.push(...P),D.push({role:"user",parts:N});const O=zi(E.contents).concat(D);E.contents=O}else break}})})(this,f,e)}async generateContentInternal(e){var t,i,s,a;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=wA(this.apiClient,e);return c=Ie("{model}:generateContent",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const I=E;return I.sdkHttpResponse={headers:_.headers},I})),l.then(_=>{const E=AA(_),I=new ld;return Object.assign(I,E),I})}else{const h=IA(this.apiClient,e);return c=Ie("{model}:generateContent",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const I=E;return I.sdkHttpResponse={headers:_.headers},I})),l.then(_=>{const E=SA(_),I=new ld;return Object.assign(I,E),I})}}async generateContentStreamInternal(e){var t,i,s,a;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=wA(this.apiClient,e);return c=Ie("{model}:streamGenerateContent?alt=sse",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.requestStream({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),l.then(function(E){return lu(this,arguments,function*(){var I,x,k,V;try{for(var B=!0,z=Cd(E),G;G=yield Dt(z.next()),I=G.done,!I;B=!0){V=G.value,B=!1;const J=V,se=AA(yield Dt(J.json()));se.sdkHttpResponse={headers:J.headers};const de=new ld;Object.assign(de,se),yield yield Dt(de)}}catch(J){x={error:J}}finally{try{!B&&!I&&(k=z.return)&&(yield Dt(k.call(z)))}finally{if(x)throw x.error}}})})}else{const h=IA(this.apiClient,e);return c=Ie("{model}:streamGenerateContent?alt=sse",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.requestStream({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),l.then(function(E){return lu(this,arguments,function*(){var I,x,k,V;try{for(var B=!0,z=Cd(E),G;G=yield Dt(z.next()),I=G.done,!I;B=!0){V=G.value,B=!1;const J=V,se=SA(yield Dt(J.json()));se.sdkHttpResponse={headers:J.headers};const de=new ld;Object.assign(de,se),yield yield Dt(de)}}catch(J){x={error:J}}finally{try{!B&&!I&&(k=z.return)&&(yield Dt(k.call(z)))}finally{if(x)throw x.error}}})})}}async embedContent(e){var t,i,s,a;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=XV(this.apiClient,e);return c=Ie("{model}:predict",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const I=E;return I.sdkHttpResponse={headers:_.headers},I})),l.then(_=>{const E=eL(_),I=new oA;return Object.assign(I,E),I})}else{const h=QV(this.apiClient,e);return c=Ie("{model}:batchEmbedContents",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const I=E;return I.sdkHttpResponse={headers:_.headers},I})),l.then(_=>{const E=ZV(_),I=new oA;return Object.assign(I,E),I})}}async generateImagesInternal(e){var t,i,s,a;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=dL(this.apiClient,e);return c=Ie("{model}:predict",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const I=E;return I.sdkHttpResponse={headers:_.headers},I})),l.then(_=>{const E=hL(_),I=new aA;return Object.assign(I,E),I})}else{const h=cL(this.apiClient,e);return c=Ie("{model}:predict",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const I=E;return I.sdkHttpResponse={headers:_.headers},I})),l.then(_=>{const E=fL(_),I=new aA;return Object.assign(I,E),I})}}async editImageInternal(e){var t,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=KV(this.apiClient,e);return a=Ie("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:f.headers},_})),s.then(f=>{const h=YV(f),_=new nM;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=d4(this.apiClient,e);return a=Ie("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:f.headers},_})),s.then(f=>{const h=f4(f),_=new iM;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=jL(this.apiClient,e);return a=Ie("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const h=KL(f),_=new rM;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=ZL(this.apiClient,e);return a=Ie("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const h=e4(f),_=new sM;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,s,a;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=NL(this.apiClient,e);return c=Ie("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),l.then(_=>q_(_))}else{const h=RL(this.apiClient,e);return c=Ie("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),l.then(_=>F_(_))}}async listInternal(e){var t,i,s,a;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=FL(this.apiClient,e);return c=Ie("{models_url}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const I=E;return I.sdkHttpResponse={headers:_.headers},I})),l.then(_=>{const E=BL(_),I=new lA;return Object.assign(I,E),I})}else{const h=UL(this.apiClient,e);return c=Ie("{models_url}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const I=E;return I.sdkHttpResponse={headers:_.headers},I})),l.then(_=>{const E=qL(_),I=new lA;return Object.assign(I,E),I})}}async update(e){var t,i,s,a;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=u4(this.apiClient,e);return c=Ie("{model}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),l.then(_=>q_(_))}else{const h=l4(this.apiClient,e);return c=Ie("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),l.then(_=>F_(_))}}async delete(e){var t,i,s,a;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=zV(this.apiClient,e);return c=Ie("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const I=E;return I.sdkHttpResponse={headers:_.headers},I})),l.then(_=>{const E=$V(_),I=new uA;return Object.assign(I,E),I})}else{const h=GV(this.apiClient,e);return c=Ie("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const I=E;return I.sdkHttpResponse={headers:_.headers},I})),l.then(_=>{const E=HV(_),I=new uA;return Object.assign(I,E),I})}}async countTokens(e){var t,i,s,a;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=FV(this.apiClient,e);return c=Ie("{model}:countTokens",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const I=E;return I.sdkHttpResponse={headers:_.headers},I})),l.then(_=>{const E=BV(_),I=new cA;return Object.assign(I,E),I})}else{const h=UV(this.apiClient,e);return c=Ie("{model}:countTokens",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const I=E;return I.sdkHttpResponse={headers:_.headers},I})),l.then(_=>{const E=qV(_),I=new cA;return Object.assign(I,E),I})}}async computeTokens(e){var t,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=PV(this.apiClient,e);return a=Ie("{model}:computeTokens",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:f.headers},_})),s.then(f=>{const h=DV(f),_=new oM;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,s,a;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=vL(this.apiClient,e);return c=Ie("{model}:predictLongRunning",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),l.then(_=>{const E=yL(_),I=new Bm;return Object.assign(I,E),I})}else{const h=_L(this.apiClient,e);return c=Ie("{model}:predictLongRunning",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),l.then(_=>{const E=gL(_),I=new Bm;return Object.assign(I,E),I})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $4 extends As{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:s,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:s,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,s,a;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=W2(e);return c=Ie("{operationName}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),l}else{const h=J2(e);return c=Ie("{operationName}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),l}}async fetchPredictVideosOperationInternal(e){var t,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=G2(e);return a=Ie("{resourceName}:fetchPredictOperation",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function j4(n){const e={},t=m(n,["data"]);if(t!=null&&p(e,["data"],t),m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=m(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function K4(n){const e={},t=m(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>nO(a))),p(e,["parts"],s)}const i=m(n,["role"]);return i!=null&&p(e,["role"],i),e}function Y4(n,e,t){const i={},s=m(e,["expireTime"]);t!==void 0&&s!=null&&p(t,["expireTime"],s);const a=m(e,["newSessionExpireTime"]);t!==void 0&&a!=null&&p(t,["newSessionExpireTime"],a);const l=m(e,["uses"]);t!==void 0&&l!=null&&p(t,["uses"],l);const c=m(e,["liveConnectConstraints"]);t!==void 0&&c!=null&&p(t,["bidiGenerateContentSetup"],tO(n,c));const f=m(e,["lockAdditionalFields"]);return t!==void 0&&f!=null&&p(t,["fieldMask"],f),i}function J4(n,e){const t={},i=m(e,["config"]);return i!=null&&p(t,["config"],Y4(n,i,t)),t}function W4(n){const e={};if(m(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=m(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=m(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function Q4(n){const e={},t=m(n,["id"]);t!=null&&p(e,["id"],t);const i=m(n,["args"]);i!=null&&p(e,["args"],i);const s=m(n,["name"]);if(s!=null&&p(e,["name"],s),m(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(m(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function X4(n){const e={};if(m(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=m(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function Z4(n){const e={};if(m(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(m(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=m(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function eO(n,e){const t={},i=m(n,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],i);const s=m(n,["responseModalities"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","responseModalities"],s);const a=m(n,["temperature"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","temperature"],a);const l=m(n,["topP"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","topP"],l);const c=m(n,["topK"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","topK"],c);const f=m(n,["maxOutputTokens"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","maxOutputTokens"],f);const h=m(n,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const _=m(n,["seed"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","seed"],_);const E=m(n,["speechConfig"]);e!==void 0&&E!=null&&p(e,["setup","generationConfig","speechConfig"],Bv(E));const I=m(n,["thinkingConfig"]);e!==void 0&&I!=null&&p(e,["setup","generationConfig","thinkingConfig"],I);const x=m(n,["enableAffectiveDialog"]);e!==void 0&&x!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],x);const k=m(n,["systemInstruction"]);e!==void 0&&k!=null&&p(e,["setup","systemInstruction"],K4(Hn(k)));const V=m(n,["tools"]);if(e!==void 0&&V!=null){let le=$u(V);Array.isArray(le)&&(le=le.map(N=>rO(Hu(N)))),p(e,["setup","tools"],le)}const B=m(n,["sessionResumption"]);e!==void 0&&B!=null&&p(e,["setup","sessionResumption"],iO(B));const z=m(n,["inputAudioTranscription"]);e!==void 0&&z!=null&&p(e,["setup","inputAudioTranscription"],z);const G=m(n,["outputAudioTranscription"]);e!==void 0&&G!=null&&p(e,["setup","outputAudioTranscription"],G);const J=m(n,["realtimeInputConfig"]);e!==void 0&&J!=null&&p(e,["setup","realtimeInputConfig"],J);const se=m(n,["contextWindowCompression"]);e!==void 0&&se!=null&&p(e,["setup","contextWindowCompression"],se);const de=m(n,["proactivity"]);return e!==void 0&&de!=null&&p(e,["setup","proactivity"],de),t}function tO(n,e){const t={},i=m(e,["model"]);i!=null&&p(t,["setup","model"],dt(n,i));const s=m(e,["config"]);return s!=null&&p(t,["config"],eO(s,t)),t}function nO(n){const e={},t=m(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=m(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const s=m(n,["executableCode"]);s!=null&&p(e,["executableCode"],s);const a=m(n,["fileData"]);a!=null&&p(e,["fileData"],W4(a));const l=m(n,["functionCall"]);l!=null&&p(e,["functionCall"],Q4(l));const c=m(n,["functionResponse"]);c!=null&&p(e,["functionResponse"],c);const f=m(n,["inlineData"]);f!=null&&p(e,["inlineData"],j4(f));const h=m(n,["text"]);h!=null&&p(e,["text"],h);const _=m(n,["thought"]);_!=null&&p(e,["thought"],_);const E=m(n,["thoughtSignature"]);E!=null&&p(e,["thoughtSignature"],E);const I=m(n,["videoMetadata"]);return I!=null&&p(e,["videoMetadata"],I),e}function iO(n){const e={},t=m(n,["handle"]);if(t!=null&&p(e,["handle"],t),m(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function rO(n){const e={},t=m(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(E=>E)),p(e,["functionDeclarations"],_)}if(m(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=m(n,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const s=m(n,["computerUse"]);s!=null&&p(e,["computerUse"],s);const a=m(n,["fileSearch"]);a!=null&&p(e,["fileSearch"],a);const l=m(n,["codeExecution"]);if(l!=null&&p(e,["codeExecution"],l),m(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=m(n,["googleMaps"]);c!=null&&p(e,["googleMaps"],X4(c));const f=m(n,["googleSearch"]);f!=null&&p(e,["googleSearch"],Z4(f));const h=m(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sO(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const s=Object.keys(i).map(a=>`${t}.${a}`);e.push(...s)}else e.push(t)}return e.join(",")}function oO(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(n.bidiGenerateContentSetup=a,t=a):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const s=n.fieldMask;if(t){const a=sO(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?n.fieldMask=a:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let c=[];s.length>0&&(c=s.map(h=>l.includes(h)?`generationConfig.${h}`:h));const f=[];a&&f.push(a),c.length>0&&f.push(...c),f.length>0?n.fieldMask=f.join(","):delete n.fieldMask}else delete n.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?n.fieldMask=s.join(","):delete n.fieldMask;return n}class aO extends As{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=J4(this.apiClient,e);a=Ie("auth_tokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query;const f=oO(c,e.config);return s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),s.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lO(n,e){const t={},i=m(n,["displayName"]);return e!==void 0&&i!=null&&p(e,["displayName"],i),t}function uO(n){const e={},t=m(n,["config"]);return t!=null&&lO(t,e),e}function cO(n,e){const t={},i=m(n,["force"]);return e!==void 0&&i!=null&&p(e,["_query","force"],i),t}function dO(n){const e={},t=m(n,["name"]);t!=null&&p(e,["_url","name"],t);const i=m(n,["config"]);return i!=null&&cO(i,e),e}function fO(n){const e={},t=m(n,["name"]);return t!=null&&p(e,["_url","name"],t),e}function hO(n,e){const t={},i=m(n,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),p(e,["customMetadata"],a)}const s=m(n,["chunkingConfig"]);return e!==void 0&&s!=null&&p(e,["chunkingConfig"],s),t}function mO(n){const e={},t=m(n,["name"]);t!=null&&p(e,["name"],t);const i=m(n,["metadata"]);i!=null&&p(e,["metadata"],i);const s=m(n,["done"]);s!=null&&p(e,["done"],s);const a=m(n,["error"]);a!=null&&p(e,["error"],a);const l=m(n,["response"]);return l!=null&&p(e,["response"],gO(l)),e}function pO(n){const e={},t=m(n,["fileSearchStoreName"]);t!=null&&p(e,["_url","file_search_store_name"],t);const i=m(n,["fileName"]);i!=null&&p(e,["fileName"],i);const s=m(n,["config"]);return s!=null&&hO(s,e),e}function gO(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=m(n,["parent"]);i!=null&&p(e,["parent"],i);const s=m(n,["documentName"]);return s!=null&&p(e,["documentName"],s),e}function yO(n,e){const t={},i=m(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const s=m(n,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),t}function _O(n){const e={},t=m(n,["config"]);return t!=null&&yO(t,e),e}function vO(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=m(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const s=m(n,["fileSearchStores"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),p(e,["fileSearchStores"],a)}return e}function EO(n,e){const t={},i=m(n,["mimeType"]);e!==void 0&&i!=null&&p(e,["mimeType"],i);const s=m(n,["displayName"]);e!==void 0&&s!=null&&p(e,["displayName"],s);const a=m(n,["customMetadata"]);if(e!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(f=>f)),p(e,["customMetadata"],c)}const l=m(n,["chunkingConfig"]);return e!==void 0&&l!=null&&p(e,["chunkingConfig"],l),t}function TO(n){const e={},t=m(n,["fileSearchStoreName"]);t!=null&&p(e,["_url","file_search_store_name"],t);const i=m(n,["config"]);return i!=null&&EO(i,e),e}function IO(n){const e={},t=m(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wO(n,e){const t={},i=m(n,["force"]);return e!==void 0&&i!=null&&p(e,["_query","force"],i),t}function SO(n){const e={},t=m(n,["name"]);t!=null&&p(e,["_url","name"],t);const i=m(n,["config"]);return i!=null&&wO(i,e),e}function AO(n){const e={},t=m(n,["name"]);return t!=null&&p(e,["_url","name"],t),e}function xO(n,e){const t={},i=m(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const s=m(n,["pageToken"]);return e!==void 0&&s!=null&&p(e,["_query","pageToken"],s),t}function CO(n){const e={},t=m(n,["parent"]);t!=null&&p(e,["_url","parent"],t);const i=m(n,["config"]);return i!=null&&xO(i,e),e}function bO(n){const e={},t=m(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=m(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const s=m(n,["documents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),p(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class RO extends As{constructor(e){super(),this.apiClient=e,this.list=async t=>new Qa(Es.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:t.parent,config:i.config}),await this.listInternal(t),t)}async get(e){var t,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=AO(e);return a=Ie("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(e){var t,i;let s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=SO(e);s=Ie("{name}",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=CO(e);return a=Ie("{parent}/documents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const h=bO(f),_=new aM;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class NO extends As{constructor(e,t=new RO(e)){super(),this.apiClient=e,this.documents=t,this.list=async(i={})=>new Qa(Es.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=uO(e);return a=Ie("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async get(e){var t,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=fO(e);return a=Ie("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(e){var t,i;let s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=dO(e);s=Ie("{name}",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=_O(e);return a=Ie("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const h=vO(f),_=new lM;return Object.assign(_,h),_})}}async uploadToFileSearchStoreInternal(e){var t,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=TO(e);return a=Ie("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const h=IO(f),_=new uM;return Object.assign(_,h),_})}}async importFile(e){var t,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=pO(e);return a=Ie("{file_search_store_name}:importFile",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const h=mO(f),_=new Lv;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function PO(n,e){const t={},i=m(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function DO(n,e){const t={},i=m(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function MO(n,e,t){const i={};if(m(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=m(n,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&p(e,["displayName"],s),m(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=m(n,["epochCount"]);e!==void 0&&a!=null&&p(e,["tuningTask","hyperparameters","epochCount"],a);const l=m(n,["learningRateMultiplier"]);if(l!=null&&p(i,["tuningTask","hyperparameters","learningRateMultiplier"],l),m(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(m(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(m(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=m(n,["batchSize"]);e!==void 0&&c!=null&&p(e,["tuningTask","hyperparameters","batchSize"],c);const f=m(n,["learningRate"]);if(e!==void 0&&f!=null&&p(e,["tuningTask","hyperparameters","learningRate"],f),m(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(m(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function kO(n,e,t){const i={};let s=m(t,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const x=m(n,["validationDataset"]);e!==void 0&&x!=null&&p(e,["supervisedTuningSpec"],DA(x))}else if(s==="PREFERENCE_TUNING"){const x=m(n,["validationDataset"]);e!==void 0&&x!=null&&p(e,["preferenceOptimizationSpec"],DA(x))}const a=m(n,["tunedModelDisplayName"]);e!==void 0&&a!=null&&p(e,["tunedModelDisplayName"],a);const l=m(n,["description"]);e!==void 0&&l!=null&&p(e,["description"],l);let c=m(t,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const x=m(n,["epochCount"]);e!==void 0&&x!=null&&p(e,["supervisedTuningSpec","hyperParameters","epochCount"],x)}else if(c==="PREFERENCE_TUNING"){const x=m(n,["epochCount"]);e!==void 0&&x!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],x)}let f=m(t,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const x=m(n,["learningRateMultiplier"]);e!==void 0&&x!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],x)}else if(f==="PREFERENCE_TUNING"){const x=m(n,["learningRateMultiplier"]);e!==void 0&&x!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],x)}let h=m(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const x=m(n,["exportLastCheckpointOnly"]);e!==void 0&&x!=null&&p(e,["supervisedTuningSpec","exportLastCheckpointOnly"],x)}else if(h==="PREFERENCE_TUNING"){const x=m(n,["exportLastCheckpointOnly"]);e!==void 0&&x!=null&&p(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],x)}let _=m(t,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const x=m(n,["adapterSize"]);e!==void 0&&x!=null&&p(e,["supervisedTuningSpec","hyperParameters","adapterSize"],x)}else if(_==="PREFERENCE_TUNING"){const x=m(n,["adapterSize"]);e!==void 0&&x!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],x)}if(m(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(m(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const E=m(n,["labels"]);e!==void 0&&E!=null&&p(e,["labels"],E);const I=m(n,["beta"]);return e!==void 0&&I!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","beta"],I),i}function VO(n,e){const t={},i=m(n,["baseModel"]);i!=null&&p(t,["baseModel"],i);const s=m(n,["preTunedModel"]);s!=null&&p(t,["preTunedModel"],s);const a=m(n,["trainingDataset"]);a!=null&&jO(a);const l=m(n,["config"]);return l!=null&&MO(l,t),t}function LO(n,e){const t={},i=m(n,["baseModel"]);i!=null&&p(t,["baseModel"],i);const s=m(n,["preTunedModel"]);s!=null&&p(t,["preTunedModel"],s);const a=m(n,["trainingDataset"]);a!=null&&KO(a,t,e);const l=m(n,["config"]);return l!=null&&kO(l,t,e),t}function OO(n,e){const t={},i=m(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function UO(n,e){const t={},i=m(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function FO(n,e,t){const i={},s=m(n,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const a=m(n,["pageToken"]);e!==void 0&&a!=null&&p(e,["_query","pageToken"],a);const l=m(n,["filter"]);return e!==void 0&&l!=null&&p(e,["_query","filter"],l),i}function qO(n,e,t){const i={},s=m(n,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const a=m(n,["pageToken"]);e!==void 0&&a!=null&&p(e,["_query","pageToken"],a);const l=m(n,["filter"]);return e!==void 0&&l!=null&&p(e,["_query","filter"],l),i}function BO(n,e){const t={},i=m(n,["config"]);return i!=null&&FO(i,t),t}function GO(n,e){const t={},i=m(n,["config"]);return i!=null&&qO(i,t),t}function zO(n,e){const t={},i=m(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const s=m(n,["nextPageToken"]);s!=null&&p(t,["nextPageToken"],s);const a=m(n,["tunedModels"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>Ab(c))),p(t,["tuningJobs"],l)}return t}function HO(n,e){const t={},i=m(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const s=m(n,["nextPageToken"]);s!=null&&p(t,["nextPageToken"],s);const a=m(n,["tuningJobs"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>G_(c))),p(t,["tuningJobs"],l)}return t}function $O(n,e){const t={},i=m(n,["name"]);i!=null&&p(t,["model"],i);const s=m(n,["name"]);return s!=null&&p(t,["endpoint"],s),t}function jO(n,e){const t={};if(m(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(m(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=m(n,["examples"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),p(t,["examples","examples"],s)}return t}function KO(n,e,t){const i={};let s=m(t,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const l=m(n,["gcsUri"]);e!==void 0&&l!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(s==="PREFERENCE_TUNING"){const l=m(n,["gcsUri"]);e!==void 0&&l!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}let a=m(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const l=m(n,["vertexDatasetResource"]);e!==void 0&&l!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(a==="PREFERENCE_TUNING"){const l=m(n,["vertexDatasetResource"]);e!==void 0&&l!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}if(m(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function Ab(n,e){const t={},i=m(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const s=m(n,["name"]);s!=null&&p(t,["name"],s);const a=m(n,["state"]);a!=null&&p(t,["state"],ob(a));const l=m(n,["createTime"]);l!=null&&p(t,["createTime"],l);const c=m(n,["tuningTask","startTime"]);c!=null&&p(t,["startTime"],c);const f=m(n,["tuningTask","completeTime"]);f!=null&&p(t,["endTime"],f);const h=m(n,["updateTime"]);h!=null&&p(t,["updateTime"],h);const _=m(n,["description"]);_!=null&&p(t,["description"],_);const E=m(n,["baseModel"]);E!=null&&p(t,["baseModel"],E);const I=m(n,["_self"]);return I!=null&&p(t,["tunedModel"],$O(I)),t}function G_(n,e){const t={},i=m(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const s=m(n,["name"]);s!=null&&p(t,["name"],s);const a=m(n,["state"]);a!=null&&p(t,["state"],ob(a));const l=m(n,["createTime"]);l!=null&&p(t,["createTime"],l);const c=m(n,["startTime"]);c!=null&&p(t,["startTime"],c);const f=m(n,["endTime"]);f!=null&&p(t,["endTime"],f);const h=m(n,["updateTime"]);h!=null&&p(t,["updateTime"],h);const _=m(n,["error"]);_!=null&&p(t,["error"],_);const E=m(n,["description"]);E!=null&&p(t,["description"],E);const I=m(n,["baseModel"]);I!=null&&p(t,["baseModel"],I);const x=m(n,["tunedModel"]);x!=null&&p(t,["tunedModel"],x);const k=m(n,["preTunedModel"]);k!=null&&p(t,["preTunedModel"],k);const V=m(n,["supervisedTuningSpec"]);V!=null&&p(t,["supervisedTuningSpec"],V);const B=m(n,["preferenceOptimizationSpec"]);B!=null&&p(t,["preferenceOptimizationSpec"],B);const z=m(n,["tuningDataStats"]);z!=null&&p(t,["tuningDataStats"],z);const G=m(n,["encryptionSpec"]);G!=null&&p(t,["encryptionSpec"],G);const J=m(n,["partnerModelTuningSpec"]);J!=null&&p(t,["partnerModelTuningSpec"],J);const se=m(n,["customBaseModel"]);se!=null&&p(t,["customBaseModel"],se);const de=m(n,["experiment"]);de!=null&&p(t,["experiment"],de);const le=m(n,["labels"]);le!=null&&p(t,["labels"],le);const N=m(n,["outputUri"]);N!=null&&p(t,["outputUri"],N);const P=m(n,["pipelineJob"]);P!=null&&p(t,["pipelineJob"],P);const R=m(n,["serviceAccount"]);R!=null&&p(t,["serviceAccount"],R);const D=m(n,["tunedModelDisplayName"]);D!=null&&p(t,["tunedModelDisplayName"],D);const O=m(n,["veoTuningSpec"]);return O!=null&&p(t,["veoTuningSpec"],O),t}function YO(n,e){const t={},i=m(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const s=m(n,["name"]);s!=null&&p(t,["name"],s);const a=m(n,["metadata"]);a!=null&&p(t,["metadata"],a);const l=m(n,["done"]);l!=null&&p(t,["done"],l);const c=m(n,["error"]);return c!=null&&p(t,["error"],c),t}function DA(n,e){const t={},i=m(n,["gcsUri"]);i!=null&&p(t,["validationDatasetUri"],i);const s=m(n,["vertexDatasetResource"]);return s!=null&&p(t,["validationDatasetUri"],s),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class JO extends As{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new Qa(Es.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const s={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(s.checkpointId=t.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},t),{preTunedModel:s});return a.baseModel=void 0,await this.tuneInternal(a)}else{const s=Object.assign({},t);return await this.tuneInternal(s)}else{const s=Object.assign({},t),a=await this.tuneMldevInternal(s);let l="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?l=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(l=a.name.split("/operations/")[0]),{name:l,state:V_.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,s,a;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=UO(e);return c=Ie("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const I=E;return I.sdkHttpResponse={headers:_.headers},I})),l.then(_=>G_(_))}else{const h=OO(e);return c=Ie("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const I=E;return I.sdkHttpResponse={headers:_.headers},I})),l.then(_=>Ab(_))}}async listInternal(e){var t,i,s,a;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=GO(e);return c=Ie("tuningJobs",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const I=E;return I.sdkHttpResponse={headers:_.headers},I})),l.then(_=>{const E=HO(_),I=new dA;return Object.assign(I,E),I})}else{const h=BO(e);return c=Ie("tunedModels",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const I=E;return I.sdkHttpResponse={headers:_.headers},I})),l.then(_=>{const E=zO(_),I=new dA;return Object.assign(I,E),I})}}async cancel(e){var t,i,s,a;let l="",c={};if(this.apiClient.isVertexAI()){const f=DO(e);l=Ie("{name}:cancel",f._url),c=f._query,delete f._url,delete f._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const f=PO(e);l=Ie("{name}:cancel",f._url),c=f._query,delete f._url,delete f._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async tuneInternal(e){var t,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=LO(e,e);return a=Ie("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:f.headers},_})),s.then(f=>G_(f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=VO(e);return a=Ie("tunedModels",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:f.headers},_})),s.then(f=>YO(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class WO{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const QO=1024*1024*8,XO=3,ZO=1e3,eU=2,zm="x-goog-upload-status";async function tU(n,e,t){var i;const s=await xb(n,e,t),a=await(s==null?void 0:s.json());if(((i=s==null?void 0:s.headers)===null||i===void 0?void 0:i[zm])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function nU(n,e,t){var i;const s=await xb(n,e,t),a=await(s==null?void 0:s.json());if(((i=s==null?void 0:s.headers)===null||i===void 0?void 0:i[zm])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const l=eb(a),c=new Ov;return Object.assign(c,l),c}async function xb(n,e,t){var i,s;let a=0,l=0,c=new L_(new Response),f="upload";for(a=n.size;l<a;){const h=Math.min(QO,a-l),_=n.slice(l,l+h);l+h>=a&&(f+=", finalize");let E=0,I=ZO;for(;E<XO&&(c=await t.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(l),"Content-Length":String(h)}}}),!(!((i=c==null?void 0:c.headers)===null||i===void 0)&&i[zm]));)E++,await rU(I),I=I*eU;if(l+=h,((s=c==null?void 0:c.headers)===null||s===void 0?void 0:s[zm])!=="active")break;if(a<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return c}async function iU(n){return{size:n.size,type:n.type}}function rU(n){return new Promise(e=>setTimeout(e,n))}class sU{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await tU(e,t,i)}async uploadToFileSearchStore(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await nU(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await iU(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oU{create(e,t,i){return new aU(e,t,i)}}class aU{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const MA="x-goog-api-key";class lU{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(MA)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(MA,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uU="gl-node/";class cU{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=q2(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const s=new lU(this.apiKey);this.apiClient=new A4({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:uU+"web",uploader:new sU,downloader:new WO}),this.models=new H4(this.apiClient),this.live=new U4(this.apiClient,s,new oU),this.batches=new pk(this.apiClient),this.chats=new Wk(this.models,this.apiClient),this.caches=new Kk(this.apiClient),this.files=new oV(this.apiClient),this.operations=new $4(this.apiClient),this.authTokens=new aO(this.apiClient),this.tunings=new JO(this.apiClient),this.fileSearchStores=new NO(this.apiClient)}}const d_={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var fm={};const dU=n=>{try{if(typeof process<"u"&&fm)return fm[n]||fm[`NEXT_PUBLIC_${n}`]||fm[`REACT_APP_${n}`];if(typeof import.meta<"u"&&d_)return d_[`VITE_${n}`]||d_[n];if(typeof window<"u"&&window.ENV&&window.ENV[n])return window.ENV[n]}catch(e){console.warn("Environment variable access failed:",e)}},zv=dU("API_KEY"),Cb=new cU({apiKey:zv||"dummy-key-to-prevent-init-crash"}),fU=async n=>new Promise((e,t)=>{const i=new FileReader;i.onloadend=()=>{const a=i.result.split(",")[1];e(a)},i.onerror=t,i.readAsDataURL(n)}),hU=n=>{if(!n)return"{}";let e=n.replace(/^```json\s*/,"").replace(/\s*```$/,"");return e=e.replace(/^```\s*/,"").replace(/\s*```$/,""),e},z_=()=>({ingredients:[{name:"cenoura",confidence:.99},{name:"bacon",confidence:.98},{name:"ovos",confidence:.95},{name:"queijo parmeso",confidence:.9},{name:"creme de leite",confidence:.85},{name:"cebola",confidence:.92},{name:"alho",confidence:.91},{name:"tomate",confidence:.89},{name:"alface",confidence:.88}],notes:" MODO DEMO: Resultados simulados."}),H_=()=>[{title:"Carbonara Brasileira Rpida",time_minutes:20,difficulty:"Fcil",servings:2,used_ingredients:["250g de macarro","3 ovos","150g de bacon","50g de queijo parmeso","1/2 caixa de creme de leite"],missing_ingredients:["pimenta do reino a gosto"],instructions:["Coloque a gua do macarro para ferver com sal (aprox. **10 min**).","Corte os **150g de bacon** em cubos e frite por cerca de **8 minutos** at ficar crocante. Reserve.","Em uma tigela, misture as **3 gemas**, a **1/2 caixa de creme de leite** e os **50g de queijo parmeso** ralado.","Cozinhe os **250g de macarro** por **10 minutos** at ficar al dente.","Escorra o macarro (guarde um pouco da gua) e misture rapidamente ao molho de ovos fora do fogo para no talhar.","Adicione o bacon e sirva imediatamente."],tags:["massa","rpida","conforto"],timers:[{label:"Cozinhar Macarro",minutes:12},{label:"Fritar Bacon",minutes:8}]},{title:"Omelete Recheado Cremoso",time_minutes:10,difficulty:"Muito Fcil",servings:1,used_ingredients:["2 ovos","30g de queijo parmeso","1 fatia de bacon picado","1/4 de cebola picada","1 dente de alho"],missing_ingredients:["salsinha picada"],instructions:["Bata os **2 ovos** com sal e pimenta por **1 minuto**.","Refogue a **1/4 cebola** e o alho com a **fatia de bacon** picado por **3 minutos**.","Despeje os ovos na frigideira e deixe cozinhar por **4 minutos**.","Quando firmar, adicione os **30g queijo** e dobre ao meio.","Sirva dourado."],tags:["caf da manh","low carb","rpida"],timers:[{label:"Refogar Temperos",minutes:3},{label:"Cozinhar Ovos",minutes:5}]}],mU=async n=>{var a,l;if(!zv)return console.warn("API Key not found. Falling back to Mock Data for demonstration."),new Promise(c=>setTimeout(()=>c(z_()),1500));const e=await fU(n),t=n.type||"image/jpeg",i="gemini-2.5-flash",s=`
  Analise esta imagem de geladeira/despensa.
  Liste os alimentos identificados.
  
  FORMATO DE RESPOSTA (Texto Simples):
  - [Nome do Alimento]
  - [Nome do Alimento]
  
  REGRAS:
  1. Use apenas hfen (-) no incio de cada linha.
  2. Nomes curtos e diretos (Ex: "Cenoura", "Leite", "Manteiga").
  3. NO descreva embalagem, quantidade ou posio.
  4. NO use adjetivos como "fatiado", "picado", "pote de".
  5. Portugus do Brasil.
  `;try{const f=(await Cb.models.generateContent({model:i,contents:{parts:[{inlineData:{mimeType:t,data:e}},{text:s}]},config:{temperature:.1,maxOutputTokens:1e3,safetySettings:[{category:Fr.HARM_CATEGORY_HATE_SPEECH,threshold:qr.BLOCK_NONE},{category:Fr.HARM_CATEGORY_SEXUALLY_EXPLICIT,threshold:qr.BLOCK_NONE},{category:Fr.HARM_CATEGORY_HARASSMENT,threshold:qr.BLOCK_NONE},{category:Fr.HARM_CATEGORY_DANGEROUS_CONTENT,threshold:qr.BLOCK_NONE}]}})).text;if(!f)throw new Error("A IA no retornou texto.");const _=f.split(`
`).map(E=>E.trim()).filter(E=>(E.startsWith("-")||E.startsWith("*"))&&E.length>2).map(E=>{let I=E.replace(/^[-*]\s*/,"").trim();return I=I.replace(/[.,;]$/,""),I=I.replace(/^(pote de|garrafa de|caixa de|saco de)\s*/i,""),{name:I.toLowerCase(),confidence:.9}}).filter(E=>E.name.length>1&&E.name.length<40);return _.length===0?f.length<200?{ingredients:[{name:f,confidence:.5}],notes:"Texto livre detectado."}:{ingredients:[],notes:"No foi possvel identificar itens em formato de lista."}:{ingredients:_,notes:"Anlise via lista de texto."}}catch(c){if(console.error("Error analyzing image:",c),(a=c.message)!=null&&a.includes("403")||(l=c.message)!=null&&l.includes("API key"))return z_();throw new Error("Falha ao analisar a imagem. Tente novamente.")}},pU=(n,e)=>{if(!e||e.length===0)return n;const t=s=>s.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),i=e.map(s=>t(s.trim())).filter(s=>s.length>0);return i.length===0?n:n.filter(s=>{const a=t([s.title,...s.used_ingredients||[],...s.missing_ingredients||[],...s.instructions||[]].join(" "));return!i.some(c=>a.includes(c))})},gU=async(n,e,t,i)=>{var E,I;if(!zv)return new Promise(x=>setTimeout(()=>x(H_()),1500));const s="gemini-2.5-flash",a=i&&i.length>0?i.join(", "):"gua, sal, acar, leo, azeite, pimenta do reino, vinagre, caf, manteiga, arroz, feijo, farinha de trigo";let l="",c="",f="Mtodo: Livre (Fogo, Forno, Microondas) ou o mais adequado para o prato.";t&&t!==_n.ANY&&(f=`
     MTODO OBRIGATRIO: ${t}.
     As receitas DEVEM ser feitas usando ${t}.
     Se for AirFryer: d temperaturas (ex: 200C) e tempos precisos.
     `);let h=[];if(e&&e.length>0){const x=e.map(z=>z.name).join(", ");h=e.map(z=>z.dislikes).filter(z=>z&&z.trim().length>0).join(",").split(",").map(z=>z.trim()).filter(z=>z);const V=[...new Set(e.flatMap(z=>z.restrictions))],B=e.some(z=>z.isChild||z.name.toLowerCase().includes("beb")||z.restrictions.includes("Beb (< 2 anos)"));l=`
    COZINHANDO PARA: ${x}
    RESTRIES: ${V.join(", ")||"Nenhuma"}
    `,c=`
    INGREDIENTES PROIBIDOS (Se a receita levar, NO SUGIRA): ${h.join(", ")}.
    ${B?"ALERTA BEB: Zero acar, zero mel, pouco sal. Texturas macias.":""}
    `}const _=`
  Voc  um Chef Profissional especializado em Culinria Caseira Real e Saborosa.
  
  OBJETIVO PRINCIPAL: Sugerir receitas REAIS, que existem de verdade em restaurantes ou casas de famlia.
  NO invente "misturas criativas" que no fazem sentido gastronmico. As pessoas vo comer isso.
  
  INGREDIENTES DISPONVEIS: ${n.join(", ")}.
  DESPENSA BSICA: ${a}.
  
  ${f}
  ${l}
  ${c}

  REGRAS RGIDAS DE QUALIDADE:
  1. RECUPERE RECEITAS CLSSICAS: Se tenho ovos e batata, sugira "Tortilla Espanhola" ou "Omelete de Batata", no invente "Batata cozida com casca de ovo".
  2. SIMPLICIDADE: Se os ingredientes forem poucos, sugira pratos simples e honestos (Ex: Arroz frito, Macarro alho e leo, Salada Caprese).
  3. SEM "GOROROBA": No misture ingredientes que no combinam quimicamente ou culturalmente.
  4. QUANTIDADES: Seja preciso. Use gramas, xcaras ou colheres. Nunca diga "um pouco".
  
  FORMATO JSON OBRIGATRIO:
  {
    "recipes": [
      {
        "title": "Nome Real do Prato (Ex: Escondidinho de Carne)",
        "time_minutes": 40,
        "difficulty": "Mdio",
        "servings": 4,
        "used_ingredients": ["500g de carne moda", "3 batatas grandes"], // INICIE COM QUANTIDADE
        "missing_ingredients": ["100g de queijo mussarela"], // INICIE COM QUANTIDADE (Liste apenas o essencial que falta)
        "instructions": ["Passo 1 detalhado com tempo **10 min**", "Passo 2 com temperatura"],
        "tags": ["almoo", "clssico", "carne"]
      }
    ]
  }
  `;try{const k=(await Cb.models.generateContent({model:s,contents:"Sugira 4 receitas deliciosas e reais baseadas no que eu tenho.",config:{systemInstruction:_,temperature:.4,responseMimeType:"application/json",safetySettings:[{category:Fr.HARM_CATEGORY_HATE_SPEECH,threshold:qr.BLOCK_NONE},{category:Fr.HARM_CATEGORY_SEXUALLY_EXPLICIT,threshold:qr.BLOCK_NONE},{category:Fr.HARM_CATEGORY_HARASSMENT,threshold:qr.BLOCK_NONE},{category:Fr.HARM_CATEGORY_DANGEROUS_CONTENT,threshold:qr.BLOCK_NONE}]}})).text;if(!k)throw new Error("A IA no retornou texto.");try{const V=hU(k);let z=JSON.parse(V).recipes||[];return z=z.map(G=>({...G,used_ingredients:G.used_ingredients||[],missing_ingredients:G.missing_ingredients||[],instructions:G.instructions||[],tags:G.tags||[],timers:G.timers||[]})),e&&e.length>0&&(z=pU(z,h)),z}catch(V){throw console.error("JSON Parse Error (Recipes):",V),new Error("Erro ao interpretar receitas.")}}catch(x){if(console.error("Error generating recipes:",x),(E=x.message)!=null&&E.includes("403")||(I=x.message)!=null&&I.includes("API key"))return H_();throw new Error("Falha ao gerar receitas. Tente novamente.")}};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yU=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),_U=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),kA=n=>{const e=_U(n);return e.charAt(0).toUpperCase()+e.slice(1)},bb=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),vU=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var EU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TU=ce.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:s="",children:a,iconNode:l,...c},f)=>ce.createElement("svg",{ref:f,...EU,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:bb("lucide",s),...!a&&!vU(c)&&{"aria-hidden":"true"},...c},[...l.map(([h,_])=>ce.createElement(h,_)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=(n,e)=>{const t=ce.forwardRef(({className:i,...s},a)=>ce.createElement(TU,{ref:a,iconNode:e,className:bb(`lucide-${yU(kA(n))}`,`lucide-${n}`,i),...s}));return t.displayName=kA(n),t};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IU=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Kr=Pe("arrow-left",IU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wU=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Hv=Pe("arrow-right",wU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SU=[["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M19.38 6.813A9 9 0 0 1 20.8 10.2a2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"11xh7x"}],["path",{d:"M9 12h.01",key:"157uk2"}]],AU=Pe("baby",SU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xU=[["path",{d:"M4.5 3h15",key:"c7n0jr"}],["path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3",key:"m1uhx7"}],["path",{d:"M6 14h12",key:"4cwo0f"}]],CU=Pe("beaker",xU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bU=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],$_=Pe("camera",bU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RU=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Hm=Pe("check",RU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NU=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],Hi=Pe("chef-hat",NU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PU=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],cu=Pe("chevron-down",PU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DU=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Rb=Pe("chevron-left",DU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MU=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Hd=Pe("chevron-right",MU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kU=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],bd=Pe("chevron-up",kU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],$d=Pe("circle-alert",VU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],vu=Pe("circle-check",LU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],UU=Pe("circle-plus",OU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FU=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Nb=Pe("clock",FU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qU=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],BU=Pe("eye-off",qU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GU=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],zU=Pe("eye",GU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HU=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],$U=Pe("file-text",HU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jU=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],du=Pe("flame",jU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KU=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],fu=Pe("heart",KU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YU=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Pb=Pe("house",YU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JU=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Db=Pe("image",JU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WU=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],QU=Pe("key-round",WU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XU=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ZU=Pe("loader-circle",XU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e5=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Mb=Pe("lock",e5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t5=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],n5=Pe("log-out",t5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i5=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],$v=Pe("mail",i5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r5=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],s5=Pe("message-circle",r5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o5=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],a5=Pe("mic",o5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l5=[["path",{d:"M5 12h14",key:"1ays0h"}]],u5=Pe("minus",l5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c5=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],d5=Pe("package",c5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f5=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],VA=Pe("pause",f5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h5=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],kb=Pe("pencil",h5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m5=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],LA=Pe("play",m5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p5=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Eu=Pe("plus",p5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g5=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Vb=Pe("save",g5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y5=[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]],OA=Pe("scale",y5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _5=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]],v5=Pe("scan-line",_5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E5=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],T5=Pe("search",E5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I5=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],UA=Pe("share-2",I5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w5=[["path",{d:"m15 11-1 9",key:"5wnq3a"}],["path",{d:"m19 11-4-7",key:"cnml18"}],["path",{d:"M2 11h20",key:"3eubbj"}],["path",{d:"m3.5 11 1.6 7.4a2 2 0 0 0 2 1.6h9.8a2 2 0 0 0 2-1.6l1.7-7.4",key:"yiazzp"}],["path",{d:"M4.5 15.5h15",key:"13mye1"}],["path",{d:"m5 11 4-7",key:"116ra9"}],["path",{d:"m9 11 1 9",key:"1ojof7"}]],jv=Pe("shopping-basket",w5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S5=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Kv=Pe("shopping-cart",S5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A5=[["path",{d:"M17.971 4.285A2 2 0 0 1 21 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z",key:"15892j"}],["path",{d:"M3 20V4",key:"1ptbpl"}]],x5=Pe("skip-back",A5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C5=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],b5=Pe("skip-forward",C5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],N5=Pe("smile",R5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P5=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],D5=Pe("sparkles",P5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M5=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],k5=Pe("square-check-big",M5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V5=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],L5=Pe("square",V5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O5=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Lb=Pe("star",O5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U5=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Sm=Pe("trash-2",U5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F5=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],q5=Pe("upload",F5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B5=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],$m=Pe("user",B5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G5=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],jm=Pe("users",G5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z5=[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]],jd=Pe("utensils-crossed",z5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H5=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],Km=Pe("utensils",H5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $5=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],j5=Pe("volume-2",$5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K5=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]],Kd=Pe("wind",K5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y5=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Yd=Pe("x",Y5),J5=({onFileSelected:n,onDemoClick:e,onProfileClick:t,activeProfiles:i,cookingMethod:s,onChangeContext:a,error:l,onBack:c})=>{const f=ce.useRef(null),[h,_]=ce.useState(!1),E=[...new Set(i.flatMap(G=>G.restrictions||[]))],I=()=>{switch(s){case _n.AIRFRYER:return T.jsx(Kd,{className:"w-3 h-3 text-emerald-600"});case _n.STOVE:return T.jsx(du,{className:"w-3 h-3 text-orange-500"});case _n.OVEN:return T.jsx(Hi,{className:"w-3 h-3 text-blue-500"});default:return T.jsx(jd,{className:"w-3 h-3 text-purple-500"})}},x=G=>{G.target.files&&G.target.files[0]&&n(G.target.files[0])},k=G=>{G.preventDefault(),G.stopPropagation(),G.type==="dragenter"||G.type==="dragover"?_(!0):G.type==="dragleave"&&_(!1)},V=G=>{G.preventDefault(),G.stopPropagation(),_(!1),G.dataTransfer.files&&G.dataTransfer.files[0]&&n(G.dataTransfer.files[0])},B=()=>{var G;(G=f.current)==null||G.click()},z=G=>G.avatar&&(G.avatar.startsWith("http")||G.avatar.startsWith("data:"))&&G.avatar?T.jsx("img",{src:G.avatar,alt:G.name,className:"w-full h-full object-cover"}):G.avatar?T.jsx("div",{className:"w-full h-full flex items-center justify-center bg-white text-lg",children:G.avatar}):T.jsx("img",{src:`https://ui-avatars.com/api/?name=${G.name}&background=random&color=fff`,alt:G.name,className:"w-full h-full object-cover"});return T.jsxs("div",{className:"flex flex-col items-center min-h-screen bg-gray-50 pb-24 relative overflow-hidden",children:[T.jsx("div",{className:"absolute top-0 left-0 w-full h-64 bg-gradient-to-b from-emerald-100/50 to-transparent pointer-events-none z-0"}),T.jsx("div",{className:"w-full px-4 pt-4 z-20 sticky top-0",children:T.jsxs("button",{onClick:a,className:"w-full flex items-center gap-3 bg-white/80 backdrop-blur-lg p-2.5 rounded-2xl shadow-sm border border-white/50 hover:bg-white transition-all ring-1 ring-gray-100",children:[T.jsxs("div",{className:"flex -space-x-2 overflow-hidden pl-1",children:[i.length>0?i.slice(0,3).map((G,J)=>T.jsx("div",{className:"w-9 h-9 rounded-full bg-gray-100 border-2 border-white overflow-hidden shadow-sm flex-shrink-0 relative z-10 flex items-center justify-center",children:z(G)},J)):T.jsx("div",{className:"w-9 h-9 rounded-full bg-gray-100 overflow-hidden border-2 border-white flex-shrink-0",children:T.jsx("img",{src:"https://ui-avatars.com/api/?name=Qualquer+Pessoa&background=e5e7eb&color=6b7280",alt:"Avatar",className:"w-full h-full object-cover"})}),i.length>3&&T.jsxs("div",{className:"w-9 h-9 rounded-full bg-gray-100 border-2 border-white flex items-center justify-center text-[10px] font-bold text-gray-500 relative z-20",children:["+",i.length-3]})]}),T.jsxs("div",{className:"text-left flex-1 min-w-0 flex flex-col justify-center h-full",children:[T.jsx("div",{className:"flex items-center gap-1.5",children:T.jsx("span",{className:"text-sm font-bold text-gray-800 truncate",children:i.length===0?"Qualquer pessoa":i.length===1?i[0].name:`${i.length} pessoas`})}),T.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-gray-500 font-medium",children:[T.jsxs("div",{className:"flex items-center gap-1 bg-gray-100 px-1.5 py-0.5 rounded-md",children:[I(),T.jsx("span",{children:s===_n.ANY?"Todos":s})]}),E.length>0&&T.jsxs("span",{className:"text-red-500 bg-red-50 px-1.5 py-0.5 rounded-md",children:[E.length," restries"]})]})]}),T.jsx("div",{className:"pr-2 text-gray-300",children:T.jsx(cu,{className:"w-5 h-5"})})]})}),T.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center w-full max-w-md px-6 z-10 mt-4",children:[T.jsx("div",{className:"w-full flex justify-start mb-2",children:T.jsxs("button",{onClick:c,className:"p-2 -ml-2 text-gray-400 hover:text-gray-600 hover:bg-white/50 rounded-full transition-all flex items-center gap-1",children:[T.jsx(Kr,{className:"w-5 h-5"}),T.jsx("span",{className:"text-xs font-bold",children:"Voltar"})]})}),T.jsxs("div",{className:"text-center mb-8",children:[T.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-white rounded-[2rem] mb-6 shadow-lg shadow-emerald-900/5 ring-4 ring-emerald-50 transform rotate-3",children:T.jsx(v5,{className:"w-10 h-10 text-emerald-500"})}),T.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"O que tem na geladeira?"}),T.jsxs("p",{className:"text-sm text-gray-500 max-w-[260px] mx-auto leading-relaxed",children:["Tire uma foto dos seus ingredientes e ns criaremos a receita perfeita para ",T.jsx("span",{className:"font-bold text-emerald-600",children:i.length>0?i.length===1?i[0].name:"todos":"voc"}),"."]})]}),T.jsxs("div",{className:`w-full relative group cursor-pointer bg-white rounded-[2rem] shadow-xl shadow-emerald-900/5 transition-all duration-300 p-8 flex flex-col items-center text-center overflow-hidden ${h?"border-2 border-emerald-500 bg-emerald-50":"border border-transparent hover:border-emerald-200"}`,onDragEnter:k,onDragLeave:k,onDragOver:k,onDrop:V,onClick:B,children:[T.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-emerald-400 via-teal-500 to-emerald-400"}),T.jsx("input",{ref:f,type:"file",accept:"image/*",className:"hidden",onChange:x}),T.jsx("div",{className:"w-20 h-20 bg-emerald-50 rounded-full flex items-center justify-center mb-5 group-hover:scale-110 transition-transform duration-500 group-hover:bg-emerald-100",children:T.jsx($_,{className:"w-8 h-8 text-emerald-600"})}),T.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:"Tirar Foto"}),T.jsx("p",{className:"text-xs text-gray-400 font-medium mb-6",children:"ou selecione da galeria"}),T.jsx("div",{className:"w-full h-px bg-gray-100 mb-6"}),T.jsxs("div",{className:"flex gap-8 text-[10px] text-gray-400 font-bold uppercase tracking-widest",children:[T.jsxs("span",{className:"flex flex-col items-center gap-1 group-hover:text-emerald-600 transition-colors",children:[T.jsx(Db,{className:"w-4 h-4"})," Galeria"]}),T.jsxs("span",{className:"flex flex-col items-center gap-1 group-hover:text-emerald-600 transition-colors",children:[T.jsx(q5,{className:"w-4 h-4"})," Arquivo"]})]})]}),l&&T.jsxs("div",{className:"mt-4 w-full p-3 bg-red-50 border border-red-100 rounded-xl text-red-600 text-sm font-medium flex items-center gap-2 animate-in slide-in-from-top-2 text-left shadow-sm",children:[T.jsx($d,{className:"w-4 h-4 flex-shrink-0"}),T.jsx("span",{children:l})]}),T.jsxs("button",{onClick:e,className:"mt-6 flex items-center gap-2 text-xs font-bold text-emerald-600 bg-emerald-50 hover:bg-emerald-100 px-4 py-2 rounded-full transition-colors",children:[T.jsx(CU,{className:"w-3 h-3"}),"Modo Demonstrao"]})]})]})},W5=({size:n=48,color:e="text-emerald-500"})=>T.jsx("div",{className:"flex items-center justify-center",children:T.jsxs("svg",{className:`animate-spin ${e}`,width:n,height:n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[T.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),T.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),Q5=({imagePreview:n,mode:e="analyzing"})=>{const[t,i]=ce.useState("");return ce.useEffect(()=>{let s=[];e==="analyzing"?s=["Gemini est olhando sua geladeira...","Identificando vegetais...","Verificando laticnios...","Analisando garrafas e potes...","Organizando ingredientes..."]:s=["O Chef est pensando...","Combinando ingredientes...","Verificando restries alimentares...","Escrevendo o modo de preparo...","Ajustando tempos de cozimento..."];let a=0;i(s[0]);const l=setInterval(()=>{a=(a+1)%s.length,i(s[a])},2e3);return()=>clearInterval(l)},[e]),T.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-white p-6",children:[T.jsxs("div",{className:"relative w-64 h-64 mb-8 rounded-2xl overflow-hidden shadow-2xl border-4 border-white",children:[n?T.jsxs(T.Fragment,{children:[T.jsx("img",{src:n,alt:"Fridge Preview",className:"w-full h-full object-cover opacity-50 blur-sm scale-110"}),T.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-emerald-900/40 to-transparent"})]}):T.jsx("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center"}),T.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-10",children:T.jsx("div",{className:"bg-white/90 backdrop-blur-sm p-4 rounded-full shadow-lg",children:T.jsx(W5,{size:60,color:"text-emerald-600"})})})]}),T.jsx("h2",{className:"text-2xl font-bold text-gray-800 text-center mb-2 animate-pulse",children:e==="analyzing"?"Processando Imagem":"Preparando Receitas"}),T.jsx("p",{className:"text-emerald-600 font-medium text-center",children:t})]})},X5=["abacate","abacaxi","abobrinha","abbora","aafro","acelga","acar","agrio","aipo","alecrim","alface","alho","alho-por","ameixa","amndoas","amendoim","amido de milho","arroz","aveia","azeite","azeitona","bacon","banana","batata","batata doce","baunilha","berinjela","beterraba","biscoito","brcolis","cacau em p","caf","camaro","canela","carne moda","carne seca","cebola","cebola roxa","cebolinha","cenoura","cerveja","ch","champignon","cheiro-verde","chocolate","chourio","coentro","cogumelo","colorau","cominho","costelinha","couve","couve-flor","creme de leite","curry","damasco","ervilha","espinafre","farinha de mandioca","farinha de rosca","farinha de trigo","feijo branco","feijo carioca","feijo preto","fermento","fgado","fil mignon","frango","fub","gengibre","gergelim","goiabada","gro de bico","hortel","iogurte","ketchup","kiwi","laranja","leite","leite condensado","leite de coco","lentilha","limo","linguia","louro","ma","macarro","maionese","mamo","mandioca","manga","manteiga","manjerico","maracuj","margarina","mel","melancia","melo","milho","molho de soja","molho de tomate","morango","mostarda","mussarela","noz moscada","nozes","leo","organo","ovos","palmito","po","po de forma","paprica","parmeso","passas","peito de frango","peino","peixe","pera","pimento amarelo","pimento verde","pimento vermelho","pimenta do reino","polvilho","presunto","queijo coalho","queijo minas","queijo prato","quiabo","rabanete","repolho","requeijo","rcula","sal","salsa","salsicha","salsinha","shoyu","suco de uva","tomate","tomilho","torrada","trigo para kibe","uva","vagem","vinagre","vinho branco","vinho tinto"],Z5=({result:n,onFindRecipes:e,onRetake:t})=>{const[i,s]=ce.useState(n.ingredients.map(x=>x.name)),[a,l]=ce.useState(""),[c,f]=ce.useState(!1),h=ce.useMemo(()=>a.length<2?[]:X5.filter(x=>x.toLowerCase().includes(a.toLowerCase())&&!i.includes(x)).slice(0,5),[a,i]),_=x=>{i.includes(x)||s([...i,x]),l(""),f(!1)},E=x=>{const k=[...i];k.splice(x,1),s(k)},I=x=>{x.key==="Enter"&&a&&_(a)};return T.jsxs("div",{className:"min-h-screen bg-gray-50 relative pb-32",children:[T.jsx("div",{className:"absolute top-0 left-0 w-full h-64 bg-gradient-to-b from-emerald-50 to-transparent -z-10"}),T.jsxs("div",{className:"pt-8 px-6 pb-6 max-w-md mx-auto",children:[T.jsxs("div",{className:"flex items-center justify-between mb-2",children:[T.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Confira a lista"}),T.jsxs("div",{className:"bg-emerald-100 text-emerald-800 text-xs font-bold px-3 py-1 rounded-full",children:[i.length," itens"]})]}),T.jsx("p",{className:"text-sm text-gray-500",children:"O Chef identificou estes alimentos. Adicione o que faltou ou remova erros."})]}),T.jsxs("div",{className:"px-6 max-w-md mx-auto space-y-6",children:[T.jsxs("div",{className:"relative z-20",children:[T.jsxs("div",{className:"bg-white p-1.5 rounded-2xl shadow-lg shadow-gray-200/50 flex items-center gap-2 border border-gray-100 focus-within:border-emerald-300 focus-within:ring-4 focus-within:ring-emerald-50 transition-all",children:[T.jsx("div",{className:"p-2 bg-gray-50 rounded-xl text-gray-400",children:T.jsx(T5,{className:"w-5 h-5"})}),T.jsx("input",{type:"text",placeholder:"Adicionar ingrediente manual...",className:"flex-1 outline-none bg-transparent text-gray-800 placeholder-gray-400 py-2 text-sm font-medium",value:a,onChange:x=>{l(x.target.value),f(!0)},onFocus:()=>f(!0),onBlur:()=>setTimeout(()=>f(!1),200),onKeyDown:I}),T.jsx("button",{onClick:()=>a&&_(a),disabled:!a,className:"p-2.5 bg-emerald-600 text-white rounded-xl hover:bg-emerald-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed shadow-md shadow-emerald-200",children:T.jsx(Eu,{className:"w-5 h-5"})})]}),c&&h.length>0&&T.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden animate-in fade-in slide-in-from-top-2 z-30",children:h.map(x=>T.jsxs("button",{className:"w-full text-left px-4 py-3 hover:bg-emerald-50 text-gray-700 border-b border-gray-50 last:border-0 flex justify-between items-center bg-white transition-colors group",onClick:()=>_(x),children:[T.jsx("span",{className:"capitalize font-medium",children:x}),T.jsx(Eu,{className:"w-4 h-4 text-gray-300 group-hover:text-emerald-500"})]},x))})]}),T.jsxs("div",{className:"space-y-3",children:[i.length===0?T.jsxs("div",{className:"py-12 flex flex-col items-center justify-center text-center opacity-60",children:[T.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-full flex items-center justify-center mb-4",children:T.jsx(jv,{className:"w-8 h-8 text-gray-400"})}),T.jsx("p",{className:"text-gray-500 font-medium",children:"Sua lista est vazia."}),T.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Adicione ingredientes acima."})]}):T.jsx("div",{className:"grid grid-cols-1 gap-2",children:i.map((x,k)=>T.jsxs("div",{className:"group flex items-center justify-between p-3 pl-4 bg-white rounded-2xl border border-gray-100 shadow-sm hover:shadow-md hover:border-emerald-100 transition-all duration-300 animate-in slide-in-from-bottom-2 fade-in fill-mode-backwards",style:{animationDelay:`${k*50}ms`},children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-400"}),T.jsx("span",{className:"text-gray-700 font-medium capitalize text-base",children:x})]}),T.jsx("button",{onClick:()=>E(k),className:"p-2 text-gray-300 hover:text-red-500 hover:bg-red-50 rounded-xl transition-all opacity-100 md:opacity-0 md:group-hover:opacity-100",children:T.jsx(Sm,{className:"w-4 h-4"})})]},k))}),i.length>0&&T.jsx("div",{className:"flex justify-center pt-4",children:T.jsx("button",{onClick:()=>s([]),className:"text-xs text-red-400 hover:text-red-600 font-medium px-4 py-2 hover:bg-red-50 rounded-full transition-colors",children:"Limpar lista inteira"})})]}),T.jsxs("div",{className:"pt-4 flex gap-3",children:[T.jsxs("button",{onClick:t,className:"flex-1 py-4 rounded-2xl font-bold text-gray-600 bg-white border border-gray-200 shadow-sm hover:bg-gray-50 transition-colors text-sm flex items-center justify-center gap-2",children:[T.jsx(Kr,{className:"w-4 h-4"}),"Voltar"]}),T.jsxs("button",{onClick:()=>e(i),disabled:i.length===0,className:"flex-[2] py-4 rounded-2xl font-bold text-white bg-emerald-600 shadow-xl shadow-emerald-200 hover:bg-emerald-700 transition-all active:scale-95 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none text-sm",children:[T.jsx(Hi,{className:"w-5 h-5"}),"Gerar Receitas",T.jsx(Hd,{className:"w-4 h-4"})]})]})]})]})},e3=({recipes:n,onBack:e,onSelectRecipe:t,favorites:i,onToggleFavorite:s,cookingMethod:a})=>{const l=f=>i.some(h=>h.title===f.title),c=f=>{if(a&&a!==_n.ANY)switch(a){case _n.AIRFRYER:return{label:"AirFryer",icon:Kd,color:"text-emerald-500"};case _n.STOVE:return{label:"Fogo",icon:du,color:"text-orange-500"};case _n.OVEN:return{label:"Forno",icon:Hi,color:"text-blue-500"};default:return{label:a,icon:jd,color:"text-purple-500"}}const h=(f.title+" "+f.tags.join(" ")).toLowerCase();return h.includes("airfryer")?{label:"AirFryer",icon:Kd,color:"text-emerald-500"}:h.includes("forno")||h.includes("assado")?{label:"Forno",icon:Hi,color:"text-blue-500"}:h.includes("fogo")||h.includes("frigideira")?{label:"Fogo",icon:du,color:"text-orange-500"}:{label:"Cozinha",icon:jd,color:"text-gray-500"}};return T.jsxs("div",{className:"min-h-screen bg-gray-50 pb-8",children:[T.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:T.jsxs("div",{className:"flex items-center p-4",children:[T.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-full mr-2 transition-colors",children:T.jsx(Kr,{className:"w-6 h-6 text-gray-600"})}),T.jsxs("div",{children:[T.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Sugestes do Chef"}),T.jsx("p",{className:"text-xs text-gray-500",children:"Baseado na sua imagem"})]})]})}),T.jsx("div",{className:"p-4 space-y-3",children:n.map((f,h)=>{const _=l(f),E=c(f);return T.jsxs("div",{onClick:()=>t(f),className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-5 hover:shadow-md transition-all active:scale-[0.99] cursor-pointer relative group",children:[T.jsxs("div",{className:"flex justify-between items-start mb-3",children:[T.jsx("h3",{className:"text-lg font-bold text-gray-900 leading-tight pr-8",children:f.title}),T.jsx("button",{onClick:I=>{I.stopPropagation(),s(f)},className:"p-2 -mt-2 -mr-2 rounded-full hover:bg-red-50 transition-colors z-10 relative",children:T.jsx(fu,{className:`w-5 h-5 transition-colors ${_?"fill-red-500 text-red-500":"text-gray-300 hover:text-red-400"}`})})]}),T.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-4",children:[T.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-medium text-gray-600 bg-gray-50 px-2.5 py-1 rounded-lg border border-gray-100",children:[T.jsx(Nb,{className:"w-3.5 h-3.5 text-emerald-600"}),f.time_minutes," min"]}),T.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-medium text-gray-600 bg-gray-50 px-2.5 py-1 rounded-lg border border-gray-100",children:[T.jsx(du,{className:`w-3.5 h-3.5 ${f.difficulty==="Fcil"?"text-green-500":"text-orange-500"}`}),f.difficulty]}),T.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-medium text-gray-600 bg-gray-50 px-2.5 py-1 rounded-lg border border-gray-100",children:[T.jsx(E.icon,{className:`w-3.5 h-3.5 ${E.color}`}),E.label]}),T.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-medium text-gray-600 bg-gray-50 px-2.5 py-1 rounded-lg border border-gray-100 ml-auto",children:[T.jsx(jm,{className:"w-3.5 h-3.5 text-blue-500"}),f.servings]})]}),T.jsxs("div",{className:"flex items-center justify-between border-t border-gray-50 pt-3 mt-1",children:[T.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[T.jsxs("span",{className:"text-emerald-700 font-medium bg-emerald-50 px-2 py-0.5 rounded flex items-center gap-1",children:[T.jsx(vu,{className:"w-3 h-3"})," ",f.used_ingredients.length," tem"]}),f.missing_ingredients.length>0?T.jsxs("span",{className:"text-orange-700 font-medium bg-orange-50 px-2 py-0.5 rounded flex items-center gap-1",children:[T.jsx(jv,{className:"w-3 h-3"})," ",f.missing_ingredients.length," falta"]}):T.jsx("span",{className:"text-emerald-600 font-bold text-[10px] uppercase tracking-wide bg-emerald-50 px-2 py-0.5 rounded",children:"Completa"})]}),T.jsx("div",{className:"p-1.5 bg-gray-50 rounded-full text-gray-400 group-hover:bg-emerald-50 group-hover:text-emerald-600 transition-colors",children:T.jsx(Hd,{className:"w-4 h-4"})})]})]},h)})})]})},t3=({recipe:n,onBack:e,isFavorite:t,onToggleFavorite:i,onRate:s,shoppingList:a,onAddToShoppingList:l,cookingMethod:c,onFinishCooking:f})=>{const[h,_]=ce.useState(!1),[E,I]=ce.useState(0),[x,k]=ce.useState(!1),[V,B]=ce.useState(!1),[z,G]=ce.useState(null),[J,se]=ce.useState(n.rating||0),[de,le]=ce.useState(!1),[N,P]=ce.useState(0),[R,D]=ce.useState(0),[O,L]=ce.useState(!1),[M,De]=ce.useState(n.servings);ce.useEffect(()=>{se(n.rating||0)},[n.rating]);const We=()=>{switch(c){case _n.AIRFRYER:return T.jsx(Kd,{className:"w-4 h-4 text-emerald-300"});case _n.STOVE:return T.jsx(du,{className:"w-4 h-4 text-orange-300"});case _n.OVEN:return T.jsx(Hi,{className:"w-4 h-4 text-blue-300"});default:return T.jsx(jd,{className:"w-4 h-4 text-purple-300"})}},Z=ge=>{const Ae=ge.trim(),be=/^(\d+\s*\/\s*\d+|\d+(?:[.,]\d+)?)\s*/,Le=Ae.match(be);if(!Le)return{name:Ae,quantity:"1x"};const ke=Le[1].replace(/\s/g,""),ot=Ae.substring(Le[0].length).trim(),Qt=["g","kg","mg","l","ml","dl","grama","gramas","kilo","litro","xicara","xcara","colher","lata","caixa","pacote","saco","vidro","fatia","dente","mao","ramo","tablete","pitada","copo","garrafa"],Cn=ot.split(" ")[0].toLowerCase().replace(/[.,]$/,""),Ct=Qt.some(bn=>Cn.startsWith(bn)),Vt=ke.includes("/");return Ct?{name:Ae,quantity:"1x"}:Vt?{name:ot,quantity:ke}:{name:ot,quantity:ke+"x"}},ne=ge=>{const{name:Ae}=Z(ge),be=Ae.toLowerCase().trim(),Le=ge.toLowerCase().trim();return a.some(ke=>{const ot=ke.name.toLowerCase().trim();return(ot===be||ot===Le)&&!ke.checked})},ve=ce.useMemo(()=>Array.from({length:50}).map((ge,Ae)=>({id:Ae,left:`${Math.random()*100}%`,animationDelay:`${Math.random()*2}s`,animationDuration:`${Math.random()*3+2}s`,backgroundColor:["#fbbf24","#34d399","#f87171","#60a5fa","#a78bfa"][Math.floor(Math.random()*5)],rotation:Math.random()*360})),[]),je=ge=>{const Ae=Math.round(ge*100)/100;if(Ae===0)return"0";if(Number.isInteger(Ae))return Ae.toString();const be=Math.floor(Ae),Le=Ae-be;if(Le<.05)return be.toString();if(Le>.95)return(be+1).toString();const ot=[{val:.25,label:"1/4"},{val:.33,label:"1/3"},{val:.5,label:"1/2"},{val:.66,label:"2/3"},{val:.75,label:"3/4"},{val:.125,label:"1/8"}].find(Qt=>Math.abs(Le-Qt.val)<.06);return ot?be>0?`${be} ${ot.label}`:ot.label:Ae.toFixed(1).replace(".",",").replace(",0","")},Ke=(ge,Ae,be)=>{if(!ge)return"";const Le=be/Ae;return ge.replace(/(\d+(?:[.,]\d+)?|\d+\/\d+)(\s*)([a-zA-Z-]+)?/g,(ke,ot,Qt,Cn)=>{const Ct=Cn?Cn.toLowerCase():"";if(["min","minuto","h","grau","","c","passo"].some(dr=>Ct.startsWith(dr)))return ke;let bn;if(ot.includes("/")){const[dr,ue]=ot.split("/").map(Number);bn=dr/ue}else bn=parseFloat(ot.replace(",","."));if(isNaN(bn))return ke;const Yo=bn*Le;return`${je(Yo)}${Qt}${Cn||""}`})},F=ge=>{const Ae=/^((?:\d+(?:[.,]\d+)?|\d+\/\d+)\s*(?:[a-zA-Z-]+\s+)?)(.*)/,be=ge.match(Ae);return be?T.jsxs(T.Fragment,{children:[T.jsx("span",{className:"font-bold text-gray-900",children:be[1]}),T.jsx("span",{className:"text-gray-600",children:be[2]})]}):T.jsx("span",{className:"text-gray-700 font-medium",children:ge})},te=ge=>{if(!ge)return null;const Ae=/\b(\d+(?:[.,]\d+)?\s*(?:minutos?|min|h(?:oras?)?|s(?:egundos?)?))\b/gi;return ge.split(/\*\*(.*?)\*\*/g).map((Le,ke)=>{if(ke%2===1)return T.jsx("strong",{className:"font-bold text-gray-900 bg-emerald-50 px-1 rounded mx-0.5",children:Le},ke);const ot=Le.split(Ae);return T.jsx("span",{children:ot.map((Qt,Cn)=>Qt.match(Ae)?T.jsx("span",{className:"text-emerald-600 font-bold",children:Qt},`${ke}-${Cn}`):Qt)},ke)})},_e=ge=>{if(!ge)return null;const Ae=/\b(\d+(?:[.,]\d+)?\s*(?:minutos?|min|h(?:oras?)?|s(?:egundos?)?))\b/gi;return ge.split(/\*\*(.*?)\*\*/g).map((Le,ke)=>{if(ke%2===1)return T.jsx("strong",{className:"font-bold text-emerald-400",children:Le},ke);const ot=Le.split(Ae);return T.jsx("span",{children:ot.map((Qt,Cn)=>Qt.match(Ae)?T.jsx("span",{className:"text-emerald-400 font-bold",children:Qt},`${ke}-${Cn}`):Qt)},ke)})},we=ge=>{if(!ge)return 0;const Ae=ge.match(/(\d+)\s*(?:minutos|minuto|min|m)\b/i);return Ae&&Ae[1]?parseInt(Ae[1])*60:0};ce.useEffect(()=>{if(h&&!x){const ge=n.instructions[E]||"",Ae=we(ge);P(Ae),D(Ae),L(!1)}},[E,h]),ce.useEffect(()=>{let ge;return O&&R>0?ge=setInterval(()=>D(Ae=>Ae-1),1e3):R===0&&O&&L(!1),()=>clearInterval(ge)},[O,R]);const Fe=ge=>{const Ae=Math.floor(ge/60),be=ge%60;return`${Ae.toString().padStart(2,"0")}:${be.toString().padStart(2,"0")}`};ce.useEffect(()=>{const ge=()=>{const Ae=window.speechSynthesis.getVoices(),be=Ae.find(Le=>Le.lang==="pt-BR")||Ae[0];G(be)};return ge(),window.speechSynthesis.onvoiceschanged=ge,()=>window.speechSynthesis.cancel()},[]),ce.useEffect(()=>{(!h||x)&&(window.speechSynthesis.cancel(),B(!1))},[h,x]),ce.useEffect(()=>{if(h&&!x){const ge=setTimeout(()=>qe(E),500);return()=>clearTimeout(ge)}},[E,h,x]),ce.useEffect(()=>{let ge=null;if(h&&!x){const Ae=window.SpeechRecognition||window.webkitSpeechRecognition;if(Ae){ge=new Ae,ge.continuous=!0,ge.lang="pt-BR",ge.interimResults=!1,ge.onstart=()=>le(!0),ge.onend=()=>{if(h&&!x)try{ge.start()}catch{}else le(!1)},ge.onresult=be=>{const Le=be.results.length-1,ke=be.results[Le][0].transcript.toLowerCase().trim();console.log("Voice Command:",ke),ke.includes("prximo")||ke.includes("seguinte")||ke.includes("avanar")?kt():ke.includes("voltar")||ke.includes("anterior")?E>0&&I(ot=>ot-1):ke.includes("repetir")||ke.includes("ler")||ke.includes("fala")?qe(E):(ke.includes("parar")||ke.includes("pausar")||ke.includes("quieto"))&&(window.speechSynthesis.cancel(),B(!1))};try{ge.start()}catch(be){console.error(be)}}}else le(!1);return()=>{ge&&ge.stop()}},[h,x,E]);const qe=ge=>{if(x)return;const Ae=n.instructions[ge];if(!Ae)return;window.speechSynthesis.cancel();const be=Ke(Ae,n.servings,M).replace(/\*\*/g,""),Le=new SpeechSynthesisUtterance(`Passo ${ge+1}. ${be}`);z&&(Le.voice=z),Le.rate=1.1,Le.onstart=()=>B(!0),Le.onend=()=>B(!1),window.speechSynthesis.speak(Le)},Ye=()=>{V?(window.speechSynthesis.cancel(),B(!1)):qe(E)},kt=()=>{E<n.instructions.length-1?I(ge=>ge+1):(k(!0),window.speechSynthesis.cancel())},pt=ge=>{const Ae=ge.replace(/\*\*/g,""),{name:be,quantity:Le}=Z(Ae);l(be,Le)},bi=()=>{let ge=` *${n.title}* - Pensa Prato

`;ge+=` Tempo: ${n.time_minutes} min
`,ge+=` Pores: ${M}
`,ge+=` Dificuldade: ${n.difficulty}

`,ge+=`*Ingredientes:*
`,[...n.used_ingredients,...n.missing_ingredients].forEach(Le=>{const ke=Ke(Le,n.servings,M).replace(/\*\*/g,"");ge+=` ${ke}
`}),ge+=`
*Modo de Preparo:*
`,n.instructions.forEach((Le,ke)=>{const ot=Ke(Le,n.servings,M).replace(/\*\*/g,"");ge+=`${ke+1}. ${ot}
`}),ge+=`
_Encontre mais receitas no App Pensa Prato!_ `;const be=`https://api.whatsapp.com/send?text=${encodeURIComponent(ge)}`;window.open(be,"_blank")};if(h){if(x)return T.jsxs("div",{className:"fixed inset-0 z-[100] bg-gradient-to-br from-emerald-900 via-emerald-800 to-teal-900 flex flex-col items-center justify-center text-white p-6 overflow-hidden",children:[T.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[ve.map(be=>T.jsx("div",{className:"absolute w-3 h-3 rounded-sm",style:{top:"-10%",left:be.left,backgroundColor:be.backgroundColor,animation:`confetti-fall ${be.animationDuration} linear infinite`}},be.id)),T.jsx("style",{children:"@keyframes confetti-fall { 100% { transform: translateY(110vh) rotate(720deg); } }"})]}),T.jsxs("div",{className:"relative bg-white/10 backdrop-blur-2xl p-8 pt-12 rounded-[2.5rem] w-full max-w-sm text-center border border-white/20 shadow-2xl animate-in zoom-in-95 duration-500",children:[T.jsx("div",{className:"absolute -top-12 left-1/2 -translate-x-1/2",children:T.jsx("div",{className:"w-24 h-24 bg-emerald-500 rounded-full flex items-center justify-center shadow-lg shadow-emerald-900/50 ring-4 ring-emerald-800/50 animate-in bounce-in duration-700",children:T.jsx(vu,{className:"w-12 h-12 text-white drop-shadow-md"})})}),T.jsx("h2",{className:"text-4xl font-bold mb-2 mt-4 text-white drop-shadow-sm",children:"Delcia!"}),T.jsx("p",{className:"text-emerald-100 mb-8 text-lg font-medium",children:"Voc arrasou na cozinha."}),T.jsxs("div",{className:"bg-black/20 rounded-2xl p-6 mb-8 backdrop-blur-sm",children:[T.jsx("p",{className:"text-xs font-bold text-emerald-200 uppercase tracking-widest mb-4",children:"Avalie o prato"}),T.jsx("div",{className:"flex justify-center gap-3",children:[1,2,3,4,5].map(be=>T.jsx("button",{type:"button",onClick:()=>{se(be),s(be)},className:"transition-transform active:scale-90 hover:scale-110 focus:outline-none",children:T.jsx(Lb,{className:`w-10 h-10 transition-all duration-300 ${J>=be?"fill-amber-400 text-amber-400 drop-shadow-[0_0_10px_rgba(251,191,36,0.5)]":"text-white/20 hover:text-white/40"}`,strokeWidth:J>=be?0:1.5})},be))})]}),T.jsxs("div",{className:"space-y-3",children:[T.jsxs("button",{onClick:bi,className:"w-full bg-white/10 hover:bg-white/20 text-white font-bold py-3.5 rounded-xl transition-colors flex items-center justify-center gap-2 border border-white/10",children:[T.jsx(UA,{className:"w-5 h-5"}),"Compartilhar Resultado"]}),T.jsx("button",{onClick:()=>{_(!1),k(!1),f&&f()},className:"w-full bg-white text-emerald-900 hover:bg-emerald-50 font-bold py-4 rounded-xl shadow-lg transition-colors",children:"Concluir"})]})]})]});(E+1)/n.instructions.length*100;const ge=n.instructions[E]||"",Ae=Ke(ge,n.servings,M);return T.jsxs("div",{className:"fixed inset-0 bg-neutral-950 z-[90] flex flex-col text-white",children:[T.jsxs("div",{className:"flex items-center justify-between p-6",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("div",{className:"bg-gray-800 p-2 rounded-full",children:T.jsx(Hi,{className:"w-6 h-6 text-emerald-400"})}),T.jsxs("span",{className:"font-bold text-gray-300",children:[n.time_minutes," min"]})]}),T.jsxs("div",{className:"flex items-center gap-4",children:[de&&T.jsxs("div",{className:"flex items-center gap-2 bg-emerald-500/20 px-3 py-1 rounded-full border border-emerald-500/30 animate-pulse",children:[T.jsx(a5,{className:"w-4 h-4 text-emerald-400"}),T.jsx("span",{className:"text-[10px] font-bold text-emerald-400 uppercase",children:"Ouvindo"})]}),T.jsx("button",{onClick:()=>_(!1),className:"p-2 bg-gray-800 rounded-full",children:T.jsx(Yd,{className:"w-5 h-5"})})]})]}),T.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-6 text-center relative",children:[T.jsxs("p",{className:"text-gray-500 text-sm uppercase tracking-widest mb-8",children:["Passo ",E+1," / ",n.instructions.length]}),T.jsx("p",{className:"text-3xl md:text-4xl font-medium leading-relaxed mb-10",children:_e(Ae)}),N>0&&T.jsxs("div",{className:"bg-gray-900 rounded-2xl p-4 border border-gray-800 w-full max-w-md flex items-center justify-between animate-in slide-in-from-bottom-4",children:[T.jsxs("div",{className:"text-left pl-2",children:[T.jsx("p",{className:`text-[10px] uppercase font-bold mb-1 ${O?"text-emerald-400 animate-pulse":"text-gray-500"}`,children:O?"Contando...":R<N?"Pausado":"Aguardando Incio"}),T.jsx("p",{className:"text-4xl font-mono text-white tracking-wider",children:Fe(R)})]}),T.jsx("button",{onClick:()=>L(!O),className:`px-6 py-3 rounded-xl font-bold transition-all active:scale-95 flex items-center gap-2 ${O?"bg-amber-500/10 text-amber-500 border border-amber-500/20":"bg-emerald-600 text-white shadow-lg shadow-emerald-900/50 hover:bg-emerald-500"} ${!O&&R===N?"animate-pulse ring-2 ring-emerald-500/50":""}`,children:O?T.jsxs(T.Fragment,{children:[T.jsx(VA,{className:"w-5 h-5 fill-current"})," Pausar"]}):T.jsxs(T.Fragment,{children:[T.jsx(LA,{className:"w-5 h-5 fill-current"})," ",R<N?"Retomar":"Iniciar"]})})]})]}),T.jsxs("div",{className:"bg-neutral-900 p-6 pb-10 rounded-t-[2.5rem] border-t border-gray-800 flex justify-center gap-6",children:[T.jsx("button",{onClick:()=>E>0&&I(be=>be-1),className:"p-5 bg-gray-800 rounded-2xl text-gray-400",children:T.jsx(x5,{className:"w-6 h-6"})}),T.jsx("button",{onClick:Ye,className:`p-5 rounded-2xl ${V?"bg-amber-500 text-white":"bg-gray-800 text-white"}`,children:V?T.jsx(VA,{className:"w-8 h-8"}):T.jsx(j5,{className:"w-8 h-8"})}),T.jsx("button",{onClick:kt,className:"p-5 bg-emerald-600 rounded-2xl text-white",children:T.jsx(b5,{className:"w-6 h-6"})})]})]})}return T.jsxs("div",{className:"min-h-screen bg-white pb-24",children:[T.jsxs("div",{className:"bg-emerald-600 pt-12 pb-8 px-6 rounded-b-[2.5rem] shadow-lg relative overflow-hidden text-white",children:[T.jsx("div",{className:"absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] pointer-events-none"}),T.jsxs("div",{className:"flex justify-between items-center relative z-10 mb-6",children:[T.jsx("button",{onClick:e,className:"p-2 bg-white/20 backdrop-blur-md rounded-full hover:bg-white/30 transition-colors",children:T.jsx(Kr,{className:"w-6 h-6"})}),T.jsxs("div",{className:"flex gap-2",children:[T.jsx("button",{onClick:bi,className:"p-2.5 bg-white/20 backdrop-blur-md rounded-full hover:bg-white/30 transition-colors",children:T.jsx(UA,{className:"w-6 h-6 text-white"})}),T.jsx("button",{onClick:i,className:"p-2.5 bg-white/20 backdrop-blur-md rounded-full hover:bg-white/30 transition-colors",children:T.jsx(fu,{className:`w-6 h-6 ${t?"fill-red-400 text-red-400":"text-white"}`})})]})]}),T.jsxs("div",{className:"relative z-10",children:[T.jsxs("div",{className:"flex gap-2 mb-3",children:[T.jsx("span",{className:"bg-emerald-800/50 px-2 py-0.5 rounded text-[10px] font-bold uppercase border border-emerald-500/30",children:n.difficulty}),c&&c!==_n.ANY&&T.jsxs("span",{className:"bg-emerald-800/50 px-2 py-0.5 rounded text-[10px] font-bold uppercase flex gap-1 items-center border border-emerald-500/30",children:[We()," ",c]})]}),T.jsx("h1",{className:"text-3xl font-bold mb-4",children:n.title}),T.jsxs("div",{className:"flex gap-4 text-emerald-100 text-sm font-medium",children:[T.jsxs("span",{className:"bg-black/20 px-3 py-1.5 rounded-xl backdrop-blur-sm flex gap-1 items-center",children:[T.jsx(Nb,{className:"w-4 h-4"})," ",n.time_minutes," min"]}),T.jsxs("span",{className:"bg-black/20 px-3 py-1.5 rounded-xl backdrop-blur-sm flex gap-1 items-center",children:[T.jsx(jm,{className:"w-4 h-4"})," ",M," pessoas"]})]})]})]}),T.jsxs("div",{className:"px-6 py-6 space-y-8",children:[T.jsxs("div",{className:"bg-white rounded-2xl p-4 flex justify-between border border-gray-100 shadow-sm items-center",children:[T.jsxs("div",{className:"flex gap-3 items-center",children:[T.jsx("div",{className:"p-2 bg-emerald-50 rounded-lg text-emerald-600",children:T.jsx(jm,{className:"w-5 h-5"})}),T.jsxs("div",{children:[T.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase",children:"Pores"}),T.jsx("p",{className:"text-sm font-bold",children:"Ajustar receita"})]})]}),T.jsxs("div",{className:"flex items-center gap-4 bg-gray-50 rounded-xl px-2 py-1",children:[T.jsx("button",{onClick:()=>De(Math.max(1,M-1)),className:"p-2 text-gray-400 hover:bg-white rounded-lg",children:T.jsx(u5,{className:"w-4 h-4"})}),T.jsx("span",{className:"font-bold w-4 text-center",children:M}),T.jsx("button",{onClick:()=>De(M+1),className:"p-2 text-gray-400 hover:bg-white rounded-lg",children:T.jsx(Eu,{className:"w-4 h-4"})})]})]}),T.jsxs("div",{children:[T.jsxs("h3",{className:"text-lg font-bold mb-4 flex gap-2 items-center",children:[T.jsx(jv,{className:"w-5 h-5 text-emerald-600"})," Ingredientes"]}),T.jsxs("div",{className:"space-y-6",children:[n.used_ingredients.length>0&&T.jsx("ul",{className:"space-y-3",children:n.used_ingredients.map((ge,Ae)=>{const be=Ke(ge,n.servings,M),Le=be.replace(/\*\*/g,""),ke=ne(Le);return T.jsxs("li",{className:"flex justify-between gap-3 p-3 rounded-xl bg-gray-50 border border-gray-100",children:[T.jsxs("div",{className:"flex gap-3",children:[T.jsx(vu,{className:"w-5 h-5 text-emerald-500 mt-0.5 flex-shrink-0"}),T.jsx("span",{children:F(Le)})]}),T.jsx("button",{onClick:()=>pt(be),disabled:ke,className:`p-1.5 rounded-lg ${ke?"bg-emerald-100 text-emerald-600":"bg-white text-gray-300 shadow-sm"}`,children:ke?T.jsx(Hm,{className:"w-4 h-4"}):T.jsx(UU,{className:"w-4 h-4"})})]},Ae)})}),n.missing_ingredients.length>0&&T.jsxs("div",{children:[T.jsx("p",{className:"text-xs font-bold text-orange-400 uppercase mb-3 pl-1",children:"Falta comprar"}),T.jsx("ul",{className:"space-y-3",children:n.missing_ingredients.map((ge,Ae)=>{const be=Ke(ge,n.servings,M),Le=be.replace(/\*\*/g,""),ke=ne(Le);return T.jsxs("li",{className:"flex justify-between gap-3 p-3 rounded-xl bg-orange-50 border border-orange-100",children:[T.jsxs("div",{className:"flex gap-3",children:[T.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-orange-300 mt-0.5 flex-shrink-0"}),T.jsx("span",{children:F(Le)})]}),T.jsx("button",{onClick:()=>pt(be),disabled:ke,className:`p-1.5 rounded-lg ${ke?"bg-emerald-100 text-emerald-600":"bg-white text-orange-400 shadow-sm"}`,children:ke?T.jsx(Hm,{className:"w-4 h-4"}):T.jsx(Kv,{className:"w-4 h-4"})})]},Ae)})})]})]})]}),T.jsxs("div",{children:[T.jsxs("h3",{className:"text-lg font-bold mb-4 flex gap-2 items-center",children:[T.jsx(Hi,{className:"w-5 h-5 text-emerald-600"})," Modo de Preparo"]}),T.jsxs("div",{className:"space-y-6 relative pl-3",children:[T.jsx("div",{className:"absolute left-[1.6rem] top-4 bottom-4 w-0.5 bg-gray-100"}),n.instructions.map((ge,Ae)=>T.jsxs("div",{className:"relative pl-8",children:[T.jsx("div",{className:"absolute left-0 top-0 w-8 h-8 rounded-full bg-emerald-100 text-emerald-700 font-bold flex items-center justify-center text-sm ring-4 ring-white shadow-sm",children:Ae+1}),T.jsx("p",{className:"text-gray-600 leading-relaxed bg-white p-4 rounded-xl shadow-sm border border-gray-100",children:te(Ke(ge,n.servings,M))})]},Ae))]})]})]}),T.jsx("div",{className:"fixed bottom-6 left-6 right-6 z-30",children:T.jsxs("button",{onClick:()=>{I(0),k(!1),_(!0)},className:"w-full bg-emerald-600 text-white font-bold py-4 rounded-2xl shadow-xl flex justify-center gap-2 active:scale-95",children:[T.jsx(LA,{className:"w-5 h-5 fill-current"})," Comear a Cozinhar"]})})]})},n3=({userProfile:n,onSaveProfile:e,onBack:t,favorites:i=[],onSelectRecipe:s,initialTab:a="settings",onLogout:l,pantryItems:c=[],onUpdatePantry:f,recipesCount:h=0})=>{const{name:_="Usurio",avatar:E="",dislikes:I="",restrictions:x=[]}=n||{},k=a==="favorites",[V,B]=ce.useState(I),[z,G]=ce.useState(x),J=ce.useRef(null),[se,de]=ce.useState(c.length===0),le=I&&I.length>0||x&&x.length>0,[N,P]=ce.useState(le),R=["Vegano","Vegetariano","Sem Glten","Sem Lactose","APLV","Diabtico","Hipertenso"],D=["Sal","Acar","leo","Azeite","Pimenta","Caf","Arroz","Feijo","Farinha de Trigo","Leite","Ovos","Manteiga","Vinagre","Alho","Cebola"];ce.useEffect(()=>{n&&(B(n.dislikes||""),G(n.restrictions||[]))},[n]);const O=ne=>{z.includes(ne)?G(z.filter(ve=>ve!==ne)):G([...z,ne])},L=ne=>{f&&(c.includes(ne)?f(c.filter(ve=>ve!==ne)):f([...c,ne]))},M=()=>{const ne={...n,dislikes:V,restrictions:z};e(ne)},De=()=>{de(!0),setTimeout(()=>{var ne;(ne=J.current)==null||ne.scrollIntoView({behavior:"smooth",block:"center"})},100)},We=[{label:"Receitas Feitas",value:h.toString(),icon:Hi,color:"text-blue-500",bg:"bg-blue-50"},{label:"Na Despensa",value:c.length.toString(),icon:OA,color:"text-emerald-500",bg:"bg-emerald-50",action:De},{label:"Favoritos",value:i.length.toString(),icon:fu,color:"text-red-500",bg:"bg-red-50"}],Z=()=>E&&(E.startsWith("http")||E.startsWith("data:"))?T.jsx("img",{src:E,alt:_,className:"w-full h-full object-cover"}):E?T.jsx("div",{className:"w-full h-full flex items-center justify-center bg-white text-5xl",children:E}):T.jsx("img",{src:`https://ui-avatars.com/api/?name=${_}&background=10b981&color=fff`,alt:_,className:"w-full h-full object-cover"});return k?T.jsxs("div",{className:"min-h-screen bg-gray-50 pb-24",children:[T.jsx("div",{className:"bg-white shadow-sm pt-4 px-6 pb-4 sticky top-0 z-10",children:T.jsxs("div",{className:"flex items-center justify-between",children:[T.jsx("button",{onClick:t,className:"p-2 -ml-2 hover:bg-gray-100 rounded-full transition-colors",children:T.jsx(Kr,{className:"w-6 h-6 text-gray-600"})}),T.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Meus Favoritos"}),T.jsx("div",{className:"w-10"})]})}),T.jsx("div",{className:"px-4 mt-6 space-y-3 animate-in fade-in slide-in-from-bottom-2 duration-500",children:i.length===0?T.jsxs("div",{className:"text-center py-20 bg-white rounded-3xl border border-dashed border-gray-200 shadow-sm mx-auto max-w-sm",children:[T.jsx("div",{className:"bg-red-50 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4",children:T.jsx(fu,{className:"w-10 h-10 text-red-300 fill-current"})}),T.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-1",children:"Nenhuma favorita"}),T.jsx("p",{className:"text-sm text-gray-500 max-w-[200px] mx-auto",children:"Toque no corao  nas receitas para salvar aqui."})]}):i.map((ne,ve)=>T.jsxs("div",{onClick:()=>s(ne),className:"bg-white p-5 rounded-2xl shadow-sm border border-gray-100 cursor-pointer hover:border-emerald-200 hover:shadow-md transition-all group",children:[T.jsxs("div",{className:"flex justify-between items-start mb-2",children:[T.jsx("h4",{className:"font-bold text-gray-900 text-lg leading-tight pr-4",children:ne.title}),T.jsx("div",{className:"p-1 bg-red-50 rounded-full",children:T.jsx(fu,{className:"w-4 h-4 text-red-500 fill-current"})})]}),T.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:[T.jsxs("span",{className:"flex items-center gap-1 text-xs text-gray-500 font-medium bg-gray-50 px-2 py-1 rounded-md",children:[T.jsx(i3,{className:"w-3 h-3"})," ",ne.time_minutes," min"]}),T.jsx("span",{className:"flex items-center gap-1 text-xs text-gray-500 font-medium bg-gray-50 px-2 py-1 rounded-md",children:ne.difficulty}),ne.rating&&ne.rating>0&&T.jsxs("span",{className:"flex items-center gap-0.5 text-amber-50 bg-amber-50 px-2 py-1 rounded-md text-xs font-bold",children:[T.jsx(Lb,{className:"w-3 h-3 fill-current"}),ne.rating]})]}),T.jsxs("div",{className:"flex items-center justify-between border-t border-gray-50 pt-3",children:[T.jsx("div",{className:"flex gap-1",children:ne.tags.slice(0,3).map((je,Ke)=>T.jsx("span",{className:"text-[10px] bg-gray-100 text-gray-500 px-2 py-0.5 rounded font-bold uppercase tracking-wide",children:je},Ke))}),T.jsx(Hd,{className:"w-4 h-4 text-gray-300 group-hover:text-emerald-500 transition-colors"})]})]},ve))})]}):T.jsxs("div",{className:"min-h-screen bg-gray-50 pb-24",children:[T.jsxs("div",{className:"bg-white shadow-sm pb-6 pt-4 px-6 rounded-b-[2rem] z-10 relative",children:[T.jsxs("div",{className:"flex items-center justify-between mb-6",children:[T.jsx("button",{onClick:t,className:"p-2 -ml-2 hover:bg-gray-100 rounded-full transition-colors",children:T.jsx(Kr,{className:"w-6 h-6 text-gray-600"})}),T.jsx("h1",{className:"text-lg font-bold text-gray-800",children:"Meu Perfil"}),T.jsx("div",{className:"w-10 h-10"})," "]}),T.jsxs("div",{className:"flex flex-col items-center mb-8",children:[T.jsx("div",{className:"w-28 h-28 rounded-full bg-emerald-100 border-4 border-white shadow-xl flex items-center justify-center mb-4 overflow-hidden relative",children:Z()}),T.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:_}),T.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Membro Principal"})]}),T.jsx("div",{className:"grid grid-cols-3 gap-4",children:We.map((ne,ve)=>T.jsxs("button",{onClick:ne.action?ne.action:void 0,className:`bg-gray-50 border border-gray-100 rounded-2xl p-3 py-4 flex flex-col items-center text-center transition-all ${ne.action?"active:scale-95 hover:bg-gray-100 cursor-pointer":""}`,children:[T.jsx("div",{className:`p-2 rounded-full ${ne.bg} ${ne.color} mb-2 shadow-sm`,children:T.jsx(ne.icon,{className:"w-5 h-5"})}),T.jsx("span",{className:"text-xl font-bold text-gray-900 leading-none mb-1",children:ne.value}),T.jsx("span",{className:"text-[10px] text-gray-400 uppercase font-bold tracking-wide",children:ne.label})]},ve))})]}),T.jsx("div",{className:"px-6 mt-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:T.jsxs("div",{className:"space-y-4",children:[T.jsxs("div",{ref:J,className:`bg-white rounded-[1.5rem] shadow-sm border overflow-hidden p-6 transition-colors ${c.length===0?"border-blue-200 ring-2 ring-blue-50":"border-gray-100"}`,children:[T.jsxs("h3",{className:"text-base font-bold text-gray-800 mb-4 flex items-center gap-2",children:[T.jsx(d5,{className:"w-5 h-5 text-blue-500"}),"Despensa Permanente"]}),T.jsxs("button",{onClick:()=>de(!se),className:"w-full flex items-center justify-between p-4 bg-blue-50 hover:bg-blue-100/50 border border-blue-100 rounded-xl transition-all group mb-4",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("div",{className:"p-2 bg-white rounded-full text-blue-600 shadow-sm",children:T.jsx(OA,{className:"w-4 h-4"})}),T.jsxs("div",{className:"text-left",children:[T.jsx("span",{className:"block font-bold text-gray-800 text-sm",children:"O que sempre tem em casa"}),T.jsxs("span",{className:"block text-xs text-gray-500",children:[c.length," itens selecionados"]})]})]}),se?T.jsx(bd,{className:"w-4 h-4 text-gray-400"}):T.jsx(cu,{className:"w-4 h-4 text-gray-400"})]}),se&&T.jsxs("div",{className:"flex flex-col gap-3 animate-in slide-in-from-top-2",children:[T.jsx("p",{className:"text-xs text-gray-400 font-medium mb-1",children:"Marque os itens que voc j possui. Eles sero considerados automaticamente nas receitas."}),T.jsx("div",{className:"flex flex-wrap gap-2",children:D.map(ne=>{const ve=c.includes(ne);return T.jsxs("button",{onClick:()=>L(ne),className:`px-3 py-1.5 rounded-full text-xs font-bold border transition-all ${ve?"bg-blue-50 border-blue-500 text-white shadow-sm":"bg-white border-gray-200 text-gray-500 hover:bg-gray-50"}`,children:[ne," ",ve&&T.jsx(Yd,{className:"w-3 h-3 inline ml-1 opacity-50 hover:opacity-100"})]},ne)})})]})]}),T.jsx("div",{className:"bg-white rounded-[1.5rem] shadow-sm border border-gray-100 overflow-hidden p-6 space-y-6",children:T.jsxs("div",{children:[T.jsxs("h3",{className:"text-base font-bold text-gray-800 mb-4 flex items-center gap-2",children:[T.jsx($d,{className:"w-5 h-5 text-orange-500"}),"Preferncias Alimentares"]}),T.jsxs("button",{onClick:()=>P(!N),className:"w-full flex items-center justify-between p-4 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-xl transition-all group mb-4",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("div",{className:"p-2 bg-white rounded-full text-emerald-600 shadow-sm border border-gray-100 group-hover:border-emerald-200",children:T.jsx(Km,{className:"w-4 h-4"})}),T.jsxs("div",{className:"text-left",children:[T.jsx("span",{className:"block font-bold text-gray-800 text-sm",children:"Editar Restries"}),T.jsx("span",{className:"block text-xs text-gray-500",children:N?"Toque para recolher":"Definir o que no gosta"})]})]}),N?T.jsx(bd,{className:"w-4 h-4 text-gray-400"}):T.jsx(cu,{className:"w-4 h-4 text-gray-400"})]}),N&&T.jsxs("div",{className:"animate-in slide-in-from-top-2 fade-in duration-300 border-l-2 border-emerald-100 pl-4 space-y-4",children:[T.jsxs("div",{className:"mb-4",children:[T.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wide mb-2",children:"No gosta de (separado por vrgula)"}),T.jsx("textarea",{value:V,onChange:ne=>B(ne.target.value),placeholder:"Ex: cebola, coentro, pimento, quiabo...",className:"w-full p-3 rounded-xl border border-gray-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 outline-none transition-all bg-gray-50 text-sm h-20 resize-none"})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase tracking-wide mb-2",children:"Restries e Dietas"}),T.jsx("div",{className:"flex flex-wrap gap-2",children:R.map(ne=>{const ve=z.includes(ne);return T.jsxs("button",{onClick:()=>O(ne),className:`px-3 py-1.5 rounded-full text-xs font-bold border transition-all ${ve?"bg-red-50 border-red-200 text-red-600 shadow-sm":"bg-white border-gray-200 text-gray-500 hover:bg-gray-50"}`,children:[ne," ",ve&&T.jsx(Yd,{className:"w-3 h-3 inline ml-1"})]},ne)})})]})]}),T.jsxs("button",{onClick:M,className:"mt-6 w-full py-3 bg-emerald-600 text-white rounded-xl font-bold hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 flex items-center justify-center gap-2",children:[T.jsx(Vb,{className:"w-4 h-4"}),"Salvar Preferncias"]})]})}),T.jsx("div",{className:"bg-white rounded-[1.5rem] shadow-sm border border-gray-100 overflow-hidden",children:T.jsxs("button",{className:"w-full p-5 flex items-center justify-between hover:bg-gray-50 transition-colors text-left",children:[T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("div",{className:"p-2.5 bg-blue-50 rounded-xl text-blue-600",children:T.jsx(Hi,{className:"w-5 h-5"})}),T.jsx("span",{className:"font-bold text-gray-800",children:"Ajuda e Suporte"})]}),T.jsx(Hd,{className:"w-5 h-5 text-gray-300"})]})}),T.jsxs("button",{onClick:l,className:"w-full bg-red-50 text-red-600 border border-red-100 font-bold p-5 rounded-[1.5rem] flex items-center justify-center gap-2 hover:bg-red-100 transition-colors mt-6 shadow-sm",children:[T.jsx(n5,{className:"w-5 h-5"}),"Sair do App"]}),T.jsx("p",{className:"text-center text-[10px] text-gray-400 font-medium pt-4 pb-2",children:"Verso 2.7.0  Pensa Prato"})]})})]})},i3=({className:n})=>T.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:n,children:[T.jsx("circle",{cx:"12",cy:"12",r:"10"}),T.jsx("polyline",{points:"12 6 12 12 16 14"})]}),r3=({onSelectAny:n,onSelectFamily:e})=>T.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col relative overflow-hidden",children:[T.jsx("div",{className:"absolute top-0 left-0 w-full h-[40vh] bg-emerald-600 rounded-b-[3rem] shadow-lg z-0"}),T.jsx("div",{className:"absolute top-0 left-0 w-full h-full z-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"}),T.jsx("div",{className:"absolute -top-20 -right-20 w-64 h-64 bg-emerald-400 rounded-full blur-3xl opacity-30"}),T.jsx("div",{className:"absolute top-20 -left-20 w-40 h-40 bg-emerald-300 rounded-full blur-2xl opacity-20"}),T.jsxs("div",{className:"relative z-10 pt-16 px-6 pb-6 flex-1 flex flex-col",children:[T.jsxs("div",{className:"text-center mb-12",children:[T.jsx("div",{className:"inline-flex items-center justify-center p-3 bg-emerald-500/30 backdrop-blur-md rounded-2xl mb-4 ring-1 ring-emerald-400/50 shadow-lg",children:T.jsx(Km,{className:"w-8 h-8 text-white"})}),T.jsx("h1",{className:"text-3xl font-bold text-white mb-2 shadow-sm",children:"Quem vai comer hoje?"}),T.jsx("p",{className:"text-emerald-100 text-sm font-medium",children:"Escolha o perfil ideal para as sugestes"})]}),T.jsxs("div",{className:"flex-1 flex flex-col gap-5 w-full max-w-md mx-auto justify-start",children:[T.jsxs("button",{onClick:n,className:"group relative bg-white rounded-3xl p-6 transition-all duration-300 flex flex-row items-center text-left shadow-lg shadow-emerald-900/5 hover:shadow-xl hover:shadow-emerald-900/10 active:scale-[0.98] border border-transparent hover:border-emerald-100",children:[T.jsx("div",{className:"w-16 h-16 bg-emerald-50 rounded-2xl flex items-center justify-center mr-5 group-hover:bg-emerald-100 transition-colors shrink-0",children:T.jsx(Km,{className:"w-8 h-8 text-emerald-600"})}),T.jsxs("div",{children:[T.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-1 group-hover:text-emerald-700 transition-colors",children:"Qualquer pessoa"}),T.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Receitas livres, sem restries ou filtros."})]}),T.jsx("div",{className:"absolute right-6 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity -mr-2 group-hover:mr-0"})]}),T.jsxs("button",{onClick:e,className:"group relative bg-white rounded-3xl p-6 transition-all duration-300 flex flex-row items-center text-left shadow-lg shadow-emerald-900/5 hover:shadow-xl hover:shadow-emerald-900/10 active:scale-[0.98] border border-transparent hover:border-emerald-100",children:[T.jsx("div",{className:"w-16 h-16 bg-blue-50 rounded-2xl flex items-center justify-center mr-5 group-hover:bg-blue-100 transition-colors shrink-0",children:T.jsxs("div",{className:"relative",children:[T.jsx(Pb,{className:"w-8 h-8 text-blue-600"}),T.jsx("div",{className:"absolute -bottom-2 -right-2 bg-white rounded-full p-1 shadow-sm border border-blue-50",children:T.jsx(jm,{className:"w-3 h-3 text-blue-600"})})]})}),T.jsxs("div",{children:[T.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-1 group-hover:text-blue-700 transition-colors",children:"Famlia"}),T.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Adaptado para as restries de cada um."})]})]})]}),T.jsx("div",{className:"text-center mt-auto pt-8 pb-4",children:T.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:"Geladeira Cheia  IA Inteligente"})})]})]}),s3=({members:n,selectedMembers:e,onToggleMember:t,onSelectAll:i,onContinue:s,onEditMember:a,onAddNew:l,onBack:c})=>{const f=E=>e.some(I=>I.id===E),h=n.length>0&&e.length===n.length,_=(E,I,x,k=!1)=>{const V=E&&(E.startsWith("http")||E.startsWith("data:")),B=k?"10b981":"random";return V&&E?T.jsx("img",{src:E,alt:I,className:"w-full h-full object-cover"}):E?T.jsx("div",{className:`w-full h-full flex items-center justify-center bg-white ${x==="large"?"text-4xl":"text-lg"}`,children:E}):T.jsx("img",{src:`https://ui-avatars.com/api/?name=${I}&background=${B}&color=fff`,alt:I,className:"w-full h-full object-cover"})};return T.jsxs("div",{className:"min-h-screen bg-gray-50 p-6 pb-40",children:[T.jsxs("div",{className:"max-w-2xl mx-auto",children:[T.jsxs("div",{className:"flex items-center justify-between mb-6 pt-4",children:[T.jsxs("div",{className:"flex items-center",children:[T.jsx("button",{onClick:c,className:"p-2 -ml-2 hover:bg-white rounded-full transition-colors mr-2 shadow-sm bg-white/50",children:T.jsx(Kr,{className:"w-5 h-5 text-gray-600"})}),T.jsx("h1",{className:"text-xl font-bold text-gray-900 leading-tight",children:"Para quem  a comida?"})]}),T.jsx("button",{onClick:i,className:"text-xs font-bold text-emerald-600 hover:text-emerald-700 flex items-center gap-1.5 px-3 py-2 rounded-full bg-emerald-50 hover:bg-emerald-100 transition-colors uppercase tracking-wide",children:h?"Desmarcar":"Todos"})]}),T.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[n.map(E=>{const I=f(E.id);return T.jsxs("div",{className:"relative group",children:[T.jsxs("button",{onClick:()=>t(E),className:`w-full p-4 rounded-3xl shadow-sm border-2 transition-all flex flex-col items-center text-center overflow-hidden h-full relative aspect-[4/5] justify-center ${I?"bg-emerald-50 border-emerald-500 shadow-emerald-100":"bg-white border-transparent hover:border-gray-200"}`,children:[I&&T.jsx("div",{className:"absolute top-3 left-3 bg-emerald-500 text-white rounded-full p-1 animate-in zoom-in duration-200 shadow-sm",children:T.jsx(vu,{className:"w-3 h-3"})}),T.jsx("div",{className:`w-20 h-20 rounded-full mb-4 overflow-hidden border-4 transition-all duration-300 flex items-center justify-center ${I?"border-emerald-500 scale-105":"border-gray-50 bg-gray-50"}`,children:_(E.avatar,E.name,"large",I)}),T.jsx("h3",{className:`font-bold text-base mb-1 truncate w-full px-2 ${I?"text-emerald-900":"text-gray-800"}`,children:E.name}),T.jsx("div",{className:"flex flex-wrap justify-center gap-1 mt-1",children:E.restrictions.length>0?T.jsxs("span",{className:"text-[9px] bg-red-50 text-red-600 px-2 py-0.5 rounded-full font-bold border border-red-100",children:[E.restrictions.length," restries"]}):T.jsx("span",{className:"text-[9px] text-gray-400 font-medium",children:"Livre"})})]}),T.jsx("button",{onClick:x=>{x.preventDefault(),x.stopPropagation(),a(E)},className:"absolute top-3 right-3 p-1.5 bg-white shadow-sm border border-gray-100 rounded-full text-gray-400 hover:text-emerald-600 hover:border-emerald-200 transition-colors z-10",children:T.jsx(kb,{className:"w-3 h-3"})})]},E.id)}),T.jsxs("button",{onClick:l,className:"bg-white p-4 rounded-3xl border-2 border-dashed border-gray-200 hover:border-emerald-400 hover:bg-emerald-50/30 transition-all flex flex-col items-center justify-center aspect-[4/5] group",children:[T.jsx("div",{className:"w-14 h-14 bg-gray-50 rounded-full flex items-center justify-center mb-3 group-hover:bg-emerald-100 transition-colors",children:T.jsx(Eu,{className:"w-6 h-6 text-gray-400 group-hover:text-emerald-600"})}),T.jsx("span",{className:"font-bold text-gray-400 group-hover:text-emerald-600 text-sm",children:"Novo Perfil"})]})]})]}),T.jsx("div",{className:"fixed bottom-24 left-0 right-0 z-30 px-6 pointer-events-none",children:T.jsxs("div",{className:`max-w-md mx-auto bg-gray-900/90 backdrop-blur-md text-white p-2 rounded-2xl shadow-xl border border-white/10 flex items-center justify-between pl-4 pr-2 transition-all duration-300 pointer-events-auto ${e.length===0?"translate-y-24 opacity-0":"translate-y-0 opacity-100"}`,children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("div",{className:"flex -space-x-2 pl-1",children:e.slice(0,3).map(E=>T.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-gray-900 bg-gray-700 overflow-hidden flex items-center justify-center",children:_(E.avatar,E.name,"small")},E.id))}),T.jsxs("div",{className:"flex flex-col",children:[T.jsxs("span",{className:"text-sm font-bold leading-none",children:[e.length," ",e.length===1?"pessoa":"pessoas"]}),T.jsx("span",{className:"text-[10px] text-gray-400 font-medium",children:"selecionada(s)"})]})]}),T.jsxs("button",{onClick:s,disabled:e.length===0,className:"bg-emerald-500 hover:bg-emerald-400 text-white px-5 py-2.5 rounded-xl font-bold text-sm shadow-lg shadow-emerald-900/20 transition-all active:scale-95 flex items-center gap-2",children:["Avanar ",T.jsx(Hd,{className:"w-4 h-4"})]})]})})]})},o3=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],a3=({onSave:n,onCancel:e,initialMember:t})=>{const[i,s]=ce.useState((t==null?void 0:t.name)||""),[a,l]=ce.useState((t==null?void 0:t.avatar)||""),[c,f]=ce.useState((t==null?void 0:t.dislikes)||""),[h,_]=ce.useState((t==null?void 0:t.restrictions)||[]),[E,I]=ce.useState((t==null?void 0:t.isChild)||!1),[x,k]=ce.useState(!1),[V,B]=ce.useState("emoji"),[z,G]=ce.useState(!1),J=(t==null?void 0:t.dislikes)&&t.dislikes.length>0||(t==null?void 0:t.restrictions)&&t.restrictions.length>0,[se,de]=ce.useState(J||!1),le=ce.useRef(null),N=["Vegano","Vegetariano","Sem Glten","Sem Lactose","APLV","Diabtico","Hipertenso"];ce.useEffect(()=>{if(E){const L=["Sem Acar","Sem Mel","Beb (< 2 anos)"],M=[...new Set([...h,...L])];JSON.stringify(M)!==JSON.stringify(h)&&_(M);const De="mel, acar, sal em excesso, pipoca, amendoim inteiro";c.toLowerCase().includes("mel")||f(We=>We?`${We}, ${De}`:De),(!a||a==="im_baby")&&l(""),de(!0)}},[E]);const P=L=>{h.includes(L)?_(h.filter(M=>M!==L)):_([...h,L])},R=L=>{var De;const M=(De=L.target.files)==null?void 0:De[0];if(M){const We=new FileReader;We.onloadend=()=>{l(We.result)},We.readAsDataURL(M)}},D=async()=>{if(!i.trim())return;k(!0);const L=`temp-${Date.now()}`,De={id:(t==null?void 0:t.id)||L,name:i,dislikes:c,restrictions:h,avatar:a||(i.length>0?`https://ui-avatars.com/api/?name=${i}`:""),isChild:E};await new Promise(We=>setTimeout(We,300)),n(De),k(!1)},O=L=>{V===L&&z?G(!1):(B(L),G(!0))};return T.jsx("div",{className:"min-h-screen bg-white p-6 pb-24",children:T.jsxs("div",{className:"max-w-lg mx-auto",children:[T.jsxs("div",{className:"flex items-center justify-between mb-6",children:[T.jsx("button",{onClick:e,className:"p-2 -ml-2 hover:bg-gray-100 rounded-full transition-colors",children:T.jsx(Kr,{className:"w-6 h-6 text-gray-600"})}),T.jsx("h1",{className:"text-xl font-bold text-gray-900",children:t?"Editar Pessoa":"Nova Pessoa"}),T.jsx("div",{className:"w-10"})]}),T.jsxs("div",{className:"space-y-6",children:[T.jsxs("div",{className:"flex flex-col items-center mb-6",children:[T.jsxs("div",{className:"relative group",children:[T.jsx("div",{className:"w-28 h-28 rounded-full border-4 border-emerald-100 overflow-hidden shadow-sm bg-gray-50 flex items-center justify-center",children:a?a.startsWith("data:")||a.startsWith("http")?T.jsx("img",{src:a,alt:"Avatar",className:"w-full h-full object-cover"}):T.jsx("span",{className:"text-6xl",children:a==="im_baby"?"":a}):T.jsx($m,{className:"w-12 h-12 text-gray-300"})}),T.jsx("button",{onClick:()=>{B("upload"),G(!0)},className:"absolute bottom-0 right-0 p-2 bg-emerald-600 text-white rounded-full hover:bg-emerald-700 shadow-md border-2 border-white",children:T.jsx($_,{className:"w-4 h-4"})})]}),T.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-xl mt-6 w-full max-w-xs transition-all",children:[T.jsxs("button",{onClick:()=>O("emoji"),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-lg text-sm font-medium transition-all ${V==="emoji"&&z?"bg-white text-emerald-600 shadow-sm":"text-gray-500 hover:bg-gray-200/50"}`,children:[T.jsx(N5,{className:"w-4 h-4"})," Emojis",V==="emoji"&&z?T.jsx(bd,{className:"w-3 h-3"}):T.jsx(cu,{className:"w-3 h-3"})]}),T.jsxs("button",{onClick:()=>O("upload"),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-lg text-sm font-medium transition-all ${V==="upload"&&z?"bg-white text-emerald-600 shadow-sm":"text-gray-500 hover:bg-gray-200/50"}`,children:[T.jsx(Db,{className:"w-4 h-4"})," Foto",V==="upload"&&z?T.jsx(bd,{className:"w-3 h-3"}):T.jsx(cu,{className:"w-3 h-3"})]})]}),z&&T.jsx("div",{className:"w-full mt-4 animate-in slide-in-from-top-2 fade-in duration-300",children:V==="emoji"?T.jsx("div",{className:"bg-gray-50 p-4 rounded-2xl border border-gray-100",children:T.jsx("div",{className:"grid grid-cols-6 gap-2 sm:gap-3",children:o3.map((L,M)=>T.jsx("button",{type:"button",onClick:()=>l(L),className:`aspect-square flex items-center justify-center text-2xl hover:bg-white hover:scale-110 transition-all rounded-xl ${a===L?"bg-white shadow-md ring-2 ring-emerald-400":""}`,children:L},M))})}):T.jsxs("div",{onClick:()=>{var L;return(L=le.current)==null?void 0:L.click()},className:"border-2 border-dashed border-gray-300 rounded-2xl p-8 flex flex-col items-center justify-center cursor-pointer hover:border-emerald-400 hover:bg-emerald-50/30 transition-colors text-gray-500",children:[T.jsx($_,{className:"w-8 h-8 mb-2 text-gray-400"}),T.jsx("span",{className:"text-sm font-medium",children:"Toque para enviar foto"}),T.jsx("input",{ref:le,type:"file",accept:"image/*",className:"hidden",onChange:R})]})})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome / Apelido"}),T.jsxs("div",{className:"relative",children:[T.jsx($m,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),T.jsx("input",{type:"text",value:i,onChange:L=>s(L.target.value),placeholder:"Ex: Filha, Marido, Beb Theo...",className:"w-full pl-10 pr-4 py-3 rounded-xl border border-gray-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 outline-none transition-all bg-gray-50"})]})]}),T.jsxs("div",{onClick:()=>I(!E),className:`p-4 rounded-xl border-2 cursor-pointer transition-all flex items-center gap-4 ${E?"bg-blue-50 border-blue-400":"bg-white border-gray-100"}`,children:[T.jsx("div",{className:`p-2 rounded-full ${E?"bg-blue-500 text-white":"bg-gray-100 text-gray-400"}`,children:T.jsx(AU,{className:"w-6 h-6"})}),T.jsxs("div",{className:"flex-1",children:[T.jsx("p",{className:`font-bold ${E?"text-blue-800":"text-gray-700"}`,children:"Modo Beb (0-2 anos)"}),T.jsx("p",{className:"text-xs text-gray-500",children:"Preenche automaticamente restries de segurana."})]}),T.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${E?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:E&&T.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),T.jsxs("button",{onClick:()=>de(!se),className:"w-full flex items-center justify-between p-4 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-xl transition-all group",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("div",{className:"p-2 bg-white rounded-full text-emerald-600 shadow-sm border border-gray-100 group-hover:border-emerald-200",children:T.jsx(Km,{className:"w-5 h-5"})}),T.jsxs("div",{className:"text-left",children:[T.jsx("span",{className:"block font-bold text-gray-800 text-sm",children:"Preferncias Alimentares"}),T.jsx("span",{className:"block text-xs text-gray-500",children:se?"Toque para recolher":"Definir gostos e restries"})]})]}),se?T.jsx(bd,{className:"w-5 h-5 text-gray-400"}):T.jsx(cu,{className:"w-5 h-5 text-gray-400"})]}),se&&T.jsxs("div",{className:"space-y-6 animate-in slide-in-from-top-2 fade-in duration-300 border-l-2 border-emerald-100 pl-4",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:E?"Alimentos a evitar / Perigosos":"No gosta de (separado por vrgula)"}),T.jsx("textarea",{value:c,onChange:L=>f(L.target.value),placeholder:"Ex: cebola, coentro, pimento, quiabo...",className:"w-full p-4 rounded-xl border border-gray-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 outline-none transition-all bg-gray-50 h-24 resize-none"}),E&&T.jsx("p",{className:"text-[10px] text-blue-600 mt-1",children:"* Itens perigosos adicionados automaticamente."})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Restries e Dietas"}),T.jsxs("div",{className:"flex flex-wrap gap-2",children:[N.map(L=>{const M=h.includes(L);return T.jsxs("button",{type:"button",onClick:()=>P(L),className:`px-4 py-2 rounded-full text-sm font-medium border transition-all ${M?"bg-red-50 border-red-200 text-red-600 shadow-sm":"bg-white border-gray-200 text-gray-500 hover:bg-gray-50"}`,children:[L," ",M&&T.jsx(Yd,{className:"w-3 h-3 inline ml-1"})]},L)}),E&&h.includes("Sem Acar")&&T.jsx("span",{className:"px-4 py-2 rounded-full text-sm font-medium border bg-blue-50 border-blue-200 text-blue-600 shadow-sm",children:"Sem Acar (Auto)"})]})]})]}),T.jsx("button",{onClick:D,disabled:!i.trim()||x,className:"w-full py-4 bg-emerald-600 text-white rounded-xl font-bold shadow-lg shadow-emerald-200 hover:bg-emerald-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed mt-8 flex items-center justify-center gap-2",children:x?T.jsxs(T.Fragment,{children:[T.jsx(ZU,{className:"w-5 h-5 animate-spin"}),"Salvando..."]}):T.jsxs(T.Fragment,{children:[T.jsx(Vb,{className:"w-5 h-5"}),"Salvar Pessoa"]})})]})]})})},l3=({onSelectMethod:n,onBack:e})=>{const t=[{id:_n.AIRFRYER,label:"AirFryer",description:"Rpido e crocante",icon:Kd,color:"text-emerald-600",bg:"bg-emerald-100",border:"hover:border-emerald-400"},{id:_n.STOVE,label:"Fogo",description:"Clssico de panela",icon:du,color:"text-orange-600",bg:"bg-orange-100",border:"hover:border-orange-400"},{id:_n.OVEN,label:"Forno",description:"Assados e pes",icon:Hi,color:"text-blue-600",bg:"bg-blue-100",border:"hover:border-blue-400"},{id:_n.ANY,label:"Todos",description:"Qualquer mtodo",icon:jd,color:"text-purple-600",bg:"bg-purple-100",border:"hover:border-purple-400"}];return T.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col p-6 pb-24",children:[T.jsxs("div",{className:"flex items-center pt-4 z-10 relative",children:[T.jsx("button",{onClick:e,className:"p-2 -ml-2 hover:bg-white rounded-full transition-colors mr-2 shadow-sm bg-white/50",children:T.jsx(Kr,{className:"w-5 h-5 text-gray-600"})}),T.jsx("h1",{className:"text-xl font-bold text-gray-900 mx-auto pr-8 leading-tight",children:"Onde preparar?"})]}),T.jsxs("div",{className:"flex-1 flex flex-col justify-center items-center w-full max-w-md mx-auto",children:[T.jsx("div",{className:"grid grid-cols-2 gap-4 w-full",children:t.map(i=>T.jsxs("button",{onClick:()=>n(i.id),className:`group relative bg-white border border-transparent ${i.border} rounded-[1.5rem] p-4 transition-all duration-300 flex flex-col items-center text-center shadow-sm hover:shadow-lg active:scale-[0.98] aspect-square justify-center`,children:[T.jsx("div",{className:`w-14 h-14 ${i.bg} rounded-full flex items-center justify-center mb-3 group-hover:scale-110 transition-transform duration-300`,children:T.jsx(i.icon,{className:`w-7 h-7 ${i.color}`})}),T.jsxs("div",{children:[T.jsx("h3",{className:"text-base font-bold text-gray-800 mb-0.5",children:i.label}),T.jsx("p",{className:"text-[10px] text-gray-400 font-medium leading-tight",children:i.description})]})]},i.id))}),T.jsx("div",{className:"text-center mt-8",children:T.jsx("p",{className:"text-xs text-gray-400 font-medium",children:"Toque para selecionar"})})]})]})},u3=({currentView:n,activeTab:e,onNavigate:t})=>{const i=[Te.WELCOME,Te.FAMILY_SELECTION,Te.COOKING_METHOD,Te.UPLOAD,Te.RESULTS,Te.RECIPES].includes(n),s=n===Te.PROFILE&&e==="favorites",a=n===Te.SHOPPING_LIST,l=n===Te.PROFILE&&e!=="favorites";return T.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-2 py-2 pb-5 z-40 flex justify-around items-center shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)]",children:[T.jsxs("button",{onClick:()=>t(Te.UPLOAD),className:`flex flex-col items-center gap-1 p-2 rounded-xl transition-all min-w-[4rem] ${i?"text-emerald-600":"text-gray-400 hover:text-gray-600"}`,children:[T.jsx("div",{className:`p-1 rounded-full ${i?"bg-emerald-50":"bg-transparent"}`,children:i?T.jsx(Hi,{className:"w-6 h-6"}):T.jsx(Pb,{className:"w-6 h-6"})}),T.jsx("span",{className:"text-[10px] font-bold",children:"Incio"})]}),T.jsxs("button",{onClick:()=>t(Te.SHOPPING_LIST),className:`flex flex-col items-center gap-1 p-2 rounded-xl transition-all min-w-[4rem] ${a?"text-orange-500":"text-gray-400 hover:text-orange-500"}`,children:[T.jsx("div",{className:`p-1 rounded-full ${a?"bg-orange-50":"bg-transparent"}`,children:T.jsx(Kv,{className:"w-6 h-6"})}),T.jsx("span",{className:"text-[10px] font-bold",children:"Lista"})]}),T.jsxs("button",{onClick:()=>t(Te.PROFILE,"favorites"),className:`flex flex-col items-center gap-1 p-2 rounded-xl transition-all min-w-[4rem] ${s?"text-red-500":"text-gray-400 hover:text-red-500"}`,children:[T.jsx("div",{className:`p-1 rounded-full ${s?"bg-red-50":"bg-transparent"}`,children:T.jsx(fu,{className:`w-6 h-6 ${s?"fill-current":""}`})}),T.jsx("span",{className:"text-[10px] font-bold",children:"Favoritos"})]}),T.jsxs("button",{onClick:()=>t(Te.PROFILE,"settings"),className:`flex flex-col items-center gap-1 p-2 rounded-xl transition-all min-w-[4rem] ${l?"text-emerald-600":"text-gray-400 hover:text-gray-600"}`,children:[T.jsx("div",{className:`p-1 rounded-full ${l?"bg-emerald-50":"bg-transparent"}`,children:T.jsx($m,{className:"w-6 h-6"})}),T.jsx("span",{className:"text-[10px] font-bold",children:"Perfil"})]})]})},c3=()=>{};var FA={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},d3=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const s=n[t++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[t++];e[i++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[t++],l=n[t++],c=n[t++],f=((s&7)<<18|(a&63)<<12|(l&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(f>>10)),e[i++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],l=n[t++];e[i++]=String.fromCharCode((s&15)<<12|(a&63)<<6|l&63)}}return e.join("")},Ub={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const a=n[s],l=s+1<n.length,c=l?n[s+1]:0,f=s+2<n.length,h=f?n[s+2]:0,_=a>>2,E=(a&3)<<4|c>>4;let I=(c&15)<<2|h>>6,x=h&63;f||(x=64,l||(I=64)),i.push(t[_],t[E],t[I],t[x])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Ob(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):d3(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const a=t[n.charAt(s++)],c=s<n.length?t[n.charAt(s)]:0;++s;const h=s<n.length?t[n.charAt(s)]:64;++s;const E=s<n.length?t[n.charAt(s)]:64;if(++s,a==null||c==null||h==null||E==null)throw new f3;const I=a<<2|c>>4;if(i.push(I),h!==64){const x=c<<4&240|h>>2;if(i.push(x),E!==64){const k=h<<6&192|E;i.push(k)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class f3 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const h3=function(n){const e=Ob(n);return Ub.encodeByteArray(e,!0)},Ym=function(n){return h3(n).replace(/\./g,"")},Yv=function(n){try{return Ub.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Jm(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!m3(t)||(n[t]=Jm(n[t],e[t]));return n}function m3(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p3=()=>Jv().__FIREBASE_DEFAULTS__,g3=()=>{if(typeof process>"u"||typeof FA>"u")return;const n=FA.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},y3=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Yv(n[1]);return e&&JSON.parse(e)},Wv=()=>{try{return c3()||p3()||g3()||y3()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Qv=()=>{var n;return(n=Wv())==null?void 0:n.config},_3=n=>{var e;return(e=Wv())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v3{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ku(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Fb(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E3(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",s=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Ym(JSON.stringify(t)),Ym(JSON.stringify(l)),""].join(".")}const Rd={};function T3(){const n={prod:[],emulator:[]};for(const e of Object.keys(Rd))Rd[e]?n.emulator.push(e):n.prod.push(e);return n}function I3(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let qA=!1;function qb(n,e){if(typeof window>"u"||typeof document>"u"||!Ku(window.location.host)||Rd[n]===e||Rd[n]||qA)return;Rd[n]=e;function t(I){return`__firebase__banner__${I}`}const i="__firebase__banner",a=T3().prod.length>0;function l(){const I=document.getElementById(i);I&&I.remove()}function c(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function f(I,x){I.setAttribute("width","24"),I.setAttribute("id",x),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function h(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{qA=!0,l()},I}function _(I,x){I.setAttribute("id",x),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function E(){const I=I3(i),x=t("text"),k=document.getElementById(x)||document.createElement("span"),V=t("learnmore"),B=document.getElementById(V)||document.createElement("a"),z=t("preprendIcon"),G=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const J=I.element;c(J),_(B,V);const se=h();f(G,z),J.append(G,k,B,se),document.body.appendChild(J)}a?(k.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function w3(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ht())}function Sp(){var e;const n=(e=Wv())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function S3(){return typeof window<"u"||Bb()}function Bb(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function A3(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Gb(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Xv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function zb(){const n=Ht();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Hb(){return!Sp()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $b(){return!Sp()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Jd(){try{return typeof indexedDB=="object"}catch{return!1}}function x3(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var a;e(((a=s.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C3="FirebaseError";class Qn extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=C3,Object.setPrototypeOf(this,Qn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xa.prototype.create)}}class Xa{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],l=a?b3(a,i):"Error",c=`${this.serviceName}: ${l} (${s}).`;return new Qn(s,c,i)}}function b3(n,e){return n.replace(R3,(t,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const R3=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function N3(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function bo(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const s of t){if(!i.includes(s))return!1;const a=n[s],l=e[s];if(GA(a)&&GA(l)){if(!bo(a,l))return!1}else if(a!==l)return!1}for(const s of i)if(!t.includes(s))return!1;return!0}function GA(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yu(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function su(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,a]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function vd(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function jb(n,e){const t=new P3(n,e);return t.subscribe.bind(t)}class P3{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let s;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");D3(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:i},s.next===void 0&&(s.next=f_),s.error===void 0&&(s.error=f_),s.complete===void 0&&(s.complete=f_);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function D3(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function f_(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oe(n){return n&&n._delegate?n._delegate:n}class Yr{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new v3;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(V3(e))try{this.getOrInitializeService({instanceIdentifier:Sa})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:s});i.resolve(a)}catch{}}}}clearInstance(e=Sa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Sa){return this.instances.has(e)}getOptions(e=Sa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);i===c&&l.resolve(s)}return s}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const s of i)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:k3(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Sa){return this.component?this.component.multipleInstances?e:Sa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function k3(n){return n===Sa?void 0:n}function V3(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new M3(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv=[];var Ze;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ze||(Ze={}));const Yb={debug:Ze.DEBUG,verbose:Ze.VERBOSE,info:Ze.INFO,warn:Ze.WARN,error:Ze.ERROR,silent:Ze.SILENT},L3=Ze.INFO,O3={[Ze.DEBUG]:"log",[Ze.VERBOSE]:"log",[Ze.INFO]:"info",[Ze.WARN]:"warn",[Ze.ERROR]:"error"},U3=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),s=O3[e];if(s)console[s](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ap{constructor(e){this.name=e,this._logLevel=L3,this._logHandler=U3,this._userLogHandler=null,Zv.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Yb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ze.DEBUG,...e),this._logHandler(this,Ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ze.VERBOSE,...e),this._logHandler(this,Ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ze.INFO,...e),this._logHandler(this,Ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ze.WARN,...e),this._logHandler(this,Ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ze.ERROR,...e),this._logHandler(this,Ze.ERROR,...e)}}function F3(n){Zv.forEach(e=>{e.setLogLevel(n)})}function q3(n,e){for(const t of Zv){let i=null;e&&e.level&&(i=Yb[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(s,a,...l)=>{const c=l.map(f=>{if(f==null)return null;if(typeof f=="string")return f;if(typeof f=="number"||typeof f=="boolean")return f.toString();if(f instanceof Error)return f.message;try{return JSON.stringify(f)}catch{return null}}).filter(f=>f).join(" ");a>=(i??s.logLevel)&&n({level:Ze[a].toLowerCase(),message:c,args:l,type:s.name})}}}const B3=(n,e)=>e.some(t=>n instanceof t);let zA,HA;function G3(){return zA||(zA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function z3(){return HA||(HA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Jb=new WeakMap,j_=new WeakMap,Wb=new WeakMap,h_=new WeakMap,e0=new WeakMap;function H3(n){const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",l)},a=()=>{t(wo(n.result)),s()},l=()=>{i(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&Jb.set(t,n)}).catch(()=>{}),e0.set(e,n),e}function $3(n){if(j_.has(n))return;const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",l),n.removeEventListener("abort",l)},a=()=>{t(),s()},l=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",l),n.addEventListener("abort",l)});j_.set(n,e)}let K_={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return j_.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Wb.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return wo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function j3(n){K_=n(K_)}function K3(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(m_(this),e,...t);return Wb.set(i,e.sort?e.sort():[e]),wo(i)}:z3().includes(n)?function(...e){return n.apply(m_(this),e),wo(Jb.get(this))}:function(...e){return wo(n.apply(m_(this),e))}}function Y3(n){return typeof n=="function"?K3(n):(n instanceof IDBTransaction&&$3(n),B3(n,G3())?new Proxy(n,K_):n)}function wo(n){if(n instanceof IDBRequest)return H3(n);if(h_.has(n))return h_.get(n);const e=Y3(n);return e!==n&&(h_.set(n,e),e0.set(e,n)),e}const m_=n=>e0.get(n);function J3(n,e,{blocked:t,upgrade:i,blocking:s,terminated:a}={}){const l=indexedDB.open(n,e),c=wo(l);return i&&l.addEventListener("upgradeneeded",f=>{i(wo(l.result),f.oldVersion,f.newVersion,wo(l.transaction),f)}),t&&l.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),c.then(f=>{a&&f.addEventListener("close",()=>a()),s&&f.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const W3=["get","getKey","getAll","getAllKeys","count"],Q3=["put","add","delete","clear"],p_=new Map;function $A(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(p_.get(e))return p_.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,s=Q3.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(s||W3.includes(t)))return;const a=async function(l,...c){const f=this.transaction(l,s?"readwrite":"readonly");let h=f.store;return i&&(h=h.index(c.shift())),(await Promise.all([h[t](...c),s&&f.done]))[0]};return p_.set(e,a),a}j3(n=>({...n,get:(e,t,i)=>$A(e,t)||n.get(e,t,i),has:(e,t)=>!!$A(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Z3(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function Z3(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wm="@firebase/app",Y_="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts=new Ap("@firebase/app"),e6="@firebase/app-compat",t6="@firebase/analytics-compat",n6="@firebase/analytics",i6="@firebase/app-check-compat",r6="@firebase/app-check",s6="@firebase/auth",o6="@firebase/auth-compat",a6="@firebase/database",l6="@firebase/data-connect",u6="@firebase/database-compat",c6="@firebase/functions",d6="@firebase/functions-compat",f6="@firebase/installations",h6="@firebase/installations-compat",m6="@firebase/messaging",p6="@firebase/messaging-compat",g6="@firebase/performance",y6="@firebase/performance-compat",_6="@firebase/remote-config",v6="@firebase/remote-config-compat",E6="@firebase/storage",T6="@firebase/storage-compat",I6="@firebase/firestore",w6="@firebase/ai",S6="@firebase/firestore-compat",A6="firebase",x6="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro="[DEFAULT]",C6={[Wm]:"fire-core",[e6]:"fire-core-compat",[n6]:"fire-analytics",[t6]:"fire-analytics-compat",[r6]:"fire-app-check",[i6]:"fire-app-check-compat",[s6]:"fire-auth",[o6]:"fire-auth-compat",[a6]:"fire-rtdb",[l6]:"fire-data-connect",[u6]:"fire-rtdb-compat",[c6]:"fire-fn",[d6]:"fire-fn-compat",[f6]:"fire-iid",[h6]:"fire-iid-compat",[m6]:"fire-fcm",[p6]:"fire-fcm-compat",[g6]:"fire-perf",[y6]:"fire-perf-compat",[_6]:"fire-rc",[v6]:"fire-rc-compat",[E6]:"fire-gcs",[T6]:"fire-gcs-compat",[I6]:"fire-fst",[S6]:"fire-fst-compat",[w6]:"fire-vertex","fire-js":"fire-js",[A6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No=new Map,Tu=new Map,Iu=new Map;function Wd(n,e){try{n.container.addComponent(e)}catch(t){Ts.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Qb(n,e){n.container.addOrOverwriteComponent(e)}function Po(n){const e=n.name;if(Iu.has(e))return Ts.debug(`There were multiple attempts to register component ${e}.`),!1;Iu.set(e,n);for(const t of No.values())Wd(t,n);for(const t of Tu.values())Wd(t,n);return!0}function Xb(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function b6(n,e,t=Ro){Xb(n,e).clearInstance(t)}function t0(n){return n.options!==void 0}function Zb(n){return t0(n)?!1:"authIdToken"in n||"appCheckToken"in n||"releaseOnDeref"in n||"automaticDataCollectionEnabled"in n}function Ft(n){return n==null?!1:n.settings!==void 0}function R6(){Iu.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ai=new Xa("app","Firebase",N6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eR=class{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Yr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ai.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jA(n,e){const t=Yv(n.split(".")[1]);if(t===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(t).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const s=JSON.parse(t).exp*1e3,a=new Date().getTime();s-a<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class P6 extends eR{constructor(e,t,i,s){const a=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!0,l={name:i,automaticDataCollectionEnabled:a};if(e.apiKey!==void 0)super(e,l,s);else{const c=e;super(c.options,l,s)}this._serverConfig={automaticDataCollectionEnabled:a,...t},this._serverConfig.authIdToken&&jA(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&jA(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,or(Wm,Y_,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){i0(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Ai.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bo=x6;function n0(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:Ro,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw Ai.create("bad-app-name",{appName:String(s)});if(t||(t=Qv()),!t)throw Ai.create("no-options");const a=No.get(s);if(a){if(bo(t,a.options)&&bo(i,a.config))return a;throw Ai.create("duplicate-app",{appName:s})}const l=new Kb(s);for(const f of Iu.values())l.addComponent(f);const c=new eR(t,i,l);return No.set(s,c),c}function D6(n,e={}){if(S3()&&!Bb())throw Ai.create("invalid-server-app-environment");let t,i=e||{};if(n&&(t0(n)?t=n.options:Zb(n)?i=n:t=n),i.automaticDataCollectionEnabled===void 0&&(i.automaticDataCollectionEnabled=!0),t||(t=Qv()),!t)throw Ai.create("no-options");const s={...i,...t};s.releaseOnDeref!==void 0&&delete s.releaseOnDeref;const a=_=>[..._].reduce((E,I)=>Math.imul(31,E)+I.charCodeAt(0)|0,0);if(i.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Ai.create("finalization-registry-not-supported",{});const l=""+a(JSON.stringify(s)),c=Tu.get(l);if(c)return c.incRefCount(i.releaseOnDeref),c;const f=new Kb(l);for(const _ of Iu.values())f.addComponent(_);const h=new P6(t,i,l,f);return Tu.set(l,h),h}function M6(n=Ro){const e=No.get(n);if(!e&&n===Ro&&Qv())return n0();if(!e)throw Ai.create("no-app",{appName:n});return e}function k6(){return Array.from(No.values())}async function i0(n){let e=!1;const t=n.name;No.has(t)?(e=!0,No.delete(t)):Tu.has(t)&&n.decRefCount()<=0&&(Tu.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(i=>i.delete())),n.isDeleted=!0)}function or(n,e,t){let i=C6[n]??n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ts.warn(l.join(" "));return}Po(new Yr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function tR(n,e){if(n!==null&&typeof n!="function")throw Ai.create("invalid-log-argument");q3(n,e)}function nR(n){F3(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V6="firebase-heartbeat-database",L6=1,Qd="firebase-heartbeat-store";let g_=null;function iR(){return g_||(g_=J3(V6,L6,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Qd)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ai.create("idb-open",{originalErrorMessage:n.message})})),g_}async function O6(n){try{const t=(await iR()).transaction(Qd),i=await t.objectStore(Qd).get(rR(n));return await t.done,i}catch(e){if(e instanceof Qn)Ts.warn(e.message);else{const t=Ai.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ts.warn(t.message)}}}async function KA(n,e){try{const i=(await iR()).transaction(Qd,"readwrite");await i.objectStore(Qd).put(e,rR(n)),await i.done}catch(t){if(t instanceof Qn)Ts.warn(t.message);else{const i=Ai.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ts.warn(i.message)}}}function rR(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U6=1024,F6=30;class q6{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new G6(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=YA();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>F6){const l=z6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ts.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=YA(),{heartbeatsToSend:i,unsentEntries:s}=B6(this._heartbeatsCache.heartbeats),a=Ym(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Ts.warn(t),""}}}function YA(){return new Date().toISOString().substring(0,10)}function B6(n,e=U6){const t=[];let i=n.slice();for(const s of n){const a=t.find(l=>l.agent===s.agent);if(a){if(a.dates.push(s.date),JA(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),JA(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class G6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Jd()?x3().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await O6(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return KA(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return KA(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function JA(n){return Ym(JSON.stringify({version:2,heartbeats:n})).length}function z6(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H6(n){Po(new Yr("platform-logger",e=>new X3(e),"PRIVATE")),Po(new Yr("heartbeat",e=>new q6(e),"PRIVATE")),or(Wm,Y_,n),or(Wm,Y_,"esm2020"),or("fire-js","")}H6("");const $6=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Qn,SDK_VERSION:Bo,_DEFAULT_ENTRY_NAME:Ro,_addComponent:Wd,_addOrOverwriteComponent:Qb,_apps:No,_clearComponents:R6,_components:Iu,_getProvider:Xb,_isFirebaseApp:t0,_isFirebaseServerApp:Ft,_isFirebaseServerAppSettings:Zb,_registerComponent:Po,_removeServiceInstance:b6,_serverApps:Tu,deleteApp:i0,getApp:M6,getApps:k6,initializeApp:n0,initializeServerApp:D6,onLog:tR,registerVersion:or,setLogLevel:nR},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(e,t){this._delegate=e,this.firebase=t,Wd(e,new Yr("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),i0(this._delegate)))}_getService(e,t=Ro){var s;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((s=i.getComponent())==null?void 0:s.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:t})}_removeServiceInstance(e,t=Ro){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Wd(this._delegate,e)}_addOrOverwriteComponent(e){Qb(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K6={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},WA=new Xa("app-compat","Firebase",K6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y6(n){const e={},t={__esModule:!0,initializeApp:a,app:s,registerVersion:or,setLogLevel:nR,onLog:tR,apps:null,SDK_VERSION:Bo,INTERNAL:{registerComponent:c,removeApp:i,useAsService:f,modularAPIs:$6}};t.default=t,Object.defineProperty(t,"apps",{get:l});function i(h){delete e[h]}function s(h){if(h=h||Ro,!BA(e,h))throw WA.create("no-app",{appName:h});return e[h]}s.App=n;function a(h,_={}){const E=n0(h,_);if(BA(e,E.name))return e[E.name];const I=new n(E,t);return e[E.name]=I,I}function l(){return Object.keys(e).map(h=>e[h])}function c(h){const _=h.name,E=_.replace("-compat","");if(Po(h)&&h.type==="PUBLIC"){const I=(x=s())=>{if(typeof x[E]!="function")throw WA.create("invalid-app-argument",{appName:_});return x[E]()};h.serviceProps!==void 0&&Jm(I,h.serviceProps),t[E]=I,n.prototype[E]=function(...x){return this._getService.bind(this,_).apply(this,h.multipleInstances?x:[])}}return h.type==="PUBLIC"?t[E]:null}function f(h,_){return _==="serverAuth"?null:_}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sR(){const n=Y6(j6);n.INTERNAL={...n.INTERNAL,createFirebaseNamespace:sR,extendNamespace:e,createSubscribe:jb,ErrorFactory:Xa,deepExtend:Jm};function e(t){Jm(n,t)}return n}const J6=sR();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA=new Ap("@firebase/app-compat"),W6="@firebase/app-compat",Q6="0.5.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X6(n){or(W6,Q6,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const n=Jv();if(n.firebase!==void 0){QA.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=n.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&QA.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const xi=J6;X6();var Z6="firebase",eF="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xi.registerVersion(Z6,eF,"app-compat");const ud={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},jl={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tF(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function oR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const nF=tF,iF=oR,aR=new Xa("auth","Firebase",oR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qm=new Ap("@firebase/auth");function rF(n,...e){Qm.logLevel<=Ze.WARN&&Qm.warn(`Auth (${Bo}): ${n}`,...e)}function Am(n,...e){Qm.logLevel<=Ze.ERROR&&Qm.error(`Auth (${Bo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(n,...e){throw s0(n,...e)}function vn(n,...e){return s0(n,...e)}function r0(n,e,t){const i={...iF(),[e]:t};return new Xa("auth","Firebase",i).create(e,{appName:n.name})}function xn(n){return r0(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ju(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Fn(n,"argument-error"),r0(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function s0(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return aR.create(n,...e)}function he(n,e,...t){if(!n)throw s0(e,...t)}function Br(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Am(e),new Error(e)}function ur(n,e){n||Br(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function o0(){return XA()==="http:"||XA()==="https:"}function XA(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(o0()||Gb()||"connection"in navigator)?navigator.onLine:!0}function oF(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,t){this.shortDelay=e,this.longDelay=t,ur(t>e,"Short delay should be less than long delay!"),this.isMobile=w3()||Xv()}get(){return sF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a0(n,e){ur(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Br("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Br("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Br("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lF=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],uF=new vf(3e4,6e4);function Jt(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Wt(n,e,t,i,s={}){return uR(n,s,async()=>{let a={},l={};i&&(e==="GET"?l=i:a={body:JSON.stringify(i)});const c=Yu({key:n.config.apiKey,...l}).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:f,...a};return A3()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&Ku(n.emulatorConfig.host)&&(h.credentials="include"),lR.fetch()(await cR(n,n.config.apiHost,t,c),h)})}async function uR(n,e,t){n._canInitEmulator=!1;const i={...aF,...e};try{const s=new dF(n),a=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw Ed(n,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const c=a.ok?l.errorMessage:l.error.message,[f,h]=c.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ed(n,"credential-already-in-use",l);if(f==="EMAIL_EXISTS")throw Ed(n,"email-already-in-use",l);if(f==="USER_DISABLED")throw Ed(n,"user-disabled",l);const _=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw r0(n,_,h);Fn(n,_)}}catch(s){if(s instanceof Qn)throw s;Fn(n,"network-request-failed",{message:String(s)})}}async function Cs(n,e,t,i,s={}){const a=await Wt(n,e,t,i,s);return"mfaPendingCredential"in a&&Fn(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function cR(n,e,t,i){const s=`${e}${t}?${i}`,a=n,l=a.config.emulator?a0(n.config,s):`${n.config.apiScheme}://${s}`;return lF.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}function cF(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class dF{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(vn(this.auth,"network-request-failed")),uF.get())})}}function Ed(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const s=vn(n,e,i);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(n){return n!==void 0&&n.getResponse!==void 0}function ex(n){return n!==void 0&&n.enterprise!==void 0}class dR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return cF(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fF(n){return(await Wt(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function fR(n,e){return Wt(n,"GET","/v2/recaptchaConfig",Jt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hF(n,e){return Wt(n,"POST","/v1/accounts:delete",e)}async function mF(n,e){return Wt(n,"POST","/v1/accounts:update",e)}async function Xm(n,e){return Wt(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nd(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function pF(n,e=!1){const t=Oe(n),i=await t.getIdToken(e),s=xp(i);he(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,l=a==null?void 0:a.sign_in_provider;return{claims:s,token:i,authTime:Nd(y_(s.auth_time)),issuedAtTime:Nd(y_(s.iat)),expirationTime:Nd(y_(s.exp)),signInProvider:l||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function y_(n){return Number(n)*1e3}function xp(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Am("JWT malformed, contained fewer than 3 sections"),null;try{const s=Yv(t);return s?JSON.parse(s):(Am("Failed to decode base64 JWT payload"),null)}catch(s){return Am("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function tx(n){const e=xp(n);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Is(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Qn&&gF(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function gF({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yF{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Nd(this.lastLoginAt),this.creationTime=Nd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zd(n){var E;const e=n.auth,t=await n.getIdToken(),i=await Is(n,Xm(e,{idToken:t}));he(i==null?void 0:i.users.length,e,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const a=(E=s.providerUserInfo)!=null&&E.length?hR(s.providerUserInfo):[],l=vF(n.providerData,a),c=n.isAnonymous,f=!(n.email&&s.passwordHash)&&!(l!=null&&l.length),h=c?f:!1,_={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new J_(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,_)}async function _F(n){const e=Oe(n);await Zd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function vF(n,e){return[...n.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function hR(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EF(n,e){const t=await uR(n,{},async()=>{const i=Yu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=n.config,l=await cR(n,s,"/v1/token",`key=${a}`),c=await n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:c,body:i};return n.emulatorConfig&&Ku(n.emulatorConfig.host)&&(f.credentials="include"),lR.fetch()(l,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function TF(n,e){return Wt(n,"POST","/v2/accounts:revokeToken",Jt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):tx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){he(e.length!==0,"internal-error");const t=tx(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(he(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:s,expiresIn:a}=await EF(e,t);this.updateTokensAndExpiration(i,s,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:s,expirationTime:a}=t,l=new hu;return i&&(he(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),s&&(he(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),a&&(he(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new hu,this.toJSON())}_performRefresh(){return Br("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function co(n,e){he(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class sr{constructor({uid:e,auth:t,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new yF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new J_(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Is(this,this.stsTokenManager.getToken(this.auth,e));return he(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return pF(this,e)}reload(){return _F(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new sr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Zd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ft(this.auth.app))return Promise.reject(xn(this.auth));const e=await this.getIdToken();return await Is(this,hF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,s=t.email??void 0,a=t.phoneNumber??void 0,l=t.photoURL??void 0,c=t.tenantId??void 0,f=t._redirectEventId??void 0,h=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:E,emailVerified:I,isAnonymous:x,providerData:k,stsTokenManager:V}=t;he(E&&V,e,"internal-error");const B=hu.fromJSON(this.name,V);he(typeof E=="string",e,"internal-error"),co(i,e.name),co(s,e.name),he(typeof I=="boolean",e,"internal-error"),he(typeof x=="boolean",e,"internal-error"),co(a,e.name),co(l,e.name),co(c,e.name),co(f,e.name),co(h,e.name),co(_,e.name);const z=new sr({uid:E,auth:e,email:s,emailVerified:I,displayName:i,isAnonymous:x,photoURL:l,phoneNumber:a,tenantId:c,stsTokenManager:B,createdAt:h,lastLoginAt:_});return k&&Array.isArray(k)&&(z.providerData=k.map(G=>({...G}))),f&&(z._redirectEventId=f),z}static async _fromIdTokenResponse(e,t,i=!1){const s=new hu;s.updateFromServerResponse(t);const a=new sr({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await Zd(a),a}static async _fromGetAccountInfoResponse(e,t,i){const s=t.users[0];he(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?hR(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),c=new hu;c.updateFromIdToken(i);const f=new sr({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:l}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new J_(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(f,h),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx=new Map;function Si(n){ur(n instanceof Function,"Expected a class definition");let e=nx.get(n);return e?(ur(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,nx.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}mR.type="NONE";const wu=mR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function La(n,e,t){return`firebase:${n}:${e}:${t}`}class mu{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:s,name:a}=this.auth;this.fullUserKey=La(this.userKey,s.apiKey,a),this.fullPersistenceKey=La("persistence",s.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Xm(this.auth,{idToken:e}).catch(()=>{});return t?sr._fromGetAccountInfoResponse(this.auth,t,e):null}return sr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new mu(Si(wu),e,i);const s=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=s[0]||Si(wu);const l=La(i,e.config.apiKey,e.name);let c=null;for(const h of t)try{const _=await h._get(l);if(_){let E;if(typeof _=="string"){const I=await Xm(e,{idToken:_}).catch(()=>{});if(!I)break;E=await sr._fromGetAccountInfoResponse(e,I,_)}else E=sr._fromJSON(e,_);h!==a&&(c=E),a=h;break}}catch{}const f=s.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new mu(a,e,i):(a=f[0],c&&await a._set(l,c.toJSON()),await Promise.all(t.map(async h=>{if(h!==a)try{await h._remove(l)}catch{}})),new mu(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_R(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(pR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(vR(e))return"Blackberry";if(ER(e))return"Webos";if(gR(e))return"Safari";if((e.includes("chrome/")||yR(e))&&!e.includes("edge/"))return"Chrome";if(Ef(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function pR(n=Ht()){return/firefox\//i.test(n)}function gR(n=Ht()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yR(n=Ht()){return/crios\//i.test(n)}function _R(n=Ht()){return/iemobile/i.test(n)}function Ef(n=Ht()){return/android/i.test(n)}function vR(n=Ht()){return/blackberry/i.test(n)}function ER(n=Ht()){return/webos/i.test(n)}function Tf(n=Ht()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function IF(n=Ht()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(n)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(n)}function wF(n=Ht()){var e;return Tf(n)&&!!((e=window.navigator)!=null&&e.standalone)}function SF(){return zb()&&document.documentMode===10}function TR(n=Ht()){return Tf(n)||Ef(n)||ER(n)||vR(n)||/windows phone/i.test(n)||_R(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IR(n,e=[]){let t;switch(n){case"Browser":t=ix(Ht());break;case"Worker":t=`${ix(Ht())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Bo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AF{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((l,c)=>{try{const f=e(a);l(f)}catch(f){c(f)}});i.onAbort=t,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xF(n,e={}){return Wt(n,"GET","/v2/passwordPolicy",Jt(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CF=6;class bF{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??CF,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RF{constructor(e,t,i,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rx(this),this.idTokenSubscription=new rx(this),this.beforeStateQueue=new AF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=aR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Si(t)),this._initializationPromise=this.queue(async()=>{var i,s,a;if(!this._deleted&&(this.persistenceManager=await mu.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Xm(this,{idToken:e}),i=await sr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(Ft(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(a=this.redirectUser)==null?void 0:a._redirectEventId,c=i==null?void 0:i._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===c)&&(f!=null&&f.user)&&(i=f.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Zd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=oF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ft(this.app))return Promise.reject(xn(this));const t=e?Oe(e):null;return t&&he(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ft(this.app)?Promise.reject(xn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ft(this.app)?Promise.reject(xn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Si(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await xF(this),t=new bF(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Xa("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await TF(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Si(e)||this._popupRedirectResolver;he(t,this,"argument-error"),this.redirectPersistenceManager=await mu.create(this,[Si(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,s){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(c,this,"internal-error"),c.then(()=>{l||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,i,s);return()=>{l=!0,f()}}else{const f=e.addObserver(t);return()=>{l=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=IR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(Ft(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&rF(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function $t(n){return Oe(n)}class rx{constructor(e){this.auth=e,this.observer=null,this.addObserver=jb(t=>this.observer=t)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let If={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function NF(n){If=n}function l0(n){return If.loadJS(n)}function PF(){return If.recaptchaV2Script}function DF(){return If.recaptchaEnterpriseScript}function MF(){return If.gapiScript}function wR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kF=500,VF=6e4,hm=1e12;class LF{constructor(e){this.auth=e,this.counter=hm,this._widgets=new Map}render(e,t){const i=this.counter;return this._widgets.set(i,new FF(e,this.auth.name,t||{})),this.counter++,i}reset(e){var i;const t=e||hm;(i=this._widgets.get(t))==null||i.delete(),this._widgets.delete(t)}getResponse(e){var i;const t=e||hm;return((i=this._widgets.get(t))==null?void 0:i.getResponse())||""}async execute(e){var i;const t=e||hm;return(i=this._widgets.get(t))==null||i.execute(),""}}class OF{constructor(){this.enterprise=new UF}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class UF{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class FF{constructor(e,t,i){this.params=i,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof e=="string"?document.getElementById(e):e;he(s,"argument-error",{appName:t}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=qF(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},VF)},kF))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function qF(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<n;i++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const BF="recaptcha-enterprise",Pd="NO_RECAPTCHA";class SR{constructor(e){this.type=BF,this.auth=$t(e)}async verify(e="verify",t=!1){async function i(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,c)=>{fR(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const h=new dR(f);return a.tenantId==null?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,l(h.siteKey)}}).catch(f=>{c(f)})})}function s(a,l,c){const f=window.grecaptcha;ex(f)?f.enterprise.ready(()=>{f.enterprise.execute(a,{action:e}).then(h=>{l(h)}).catch(()=>{l(Pd)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new OF().execute("siteKey",{action:"verify"}):new Promise((a,l)=>{i(this.auth).then(c=>{if(!t&&ex(window.grecaptcha))s(c,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let f=DF();f.length!==0&&(f+=c),l0(f).then(()=>{s(c,a,l)}).catch(h=>{l(h)})}}).catch(c=>{l(c)})})}}async function cd(n,e,t,i=!1,s=!1){const a=new SR(n);let l;if(s)l=Pd;else try{l=await a.verify(t)}catch{l=await a.verify(t,!0)}const c={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const f=c.phoneEnrollmentInfo.phoneNumber,h=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const f=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return i?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function So(n,e,t,i,s){var a,l;if(s==="EMAIL_PASSWORD_PROVIDER")if((a=n._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await cd(n,e,t,t==="getOobCode");return i(n,c)}else return i(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await cd(n,e,t,t==="getOobCode");return i(n,f)}else return Promise.reject(c)});else if(s==="PHONE_PROVIDER")if((l=n._getRecaptchaConfig())!=null&&l.isProviderEnabled("PHONE_PROVIDER")){const c=await cd(n,e,t);return i(n,c).catch(async f=>{var h;if(((h=n._getRecaptchaConfig())==null?void 0:h.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(f.code==="auth/missing-recaptcha-token"||f.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const _=await cd(n,e,t,!1,!0);return i(n,_)}return Promise.reject(f)})}else{const c=await cd(n,e,t,!1,!0);return i(n,c)}else return Promise.reject(s+" provider is not supported.")}async function GF(n){const e=$t(n),t=await fR(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),i=new dR(t);e.tenantId==null?e._agentRecaptchaConfig=i:e._tenantRecaptchaConfigs[e.tenantId]=i,i.isAnyProviderEnabled()&&new SR(e).verify()}function zF(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Si);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function HF(n,e,t){const i=$t(n);he(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!!(t!=null&&t.disableWarnings),a=AR(e),{host:l,port:c}=$F(e),f=c===null?"":`:${c}`,h={url:`${a}//${l}${f}/`},_=Object.freeze({host:l,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){he(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),he(bo(h,i.config.emulator)&&bo(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,Ku(l)?(Fb(`${a}//${l}${f}`),qb("Auth",!0)):s||jF()}function AR(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function $F(n){const e=AR(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const a=s[1];return{host:a,port:sx(i.substr(a.length+1))}}else{const[a,l]=i.split(":");return{host:a,port:sx(l)}}}function sx(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function jF(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Br("not implemented")}_getIdTokenResponse(e){return Br("not implemented")}_linkToIdToken(e,t){return Br("not implemented")}_getReauthenticationResolver(e){return Br("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xR(n,e){return Wt(n,"POST","/v1/accounts:resetPassword",Jt(n,e))}async function KF(n,e){return Wt(n,"POST","/v1/accounts:update",e)}async function YF(n,e){return Wt(n,"POST","/v1/accounts:signUp",e)}async function JF(n,e){return Wt(n,"POST","/v1/accounts:update",Jt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WF(n,e){return Cs(n,"POST","/v1/accounts:signInWithPassword",Jt(n,e))}async function Cp(n,e){return Wt(n,"POST","/v1/accounts:sendOobCode",Jt(n,e))}async function QF(n,e){return Cp(n,e)}async function XF(n,e){return Cp(n,e)}async function ZF(n,e){return Cp(n,e)}async function eq(n,e){return Cp(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tq(n,e){return Cs(n,"POST","/v1/accounts:signInWithEmailLink",Jt(n,e))}async function nq(n,e){return Cs(n,"POST","/v1/accounts:signInWithEmailLink",Jt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef extends Wu{constructor(e,t,i,s=null){super("password",i),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new ef(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new ef(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return So(e,t,"signInWithPassword",WF,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return tq(e,{email:this._email,oobCode:this._password});default:Fn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return So(e,i,"signUpPassword",YF,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return nq(e,{idToken:t,email:this._email,oobCode:this._password});default:Fn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vs(n,e){return Cs(n,"POST","/v1/accounts:signInWithIdp",Jt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iq="http://localhost";class Jr extends Wu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Jr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Fn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...a}=t;if(!i||!s)return null;const l=new Jr(i,s);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return vs(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,vs(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,vs(e,t)}buildRequest(){const e={requestUri:iq,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Yu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ox(n,e){return Wt(n,"POST","/v1/accounts:sendVerificationCode",Jt(n,e))}async function rq(n,e){return Cs(n,"POST","/v1/accounts:signInWithPhoneNumber",Jt(n,e))}async function sq(n,e){const t=await Cs(n,"POST","/v1/accounts:signInWithPhoneNumber",Jt(n,e));if(t.temporaryProof)throw Ed(n,"account-exists-with-different-credential",t);return t}const oq={USER_NOT_FOUND:"user-not-found"};async function aq(n,e){const t={...e,operation:"REAUTH"};return Cs(n,"POST","/v1/accounts:signInWithPhoneNumber",Jt(n,t),oq)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa extends Wu{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Oa({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Oa({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return rq(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return sq(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return aq(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:i,verificationCode:s}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:i,code:s}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:i,phoneNumber:s,temporaryProof:a}=e;return!i&&!t&&!s&&!a?null:new Oa({verificationId:t,verificationCode:i,phoneNumber:s,temporaryProof:a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lq(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function uq(n){const e=su(vd(n)).link,t=e?su(vd(e)).deep_link_id:null,i=su(vd(n)).deep_link_id;return(i?su(vd(i)).link:null)||i||t||e||n}class bp{constructor(e){const t=su(vd(e)),i=t.apiKey??null,s=t.oobCode??null,a=lq(t.mode??null);he(i&&s&&a,"argument-error"),this.apiKey=i,this.operation=a,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=uq(e);try{return new bp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(){this.providerId=Go.PROVIDER_ID}static credential(e,t){return ef._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=bp.parseLink(t);return he(i,"argument-error"),ef._fromEmailAndCode(e,i.code,i.tenantId)}}Go.PROVIDER_ID="password";Go.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Go.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu extends bs{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class pu extends Qu{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return he("providerId"in t&&"signInMethod"in t,"argument-error"),Jr._fromParams(t)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return he(e.idToken||e.accessToken,"argument-error"),Jr._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return pu.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return pu.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:a,nonce:l,providerId:c}=e;if(!i&&!s&&!t&&!a||!c)return null;try{return new pu(c)._credential({idToken:t,accessToken:i,nonce:l,pendingToken:a})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr extends Qu{constructor(){super("facebook.com")}static credential(e){return Jr._fromParams({providerId:Vr.PROVIDER_ID,signInMethod:Vr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vr.credentialFromTaggedObject(e)}static credentialFromError(e){return Vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vr.credential(e.oauthAccessToken)}catch{return null}}}Vr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Vr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr extends Qu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Jr._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Lr.credentialFromTaggedObject(e)}static credentialFromError(e){return Lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Lr.credential(t,i)}catch{return null}}}Lr.GOOGLE_SIGN_IN_METHOD="google.com";Lr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or extends Qu{constructor(){super("github.com")}static credential(e){return Jr._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Or.credentialFromTaggedObject(e)}static credentialFromError(e){return Or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Or.credential(e.oauthAccessToken)}catch{return null}}}Or.GITHUB_SIGN_IN_METHOD="github.com";Or.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cq="http://localhost";class Su extends Wu{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return vs(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,vs(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,vs(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,pendingToken:a}=t;return!i||!s||!a||i!==s?null:new Su(i,a)}static _create(e,t){return new Su(e,t)}buildRequest(){return{requestUri:cq,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dq="saml.";class Zm extends bs{constructor(e){he(e.startsWith(dq),"argument-error"),super(e)}static credentialFromResult(e){return Zm.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Zm.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Su.fromJSON(e);return he(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:i}=e;if(!t||!i)return null;try{return Su._create(i,t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur extends Qu{constructor(){super("twitter.com")}static credential(e,t){return Jr._fromParams({providerId:Ur.PROVIDER_ID,signInMethod:Ur.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ur.credentialFromTaggedObject(e)}static credentialFromError(e){return Ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Ur.credential(t,i)}catch{return null}}}Ur.TWITTER_SIGN_IN_METHOD="twitter.com";Ur.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CR(n,e){return Cs(n,"POST","/v1/accounts:signUp",Jt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,s=!1){const a=await sr._fromIdTokenResponse(e,i,s),l=ax(i);return new ji({user:a,providerId:l,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const s=ax(i);return new ji({user:e,providerId:s,_tokenResponse:i,operationType:t})}}function ax(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fq(n){var s;if(Ft(n.app))return Promise.reject(xn(n));const e=$t(n);if(await e._initializationPromise,(s=e.currentUser)!=null&&s.isAnonymous)return new ji({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await CR(e,{returnSecureToken:!0}),i=await ji._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep extends Qn{constructor(e,t,i,s){super(t.code,t.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,ep.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,s){return new ep(e,t,i,s)}}function bR(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?ep._fromErrorAndOperation(n,a,e,i):a})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hq(n,e){const t=Oe(n);await Rp(!0,t,e);const{providerUserInfo:i}=await mF(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),s=RR(i||[]);return t.providerData=t.providerData.filter(a=>s.has(a.providerId)),s.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function u0(n,e,t=!1){const i=await Is(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ji._forOperation(n,"link",i)}async function Rp(n,e,t){await Zd(e);const i=RR(e.providerData),s=n===!1?"provider-already-linked":"no-such-provider";he(i.has(t)===n,e.auth,s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NR(n,e,t=!1){const{auth:i}=n;if(Ft(i.app))return Promise.reject(xn(i));const s="reauthenticate";try{const a=await Is(n,bR(i,s,e,n),t);he(a.idToken,i,"internal-error");const l=xp(a.idToken);he(l,i,"internal-error");const{sub:c}=l;return he(n.uid===c,i,"user-mismatch"),ji._forOperation(n,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Fn(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PR(n,e,t=!1){if(Ft(n.app))return Promise.reject(xn(n));const i="signIn",s=await bR(n,i,e),a=await ji._fromIdTokenResponse(n,i,s);return t||await n._updateCurrentUser(a.user),a}async function Np(n,e){return PR($t(n),e)}async function DR(n,e){const t=Oe(n);return await Rp(!1,t,e.providerId),u0(t,e)}async function MR(n,e){return NR(Oe(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mq(n,e){return Cs(n,"POST","/v1/accounts:signInWithCustomToken",Jt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pq(n,e){if(Ft(n.app))return Promise.reject(xn(n));const t=$t(n),i=await mq(t,{token:e,returnSecureToken:!0}),s=await ji._fromIdTokenResponse(t,"signIn",i);return await t._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?c0._fromServerResponse(e,t):"totpInfo"in t?d0._fromServerResponse(e,t):Fn(e,"internal-error")}}class c0 extends wf{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new c0(t)}}class d0 extends wf{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new d0(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pp(n,e,t){var i;he(((i=t.url)==null?void 0:i.length)>0,n,"invalid-continue-uri"),he(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),he(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(he(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(he(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f0(n){const e=$t(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function gq(n,e,t){const i=$t(n),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&Pp(i,s,t),await So(i,s,"getOobCode",XF,"EMAIL_PASSWORD_PROVIDER")}async function yq(n,e,t){await xR(Oe(n),{oobCode:e,newPassword:t}).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&f0(n),i})}async function _q(n,e){await JF(Oe(n),{oobCode:e})}async function kR(n,e){const t=Oe(n),i=await xR(t,{oobCode:e}),s=i.requestType;switch(he(s,t,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":he(i.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":he(i.mfaInfo,t,"internal-error");default:he(i.email,t,"internal-error")}let a=null;return i.mfaInfo&&(a=wf._fromServerResponse($t(t),i.mfaInfo)),{data:{email:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.newEmail:i.email)||null,previousEmail:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.email:i.newEmail)||null,multiFactorInfo:a},operation:s}}async function vq(n,e){const{data:t}=await kR(Oe(n),e);return t.email}async function Eq(n,e,t){if(Ft(n.app))return Promise.reject(xn(n));const i=$t(n),l=await So(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",CR,"EMAIL_PASSWORD_PROVIDER").catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&f0(n),f}),c=await ji._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(c.user),c}function Tq(n,e,t){return Ft(n.app)?Promise.reject(xn(n)):Np(Oe(n),Go.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&f0(n),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iq(n,e,t){const i=$t(n),s={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function a(l,c){he(c.handleCodeInApp,i,"argument-error"),c&&Pp(i,l,c)}a(s,t),await So(i,s,"getOobCode",ZF,"EMAIL_PASSWORD_PROVIDER")}function wq(n,e){const t=bp.parseLink(e);return(t==null?void 0:t.operation)==="EMAIL_SIGNIN"}async function Sq(n,e,t){if(Ft(n.app))return Promise.reject(xn(n));const i=Oe(n),s=Go.credentialWithLink(e,t||Xd());return he(s._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),Np(i,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aq(n,e){return Wt(n,"POST","/v1/accounts:createAuthUri",Jt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xq(n,e){const t=o0()?Xd():"http://localhost",i={identifier:e,continueUri:t},{signinMethods:s}=await Aq(Oe(n),i);return s||[]}async function Cq(n,e){const t=Oe(n),s={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&Pp(t.auth,s,e);const{email:a}=await QF(t.auth,s);a!==n.email&&await n.reload()}async function bq(n,e,t){const i=Oe(n),a={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await n.getIdToken(),newEmail:e};t&&Pp(i.auth,a,t);const{email:l}=await eq(i.auth,a);l!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rq(n,e){return Wt(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nq(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const i=Oe(n),a={idToken:await i.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},l=await Is(i,Rq(i.auth,a));i.displayName=l.displayName||null,i.photoURL=l.photoUrl||null;const c=i.providerData.find(({providerId:f})=>f==="password");c&&(c.displayName=i.displayName,c.photoURL=i.photoURL),await i._updateTokensIfNecessary(l)}function Pq(n,e){const t=Oe(n);return Ft(t.auth.app)?Promise.reject(xn(t.auth)):VR(t,e,null)}function Dq(n,e){return VR(Oe(n),null,e)}async function VR(n,e,t){const{auth:i}=n,a={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(a.email=e),t&&(a.password=t);const l=await Is(n,KF(i,a));await n._updateTokensIfNecessary(l,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mq(n){var s,a;if(!n)return null;const{providerId:e}=n,t=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},i=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&(n!=null&&n.idToken)){const l=(a=(s=xp(n.idToken))==null?void 0:s.firebase)==null?void 0:a.sign_in_provider;if(l){const c=l!=="anonymous"&&l!=="custom"?l:null;return new gu(i,c)}}if(!e)return null;switch(e){case"facebook.com":return new kq(i,t);case"github.com":return new Vq(i,t);case"google.com":return new Lq(i,t);case"twitter.com":return new Oq(i,t,n.screenName||null);case"custom":case"anonymous":return new gu(i,null);default:return new gu(i,e,t)}}class gu{constructor(e,t,i={}){this.isNewUser=e,this.providerId=t,this.profile=i}}class LR extends gu{constructor(e,t,i,s){super(e,t,i),this.username=s}}class kq extends gu{constructor(e,t){super(e,"facebook.com",t)}}class Vq extends LR{constructor(e,t){super(e,"github.com",t,typeof(t==null?void 0:t.login)=="string"?t==null?void 0:t.login:null)}}class Lq extends gu{constructor(e,t){super(e,"google.com",t)}}class Oq extends LR{constructor(e,t,i){super(e,"twitter.com",t,i)}}function Uq(n){const{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:Mq(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e,t,i){this.type=e,this.credential=t,this.user=i}static _fromIdtoken(e,t){return new Da("enroll",e,t)}static _fromMfaPendingCredential(e){return new Da("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,i;if(e!=null&&e.multiFactorSession){if((t=e.multiFactorSession)!=null&&t.pendingCredential)return Da._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if((i=e.multiFactorSession)!=null&&i.idToken)return Da._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(e,t,i){this.session=e,this.hints=t,this.signInResolver=i}static _fromError(e,t){const i=$t(e),s=t.customData._serverResponse,a=(s.mfaInfo||[]).map(c=>wf._fromServerResponse(i,c));he(s.mfaPendingCredential,i,"internal-error");const l=Da._fromMfaPendingCredential(s.mfaPendingCredential);return new h0(l,a,async c=>{const f=await c._process(i,l);delete s.mfaInfo,delete s.mfaPendingCredential;const h={...s,idToken:f.idToken,refreshToken:f.refreshToken};switch(t.operationType){case"signIn":const _=await ji._fromIdTokenResponse(i,t.operationType,h);return await i._updateCurrentUser(_.user),_;case"reauthenticate":return he(t.user,i,"internal-error"),ji._forOperation(t.user,t.operationType,h);default:Fn(i,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function Fq(n,e){var s;const t=Oe(n),i=e;return he(e.customData.operationType,t,"argument-error"),he((s=i.customData._serverResponse)==null?void 0:s.mfaPendingCredential,t,"argument-error"),h0._fromError(t,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lx(n,e){return Wt(n,"POST","/v2/accounts/mfaEnrollment:start",Jt(n,e))}function qq(n,e){return Wt(n,"POST","/v2/accounts/mfaEnrollment:finalize",Jt(n,e))}function Bq(n,e){return Wt(n,"POST","/v2/accounts/mfaEnrollment:withdraw",Jt(n,e))}class m0{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(i=>wf._fromServerResponse(e.auth,i)))})}static _fromUser(e){return new m0(e)}async getSession(){return Da._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const i=e,s=await this.getSession(),a=await Is(this.user,i._process(this.user.auth,s,t));return await this.user._updateTokensIfNecessary(a),this.user.reload()}async unenroll(e){const t=typeof e=="string"?e:e.uid,i=await this.user.getIdToken();try{const s=await Is(this.user,Bq(this.user.auth,{idToken:i,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:a})=>a!==t),await this.user._updateTokensIfNecessary(s),await this.user.reload()}catch(s){throw s}}}const __=new WeakMap;function Gq(n){const e=Oe(n);return __.has(e)||__.set(e,m0._fromUser(e)),__.get(e)}const tp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(tp,"1"),this.storage.removeItem(tp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zq=1e3,Hq=10;class UR extends OR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=TR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),s=this.localCache[t];i!==s&&e(t,s,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,c,f)=>{this.notifyListeners(l,f)});return}const i=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(i);!t&&this.localCache[i]===l||this.notifyListeners(i,l)},a=this.storage.getItem(i);SF()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Hq):s()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},zq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}UR.type="LOCAL";const p0=UR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR extends OR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}FR.type="SESSION";const Fa=FR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $q(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const i=new Dp(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:s,data:a}=t.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const c=Array.from(l).map(async h=>h(t.origin,a)),f=await $q(c);t.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Dp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sf(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jq{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,l;return new Promise((c,f)=>{const h=Sf("",20);s.port1.start();const _=setTimeout(()=>{f(new Error("unsupported_event"))},i);l={messageChannel:s,onMessage(E){const I=E;if(I.data.eventId===h)switch(I.data.status){case"ack":clearTimeout(_),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(I.data.response);break;default:clearTimeout(_),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(){return window}function Kq(n){pn().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g0(){return typeof pn().WorkerGlobalScope<"u"&&typeof pn().importScripts=="function"}async function Yq(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Jq(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function Wq(){return g0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR="firebaseLocalStorageDb",Qq=1,np="firebaseLocalStorage",BR="fbase_key";class Af{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Mp(n,e){return n.transaction([np],e?"readwrite":"readonly").objectStore(np)}function Xq(){const n=indexedDB.deleteDatabase(qR);return new Af(n).toPromise()}function W_(){const n=indexedDB.open(qR,Qq);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(np,{keyPath:BR})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(np)?e(i):(i.close(),await Xq(),e(await W_()))})})}async function ux(n,e,t){const i=Mp(n,!0).put({[BR]:e,value:t});return new Af(i).toPromise()}async function Zq(n,e){const t=Mp(n,!1).get(e),i=await new Af(t).toPromise();return i===void 0?null:i.value}function cx(n,e){const t=Mp(n,!0).delete(e);return new Af(t).toPromise()}const e9=800,t9=3;class GR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await W_(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>t9)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return g0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Dp._getInstance(Wq()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await Yq(),!this.activeServiceWorker)return;this.sender=new jq(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Jq()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await W_();return await ux(e,tp,"1"),await cx(e,tp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>ux(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>Zq(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>cx(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=Mp(s,!1).getAll();return new Af(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),e9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}GR.type="LOCAL";const tf=GR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dx(n,e){return Wt(n,"POST","/v2/accounts/mfaSignIn:start",Jt(n,e))}function n9(n,e){return Wt(n,"POST","/v2/accounts/mfaSignIn:finalize",Jt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_=wR("rcb"),i9=new vf(3e4,6e4);class r9{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=pn().grecaptcha)!=null&&e.render)}load(e,t=""){return he(s9(t),e,"argument-error"),this.shouldResolveImmediately(t)&&ZA(pn().grecaptcha)?Promise.resolve(pn().grecaptcha):new Promise((i,s)=>{const a=pn().setTimeout(()=>{s(vn(e,"network-request-failed"))},i9.get());pn()[v_]=()=>{pn().clearTimeout(a),delete pn()[v_];const c=pn().grecaptcha;if(!c||!ZA(c)){s(vn(e,"internal-error"));return}const f=c.render;c.render=(h,_)=>{const E=f(h,_);return this.counter++,E},this.hostLanguage=t,i(c)};const l=`${PF()}?${Yu({onload:v_,render:"explicit",hl:t})}`;l0(l).catch(()=>{clearTimeout(a),s(vn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!((t=pn().grecaptcha)!=null&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function s9(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class o9{async load(e){return new LF(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dd="recaptcha",a9={theme:"light",type:"image"};let l9=class{constructor(e,t,i={...a9}){this.parameters=i,this.type=Dd,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=$t(e),this.isInvisible=this.parameters.size==="invisible",he(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof t=="string"?document.getElementById(t):t;he(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new o9:new r9,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),i=t.getResponse(e);return i||new Promise(s=>{const a=l=>{l&&(this.tokenChangeListeners.delete(a),s(l))};this.tokenChangeListeners.add(a),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){he(!this.parameters.sitekey,this.auth,"argument-error"),he(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),he(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(i=>i(t)),typeof e=="function")e(t);else if(typeof e=="string"){const i=pn()[e];typeof i=="function"&&i(t)}}}assertNotDestroyed(){he(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){he(o0()&&!g0(),this.auth,"internal-error"),await u9(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await fF(this.auth);he(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return he(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function u9(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Oa._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function c9(n,e,t){if(Ft(n.app))return Promise.reject(xn(n));const i=$t(n),s=await kp(i,e,Oe(t));return new y0(s,a=>Np(i,a))}async function d9(n,e,t){const i=Oe(n);await Rp(!1,i,"phone");const s=await kp(i.auth,e,Oe(t));return new y0(s,a=>DR(i,a))}async function f9(n,e,t){const i=Oe(n);if(Ft(i.auth.app))return Promise.reject(xn(i.auth));const s=await kp(i.auth,e,Oe(t));return new y0(s,a=>MR(i,a))}async function kp(n,e,t){var i;if(!n._getRecaptchaConfig())try{await GF(n)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const a=s.session;if("phoneNumber"in s){he(a.type==="enroll",n,"internal-error");const l={idToken:a.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await So(n,l,"mfaSmsEnrollment",async(_,E)=>{if(E.phoneEnrollmentInfo.captchaResponse===Pd){he((t==null?void 0:t.type)===Dd,_,"argument-error");const I=await E_(_,E,t);return lx(_,I)}return lx(_,E)},"PHONE_PROVIDER").catch(_=>Promise.reject(_))).phoneSessionInfo.sessionInfo}else{he(a.type==="signin",n,"internal-error");const l=((i=s.multiFactorHint)==null?void 0:i.uid)||s.multiFactorUid;he(l,n,"missing-multi-factor-info");const c={mfaPendingCredential:a.credential,mfaEnrollmentId:l,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await So(n,c,"mfaSmsSignIn",async(E,I)=>{if(I.phoneSignInInfo.captchaResponse===Pd){he((t==null?void 0:t.type)===Dd,E,"argument-error");const x=await E_(E,I,t);return dx(E,x)}return dx(E,I)},"PHONE_PROVIDER").catch(E=>Promise.reject(E))).phoneResponseInfo.sessionInfo}}else{const a={phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await So(n,a,"sendVerificationCode",async(h,_)=>{if(_.captchaResponse===Pd){he((t==null?void 0:t.type)===Dd,h,"argument-error");const E=await E_(h,_,t);return ox(h,E)}return ox(h,_)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).sessionInfo}}finally{t==null||t._reset()}}async function h9(n,e){const t=Oe(n);if(Ft(t.auth.app))return Promise.reject(xn(t.auth));await u0(t,e)}async function E_(n,e,t){he(t.type===Dd,n,"argument-error");const i=await t.verify();he(typeof i=="string",n,"argument-error");const s={...e};if("phoneEnrollmentInfo"in s){const a=s.phoneEnrollmentInfo.phoneNumber,l=s.phoneEnrollmentInfo.captchaResponse,c=s.phoneEnrollmentInfo.clientType,f=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:a,recaptchaToken:i,captchaResponse:l,clientType:c,recaptchaVersion:f}}),s}else if("phoneSignInInfo"in s){const a=s.phoneSignInInfo.captchaResponse,l=s.phoneSignInInfo.clientType,c=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:i,captchaResponse:a,clientType:l,recaptchaVersion:c}}),s}else return Object.assign(s,{recaptchaToken:i}),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qa=class xm{constructor(e){this.providerId=xm.PROVIDER_ID,this.auth=$t(e)}verifyPhoneNumber(e,t){return kp(this.auth,e,Oe(t))}static credential(e,t){return Oa._fromVerification(e,t)}static credentialFromResult(e){const t=e;return xm.credentialFromTaggedObject(t)}static credentialFromError(e){return xm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:i}=e;return t&&i?Oa._fromTokenResponse(t,i):null}};qa.PROVIDER_ID="phone";qa.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Za(n,e){return e?Si(e):(he(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0 extends Wu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vs(e,this._buildIdpRequest())}_linkToIdToken(e,t){return vs(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return vs(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function m9(n){return PR(n.auth,new _0(n),n.bypassAuthState)}function p9(n){const{auth:e,user:t}=n;return he(t,e,"internal-error"),NR(t,new _0(n),n.bypassAuthState)}async function g9(n){const{auth:e,user:t}=n;return he(t,e,"internal-error"),u0(t,new _0(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,t,i,s,a=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:s,tenantId:a,error:l,type:c}=e;if(l){this.reject(l);return}const f={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(f))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return m9;case"linkViaPopup":case"linkViaRedirect":return g9;case"reauthViaPopup":case"reauthViaRedirect":return p9;default:Fn(this.auth,"internal-error")}}resolve(e){ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y9=new vf(2e3,1e4);async function _9(n,e,t){if(Ft(n.app))return Promise.reject(vn(n,"operation-not-supported-in-this-environment"));const i=$t(n);Ju(n,e,bs);const s=Za(i,t);return new ys(i,"signInViaPopup",e,s).executeNotNull()}async function v9(n,e,t){const i=Oe(n);if(Ft(i.auth.app))return Promise.reject(vn(i.auth,"operation-not-supported-in-this-environment"));Ju(i.auth,e,bs);const s=Za(i.auth,t);return new ys(i.auth,"reauthViaPopup",e,s,i).executeNotNull()}async function E9(n,e,t){const i=Oe(n);Ju(i.auth,e,bs);const s=Za(i.auth,t);return new ys(i.auth,"linkViaPopup",e,s,i).executeNotNull()}class ys extends zR{constructor(e,t,i,s,a){super(e,t,s,a),this.provider=i,this.authWindow=null,this.pollId=null,ys.currentPopupAction&&ys.currentPopupAction.cancel(),ys.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return he(e,this.auth,"internal-error"),e}async onExecution(){ur(this.filter.length===1,"Popup operations only handle one event");const e=Sf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(vn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(vn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ys.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(vn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,y9.get())};e()}}ys.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T9="pendingRedirect",Md=new Map;class I9 extends zR{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Md.get(this.auth._key());if(!e){try{const i=await w9(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Md.set(this.auth._key(),e)}return this.bypassAuthState||Md.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function w9(n,e){const t=$R(e),i=HR(n);if(!await i._isAvailable())return!1;const s=await i._get(t)==="true";return await i._remove(t),s}async function v0(n,e){return HR(n)._set($R(e),"true")}function S9(){Md.clear()}function E0(n,e){Md.set(n._key(),e)}function HR(n){return Si(n._redirectPersistence)}function $R(n){return La(T9,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A9(n,e,t){return x9(n,e,t)}async function x9(n,e,t){if(Ft(n.app))return Promise.reject(xn(n));const i=$t(n);Ju(n,e,bs),await i._initializationPromise;const s=Za(i,t);return await v0(s,i),s._openRedirect(i,e,"signInViaRedirect")}function C9(n,e,t){return b9(n,e,t)}async function b9(n,e,t){const i=Oe(n);if(Ju(i.auth,e,bs),Ft(i.auth.app))return Promise.reject(xn(i.auth));await i.auth._initializationPromise;const s=Za(i.auth,t);await v0(s,i.auth);const a=await jR(i);return s._openRedirect(i.auth,e,"reauthViaRedirect",a)}function R9(n,e,t){return N9(n,e,t)}async function N9(n,e,t){const i=Oe(n);Ju(i.auth,e,bs),await i.auth._initializationPromise;const s=Za(i.auth,t);await Rp(!1,i,e.providerId),await v0(s,i.auth);const a=await jR(i);return s._openRedirect(i.auth,e,"linkViaRedirect",a)}async function P9(n,e){return await $t(n)._initializationPromise,Vp(n,e,!1)}async function Vp(n,e,t=!1){if(Ft(n.app))return Promise.reject(xn(n));const i=$t(n),s=Za(i,e),l=await new I9(i,s,t).execute();return l&&!t&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}async function jR(n){const e=Sf(`${n.uid}:::`);return n._redirectEventId=e,await n.auth._setRedirectUser(n),await n.auth._persistUserIfCurrent(n),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D9=600*1e3;class KR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!M9(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!YR(e)){const s=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(vn(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=D9&&this.cachedEventUids.clear(),this.cachedEventUids.has(fx(e))}saveEventToCache(e){this.cachedEventUids.add(fx(e)),this.lastProcessedEventTime=Date.now()}}function fx(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function YR({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function M9(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return YR(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JR(n,e={}){return Wt(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,V9=/^https?/;async function L9(n){if(n.config.emulator)return;const{authorizedDomains:e}=await JR(n);for(const t of e)try{if(O9(t))return}catch{}Fn(n,"unauthorized-domain")}function O9(n){const e=Xd(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===i}if(!V9.test(t))return!1;if(k9.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U9=new vf(3e4,6e4);function hx(){const n=pn().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function F9(n){return new Promise((e,t)=>{var s,a,l;function i(){hx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{hx(),t(vn(n,"network-request-failed"))},timeout:U9.get()})}if((a=(s=pn().gapi)==null?void 0:s.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((l=pn().gapi)!=null&&l.load)i();else{const c=wR("iframefcb");return pn()[c]=()=>{gapi.load?i():t(vn(n,"network-request-failed"))},l0(`${MF()}?onload=${c}`).catch(f=>t(f))}}).catch(e=>{throw Cm=null,e})}let Cm=null;function q9(n){return Cm=Cm||F9(n),Cm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B9=new vf(5e3,15e3),G9="__/auth/iframe",z9="emulator/auth/iframe",H9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function j9(n){const e=n.config;he(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?a0(e,z9):`https://${n.config.authDomain}/${G9}`,i={apiKey:e.apiKey,appName:n.name,v:Bo},s=$9.get(n.config.apiHost);s&&(i.eid=s);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${Yu(i).slice(1)}`}async function K9(n){const e=await q9(n),t=pn().gapi;return he(t,n,"internal-error"),e.open({where:document.body,url:j9(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:H9,dontclear:!0},i=>new Promise(async(s,a)=>{await i.restyle({setHideOnLeave:!1});const l=vn(n,"network-request-failed"),c=pn().setTimeout(()=>{a(l)},B9.get());function f(){pn().clearTimeout(c),s(i)}i.ping(f).then(f,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},J9=500,W9=600,Q9="_blank",X9="http://localhost";class mx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Z9(n,e,t,i=J9,s=W9){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const f={...Y9,width:i.toString(),height:s.toString(),top:a,left:l},h=Ht().toLowerCase();t&&(c=yR(h)?Q9:t),pR(h)&&(e=e||X9,f.scrollbars="yes");const _=Object.entries(f).reduce((I,[x,k])=>`${I}${x}=${k},`,"");if(wF(h)&&c!=="_self")return eB(e||"",c),new mx(null);const E=window.open(e||"",c,_);he(E,n,"popup-blocked");try{E.focus()}catch{}return new mx(E)}function eB(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tB="__/auth/handler",nB="emulator/auth/handler",iB=encodeURIComponent("fac");async function Q_(n,e,t,i,s,a){he(n.config.authDomain,n,"auth-domain-config-required"),he(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Bo,eventId:s};if(e instanceof bs){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",N3(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries(a||{}))l[_]=E}if(e instanceof Qu){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(l.scopes=_.join(","))}n.tenantId&&(l.tid=n.tenantId);const c=l;for(const _ of Object.keys(c))c[_]===void 0&&delete c[_];const f=await n._getAppCheckToken(),h=f?`#${iB}=${encodeURIComponent(f)}`:"";return`${rB(n)}?${Yu(c).slice(1)}${h}`}function rB({config:n}){return n.emulator?a0(n,nB):`https://${n.authDomain}/${tB}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_="webStorageSupport";class sB{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Fa,this._completeRedirectFn=Vp,this._overrideRedirectResult=E0}async _openPopup(e,t,i,s){var l;ur((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const a=await Q_(e,t,i,Xd(),s);return Z9(e,a,Sf())}async _openRedirect(e,t,i,s){await this._originValidation(e);const a=await Q_(e,t,i,Xd(),s);return Kq(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:a}=this.eventManagers[t];return s?Promise.resolve(s):(ur(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await K9(e),i=new KR(e);return t.register("authEvent",s=>(he(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(T_,{type:T_},s=>{var l;const a=(l=s==null?void 0:s[0])==null?void 0:l[T_];a!==void 0&&t(!!a),Fn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=L9(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return TR()||gR()||Tf()}}const oB=sB;class aB{constructor(e){this.factorId=e}_process(e,t,i){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,i);case"signin":return this._finalizeSignIn(e,t.credential);default:return Br("unexpected MultiFactorSessionType")}}}class T0 extends aB{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new T0(e)}_finalizeEnroll(e,t,i){return qq(e,{idToken:t,displayName:i,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return n9(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class WR{constructor(){}static assertion(e){return T0._fromCredential(e)}}WR.FACTOR_ID="phone";var px="@firebase/auth",gx="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lB{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uB(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cB(n){Po(new Yr("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=i.options;he(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:l,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:IR(n)},h=new RF(i,s,a,f);return zF(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Po(new Yr("auth-internal",e=>{const t=$t(e.getProvider("auth").getImmediate());return(i=>new lB(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),or(px,gx,uB(n)),or(px,gx,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dB=300;_3("authIdTokenMaxAge");function fB(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}NF({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=s=>{const a=vn("internal-error");a.customData=s,t(a)},i.type="text/javascript",i.charset="UTF-8",fB().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cB("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ba(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hB=2e3;async function mB(n,e,t){const{BuildInfo:i}=Ba();ur(e.sessionId,"AuthEvent did not contain a session ID");const s=await vB(e.sessionId),a={};return Tf()?a.ibi=i.packageName:Ef()?a.apn=i.packageName:Fn(n,"operation-not-supported-in-this-environment"),i.displayName&&(a.appDisplayName=i.displayName),a.sessionId=s,Q_(n,t,e.type,void 0,e.eventId??void 0,a)}async function pB(n){const{BuildInfo:e}=Ba(),t={};Tf()?t.iosBundleId=e.packageName:Ef()?t.androidPackageName=e.packageName:Fn(n,"operation-not-supported-in-this-environment"),await JR(n,t)}function gB(n){const{cordova:e}=Ba();return new Promise(t=>{e.plugins.browsertab.isAvailable(i=>{let s=null;i?e.plugins.browsertab.openUrl(n):s=e.InAppBrowser.open(n,IF()?"_blank":"_system","location=yes"),t(s)})})}async function yB(n,e,t){const{cordova:i}=Ba();let s=()=>{};try{await new Promise((a,l)=>{let c=null;function f(){var I;a();const E=(I=i.plugins.browsertab)==null?void 0:I.close;typeof E=="function"&&E(),typeof(t==null?void 0:t.close)=="function"&&t.close()}function h(){c||(c=window.setTimeout(()=>{l(vn(n,"redirect-cancelled-by-user"))},hB))}function _(){(document==null?void 0:document.visibilityState)==="visible"&&h()}e.addPassiveListener(f),document.addEventListener("resume",h,!1),Ef()&&document.addEventListener("visibilitychange",_,!1),s=()=>{e.removePassiveListener(f),document.removeEventListener("resume",h,!1),document.removeEventListener("visibilitychange",_,!1),c&&window.clearTimeout(c)}})}finally{s()}}function _B(n){var t,i,s,a,l,c,f,h,_,E;const e=Ba();he(typeof((t=e==null?void 0:e.universalLinks)==null?void 0:t.subscribe)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),he(typeof((i=e==null?void 0:e.BuildInfo)==null?void 0:i.packageName)<"u",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),he(typeof((l=(a=(s=e==null?void 0:e.cordova)==null?void 0:s.plugins)==null?void 0:a.browsertab)==null?void 0:l.openUrl)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),he(typeof((h=(f=(c=e==null?void 0:e.cordova)==null?void 0:c.plugins)==null?void 0:f.browsertab)==null?void 0:h.isAvailable)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),he(typeof((E=(_=e==null?void 0:e.cordova)==null?void 0:_.InAppBrowser)==null?void 0:E.open)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function vB(n){const e=EB(n),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(s=>s.toString(16).padStart(2,"0")).join("")}function EB(n){if(ur(/[0-9a-zA-Z]+/.test(n),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(n);const e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let i=0;i<n.length;i++)t[i]=n.charCodeAt(i);return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TB=20;class IB extends KR{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function wB(n,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:xB(),postBody:null,tenantId:n.tenantId,error:vn(n,"no-auth-event")}}function SB(n,e){return X_()._set(Z_(n),e)}async function yx(n){const e=await X_()._get(Z_(n));return e&&await X_()._remove(Z_(n)),e}function AB(n,e){var i,s;const t=bB(e);if(t.includes("/__/auth/callback")){const a=bm(t),l=a.firebaseError?CB(decodeURIComponent(a.firebaseError)):null,c=(s=(i=l==null?void 0:l.code)==null?void 0:i.split("auth/"))==null?void 0:s[1],f=c?vn(c):null;return f?{type:n.type,eventId:n.eventId,tenantId:n.tenantId,error:f,urlResponse:null,sessionId:null,postBody:null}:{type:n.type,eventId:n.eventId,tenantId:n.tenantId,sessionId:n.sessionId,urlResponse:t,postBody:null}}return null}function xB(){const n=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<TB;t++){const i=Math.floor(Math.random()*e.length);n.push(e.charAt(i))}return n.join("")}function X_(){return Si(p0)}function Z_(n){return La("authEvent",n.config.apiKey,n.name)}function CB(n){try{return JSON.parse(n)}catch{return null}}function bB(n){const e=bm(n),t=e.link?decodeURIComponent(e.link):void 0,i=bm(t).link,s=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return bm(s).link||s||i||t||n}function bm(n){if(!(n!=null&&n.includes("?")))return{};const[e,...t]=n.split("?");return su(t.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RB=500;class NB{constructor(){this._redirectPersistence=Fa,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Vp,this._overrideRedirectResult=E0}async _initialize(e){const t=e._key();let i=this.eventManagers.get(t);return i||(i=new IB(e),this.eventManagers.set(t,i),this.attachCallbackListeners(e,i)),i}_openPopup(e){Fn(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,i,s){_B(e);const a=await this._initialize(e);await a.initialized(),a.resetRedirect(),S9(),await this._originValidation(e);const l=wB(e,i,s);await SB(e,l);const c=await mB(e,l,t),f=await gB(c);return yB(e,a,f)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=pB(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:i,handleOpenURL:s,BuildInfo:a}=Ba(),l=setTimeout(async()=>{await yx(e),t.onEvent(_x())},RB),c=async _=>{clearTimeout(l);const E=await yx(e);let I=null;E&&(_!=null&&_.url)&&(I=AB(E,_.url)),t.onEvent(I||_x())};typeof i<"u"&&typeof i.subscribe=="function"&&i.subscribe(null,c);const f=s,h=`${a.packageName.toLowerCase()}://`;Ba().handleOpenURL=async _=>{if(_.toLowerCase().startsWith(h)&&c({url:_}),typeof f=="function")try{f(_)}catch(E){console.error(E)}}}}const PB=NB;function _x(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:vn("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DB(n,e){$t(n)._logFramework(e)}var MB="@firebase/auth-compat",kB="0.6.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VB=1e3;function kd(){var n;return((n=self==null?void 0:self.location)==null?void 0:n.protocol)||null}function LB(){return kd()==="http:"||kd()==="https:"}function QR(n=Ht()){return!!((kd()==="file:"||kd()==="ionic:"||kd()==="capacitor:")&&n.toLowerCase().match(/iphone|ipad|ipod|android/))}function OB(){return Xv()||Sp()}function UB(){return zb()&&(document==null?void 0:document.documentMode)===11}function FB(n=Ht()){return/Edge\/\d+/.test(n)}function qB(n=Ht()){return UB()||FB(n)}function XR(){try{const n=self.localStorage,e=Sf();if(n)return n.setItem(e,"1"),n.removeItem(e),qB()?Jd():!0}catch{return I0()&&Jd()}return!1}function I0(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function I_(){return(LB()||Gb()||QR())&&!OB()&&XR()&&!I0()}function ZR(){return QR()&&typeof document<"u"}async function BB(){return ZR()?new Promise(n=>{const e=setTimeout(()=>{n(!1)},VB);document.addEventListener("deviceready",()=>{clearTimeout(e),n(!0)})}):!1}function GB(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi={LOCAL:"local",NONE:"none",SESSION:"session"},dd=he,eN="persistence";function zB(n,e){if(dd(Object.values(wi).includes(e),n,"invalid-persistence-type"),Xv()){dd(e!==wi.SESSION,n,"unsupported-persistence-type");return}if(Sp()){dd(e===wi.NONE,n,"unsupported-persistence-type");return}if(I0()){dd(e===wi.NONE||e===wi.LOCAL&&Jd(),n,"unsupported-persistence-type");return}dd(e===wi.NONE||XR(),n,"unsupported-persistence-type")}async function ev(n){await n._initializationPromise;const e=tN(),t=La(eN,n.config.apiKey,n.name);e&&e.setItem(t,n._getPersistenceType())}function HB(n,e){const t=tN();if(!t)return[];const i=La(eN,n,e);switch(t.getItem(i)){case wi.NONE:return[wu];case wi.LOCAL:return[tf,Fa];case wi.SESSION:return[Fa];default:return[]}}function tN(){var n;try{return((n=GB())==null?void 0:n.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $B=he;class vo{constructor(){this.browserResolver=Si(oB),this.cordovaResolver=Si(PB),this.underlyingResolver=null,this._redirectPersistence=Fa,this._completeRedirectFn=Vp,this._overrideRedirectResult=E0}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,i,s){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,i,s)}async _openRedirect(e,t,i,s){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,i,s)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return ZR()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return $B(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await BB();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nN(n){return n.unwrap()}function jB(n){return n.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KB(n){return iN(n)}function YB(n,e){var i;const t=(i=e.customData)==null?void 0:i._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const s=e;s.resolver=new JB(n,Fq(n,e))}else if(t){const s=iN(e),a=e;s&&(a.credential=s,a.tenantId=t.tenantId||void 0,a.email=t.email||void 0,a.phoneNumber=t.phoneNumber||void 0)}}function iN(n){const{_tokenResponse:e}=n instanceof Qn?n.customData:n;if(!e)return null;if(!(n instanceof Qn)&&"temporaryProof"in e&&"phoneNumber"in e)return qa.credentialFromResult(n);const t=e.providerId;if(!t||t===ud.PASSWORD)return null;let i;switch(t){case ud.GOOGLE:i=Lr;break;case ud.FACEBOOK:i=Vr;break;case ud.GITHUB:i=Or;break;case ud.TWITTER:i=Ur;break;default:const{oauthIdToken:s,oauthAccessToken:a,oauthTokenSecret:l,pendingToken:c,nonce:f}=e;return!a&&!l&&!s&&!c?null:c?t.startsWith("saml.")?Su._create(t,c):Jr._fromParams({providerId:t,signInMethod:t,pendingToken:c,idToken:s,accessToken:a}):new pu(t).credential({idToken:s,accessToken:a,rawNonce:f})}return n instanceof Qn?i.credentialFromError(n):i.credentialFromResult(n)}function li(n,e){return e.catch(t=>{throw t instanceof Qn&&YB(n,t),t}).then(t=>{const i=t.operationType,s=t.user;return{operationType:i,credential:KB(t),additionalUserInfo:Uq(t),user:Lp.getOrCreate(s)}})}async function tv(n,e){const t=await e;return{verificationId:t.verificationId,confirm:i=>li(n,t.confirm(i))}}class JB{constructor(e,t){this.resolver=t,this.auth=jB(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return li(nN(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lp=class Td{constructor(e){this._delegate=e,this.multiFactor=Gq(e)}static getOrCreate(e){return Td.USER_MAP.has(e)||Td.USER_MAP.set(e,new Td(e)),Td.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return li(this.auth,DR(this._delegate,e))}async linkWithPhoneNumber(e,t){return tv(this.auth,d9(this._delegate,e,t))}async linkWithPopup(e){return li(this.auth,E9(this._delegate,e,vo))}async linkWithRedirect(e){return await ev($t(this.auth)),R9(this._delegate,e,vo)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return li(this.auth,MR(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return tv(this.auth,f9(this._delegate,e,t))}reauthenticateWithPopup(e){return li(this.auth,v9(this._delegate,e,vo))}async reauthenticateWithRedirect(e){return await ev($t(this.auth)),C9(this._delegate,e,vo)}sendEmailVerification(e){return Cq(this._delegate,e)}async unlink(e){return await hq(this._delegate,e),this}updateEmail(e){return Pq(this._delegate,e)}updatePassword(e){return Dq(this._delegate,e)}updatePhoneNumber(e){return h9(this._delegate,e)}updateProfile(e){return Nq(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return bq(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};Lp.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fd=he;class nv{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:i}=e.options;fd(i,"invalid-api-key",{appName:e.name}),fd(i,"invalid-api-key",{appName:e.name});const s=typeof window<"u"?vo:void 0;this._delegate=t.initialize({options:{persistence:WB(i,e.name),popupRedirectResolver:s}}),this._delegate._updateErrorMap(nF),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Lp.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){HF(this._delegate,e,t)}applyActionCode(e){return _q(this._delegate,e)}checkActionCode(e){return kR(this._delegate,e)}confirmPasswordReset(e,t){return yq(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return li(this._delegate,Eq(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return xq(this._delegate,e)}isSignInWithEmailLink(e){return wq(this._delegate,e)}async getRedirectResult(){fd(I_(),this._delegate,"operation-not-supported-in-this-environment");const e=await P9(this._delegate,vo);return e?li(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){DB(this._delegate,e)}onAuthStateChanged(e,t,i){const{next:s,error:a,complete:l}=vx(e,t,i);return this._delegate.onAuthStateChanged(s,a,l)}onIdTokenChanged(e,t,i){const{next:s,error:a,complete:l}=vx(e,t,i);return this._delegate.onIdTokenChanged(s,a,l)}sendSignInLinkToEmail(e,t){return Iq(this._delegate,e,t)}sendPasswordResetEmail(e,t){return gq(this._delegate,e,t||void 0)}async setPersistence(e){zB(this._delegate,e);let t;switch(e){case wi.SESSION:t=Fa;break;case wi.LOCAL:t=await Si(tf)._isAvailable()?tf:p0;break;case wi.NONE:t=wu;break;default:return Fn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return li(this._delegate,fq(this._delegate))}signInWithCredential(e){return li(this._delegate,Np(this._delegate,e))}signInWithCustomToken(e){return li(this._delegate,pq(this._delegate,e))}signInWithEmailAndPassword(e,t){return li(this._delegate,Tq(this._delegate,e,t))}signInWithEmailLink(e,t){return li(this._delegate,Sq(this._delegate,e,t))}signInWithPhoneNumber(e,t){return tv(this._delegate,c9(this._delegate,e,t))}async signInWithPopup(e){return fd(I_(),this._delegate,"operation-not-supported-in-this-environment"),li(this._delegate,_9(this._delegate,e,vo))}async signInWithRedirect(e){return fd(I_(),this._delegate,"operation-not-supported-in-this-environment"),await ev(this._delegate),A9(this._delegate,e,vo)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return vq(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}nv.Persistence=wi;function vx(n,e,t){let i=n;typeof n!="function"&&({next:i,error:e,complete:t}=n);const s=i;return{next:l=>s(l&&Lp.getOrCreate(l)),error:e,complete:t}}function WB(n,e){const t=HB(n,e);if(typeof self<"u"&&!t.includes(tf)&&t.push(tf),typeof window<"u")for(const i of[p0,Fa])t.includes(i)||t.push(i);return t.includes(wu)||t.push(wu),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{static credential(e,t){return qa.credential(e,t)}constructor(){this.providerId="phone",this._delegate=new qa(nN(xi.auth()))}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}w0.PHONE_SIGN_IN_METHOD=qa.PHONE_SIGN_IN_METHOD;w0.PROVIDER_ID=qa.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QB=he;class XB{constructor(e,t,i=xi.app()){var s;QB((s=i.options)==null?void 0:s.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new l9(i.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZB="auth-compat";function eG(n){n.INTERNAL.registerComponent(new Yr(ZB,e=>{const t=e.getProvider("app-compat").getImmediate(),i=e.getProvider("auth");return new nv(t,i)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:jl.EMAIL_SIGNIN,PASSWORD_RESET:jl.PASSWORD_RESET,RECOVER_EMAIL:jl.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:jl.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:jl.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:jl.VERIFY_EMAIL}},EmailAuthProvider:Go,FacebookAuthProvider:Vr,GithubAuthProvider:Or,GoogleAuthProvider:Lr,OAuthProvider:pu,SAMLAuthProvider:Zm,PhoneAuthProvider:w0,PhoneMultiFactorGenerator:WR,RecaptchaVerifier:XB,TwitterAuthProvider:Ur,Auth:nv,AuthCredential:Wu,Error:Qn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),n.registerVersion(MB,kB)}eG(xi);var Ex=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ao,rN;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,P){function R(){}R.prototype=P.prototype,N.F=P.prototype,N.prototype=new R,N.prototype.constructor=N,N.D=function(D,O,L){for(var M=Array(arguments.length-2),De=2;De<arguments.length;De++)M[De-2]=arguments[De];return P.prototype[O].apply(D,M)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,P,R){R||(R=0);const D=Array(16);if(typeof P=="string")for(var O=0;O<16;++O)D[O]=P.charCodeAt(R++)|P.charCodeAt(R++)<<8|P.charCodeAt(R++)<<16|P.charCodeAt(R++)<<24;else for(O=0;O<16;++O)D[O]=P[R++]|P[R++]<<8|P[R++]<<16|P[R++]<<24;P=N.g[0],R=N.g[1],O=N.g[2];let L=N.g[3],M;M=P+(L^R&(O^L))+D[0]+3614090360&4294967295,P=R+(M<<7&4294967295|M>>>25),M=L+(O^P&(R^O))+D[1]+3905402710&4294967295,L=P+(M<<12&4294967295|M>>>20),M=O+(R^L&(P^R))+D[2]+606105819&4294967295,O=L+(M<<17&4294967295|M>>>15),M=R+(P^O&(L^P))+D[3]+3250441966&4294967295,R=O+(M<<22&4294967295|M>>>10),M=P+(L^R&(O^L))+D[4]+4118548399&4294967295,P=R+(M<<7&4294967295|M>>>25),M=L+(O^P&(R^O))+D[5]+1200080426&4294967295,L=P+(M<<12&4294967295|M>>>20),M=O+(R^L&(P^R))+D[6]+2821735955&4294967295,O=L+(M<<17&4294967295|M>>>15),M=R+(P^O&(L^P))+D[7]+4249261313&4294967295,R=O+(M<<22&4294967295|M>>>10),M=P+(L^R&(O^L))+D[8]+1770035416&4294967295,P=R+(M<<7&4294967295|M>>>25),M=L+(O^P&(R^O))+D[9]+2336552879&4294967295,L=P+(M<<12&4294967295|M>>>20),M=O+(R^L&(P^R))+D[10]+4294925233&4294967295,O=L+(M<<17&4294967295|M>>>15),M=R+(P^O&(L^P))+D[11]+2304563134&4294967295,R=O+(M<<22&4294967295|M>>>10),M=P+(L^R&(O^L))+D[12]+1804603682&4294967295,P=R+(M<<7&4294967295|M>>>25),M=L+(O^P&(R^O))+D[13]+4254626195&4294967295,L=P+(M<<12&4294967295|M>>>20),M=O+(R^L&(P^R))+D[14]+2792965006&4294967295,O=L+(M<<17&4294967295|M>>>15),M=R+(P^O&(L^P))+D[15]+1236535329&4294967295,R=O+(M<<22&4294967295|M>>>10),M=P+(O^L&(R^O))+D[1]+4129170786&4294967295,P=R+(M<<5&4294967295|M>>>27),M=L+(R^O&(P^R))+D[6]+3225465664&4294967295,L=P+(M<<9&4294967295|M>>>23),M=O+(P^R&(L^P))+D[11]+643717713&4294967295,O=L+(M<<14&4294967295|M>>>18),M=R+(L^P&(O^L))+D[0]+3921069994&4294967295,R=O+(M<<20&4294967295|M>>>12),M=P+(O^L&(R^O))+D[5]+3593408605&4294967295,P=R+(M<<5&4294967295|M>>>27),M=L+(R^O&(P^R))+D[10]+38016083&4294967295,L=P+(M<<9&4294967295|M>>>23),M=O+(P^R&(L^P))+D[15]+3634488961&4294967295,O=L+(M<<14&4294967295|M>>>18),M=R+(L^P&(O^L))+D[4]+3889429448&4294967295,R=O+(M<<20&4294967295|M>>>12),M=P+(O^L&(R^O))+D[9]+568446438&4294967295,P=R+(M<<5&4294967295|M>>>27),M=L+(R^O&(P^R))+D[14]+3275163606&4294967295,L=P+(M<<9&4294967295|M>>>23),M=O+(P^R&(L^P))+D[3]+4107603335&4294967295,O=L+(M<<14&4294967295|M>>>18),M=R+(L^P&(O^L))+D[8]+1163531501&4294967295,R=O+(M<<20&4294967295|M>>>12),M=P+(O^L&(R^O))+D[13]+2850285829&4294967295,P=R+(M<<5&4294967295|M>>>27),M=L+(R^O&(P^R))+D[2]+4243563512&4294967295,L=P+(M<<9&4294967295|M>>>23),M=O+(P^R&(L^P))+D[7]+1735328473&4294967295,O=L+(M<<14&4294967295|M>>>18),M=R+(L^P&(O^L))+D[12]+2368359562&4294967295,R=O+(M<<20&4294967295|M>>>12),M=P+(R^O^L)+D[5]+4294588738&4294967295,P=R+(M<<4&4294967295|M>>>28),M=L+(P^R^O)+D[8]+2272392833&4294967295,L=P+(M<<11&4294967295|M>>>21),M=O+(L^P^R)+D[11]+1839030562&4294967295,O=L+(M<<16&4294967295|M>>>16),M=R+(O^L^P)+D[14]+4259657740&4294967295,R=O+(M<<23&4294967295|M>>>9),M=P+(R^O^L)+D[1]+2763975236&4294967295,P=R+(M<<4&4294967295|M>>>28),M=L+(P^R^O)+D[4]+1272893353&4294967295,L=P+(M<<11&4294967295|M>>>21),M=O+(L^P^R)+D[7]+4139469664&4294967295,O=L+(M<<16&4294967295|M>>>16),M=R+(O^L^P)+D[10]+3200236656&4294967295,R=O+(M<<23&4294967295|M>>>9),M=P+(R^O^L)+D[13]+681279174&4294967295,P=R+(M<<4&4294967295|M>>>28),M=L+(P^R^O)+D[0]+3936430074&4294967295,L=P+(M<<11&4294967295|M>>>21),M=O+(L^P^R)+D[3]+3572445317&4294967295,O=L+(M<<16&4294967295|M>>>16),M=R+(O^L^P)+D[6]+76029189&4294967295,R=O+(M<<23&4294967295|M>>>9),M=P+(R^O^L)+D[9]+3654602809&4294967295,P=R+(M<<4&4294967295|M>>>28),M=L+(P^R^O)+D[12]+3873151461&4294967295,L=P+(M<<11&4294967295|M>>>21),M=O+(L^P^R)+D[15]+530742520&4294967295,O=L+(M<<16&4294967295|M>>>16),M=R+(O^L^P)+D[2]+3299628645&4294967295,R=O+(M<<23&4294967295|M>>>9),M=P+(O^(R|~L))+D[0]+4096336452&4294967295,P=R+(M<<6&4294967295|M>>>26),M=L+(R^(P|~O))+D[7]+1126891415&4294967295,L=P+(M<<10&4294967295|M>>>22),M=O+(P^(L|~R))+D[14]+2878612391&4294967295,O=L+(M<<15&4294967295|M>>>17),M=R+(L^(O|~P))+D[5]+4237533241&4294967295,R=O+(M<<21&4294967295|M>>>11),M=P+(O^(R|~L))+D[12]+1700485571&4294967295,P=R+(M<<6&4294967295|M>>>26),M=L+(R^(P|~O))+D[3]+2399980690&4294967295,L=P+(M<<10&4294967295|M>>>22),M=O+(P^(L|~R))+D[10]+4293915773&4294967295,O=L+(M<<15&4294967295|M>>>17),M=R+(L^(O|~P))+D[1]+2240044497&4294967295,R=O+(M<<21&4294967295|M>>>11),M=P+(O^(R|~L))+D[8]+1873313359&4294967295,P=R+(M<<6&4294967295|M>>>26),M=L+(R^(P|~O))+D[15]+4264355552&4294967295,L=P+(M<<10&4294967295|M>>>22),M=O+(P^(L|~R))+D[6]+2734768916&4294967295,O=L+(M<<15&4294967295|M>>>17),M=R+(L^(O|~P))+D[13]+1309151649&4294967295,R=O+(M<<21&4294967295|M>>>11),M=P+(O^(R|~L))+D[4]+4149444226&4294967295,P=R+(M<<6&4294967295|M>>>26),M=L+(R^(P|~O))+D[11]+3174756917&4294967295,L=P+(M<<10&4294967295|M>>>22),M=O+(P^(L|~R))+D[2]+718787259&4294967295,O=L+(M<<15&4294967295|M>>>17),M=R+(L^(O|~P))+D[9]+3951481745&4294967295,N.g[0]=N.g[0]+P&4294967295,N.g[1]=N.g[1]+(O+(M<<21&4294967295|M>>>11))&4294967295,N.g[2]=N.g[2]+O&4294967295,N.g[3]=N.g[3]+L&4294967295}i.prototype.v=function(N,P){P===void 0&&(P=N.length);const R=P-this.blockSize,D=this.C;let O=this.h,L=0;for(;L<P;){if(O==0)for(;L<=R;)s(this,N,L),L+=this.blockSize;if(typeof N=="string"){for(;L<P;)if(D[O++]=N.charCodeAt(L++),O==this.blockSize){s(this,D),O=0;break}}else for(;L<P;)if(D[O++]=N[L++],O==this.blockSize){s(this,D),O=0;break}}this.h=O,this.o+=P},i.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var P=1;P<N.length-8;++P)N[P]=0;P=this.o*8;for(var R=N.length-8;R<N.length;++R)N[R]=P&255,P/=256;for(this.v(N),N=Array(16),P=0,R=0;R<4;++R)for(let D=0;D<32;D+=8)N[P++]=this.g[R]>>>D&255;return N};function a(N,P){var R=c;return Object.prototype.hasOwnProperty.call(R,N)?R[N]:R[N]=P(N)}function l(N,P){this.h=P;const R=[];let D=!0;for(let O=N.length-1;O>=0;O--){const L=N[O]|0;D&&L==P||(R[O]=L,D=!1)}this.g=R}var c={};function f(N){return-128<=N&&N<128?a(N,function(P){return new l([P|0],P<0?-1:0)}):new l([N|0],N<0?-1:0)}function h(N){if(isNaN(N)||!isFinite(N))return E;if(N<0)return B(h(-N));const P=[];let R=1;for(let D=0;N>=R;D++)P[D]=N/R|0,R*=4294967296;return new l(P,0)}function _(N,P){if(N.length==0)throw Error("number format error: empty string");if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(N.charAt(0)=="-")return B(_(N.substring(1),P));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=h(Math.pow(P,8));let D=E;for(let L=0;L<N.length;L+=8){var O=Math.min(8,N.length-L);const M=parseInt(N.substring(L,L+O),P);O<8?(O=h(Math.pow(P,O)),D=D.j(O).add(h(M))):(D=D.j(R),D=D.add(h(M)))}return D}var E=f(0),I=f(1),x=f(16777216);n=l.prototype,n.m=function(){if(V(this))return-B(this).m();let N=0,P=1;for(let R=0;R<this.g.length;R++){const D=this.i(R);N+=(D>=0?D:4294967296+D)*P,P*=4294967296}return N},n.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(k(this))return"0";if(V(this))return"-"+B(this).toString(N);const P=h(Math.pow(N,6));var R=this;let D="";for(;;){const O=se(R,P).g;R=z(R,O.j(P));let L=((R.g.length>0?R.g[0]:R.h)>>>0).toString(N);if(R=O,k(R))return L+D;for(;L.length<6;)L="0"+L;D=L+D}},n.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function k(N){if(N.h!=0)return!1;for(let P=0;P<N.g.length;P++)if(N.g[P]!=0)return!1;return!0}function V(N){return N.h==-1}n.l=function(N){return N=z(this,N),V(N)?-1:k(N)?0:1};function B(N){const P=N.g.length,R=[];for(let D=0;D<P;D++)R[D]=~N.g[D];return new l(R,~N.h).add(I)}n.abs=function(){return V(this)?B(this):this},n.add=function(N){const P=Math.max(this.g.length,N.g.length),R=[];let D=0;for(let O=0;O<=P;O++){let L=D+(this.i(O)&65535)+(N.i(O)&65535),M=(L>>>16)+(this.i(O)>>>16)+(N.i(O)>>>16);D=M>>>16,L&=65535,M&=65535,R[O]=M<<16|L}return new l(R,R[R.length-1]&-2147483648?-1:0)};function z(N,P){return N.add(B(P))}n.j=function(N){if(k(this)||k(N))return E;if(V(this))return V(N)?B(this).j(B(N)):B(B(this).j(N));if(V(N))return B(this.j(B(N)));if(this.l(x)<0&&N.l(x)<0)return h(this.m()*N.m());const P=this.g.length+N.g.length,R=[];for(var D=0;D<2*P;D++)R[D]=0;for(D=0;D<this.g.length;D++)for(let O=0;O<N.g.length;O++){const L=this.i(D)>>>16,M=this.i(D)&65535,De=N.i(O)>>>16,We=N.i(O)&65535;R[2*D+2*O]+=M*We,G(R,2*D+2*O),R[2*D+2*O+1]+=L*We,G(R,2*D+2*O+1),R[2*D+2*O+1]+=M*De,G(R,2*D+2*O+1),R[2*D+2*O+2]+=L*De,G(R,2*D+2*O+2)}for(N=0;N<P;N++)R[N]=R[2*N+1]<<16|R[2*N];for(N=P;N<2*P;N++)R[N]=0;return new l(R,0)};function G(N,P){for(;(N[P]&65535)!=N[P];)N[P+1]+=N[P]>>>16,N[P]&=65535,P++}function J(N,P){this.g=N,this.h=P}function se(N,P){if(k(P))throw Error("division by zero");if(k(N))return new J(E,E);if(V(N))return P=se(B(N),P),new J(B(P.g),B(P.h));if(V(P))return P=se(N,B(P)),new J(B(P.g),P.h);if(N.g.length>30){if(V(N)||V(P))throw Error("slowDivide_ only works with positive integers.");for(var R=I,D=P;D.l(N)<=0;)R=de(R),D=de(D);var O=le(R,1),L=le(D,1);for(D=le(D,2),R=le(R,2);!k(D);){var M=L.add(D);M.l(N)<=0&&(O=O.add(R),L=M),D=le(D,1),R=le(R,1)}return P=z(N,O.j(P)),new J(O,P)}for(O=E;N.l(P)>=0;){for(R=Math.max(1,Math.floor(N.m()/P.m())),D=Math.ceil(Math.log(R)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),L=h(R),M=L.j(P);V(M)||M.l(N)>0;)R-=D,L=h(R),M=L.j(P);k(L)&&(L=I),O=O.add(L),N=z(N,M)}return new J(O,N)}n.B=function(N){return se(this,N).h},n.and=function(N){const P=Math.max(this.g.length,N.g.length),R=[];for(let D=0;D<P;D++)R[D]=this.i(D)&N.i(D);return new l(R,this.h&N.h)},n.or=function(N){const P=Math.max(this.g.length,N.g.length),R=[];for(let D=0;D<P;D++)R[D]=this.i(D)|N.i(D);return new l(R,this.h|N.h)},n.xor=function(N){const P=Math.max(this.g.length,N.g.length),R=[];for(let D=0;D<P;D++)R[D]=this.i(D)^N.i(D);return new l(R,this.h^N.h)};function de(N){const P=N.g.length+1,R=[];for(let D=0;D<P;D++)R[D]=N.i(D)<<1|N.i(D-1)>>>31;return new l(R,N.h)}function le(N,P){const R=P>>5;P%=32;const D=N.g.length-R,O=[];for(let L=0;L<D;L++)O[L]=P>0?N.i(L+R)>>>P|N.i(L+R+1)<<32-P:N.i(L+R);return new l(O,N.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,rN=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=h,l.fromString=_,Ao=l}).apply(typeof Ex<"u"?Ex:typeof self<"u"?self:typeof window<"u"?window:{});var mm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sN,Id,oN,Rm,iv,aN,lN,uN;(function(){var n,e=Object.defineProperty;function t(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof mm=="object"&&mm];for(var w=0;w<g.length;++w){var A=g[w];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var i=t(this);function s(g,w){if(w)e:{var A=i;g=g.split(".");for(var b=0;b<g.length-1;b++){var j=g[b];if(!(j in A))break e;A=A[j]}g=g[g.length-1],b=A[g],w=w(b),w!=b&&w!=null&&e(A,g,{configurable:!0,writable:!0,value:w})}}s("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(g){return g||function(w){var A=[],b;for(b in w)Object.prototype.hasOwnProperty.call(w,b)&&A.push([b,w[b]]);return A}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function c(g){var w=typeof g;return w=="object"&&g!=null||w=="function"}function f(g,w,A){return g.call.apply(g.bind,arguments)}function h(g,w,A){return h=f,h.apply(null,arguments)}function _(g,w){var A=Array.prototype.slice.call(arguments,1);return function(){var b=A.slice();return b.push.apply(b,arguments),g.apply(this,b)}}function E(g,w){function A(){}A.prototype=w.prototype,g.Z=w.prototype,g.prototype=new A,g.prototype.constructor=g,g.Ob=function(b,j,X){for(var pe=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)pe[ze-2]=arguments[ze];return w.prototype[j].apply(b,pe)}}var I=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function x(g){const w=g.length;if(w>0){const A=Array(w);for(let b=0;b<w;b++)A[b]=g[b];return A}return[]}function k(g,w){for(let b=1;b<arguments.length;b++){const j=arguments[b];var A=typeof j;if(A=A!="object"?A:j?Array.isArray(j)?"array":A:"null",A=="array"||A=="object"&&typeof j.length=="number"){A=g.length||0;const X=j.length||0;g.length=A+X;for(let pe=0;pe<X;pe++)g[A+pe]=j[pe]}else g.push(j)}}class V{constructor(w,A){this.i=w,this.j=A,this.h=0,this.g=null}get(){let w;return this.h>0?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function B(g){l.setTimeout(()=>{throw g},0)}function z(){var g=N;let w=null;return g.g&&(w=g.g,g.g=g.g.next,g.g||(g.h=null),w.next=null),w}class G{constructor(){this.h=this.g=null}add(w,A){const b=J.get();b.set(w,A),this.h?this.h.next=b:this.g=b,this.h=b}}var J=new V(()=>new se,g=>g.reset());class se{constructor(){this.next=this.g=this.h=null}set(w,A){this.h=w,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let de,le=!1,N=new G,P=()=>{const g=Promise.resolve(void 0);de=()=>{g.then(R)}};function R(){for(var g;g=z();){try{g.h.call(g.g)}catch(A){B(A)}var w=J;w.j(g),w.h<100&&(w.h++,g.next=w.g,w.g=g)}le=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(g,w){this.type=g,this.g=this.target=w,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var g=!1,w=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const A=()=>{};l.addEventListener("test",A,w),l.removeEventListener("test",A,w)}catch{}return g})();function M(g){return/^[\s\xa0]*$/.test(g)}function De(g,w){O.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,w)}E(De,O),De.prototype.init=function(g,w){const A=this.type=g.type,b=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=w,w=g.relatedTarget,w||(A=="mouseover"?w=g.fromElement:A=="mouseout"&&(w=g.toElement)),this.relatedTarget=w,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&De.Z.h.call(this)},De.prototype.h=function(){De.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var We="closure_listenable_"+(Math.random()*1e6|0),Z=0;function ne(g,w,A,b,j){this.listener=g,this.proxy=null,this.src=w,this.type=A,this.capture=!!b,this.ha=j,this.key=++Z,this.da=this.fa=!1}function ve(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function je(g,w,A){for(const b in g)w.call(A,g[b],b,g)}function Ke(g,w){for(const A in g)w.call(void 0,g[A],A,g)}function F(g){const w={};for(const A in g)w[A]=g[A];return w}const te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _e(g,w){let A,b;for(let j=1;j<arguments.length;j++){b=arguments[j];for(A in b)g[A]=b[A];for(let X=0;X<te.length;X++)A=te[X],Object.prototype.hasOwnProperty.call(b,A)&&(g[A]=b[A])}}function we(g){this.src=g,this.g={},this.h=0}we.prototype.add=function(g,w,A,b,j){const X=g.toString();g=this.g[X],g||(g=this.g[X]=[],this.h++);const pe=qe(g,w,b,j);return pe>-1?(w=g[pe],A||(w.fa=!1)):(w=new ne(w,this.src,X,!!b,j),w.fa=A,g.push(w)),w};function Fe(g,w){const A=w.type;if(A in g.g){var b=g.g[A],j=Array.prototype.indexOf.call(b,w,void 0),X;(X=j>=0)&&Array.prototype.splice.call(b,j,1),X&&(ve(w),g.g[A].length==0&&(delete g.g[A],g.h--))}}function qe(g,w,A,b){for(let j=0;j<g.length;++j){const X=g[j];if(!X.da&&X.listener==w&&X.capture==!!A&&X.ha==b)return j}return-1}var Ye="closure_lm_"+(Math.random()*1e6|0),kt={};function pt(g,w,A,b,j){if(Array.isArray(w)){for(let X=0;X<w.length;X++)pt(g,w[X],A,b,j);return null}return A=Cn(A),g&&g[We]?g.J(w,A,c(b)?!!b.capture:!1,j):bi(g,w,A,!1,b,j)}function bi(g,w,A,b,j,X){if(!w)throw Error("Invalid event type");const pe=c(j)?!!j.capture:!!j;let ze=ot(g);if(ze||(g[Ye]=ze=new we(g)),A=ze.add(w,A,b,pe,X),A.proxy)return A;if(b=ge(),A.proxy=b,b.src=g,b.listener=A,g.addEventListener)L||(j=pe),j===void 0&&(j=!1),g.addEventListener(w.toString(),b,j);else if(g.attachEvent)g.attachEvent(Le(w.toString()),b);else if(g.addListener&&g.removeListener)g.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return A}function ge(){function g(A){return w.call(g.src,g.listener,A)}const w=ke;return g}function Ae(g,w,A,b,j){if(Array.isArray(w))for(var X=0;X<w.length;X++)Ae(g,w[X],A,b,j);else b=c(b)?!!b.capture:!!b,A=Cn(A),g&&g[We]?(g=g.i,X=String(w).toString(),X in g.g&&(w=g.g[X],A=qe(w,A,b,j),A>-1&&(ve(w[A]),Array.prototype.splice.call(w,A,1),w.length==0&&(delete g.g[X],g.h--)))):g&&(g=ot(g))&&(w=g.g[w.toString()],g=-1,w&&(g=qe(w,A,b,j)),(A=g>-1?w[g]:null)&&be(A))}function be(g){if(typeof g!="number"&&g&&!g.da){var w=g.src;if(w&&w[We])Fe(w.i,g);else{var A=g.type,b=g.proxy;w.removeEventListener?w.removeEventListener(A,b,g.capture):w.detachEvent?w.detachEvent(Le(A),b):w.addListener&&w.removeListener&&w.removeListener(b),(A=ot(w))?(Fe(A,g),A.h==0&&(A.src=null,w[Ye]=null)):ve(g)}}}function Le(g){return g in kt?kt[g]:kt[g]="on"+g}function ke(g,w){if(g.da)g=!0;else{w=new De(w,this);const A=g.listener,b=g.ha||g.src;g.fa&&be(g),g=A.call(b,w)}return g}function ot(g){return g=g[Ye],g instanceof we?g:null}var Qt="__closure_events_fn_"+(Math.random()*1e9>>>0);function Cn(g){return typeof g=="function"?g:(g[Qt]||(g[Qt]=function(w){return g.handleEvent(w)}),g[Qt])}function Ct(){D.call(this),this.i=new we(this),this.M=this,this.G=null}E(Ct,D),Ct.prototype[We]=!0,Ct.prototype.removeEventListener=function(g,w,A,b){Ae(this,g,w,A,b)};function Vt(g,w){var A,b=g.G;if(b)for(A=[];b;b=b.G)A.push(b);if(g=g.M,b=w.type||w,typeof w=="string")w=new O(w,g);else if(w instanceof O)w.target=w.target||g;else{var j=w;w=new O(b,g),_e(w,j)}j=!0;let X,pe;if(A)for(pe=A.length-1;pe>=0;pe--)X=w.g=A[pe],j=bn(X,b,!0,w)&&j;if(X=w.g=g,j=bn(X,b,!0,w)&&j,j=bn(X,b,!1,w)&&j,A)for(pe=0;pe<A.length;pe++)X=w.g=A[pe],j=bn(X,b,!1,w)&&j}Ct.prototype.N=function(){if(Ct.Z.N.call(this),this.i){var g=this.i;for(const w in g.g){const A=g.g[w];for(let b=0;b<A.length;b++)ve(A[b]);delete g.g[w],g.h--}}this.G=null},Ct.prototype.J=function(g,w,A,b){return this.i.add(String(g),w,!1,A,b)},Ct.prototype.K=function(g,w,A,b){return this.i.add(String(g),w,!0,A,b)};function bn(g,w,A,b){if(w=g.i.g[String(w)],!w)return!0;w=w.concat();let j=!0;for(let X=0;X<w.length;++X){const pe=w[X];if(pe&&!pe.da&&pe.capture==A){const ze=pe.listener,Zt=pe.ha||pe.src;pe.fa&&Fe(g.i,pe),j=ze.call(Zt,b)!==!1&&j}}return j&&!b.defaultPrevented}function Yo(g,w){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=h(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(w)>2147483647?-1:l.setTimeout(g,w||0)}function dr(g){g.g=Yo(()=>{g.g=null,g.i&&(g.i=!1,dr(g))},g.l);const w=g.h;g.h=null,g.m.apply(null,w)}class ue extends D{constructor(w,A){super(),this.m=w,this.l=A,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:dr(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function me(g){D.call(this),this.h=g,this.g={}}E(me,D);var Ve=[];function at(g){je(g.g,function(w,A){this.g.hasOwnProperty(A)&&be(w)},g),g.g={}}me.prototype.N=function(){me.Z.N.call(this),at(this)},me.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ei=l.JSON.stringify,oc=l.JSON.parse,rl=class{stringify(g){return l.JSON.stringify(g,void 0)}parse(g){return l.JSON.parse(g,void 0)}};function At(){}function Rn(){}var Nn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Gt(){O.call(this,"d")}E(Gt,O);function Ri(){O.call(this,"c")}E(Ri,O);var Xt={},Bf=null;function sl(){return Bf=Bf||new Ct}Xt.Ia="serverreachability";function Gf(g){O.call(this,Xt.Ia,g)}E(Gf,O);function fr(g){const w=sl();Vt(w,new Gf(w))}Xt.STAT_EVENT="statevent";function Jo(g,w){O.call(this,Xt.STAT_EVENT,g),this.stat=w}E(Jo,O);function on(g){const w=sl();Vt(w,new Jo(w,g))}Xt.Ja="timingevent";function hr(g,w){O.call(this,Xt.Ja,g),this.size=w}E(hr,O);function mr(g,w){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){g()},w)}function Ki(){this.g=!0}Ki.prototype.ua=function(){this.g=!1};function ug(g,w,A,b,j,X){g.info(function(){if(g.g)if(X){var pe="",ze=X.split("&");for(let ft=0;ft<ze.length;ft++){var Zt=ze[ft].split("=");if(Zt.length>1){const Lt=Zt[0];Zt=Zt[1];const Mi=Lt.split("_");pe=Mi.length>=2&&Mi[1]=="type"?pe+(Lt+"="+Zt+"&"):pe+(Lt+"=redacted&")}}}else pe=null;else pe=X;return"XMLHTTP REQ ("+b+") [attempt "+j+"]: "+w+`
`+A+`
`+pe})}function zf(g,w,A,b,j,X,pe){g.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+j+"]: "+w+`
`+A+`
`+X+" "+pe})}function pr(g,w,A,b){g.info(function(){return"XMLHTTP TEXT ("+w+"): "+cg(g,A)+(b?" "+b:"")})}function Wo(g,w){g.info(function(){return"TIMEOUT: "+w})}Ki.prototype.info=function(){};function cg(g,w){if(!g.g)return w;if(!w)return null;try{const X=JSON.parse(w);if(X){for(g=0;g<X.length;g++)if(Array.isArray(X[g])){var A=X[g];if(!(A.length<2)){var b=A[1];if(Array.isArray(b)&&!(b.length<1)){var j=b[0];if(j!="noop"&&j!="stop"&&j!="close")for(let pe=1;pe<b.length;pe++)b[pe]=""}}}}return ei(X)}catch{return w}}var Qo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ac={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},lc;function Xo(){}E(Xo,At),Xo.prototype.g=function(){return new XMLHttpRequest},lc=new Xo;function Xr(g){return encodeURIComponent(String(g))}function Hf(g){var w=1;g=g.split(":");const A=[];for(;w>0&&g.length;)A.push(g.shift()),w--;return g.length&&A.push(g.join(":")),A}function Yi(g,w,A,b){this.j=g,this.i=w,this.l=A,this.S=b||1,this.V=new me(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ji}function Ji(){this.i=null,this.g="",this.h=!1}var an={},Tn={};function gr(g,w,A){g.M=1,g.A=Zo(un(w)),g.u=A,g.R=!0,ol(g,null)}function ol(g,w){g.F=Date.now(),yr(g),g.B=un(g.A);var A=g.B,b=g.S;Array.isArray(b)||(b=[String(b)]),cl(A.i,"t",b),g.C=0,A=g.j.L,g.h=new Ji,g.g=sh(g.j,A?w:null,!g.u),g.P>0&&(g.O=new ue(h(g.Y,g,g.g),g.P)),w=g.V,A=g.g,b=g.ba;var j="readystatechange";Array.isArray(j)||(j&&(Ve[0]=j.toString()),j=Ve);for(let X=0;X<j.length;X++){const pe=pt(A,j[X],b||w.handleEvent,!1,w.h||w);if(!pe)break;w.g[pe.key]=pe}w=g.J?F(g.J):{},g.u?(g.v||(g.v="POST"),w["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,w)):(g.v="GET",g.g.ea(g.B,g.v,null,w)),fr(),ug(g.i,g.v,g.B,g.l,g.S,g.u)}Yi.prototype.ba=function(g){g=g.target;const w=this.O;w&&Xi(g)==3?w.j():this.Y(g)},Yi.prototype.Y=function(g){try{if(g==this.g)e:{const ze=Xi(this.g),Zt=this.g.ya(),ft=this.g.ca();if(!(ze<3)&&(ze!=3||this.g&&(this.h.h||this.g.la()||Pn(this.g)))){this.K||ze!=4||Zt==7||(Zt==8||ft<=0?fr(3):fr(2)),_r(this);var w=this.g.ca();this.X=w;var A=dg(this);if(this.o=w==200,zf(this.i,this.v,this.B,this.l,this.S,ze,w),this.o){if(this.U&&!this.L){t:{if(this.g){var b,j=this.g;if((b=j.g?j.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(b)){var X=b;break t}}X=null}if(g=X)pr(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,vr(this,g);else{this.o=!1,this.m=3,on(12),fi(this),Ni(this);break e}}if(this.R){g=!0;let Lt;for(;!this.K&&this.C<A.length;)if(Lt=jf(this,A),Lt==Tn){ze==4&&(this.m=4,on(14),g=!1),pr(this.i,this.l,null,"[Incomplete Response]");break}else if(Lt==an){this.m=4,on(15),pr(this.i,this.l,A,"[Invalid Chunk]"),g=!1;break}else pr(this.i,this.l,Lt,null),vr(this,Lt);if($f(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ze!=4||A.length!=0||this.h.h||(this.m=1,on(16),g=!1),this.o=this.o&&g,!g)pr(this.i,this.l,A,"[Invalid Chunked Response]"),fi(this),Ni(this);else if(A.length>0&&!this.W){this.W=!0;var pe=this.j;pe.g==this&&pe.aa&&!pe.P&&(pe.j.info("Great, no buffering proxy detected. Bytes received: "+A.length),wc(pe),pe.P=!0,on(11))}}else pr(this.i,this.l,A,null),vr(this,A);ze==4&&fi(this),this.o&&!this.K&&(ze==4?th(this.j,this):(this.o=!1,yr(this)))}else es(this.g),w==400&&A.indexOf("Unknown SID")>0?(this.m=3,on(12)):(this.m=0,on(13)),fi(this),Ni(this)}}}catch{}finally{}};function dg(g){if(!$f(g))return g.g.la();const w=Pn(g.g);if(w==="")return"";let A="";const b=w.length,j=Xi(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return fi(g),Ni(g),"";g.h.i=new l.TextDecoder}for(let X=0;X<b;X++)g.h.h=!0,A+=g.h.i.decode(w[X],{stream:!(j&&X==b-1)});return w.length=0,g.h.g+=A,g.C=0,g.h.g}function $f(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function jf(g,w){var A=g.C,b=w.indexOf(`
`,A);return b==-1?Tn:(A=Number(w.substring(A,b)),isNaN(A)?an:(b+=1,b+A>w.length?Tn:(w=w.slice(b,b+A),g.C=b+A,w)))}Yi.prototype.cancel=function(){this.K=!0,fi(this)};function yr(g){g.T=Date.now()+g.H,al(g,g.H)}function al(g,w){if(g.D!=null)throw Error("WatchDog timer not null");g.D=mr(h(g.aa,g),w)}function _r(g){g.D&&(l.clearTimeout(g.D),g.D=null)}Yi.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(Wo(this.i,this.B),this.M!=2&&(fr(),on(17)),fi(this),this.m=2,Ni(this)):al(this,this.T-g)};function Ni(g){g.j.I==0||g.K||th(g.j,g)}function fi(g){_r(g);var w=g.O;w&&typeof w.dispose=="function"&&w.dispose(),g.O=null,at(g.V),g.g&&(w=g.g,g.g=null,w.abort(),w.dispose())}function vr(g,w){try{var A=g.j;if(A.I!=0&&(A.g==g||Tr(A.h,g))){if(!g.L&&Tr(A.h,g)&&A.I==3){try{var b=A.Ba.g.parse(w)}catch{b=null}if(Array.isArray(b)&&b.length==3){var j=b;if(j[0]==0){e:if(!A.v){if(A.g)if(A.g.F+3e3<g.F)pl(A),qs(A);else break e;oa(A),on(18)}}else A.xa=j[1],0<A.xa-A.K&&j[2]<37500&&A.F&&A.A==0&&!A.C&&(A.C=mr(h(A.Va,A),6e3));Er(A.h)<=1&&A.ta&&(A.ta=void 0)}else Cr(A,11)}else if((g.L||A.g==g)&&pl(A),!M(w))for(j=A.Ba.g.parse(w),w=0;w<j.length;w++){let ft=j[w];const Lt=ft[0];if(!(Lt<=A.K))if(A.K=Lt,ft=ft[1],A.I==2)if(ft[0]=="c"){A.M=ft[1],A.ba=ft[2];const Mi=ft[3];Mi!=null&&(A.ka=Mi,A.j.info("VER="+A.ka));const br=ft[4];br!=null&&(A.za=br,A.j.info("SVER="+A.za));const Zi=ft[5];Zi!=null&&typeof Zi=="number"&&Zi>0&&(b=1.5*Zi,A.O=b,A.j.info("backChannelRequestTimeoutMs_="+b)),b=A;const er=g.g;if(er){const aa=er.g?er.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(aa){var X=b.h;X.g||aa.indexOf("spdy")==-1&&aa.indexOf("quic")==-1&&aa.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(dc(X,X.h),X.h=null))}if(b.G){const gl=er.g?er.g.getResponseHeader("X-HTTP-Session-Id"):null;gl&&(b.wa=gl,gt(b.J,b.G,gl))}}A.I=3,A.l&&A.l.ra(),A.aa&&(A.T=Date.now()-g.F,A.j.info("Handshake RTT: "+A.T+"ms")),b=A;var pe=g;if(b.na=rh(b,b.L?b.ba:null,b.W),pe.L){fc(b.h,pe);var ze=pe,Zt=b.O;Zt&&(ze.H=Zt),ze.D&&(_r(ze),yr(ze)),b.g=pe}else Zf(b);A.i.length>0&&xr(A)}else ft[0]!="stop"&&ft[0]!="close"||Cr(A,7);else A.I==3&&(ft[0]=="stop"||ft[0]=="close"?ft[0]=="stop"?Cr(A,7):Tc(A):ft[0]!="noop"&&A.l&&A.l.qa(ft),A.A=0)}}fr(4)}catch{}}var ln=class{constructor(g,w){this.g=g,this.map=w}};function uc(g){this.l=g||10,l.PerformanceNavigationTiming?(g=l.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function cc(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function Er(g){return g.h?1:g.g?g.g.size:0}function Tr(g,w){return g.h?g.h==w:g.g?g.g.has(w):!1}function dc(g,w){g.g?g.g.add(w):g.h=w}function fc(g,w){g.h&&g.h==w?g.h=null:g.g&&g.g.has(w)&&g.g.delete(w)}uc.prototype.cancel=function(){if(this.i=hc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function hc(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let w=g.i;for(const A of g.g.values())w=w.concat(A.G);return w}return x(g.i)}var Kf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ll(g,w){if(g){g=g.split("&");for(let A=0;A<g.length;A++){const b=g[A].indexOf("=");let j,X=null;b>=0?(j=g[A].substring(0,b),X=g[A].substring(b+1)):j=g[A],w(j,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function hi(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let w;g instanceof hi?(this.l=g.l,In(this,g.j),this.o=g.o,this.g=g.g,Ms(this,g.u),this.h=g.h,mc(this,Qf(g.i)),this.m=g.m):g&&(w=String(g).match(Kf))?(this.l=!1,In(this,w[1]||"",!0),this.o=Ir(w[2]||""),this.g=Ir(w[3]||"",!0),Ms(this,w[4]),this.h=Ir(w[5]||"",!0),mc(this,w[6]||"",!0),this.m=Ir(w[7]||"")):(this.l=!1,this.i=new Vs(null,this.l))}hi.prototype.toString=function(){const g=[];var w=this.j;w&&g.push(ea(w,ul,!0),":");var A=this.g;return(A||w=="file")&&(g.push("//"),(w=this.o)&&g.push(ea(w,ul,!0),"@"),g.push(Xr(A).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.u,A!=null&&g.push(":",String(A))),(A=this.h)&&(this.g&&A.charAt(0)!="/"&&g.push("/"),g.push(ea(A,A.charAt(0)=="/"?pc:Yf,!0))),(A=this.i.toString())&&g.push("?",A),(A=this.m)&&g.push("#",ea(A,Jf)),g.join("")},hi.prototype.resolve=function(g){const w=un(this);let A=!!g.j;A?In(w,g.j):A=!!g.o,A?w.o=g.o:A=!!g.g,A?w.g=g.g:A=g.u!=null;var b=g.h;if(A)Ms(w,g.u);else if(A=!!g.h){if(b.charAt(0)!="/")if(this.g&&!this.h)b="/"+b;else{var j=w.h.lastIndexOf("/");j!=-1&&(b=w.h.slice(0,j+1)+b)}if(j=b,j==".."||j==".")b="";else if(j.indexOf("./")!=-1||j.indexOf("/.")!=-1){b=j.lastIndexOf("/",0)==0,j=j.split("/");const X=[];for(let pe=0;pe<j.length;){const ze=j[pe++];ze=="."?b&&pe==j.length&&X.push(""):ze==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),b&&pe==j.length&&X.push("")):(X.push(ze),b=!0)}b=X.join("/")}else b=j}return A?w.h=b:A=g.i.toString()!=="",A?mc(w,Qf(g.i)):A=!!g.m,A&&(w.m=g.m),w};function un(g){return new hi(g)}function In(g,w,A){g.j=A?Ir(w,!0):w,g.j&&(g.j=g.j.replace(/:$/,""))}function Ms(g,w){if(w){if(w=Number(w),isNaN(w)||w<0)throw Error("Bad port number "+w);g.u=w}else g.u=null}function mc(g,w,A){w instanceof Vs?(g.i=w,dl(g.i,g.l)):(A||(w=ea(w,ks)),g.i=new Vs(w,g.l))}function gt(g,w,A){g.i.set(w,A)}function Zo(g){return gt(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function Ir(g,w){return g?w?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function ea(g,w,A){return typeof g=="string"?(g=encodeURI(g).replace(w,ti),A&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function ti(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var ul=/[#\/\?@]/g,Yf=/[#\?:]/g,pc=/[#\?]/g,ks=/[#\?@]/g,Jf=/#/g;function Vs(g,w){this.h=this.g=null,this.i=g||null,this.j=!!w}function ni(g){g.g||(g.g=new Map,g.h=0,g.i&&ll(g.i,function(w,A){g.add(decodeURIComponent(w.replace(/\+/g," ")),A)}))}n=Vs.prototype,n.add=function(g,w){ni(this),this.i=null,g=Ls(this,g);let A=this.g.get(g);return A||this.g.set(g,A=[]),A.push(w),this.h+=1,this};function Wf(g,w){ni(g),w=Ls(g,w),g.g.has(w)&&(g.i=null,g.h-=g.g.get(w).length,g.g.delete(w))}function gc(g,w){return ni(g),w=Ls(g,w),g.g.has(w)}n.forEach=function(g,w){ni(this),this.g.forEach(function(A,b){A.forEach(function(j){g.call(w,j,b,this)},this)},this)};function yc(g,w){ni(g);let A=[];if(typeof w=="string")gc(g,w)&&(A=A.concat(g.g.get(Ls(g,w))));else for(g=Array.from(g.g.values()),w=0;w<g.length;w++)A=A.concat(g[w]);return A}n.set=function(g,w){return ni(this),this.i=null,g=Ls(this,g),gc(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[w]),this.h+=1,this},n.get=function(g,w){return g?(g=yc(this,g),g.length>0?String(g[0]):w):w};function cl(g,w,A){Wf(g,w),A.length>0&&(g.i=null,g.g.set(Ls(g,w),x(A)),g.h+=A.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],w=Array.from(this.g.keys());for(let b=0;b<w.length;b++){var A=w[b];const j=Xr(A);A=yc(this,A);for(let X=0;X<A.length;X++){let pe=j;A[X]!==""&&(pe+="="+Xr(A[X])),g.push(pe)}}return this.i=g.join("&")};function Qf(g){const w=new Vs;return w.i=g.i,g.g&&(w.g=new Map(g.g),w.h=g.h),w}function Ls(g,w){return w=String(w),g.j&&(w=w.toLowerCase()),w}function dl(g,w){w&&!g.j&&(ni(g),g.i=null,g.g.forEach(function(A,b){const j=b.toLowerCase();b!=j&&(Wf(this,b),cl(this,j,A))},g)),g.j=w}function Wi(g,w){const A=new Ki;if(l.Image){const b=new Image;b.onload=_(Pi,A,"TestLoadImage: loaded",!0,w,b),b.onerror=_(Pi,A,"TestLoadImage: error",!1,w,b),b.onabort=_(Pi,A,"TestLoadImage: abort",!1,w,b),b.ontimeout=_(Pi,A,"TestLoadImage: timeout",!1,w,b),l.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=g}else w(!1)}function _c(g,w){const A=new Ki,b=new AbortController,j=setTimeout(()=>{b.abort(),Pi(A,"TestPingServer: timeout",!1,w)},1e4);fetch(g,{signal:b.signal}).then(X=>{clearTimeout(j),X.ok?Pi(A,"TestPingServer: ok",!0,w):Pi(A,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(j),Pi(A,"TestPingServer: error",!1,w)})}function Pi(g,w,A,b,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),b(A)}catch{}}function Os(){this.g=new rl}function wr(g){this.i=g.Sb||null,this.h=g.ab||!1}E(wr,At),wr.prototype.g=function(){return new ta(this.i,this.h)};function ta(g,w){Ct.call(this),this.H=g,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(ta,Ct),n=ta.prototype,n.open=function(g,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=w,this.readyState=1,Qi(this)},n.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const w={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(w.body=g),(this.H||l).fetch(new Request(this.D,w)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Us(this)),this.readyState=0},n.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Qi(this)),this.g&&(this.readyState=3,Qi(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;fl(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function fl(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}n.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var w=g.value?g.value:new Uint8Array(0);(w=this.B.decode(w,{stream:!g.done}))&&(this.response=this.responseText+=w)}g.done?Us(this):Qi(this),this.readyState==3&&fl(this)}},n.Oa=function(g){this.g&&(this.response=this.responseText=g,Us(this))},n.Na=function(g){this.g&&(this.response=g,Us(this))},n.ga=function(){this.g&&Us(this)};function Us(g){g.readyState=4,g.l=null,g.j=null,g.B=null,Qi(g)}n.setRequestHeader=function(g,w){this.A.append(g,w)},n.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],w=this.h.entries();for(var A=w.next();!A.done;)A=A.value,g.push(A[0]+": "+A[1]),A=w.next();return g.join(`\r
`)};function Qi(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(ta.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function Di(g){let w="";return je(g,function(A,b){w+=b,w+=":",w+=A,w+=`\r
`}),w}function na(g,w,A){e:{for(b in A){var b=!1;break e}b=!0}b||(A=Di(A),typeof g=="string"?A!=null&&Xr(A):gt(g,w,A))}function Tt(g){Ct.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(Tt,Ct);var Sr=/^https?$/i,vc=["POST","PUT"];n=Tt.prototype,n.Fa=function(g){this.H=g},n.ea=function(g,w,A,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);w=w?w.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():lc.g(),this.g.onreadystatechange=I(h(this.Ca,this));try{this.B=!0,this.g.open(w,String(g),!0),this.B=!1}catch(X){ia(this,X);return}if(g=A||"",A=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var j in b)A.set(j,b[j]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const X of b.keys())A.set(X,b.get(X));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(A.keys()).find(X=>X.toLowerCase()=="content-type"),j=l.FormData&&g instanceof l.FormData,!(Array.prototype.indexOf.call(vc,w,void 0)>=0)||b||j||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,pe]of A)this.g.setRequestHeader(X,pe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch(X){ia(this,X)}};function ia(g,w){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=w,g.o=5,Ec(g),Zr(g)}function Ec(g){g.A||(g.A=!0,Vt(g,"complete"),Vt(g,"error"))}n.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,Vt(this,"complete"),Vt(this,"abort"),Zr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zr(this,!0)),Tt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?ra(this):this.Xa())},n.Xa=function(){ra(this)};function ra(g){if(g.h&&typeof a<"u"){if(g.v&&Xi(g)==4)setTimeout(g.Ca.bind(g),0);else if(Vt(g,"readystatechange"),Xi(g)==4){g.h=!1;try{const X=g.ca();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var A;if(!(A=w)){var b;if(b=X===0){let pe=String(g.D).match(Kf)[1]||null;!pe&&l.self&&l.self.location&&(pe=l.self.location.protocol.slice(0,-1)),b=!Sr.test(pe?pe.toLowerCase():"")}A=b}if(A)Vt(g,"complete"),Vt(g,"success");else{g.o=6;try{var j=Xi(g)>2?g.g.statusText:""}catch{j=""}g.l=j+" ["+g.ca()+"]",Ec(g)}}finally{Zr(g)}}}}function Zr(g,w){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const A=g.g;g.g=null,w||Vt(g,"ready");try{A.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Xi(g){return g.g?g.g.readyState:0}n.ca=function(){try{return Xi(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(g){if(this.g){var w=this.g.responseText;return g&&w.indexOf(g)==0&&(w=w.substring(g.length)),oc(w)}};function Pn(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function es(g){const w={};g=(g.g&&Xi(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<g.length;b++){if(M(g[b]))continue;var A=Hf(g[b]);const j=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const X=w[j]||[];w[j]=X,X.push(A)}Ke(w,function(b){return b.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ar(g,w,A){return A&&A.internalChannelParams&&A.internalChannelParams[g]||w}function Fs(g){this.za=0,this.i=[],this.j=new Ki,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ar("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ar("baseRetryDelayMs",5e3,g),this.Za=Ar("retryDelaySeedMs",1e4,g),this.Ta=Ar("forwardChannelMaxRetries",2,g),this.va=Ar("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new uc(g&&g.concurrentRequestLimit),this.Ba=new Os,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Fs.prototype,n.ka=8,n.I=1,n.connect=function(g,w,A,b){on(0),this.W=g,this.H=w||{},A&&b!==void 0&&(this.H.OSID=A,this.H.OAID=b),this.F=this.X,this.J=rh(this,null,this.W),xr(this)};function Tc(g){if(hl(g),g.I==3){var w=g.V++,A=un(g.J);if(gt(A,"SID",g.M),gt(A,"RID",w),gt(A,"TYPE","terminate"),sa(g,A),w=new Yi(g,g.j,w),w.M=2,w.A=Zo(un(A)),A=!1,l.navigator&&l.navigator.sendBeacon)try{A=l.navigator.sendBeacon(w.A.toString(),"")}catch{}!A&&l.Image&&(new Image().src=w.A,A=!0),A||(w.g=sh(w.j,null),w.g.ea(w.A)),w.F=Date.now(),yr(w)}ih(g)}function qs(g){g.g&&(wc(g),g.g.cancel(),g.g=null)}function hl(g){qs(g),g.v&&(l.clearTimeout(g.v),g.v=null),pl(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&l.clearTimeout(g.m),g.m=null)}function xr(g){if(!cc(g.h)&&!g.m){g.m=!0;var w=g.Ea;de||P(),le||(de(),le=!0),N.add(w,g),g.D=0}}function ml(g,w){return Er(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=w.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=mr(h(g.Ea,g,w),nh(g,g.D)),g.D++,!0)}n.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const j=new Yi(this,this.j,g);let X=this.o;if(this.U&&(X?(X=F(X),_e(X,this.U)):X=this.U),this.u!==null||this.R||(j.J=X,X=null),this.S)e:{for(var w=0,A=0;A<this.i.length;A++){t:{var b=this.i[A];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(w+=b,w>4096){w=A;break e}if(w===4096||A===this.i.length-1){w=A+1;break e}}w=1e3}else w=1e3;w=Xf(this,j,w),A=un(this.J),gt(A,"RID",g),gt(A,"CVER",22),this.G&&gt(A,"X-HTTP-Session-Id",this.G),sa(this,A),X&&(this.R?w="headers="+Xr(Di(X))+"&"+w:this.u&&na(A,this.u,X)),dc(this.h,j),this.Ra&&gt(A,"TYPE","init"),this.S?(gt(A,"$req",w),gt(A,"SID","null"),j.U=!0,gr(j,A,null)):gr(j,A,w),this.I=2}}else this.I==3&&(g?Ic(this,g):this.i.length==0||cc(this.h)||Ic(this))};function Ic(g,w){var A;w?A=w.l:A=g.V++;const b=un(g.J);gt(b,"SID",g.M),gt(b,"RID",A),gt(b,"AID",g.K),sa(g,b),g.u&&g.o&&na(b,g.u,g.o),A=new Yi(g,g.j,A,g.D+1),g.u===null&&(A.J=g.o),w&&(g.i=w.G.concat(g.i)),w=Xf(g,A,1e3),A.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),dc(g.h,A),gr(A,b,w)}function sa(g,w){g.H&&je(g.H,function(A,b){gt(w,b,A)}),g.l&&je({},function(A,b){gt(w,b,A)})}function Xf(g,w,A){A=Math.min(g.i.length,A);const b=g.l?h(g.l.Ka,g.l,g):null;e:{var j=g.i;let ze=-1;for(;;){const Zt=["count="+A];ze==-1?A>0?(ze=j[0].g,Zt.push("ofs="+ze)):ze=0:Zt.push("ofs="+ze);let ft=!0;for(let Lt=0;Lt<A;Lt++){var X=j[Lt].g;const Mi=j[Lt].map;if(X-=ze,X<0)ze=Math.max(0,j[Lt].g-100),ft=!1;else try{X="req"+X+"_"||"";try{var pe=Mi instanceof Map?Mi:Object.entries(Mi);for(const[br,Zi]of pe){let er=Zi;c(Zi)&&(er=ei(Zi)),Zt.push(X+br+"="+encodeURIComponent(er))}}catch(br){throw Zt.push(X+"type="+encodeURIComponent("_badmap")),br}}catch{b&&b(Mi)}}if(ft){pe=Zt.join("&");break e}}pe=void 0}return g=g.i.splice(0,A),w.G=g,pe}function Zf(g){if(!g.g&&!g.v){g.Y=1;var w=g.Da;de||P(),le||(de(),le=!0),N.add(w,g),g.A=0}}function oa(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=mr(h(g.Da,g),nh(g,g.A)),g.A++,!0)}n.Da=function(){if(this.v=null,eh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=mr(h(this.Wa,this),g)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,on(10),qs(this),eh(this))};function wc(g){g.B!=null&&(l.clearTimeout(g.B),g.B=null)}function eh(g){g.g=new Yi(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var w=un(g.na);gt(w,"RID","rpc"),gt(w,"SID",g.M),gt(w,"AID",g.K),gt(w,"CI",g.F?"0":"1"),!g.F&&g.ia&&gt(w,"TO",g.ia),gt(w,"TYPE","xmlhttp"),sa(g,w),g.u&&g.o&&na(w,g.u,g.o),g.O&&(g.g.H=g.O);var A=g.g;g=g.ba,A.M=1,A.A=Zo(un(w)),A.u=null,A.R=!0,ol(A,g)}n.Va=function(){this.C!=null&&(this.C=null,qs(this),oa(this),on(19))};function pl(g){g.C!=null&&(l.clearTimeout(g.C),g.C=null)}function th(g,w){var A=null;if(g.g==w){pl(g),wc(g),g.g=null;var b=2}else if(Tr(g.h,w))A=w.G,fc(g.h,w),b=1;else return;if(g.I!=0){if(w.o)if(b==1){A=w.u?w.u.length:0,w=Date.now()-w.F;var j=g.D;b=sl(),Vt(b,new hr(b,A)),xr(g)}else Zf(g);else if(j=w.m,j==3||j==0&&w.X>0||!(b==1&&ml(g,w)||b==2&&oa(g)))switch(A&&A.length>0&&(w=g.h,w.i=w.i.concat(A)),j){case 1:Cr(g,5);break;case 4:Cr(g,10);break;case 3:Cr(g,6);break;default:Cr(g,2)}}}function nh(g,w){let A=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(A*=2),A*w}function Cr(g,w){if(g.j.info("Error code "+w),w==2){var A=h(g.bb,g),b=g.Ua;const j=!b;b=new hi(b||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||In(b,"https"),Zo(b),j?Wi(b.toString(),A):_c(b.toString(),A)}else on(2);g.I=0,g.l&&g.l.pa(w),ih(g),hl(g)}n.bb=function(g){g?(this.j.info("Successfully pinged google.com"),on(2)):(this.j.info("Failed to ping google.com"),on(1))};function ih(g){if(g.I=0,g.ja=[],g.l){const w=hc(g.h);(w.length!=0||g.i.length!=0)&&(k(g.ja,w),k(g.ja,g.i),g.h.i.length=0,x(g.i),g.i.length=0),g.l.oa()}}function rh(g,w,A){var b=A instanceof hi?un(A):new hi(A);if(b.g!="")w&&(b.g=w+"."+b.g),Ms(b,b.u);else{var j=l.location;b=j.protocol,w=w?w+"."+j.hostname:j.hostname,j=+j.port;const X=new hi(null);b&&In(X,b),w&&(X.g=w),j&&Ms(X,j),A&&(X.h=A),b=X}return A=g.G,w=g.wa,A&&w&&gt(b,A,w),gt(b,"VER",g.ka),sa(g,b),b}function sh(g,w,A){if(w&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return w=g.Aa&&!g.ma?new Tt(new wr({ab:A})):new Tt(g.ma),w.Fa(g.L),w}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function oh(){}n=oh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Bs(){}Bs.prototype.g=function(g,w){return new Kn(g,w)};function Kn(g,w){Ct.call(this),this.g=new Fs(w),this.l=g,this.h=w&&w.messageUrlParams||null,g=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(g?g["X-WebChannel-Content-Type"]=w.messageContentType:g={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.sa&&(g?g["X-WebChannel-Client-Profile"]=w.sa:g={"X-WebChannel-Client-Profile":w.sa}),this.g.U=g,(g=w&&w.Qb)&&!M(g)&&(this.g.u=g),this.A=w&&w.supportsCrossDomainXhr||!1,this.v=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!M(w)&&(this.g.G=w,g=this.h,g!==null&&w in g&&(g=this.h,w in g&&delete g[w])),this.j=new ts(this)}E(Kn,Ct),Kn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Kn.prototype.close=function(){Tc(this.g)},Kn.prototype.o=function(g){var w=this.g;if(typeof g=="string"){var A={};A.__data__=g,g=A}else this.v&&(A={},A.__data__=ei(g),g=A);w.i.push(new ln(w.Ya++,g)),w.I==3&&xr(w)},Kn.prototype.N=function(){this.g.l=null,delete this.j,Tc(this.g),delete this.g,Kn.Z.N.call(this)};function ah(g){Gt.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var w=g.__sm__;if(w){e:{for(const A in w){g=A;break e}g=void 0}(this.i=g)&&(g=this.i,w=w!==null&&g in w?w[g]:void 0),this.data=w}else this.data=g}E(ah,Gt);function lh(){Ri.call(this),this.status=1}E(lh,Ri);function ts(g){this.g=g}E(ts,oh),ts.prototype.ra=function(){Vt(this.g,"a")},ts.prototype.qa=function(g){Vt(this.g,new ah(g))},ts.prototype.pa=function(g){Vt(this.g,new lh)},ts.prototype.oa=function(){Vt(this.g,"b")},Bs.prototype.createWebChannel=Bs.prototype.g,Kn.prototype.send=Kn.prototype.o,Kn.prototype.open=Kn.prototype.m,Kn.prototype.close=Kn.prototype.close,uN=function(){return new Bs},lN=function(){return sl()},aN=Xt,iv={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Qo.NO_ERROR=0,Qo.TIMEOUT=8,Qo.HTTP_ERROR=6,Rm=Qo,ac.COMPLETE="complete",oN=ac,Rn.EventType=Nn,Nn.OPEN="a",Nn.CLOSE="b",Nn.ERROR="c",Nn.MESSAGE="d",Ct.prototype.listen=Ct.prototype.J,Id=Rn,Tt.prototype.listenOnce=Tt.prototype.K,Tt.prototype.getLastError=Tt.prototype.Ha,Tt.prototype.getLastErrorCode=Tt.prototype.ya,Tt.prototype.getStatus=Tt.prototype.ca,Tt.prototype.getResponseJson=Tt.prototype.La,Tt.prototype.getResponseText=Tt.prototype.la,Tt.prototype.send=Tt.prototype.ea,Tt.prototype.setWithCredentials=Tt.prototype.Fa,sN=Tt}).apply(typeof mm<"u"?mm:typeof self<"u"?self:typeof window<"u"?window:{});const Tx="@firebase/firestore",Ix="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}An.UNAUTHENTICATED=new An(null),An.GOOGLE_CREDENTIALS=new An("google-credentials-uid"),An.FIRST_PARTY=new An("first-party-uid"),An.MOCK_USER=new An("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xu="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do=new Ap("@firebase/firestore");function Zl(){return Do.logLevel}function tG(n){Do.setLogLevel(n)}function fe(n,...e){if(Do.logLevel<=Ze.DEBUG){const t=e.map(S0);Do.debug(`Firestore (${Xu}): ${n}`,...t)}}function nn(n,...e){if(Do.logLevel<=Ze.ERROR){const t=e.map(S0);Do.error(`Firestore (${Xu}): ${n}`,...t)}}function Wr(n,...e){if(Do.logLevel<=Ze.WARN){const t=e.map(S0);Do.warn(`Firestore (${Xu}): ${n}`,...t)}}function S0(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,cN(n,i,t)}function cN(n,e,t){let i=`FIRESTORE (${Xu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw nn(i),new Error(i)}function Ce(n,e,t,i){let s="Unexpected state";typeof t=="string"?s=t:i=t,n||cN(e,s,i)}function nG(n,e){n||Se(57014,e)}function Ee(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends Qn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class iG{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(An.UNAUTHENTICATED)))}shutdown(){}}class rG{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class sG{constructor(e){this.t=e,this.currentUser=An.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ce(this.o===void 0,42304);let i=this.i;const s=f=>this.i!==i?(i=this.i,t(f)):Promise.resolve();let a=new Un;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Un,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await s(this.currentUser)}))},c=f=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((f=>c(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?c(f):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Un)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ce(typeof i.accessToken=="string",31837,{l:i}),new dN(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ce(e===null||typeof e=="string",2055,{h:e}),new An(e)}}class oG{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=An.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class aG{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new oG(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(An.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class wx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lG{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ft(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ce(this.o===void 0,3512);const i=a=>{a.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,fe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const s=a=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new wx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ce(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new wx(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uG(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=uG(40);for(let a=0;a<s.length;++a)i.length<20&&s[a]<t&&(i+=e.charAt(s[a]%62))}return i}}function Be(n,e){return n<e?-1:n>e?1:0}function rv(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const s=n.charAt(i),a=e.charAt(i);if(s!==a)return w_(s)===w_(a)?Be(s,a):w_(s)?1:-1}return Be(n.length,e.length)}const cG=55296,dG=57343;function w_(n){const e=n.charCodeAt(0);return e>=cG&&e<=dG}function Au(n,e,t){return n.length===e.length&&n.every(((i,s)=>t(i,e[s])))}function fN(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx="__name__";class Mr{constructor(e,t,i){t===void 0?t=0:t>e.length&&Se(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Se(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Mr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Mr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let s=0;s<i;s++){const a=Mr.compareSegments(e.get(s),t.get(s));if(a!==0)return a}return Be(e.length,t.length)}static compareSegments(e,t){const i=Mr.isNumericId(e),s=Mr.isNumericId(t);return i&&!s?-1:!i&&s?1:i&&s?Mr.extractNumericId(e).compare(Mr.extractNumericId(t)):rv(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ao.fromString(e.substring(4,e.length-2))}}class et extends Mr{construct(e,t,i){return new et(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ae(Q.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((s=>s.length>0)))}return new et(t)}static emptyPath(){return new et([])}}const fG=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qt extends Mr{construct(e,t,i){return new qt(e,t,i)}static isValidIdentifier(e){return fG.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Sx}static keyField(){return new qt([Sx])}static fromServerFormat(e){const t=[];let i="",s=0;const a=()=>{if(i.length===0)throw new ae(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let l=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new ae(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new ae(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=f,s+=2}else c==="`"?(l=!l,s++):c!=="."||l?(i+=c,s++):(a(),s++)}if(a(),l)throw new ae(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qt(t)}static emptyPath(){return new qt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(et.fromString(e))}static fromName(e){return new ye(et.fromString(e).popFirst(5))}static empty(){return new ye(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return et.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new et(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(n,e,t){if(!t)throw new ae(Q.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function hN(n,e,t,i){if(e===!0&&i===!0)throw new ae(Q.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Ax(n){if(!ye.isDocumentKey(n))throw new ae(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function xx(n){if(ye.isDocumentKey(n))throw new ae(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function mN(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Op(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Se(12329,{type:typeof n})}function ct(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ae(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Op(n);throw new ae(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function pN(n,e){if(e<=0)throw new ae(Q.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(n,e){const t={typeString:n};return e&&(t.value=e),t}function xf(n,e){if(!mN(n))throw new ae(Q.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const s=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const l=n[i];if(s&&typeof l!==s){t=`JSON field '${i}' must be a ${s}.`;break}if(a!==void 0&&l!==a.value){t=`Expected '${i}' field to equal '${a.value}'`;break}}if(t)throw new ae(Q.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx=-62135596800,bx=1e6;class mt{static now(){return mt.fromMillis(Date.now())}static fromDate(e){return mt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*bx);return new mt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ae(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ae(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Cx)throw new ae(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/bx}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:mt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(xf(e,mt._jsonSchema))return new mt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Cx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}mt._jsonSchemaVersion="firestore/timestamp/1.0",mt._jsonSchema={type:gn("string",mt._jsonSchemaVersion),seconds:gn("number"),nanoseconds:gn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new mt(0,0))}static max(){return new Ne(new mt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xu=-1;class ip{constructor(e,t,i,s){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=s}}function sv(n){return n.fields.find((e=>e.kind===2))}function Aa(n){return n.fields.filter((e=>e.kind!==2))}ip.UNKNOWN_ID=-1;class Nm{constructor(e,t){this.fieldPath=e,this.kind=t}}class nf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new nf(0,Ci.min())}}function gN(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=Ne.fromTimestamp(i===1e9?new mt(t+1,0):new mt(t,i));return new Ci(s,ye.empty(),e)}function yN(n){return new Ci(n.readTime,n.key,xu)}class Ci{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ci(Ne.min(),ye.empty(),xu)}static max(){return new Ci(Ne.max(),ye.empty(),xu)}}function C0(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(n.documentKey,e.documentKey),t!==0?t:Be(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zo(n){if(n.code!==Q.FAILED_PRECONDITION||n.message!==_N)throw n;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new $(((i,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof $?t:$.resolve(t)}catch(t){return $.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):$.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):$.reject(t)}static resolve(e){return new $(((t,i)=>{t(e)}))}static reject(e){return new $(((t,i)=>{i(e)}))}static waitFor(e){return new $(((t,i)=>{let s=0,a=0,l=!1;e.forEach((c=>{++s,c.next((()=>{++a,l&&a===s&&t()}),(f=>i(f)))})),l=!0,a===s&&t()}))}static or(e){let t=$.resolve(!1);for(const i of e)t=t.next((s=>s?$.resolve(s):i()));return t}static forEach(e,t){const i=[];return e.forEach(((s,a)=>{i.push(t.call(this,s,a))})),this.waitFor(i)}static mapArray(e,t){return new $(((i,s)=>{const a=e.length,l=new Array(a);let c=0;for(let f=0;f<a;f++){const h=f;t(e[h]).next((_=>{l[h]=_,++c,c===a&&i(l)}),(_=>s(_)))}}))}static doWhile(e,t){return new $(((i,s)=>{const a=()=>{e()===!0?t().next((()=>{a()}),s):i()};a()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ii="SimpleDb";class Up{static open(e,t,i,s){try{return new Up(t,e.transaction(s,i))}catch(a){throw new Vd(t,a)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Un,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Vd(e,t.error)):this.S.resolve()},this.transaction.onerror=i=>{const s=b0(i.target.error);this.S.reject(new Vd(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(fe(Ii,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new mG(t)}}class Hr{static delete(e){return fe(Ii,"Removing database:",e),Ca(Jv().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!Jd())return!1;if(Hr.F())return!0;const e=Ht(),t=Hr.M(e),i=0<t&&t<10,s=EN(e),a=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||a)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,t,i){this.name=e,this.version=t,this.N=i,this.B=null,Hr.M(Ht())===12.2&&nn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(fe(Ii,"Opening database:",this.name),this.db=await new Promise(((t,i)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=a=>{const l=a.target.result;t(l)},s.onblocked=()=>{i(new Vd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=a=>{const l=a.target.error;l.name==="VersionError"?i(new ae(Q.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):l.name==="InvalidStateError"?i(new ae(Q.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l)):i(new Vd(e,l))},s.onupgradeneeded=a=>{fe(Ii,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const l=a.target.result;this.N.k(l,s.transaction,a.oldVersion,this.version).next((()=>{fe(Ii,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,i,s){const a=t==="readonly";let l=0;for(;;){++l;try{this.db=await this.L(e);const c=Up.open(this.db,e,a?"readonly":"readwrite",i),f=s(c).next((h=>(c.C(),h))).catch((h=>(c.abort(h),$.reject(h)))).toPromise();return f.catch((()=>{})),await c.D,f}catch(c){const f=c,h=f.name!=="FirebaseError"&&l<3;if(fe(Ii,"Transaction failed with error:",f.message,"Retrying:",h),this.close(),!h)return Promise.reject(f)}}}close(){this.db&&this.db.close(),this.db=void 0}}function EN(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class hG{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Ca(this.U.delete())}}class Vd extends ae{constructor(e,t){super(Q.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ho(n){return n.name==="IndexedDbTransactionError"}class mG{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?(fe(Ii,"PUT",this.store.name,e,t),i=this.store.put(t,e)):(fe(Ii,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Ca(i)}add(e){return fe(Ii,"ADD",this.store.name,e,e),Ca(this.store.add(e))}get(e){return Ca(this.store.get(e)).next((t=>(t===void 0&&(t=null),fe(Ii,"GET",this.store.name,e,t),t)))}delete(e){return fe(Ii,"DELETE",this.store.name,e),Ca(this.store.delete(e))}count(){return fe(Ii,"COUNT",this.store.name),Ca(this.store.count())}J(e,t){const i=this.options(e,t),s=i.index?this.store.index(i.index):this.store;if(typeof s.getAll=="function"){const a=s.getAll(i.range);return new $(((l,c)=>{a.onerror=f=>{c(f.target.error)},a.onsuccess=f=>{l(f.target.result)}}))}{const a=this.cursor(i),l=[];return this.H(a,((c,f)=>{l.push(f)})).next((()=>l))}}Y(e,t){const i=this.store.getAll(e,t===null?void 0:t);return new $(((s,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{s(l.target.result)}}))}Z(e,t){fe(Ii,"DELETE ALL",this.store.name);const i=this.options(e,t);i.X=!1;const s=this.cursor(i);return this.H(s,((a,l,c)=>c.delete()))}ee(e,t){let i;t?i=e:(i={},t=e);const s=this.cursor(i);return this.H(s,t)}te(e){const t=this.cursor({});return new $(((i,s)=>{t.onerror=a=>{const l=b0(a.target.error);s(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next((c=>{c?l.continue():i()})):i()}}))}H(e,t){const i=[];return new $(((s,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const c=l.target.result;if(!c)return void s();const f=new hG(c),h=t(c.primaryKey,c.value,f);if(h instanceof $){const _=h.catch((E=>(f.done(),$.reject(E))));i.push(_)}f.isDone?s():f.G===null?c.continue():c.continue(f.G)}})).next((()=>$.waitFor(i)))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ca(n){return new $(((e,t)=>{n.onsuccess=i=>{const s=i.target.result;e(s)},n.onerror=i=>{const s=b0(i.target.error);t(s)}}))}let Rx=!1;function b0(n){const e=Hr.M(Ht());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new ae("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Rx||(Rx=!0,setTimeout((()=>{throw i}),0)),i}}return n}const Ld="IndexBackfiller";class pG{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){fe(Ld,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();fe(Ld,`Documents written: ${t}`)}catch(t){Ho(t)?fe(Ld,"Ignoring IndexedDB error during index backfill: ",t):await zo(t)}await this.re(6e4)}))}}class gG{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const i=new Set;let s=t,a=!0;return $.doWhile((()=>a===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((l=>{if(l!==null&&!i.has(l))return fe(Ld,`Processing collection: ${l}`),this.oe(e,l,s).next((c=>{s-=c,i.add(l)}));a=!1})))).next((()=>t-s))}oe(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((s=>this.localStore.localDocuments.getNextDocuments(e,t,s,i).next((a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next((()=>this._e(s,a))).next((c=>(fe(Ld,`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,t,c)))).next((()=>l.size))}))))}_e(e,t){let i=e;return t.changes.forEach(((s,a)=>{const l=yN(a);C0(l,i)>0&&(i=l)})),new Ci(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ui.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo=-1;function Cf(n){return n==null}function rf(n){return n===0&&1/n==-1/0}function TN(n){return typeof n=="number"&&Number.isInteger(n)&&!rf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rp="";function $n(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Nx(e)),e=yG(n.get(t),e);return Nx(e)}function yG(n,e){let t=e;const i=n.length;for(let s=0;s<i;s++){const a=n.charAt(s);switch(a){case"\0":t+="";break;case rp:t+="";break;default:t+=a}}return t}function Nx(n){return n+rp+""}function Gr(n){const e=n.length;if(Ce(e>=2,64408,{path:n}),e===2)return Ce(n.charAt(0)===rp&&n.charAt(1)==="",56145,{path:n}),et.emptyPath();const t=e-2,i=[];let s="";for(let a=0;a<e;){const l=n.indexOf(rp,a);switch((l<0||l>t)&&Se(50515,{path:n}),n.charAt(l+1)){case"":const c=n.substring(a,l);let f;s.length===0?f=c:(s+=c,f=s,s=""),i.push(f);break;case"":s+=n.substring(a,l),s+="\0";break;case"":s+=n.substring(a,l+1);break;default:Se(61167,{path:n})}a=l+2}return new et(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xa="remoteDocuments",bf="owner",Kl="owner",sf="mutationQueues",_G="userId",rr="mutations",Px="batchId",Ma="userMutationsIndex",Dx=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(n,e){return[n,$n(e)]}function IN(n,e,t){return[n,$n(e),t]}const vG={},Cu="documentMutations",sp="remoteDocumentsV14",EG=["prefixPath","collectionGroup","readTime","documentId"],Dm="documentKeyIndex",TG=["prefixPath","collectionGroup","documentId"],wN="collectionGroupIndex",IG=["collectionGroup","readTime","prefixPath","documentId"],of="remoteDocumentGlobal",ov="remoteDocumentGlobalKey",bu="targets",SN="queryTargetsIndex",wG=["canonicalId","targetId"],Ru="targetDocuments",SG=["targetId","path"],R0="documentTargetsIndex",AG=["path","targetId"],op="targetGlobalKey",Ua="targetGlobal",af="collectionParents",xG=["collectionId","parent"],Nu="clientMetadata",CG="clientId",Fp="bundles",bG="bundleId",qp="namedQueries",RG="name",N0="indexConfiguration",NG="indexId",av="collectionGroupIndex",PG="collectionGroup",Od="indexState",DG=["indexId","uid"],AN="sequenceNumberIndex",MG=["uid","sequenceNumber"],Ud="indexEntries",kG=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],xN="documentKeyIndex",VG=["indexId","uid","orderedDocumentKey"],Bp="documentOverlays",LG=["userId","collectionPath","documentId"],lv="collectionPathOverlayIndex",OG=["userId","collectionPath","largestBatchId"],CN="collectionGroupOverlayIndex",UG=["userId","collectionGroup","largestBatchId"],P0="globals",FG="name",bN=[sf,rr,Cu,xa,bu,bf,Ua,Ru,Nu,of,af,Fp,qp],qG=[...bN,Bp],RN=[sf,rr,Cu,sp,bu,bf,Ua,Ru,Nu,of,af,Fp,qp,Bp],NN=RN,D0=[...NN,N0,Od,Ud],BG=D0,PN=[...D0,P0],GG=PN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv extends vN{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function En(n,e){const t=Ee(n);return Hr.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function $o(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function DN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,t){this.comparator=e,this.root=t||Ln.EMPTY}insert(e,t){return new Rt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ln.BLACK,null,null))}remove(e){return new Rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ln.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return t+i.left.size;s<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pm(this.root,e,this.comparator,!1)}getReverseIterator(){return new pm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pm(this.root,e,this.comparator,!0)}}class pm{constructor(e,t,i,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ln{constructor(e,t,i,s,a){this.key=e,this.value=t,this.color=i??Ln.RED,this.left=s??Ln.EMPTY,this.right=a??Ln.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,s,a){return new Ln(e??this.key,t??this.value,i??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this;const a=i(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,i),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ln.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Ln.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ln.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ln.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Se(27949);return e+(this.isRed()?0:1)}}Ln.EMPTY=null,Ln.RED=!0,Ln.BLACK=!1;Ln.EMPTY=new class{constructor(){this.size=0}get key(){throw Se(57766)}get value(){throw Se(16141)}get color(){throw Se(16727)}get left(){throw Se(29726)}get right(){throw Se(36894)}copy(e,t,i,s,a){return this}insert(e,t,i){return new Ln(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.comparator=e,this.data=new Rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new kx(this.data.getIterator())}getIteratorFrom(e){return new kx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Et)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=i.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Et(this.comparator);return t.data=e,t}}class kx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Yl(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e){this.fields=e,e.sort(qt.comparator)}static empty(){return new ci([])}unionWith(e){let t=new Et(qt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new ci(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Au(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zG(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new MN("Invalid base64 string: "+a):a}})(e);return new Yt(t)}static fromUint8Array(e){const t=(function(s){let a="";for(let l=0;l<s.length;++l)a+=String.fromCharCode(s[l]);return a})(e);return new Yt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yt.EMPTY_BYTE_STRING=new Yt("");const HG=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ws(n){if(Ce(!!n,39018),typeof n=="string"){let e=0;const t=HG.exec(n);if(Ce(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ut(n.seconds),nanos:Ut(n.nanos)}}function Ut(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ss(n){return typeof n=="string"?Yt.fromBase64String(n):Yt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN="server_timestamp",VN="__type__",LN="__previous_value__",ON="__local_write_time__";function Gp(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[VN])==null?void 0:i.stringValue)===kN}function zp(n){const e=n.mapValue.fields[LN];return Gp(e)?zp(e):e}function lf(n){const e=ws(n.mapValue.fields[ON].timestampValue);return new mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $G{constructor(e,t,i,s,a,l,c,f,h,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=s,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=f,this.useFetchStreams=h,this.isUsingEmulator=_}}const cv="(default)";class Mo{constructor(e,t){this.projectId=e,this.database=t||cv}static empty(){return new Mo("","")}get isDefaultDatabase(){return this.database===cv}isEqual(e){return e instanceof Mo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0="__type__",UN="__max__",Eo={mapValue:{fields:{__type__:{stringValue:UN}}}},k0="__vector__",Pu="value",Mm={nullValue:"NULL_VALUE"};function ko(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Gp(n)?4:FN(n)?9007199254740991:Hp(n)?10:11:Se(28295,{value:n})}function Qr(n,e){if(n===e)return!0;const t=ko(n);if(t!==ko(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return lf(n).isEqual(lf(e));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const l=ws(s.timestampValue),c=ws(a.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,a){return Ss(s.bytesValue).isEqual(Ss(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,a){return Ut(s.geoPointValue.latitude)===Ut(a.geoPointValue.latitude)&&Ut(s.geoPointValue.longitude)===Ut(a.geoPointValue.longitude)})(n,e);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return Ut(s.integerValue)===Ut(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const l=Ut(s.doubleValue),c=Ut(a.doubleValue);return l===c?rf(l)===rf(c):isNaN(l)&&isNaN(c)}return!1})(n,e);case 9:return Au(n.arrayValue.values||[],e.arrayValue.values||[],Qr);case 10:case 11:return(function(s,a){const l=s.mapValue.fields||{},c=a.mapValue.fields||{};if(Mx(l)!==Mx(c))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(c[f]===void 0||!Qr(l[f],c[f])))return!1;return!0})(n,e);default:return Se(52216,{left:n})}}function uf(n,e){return(n.values||[]).find((t=>Qr(t,e)))!==void 0}function Vo(n,e){if(n===e)return 0;const t=ko(n),i=ko(e);if(t!==i)return Be(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Be(n.booleanValue,e.booleanValue);case 2:return(function(a,l){const c=Ut(a.integerValue||a.doubleValue),f=Ut(l.integerValue||l.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1})(n,e);case 3:return Vx(n.timestampValue,e.timestampValue);case 4:return Vx(lf(n),lf(e));case 5:return rv(n.stringValue,e.stringValue);case 6:return(function(a,l){const c=Ss(a),f=Ss(l);return c.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(a,l){const c=a.split("/"),f=l.split("/");for(let h=0;h<c.length&&h<f.length;h++){const _=Be(c[h],f[h]);if(_!==0)return _}return Be(c.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,l){const c=Be(Ut(a.latitude),Ut(l.latitude));return c!==0?c:Be(Ut(a.longitude),Ut(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Lx(n.arrayValue,e.arrayValue);case 10:return(function(a,l){var I,x,k,V;const c=a.fields||{},f=l.fields||{},h=(I=c[Pu])==null?void 0:I.arrayValue,_=(x=f[Pu])==null?void 0:x.arrayValue,E=Be(((k=h==null?void 0:h.values)==null?void 0:k.length)||0,((V=_==null?void 0:_.values)==null?void 0:V.length)||0);return E!==0?E:Lx(h,_)})(n.mapValue,e.mapValue);case 11:return(function(a,l){if(a===Eo.mapValue&&l===Eo.mapValue)return 0;if(a===Eo.mapValue)return 1;if(l===Eo.mapValue)return-1;const c=a.fields||{},f=Object.keys(c),h=l.fields||{},_=Object.keys(h);f.sort(),_.sort();for(let E=0;E<f.length&&E<_.length;++E){const I=rv(f[E],_[E]);if(I!==0)return I;const x=Vo(c[f[E]],h[_[E]]);if(x!==0)return x}return Be(f.length,_.length)})(n.mapValue,e.mapValue);default:throw Se(23264,{he:t})}}function Vx(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Be(n,e);const t=ws(n),i=ws(e),s=Be(t.seconds,i.seconds);return s!==0?s:Be(t.nanos,i.nanos)}function Lx(n,e){const t=n.values||[],i=e.values||[];for(let s=0;s<t.length&&s<i.length;++s){const a=Vo(t[s],i[s]);if(a)return a}return Be(t.length,i.length)}function Du(n){return dv(n)}function dv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=ws(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ss(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ye.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",s=!0;for(const a of t.values||[])s?s=!1:i+=",",i+=dv(a);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const l of i)a?a=!1:s+=",",s+=`${l}:${dv(t.fields[l])}`;return s+"}"})(n.mapValue):Se(61005,{value:n})}function km(n){switch(ko(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=zp(n);return e?16+km(e):16;case 5:return 2*n.stringValue.length;case 6:return Ss(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((s,a)=>s+km(a)),0)})(n.arrayValue);case 10:case 11:return(function(i){let s=0;return $o(i.fields,((a,l)=>{s+=a.length+km(l)})),s})(n.mapValue);default:throw Se(13486,{value:n})}}function Ga(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function fv(n){return!!n&&"integerValue"in n}function cf(n){return!!n&&"arrayValue"in n}function Ox(n){return!!n&&"nullValue"in n}function Ux(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Vm(n){return!!n&&"mapValue"in n}function Hp(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[M0])==null?void 0:i.stringValue)===k0}function Fd(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return $o(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Fd(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Fd(n.arrayValue.values[t]);return e}return{...n}}function FN(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===UN}const qN={mapValue:{fields:{[M0]:{stringValue:k0},[Pu]:{arrayValue:{}}}}};function jG(n){return"nullValue"in n?Mm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ga(Mo.empty(),ye.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Hp(n)?qN:{mapValue:{}}:Se(35942,{value:n})}function KG(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ga(Mo.empty(),ye.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?qN:"mapValue"in n?Hp(n)?{mapValue:{}}:Eo:Se(61959,{value:n})}function Fx(n,e){const t=Vo(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function qx(n,e){const t=Vo(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.value=e}static empty(){return new On({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Vm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fd(t)}setAll(e){let t=qt.emptyPath(),i={},s=[];e.forEach(((l,c)=>{if(!t.isImmediateParentOf(c)){const f=this.getFieldsMap(t);this.applyChanges(f,i,s),i={},s=[],t=c.popLast()}l?i[c.lastSegment()]=Fd(l):s.push(c.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,i,s)}delete(e){const t=this.field(e.popLast());Vm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Qr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=t.mapValue.fields[e.get(i)];Vm(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,i){$o(t,((s,a)=>e[s]=a));for(const s of i)delete e[s]}clone(){return new On(Fd(this.value))}}function BN(n){const e=[];return $o(n.fields,((t,i)=>{const s=new qt([t]);if(Vm(i)){const a=BN(i.mapValue).fields;if(a.length===0)e.push(s);else for(const l of a)e.push(s.child(l))}else e.push(s)})),new ci(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,t,i,s,a,l,c){this.key=e,this.documentType=t,this.version=i,this.readTime=s,this.createTime=a,this.data=l,this.documentState=c}static newInvalidDocument(e){return new Mt(e,0,Ne.min(),Ne.min(),Ne.min(),On.empty(),0)}static newFoundDocument(e,t,i,s){return new Mt(e,1,t,Ne.min(),i,s,0)}static newNoDocument(e,t){return new Mt(e,2,t,Ne.min(),Ne.min(),On.empty(),0)}static newUnknownDocument(e,t){return new Mt(e,3,t,Ne.min(),Ne.min(),On.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=On.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=On.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e,t){this.position=e,this.inclusive=t}}function Bx(n,e,t){let i=0;for(let s=0;s<n.position.length;s++){const a=e[s],l=n.position[s];if(a.field.isKeyField()?i=ye.comparator(ye.fromName(l.referenceValue),t.key):i=Vo(l,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function Gx(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Qr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,t="asc"){this.field=e,this.dir=t}}function YG(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{}class it extends GN{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new JG(e,t,i):t==="array-contains"?new XG(e,i):t==="in"?new YN(e,i):t==="not-in"?new ZG(e,i):t==="array-contains-any"?new ez(e,i):new it(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new WG(e,i):new QG(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Vo(t,this.value)):t!==null&&ko(this.value)===ko(t)&&this.matchesComparison(Vo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vt extends GN{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new vt(e,t)}matches(e){return Mu(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Mu(n){return n.op==="and"}function hv(n){return n.op==="or"}function V0(n){return zN(n)&&Mu(n)}function zN(n){for(const e of n.filters)if(e instanceof vt)return!1;return!0}function mv(n){if(n instanceof it)return n.field.canonicalString()+n.op.toString()+Du(n.value);if(V0(n))return n.filters.map((e=>mv(e))).join(",");{const e=n.filters.map((t=>mv(t))).join(",");return`${n.op}(${e})`}}function HN(n,e){return n instanceof it?(function(i,s){return s instanceof it&&i.op===s.op&&i.field.isEqual(s.field)&&Qr(i.value,s.value)})(n,e):n instanceof vt?(function(i,s){return s instanceof vt&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce(((a,l,c)=>a&&HN(l,s.filters[c])),!0):!1})(n,e):void Se(19439)}function $N(n,e){const t=n.filters.concat(e);return vt.create(t,n.op)}function jN(n){return n instanceof it?(function(t){return`${t.field.canonicalString()} ${t.op} ${Du(t.value)}`})(n):n instanceof vt?(function(t){return t.op.toString()+" {"+t.getFilters().map(jN).join(" ,")+"}"})(n):"Filter"}class JG extends it{constructor(e,t,i){super(e,t,i),this.key=ye.fromName(i.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class WG extends it{constructor(e,t){super(e,"in",t),this.keys=KN("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class QG extends it{constructor(e,t){super(e,"not-in",t),this.keys=KN("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function KN(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>ye.fromName(i.referenceValue)))}class XG extends it{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return cf(t)&&uf(t.arrayValue,this.value)}}class YN extends it{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&uf(this.value.arrayValue,t)}}class ZG extends it{constructor(e,t){super(e,"not-in",t)}matches(e){if(uf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!uf(this.value.arrayValue,t)}}class ez extends it{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!cf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>uf(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tz{constructor(e,t=null,i=[],s=[],a=null,l=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=s,this.limit=a,this.startAt=l,this.endAt=c,this.Te=null}}function pv(n,e=null,t=[],i=[],s=null,a=null,l=null){return new tz(n,e,t,i,s,a,l)}function za(n){const e=Ee(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>mv(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),Cf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Du(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Du(i))).join(",")),e.Te=t}return e.Te}function Rf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!YG(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!HN(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Gx(n.startAt,e.startAt)&&Gx(n.endAt,e.endAt)}function ap(n){return ye.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function lp(n,e){return n.filters.filter((t=>t instanceof it&&t.field.isEqual(e)))}function zx(n,e,t){let i=Mm,s=!0;for(const a of lp(n,e)){let l=Mm,c=!0;switch(a.op){case"<":case"<=":l=jG(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,c=!1;break;case"!=":case"not-in":l=Mm}Fx({value:i,inclusive:s},{value:l,inclusive:c})<0&&(i=l,s=c)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];Fx({value:i,inclusive:s},{value:l,inclusive:t.inclusive})<0&&(i=l,s=t.inclusive);break}}return{value:i,inclusive:s}}function Hx(n,e,t){let i=Eo,s=!0;for(const a of lp(n,e)){let l=Eo,c=!0;switch(a.op){case">=":case">":l=KG(a.value),c=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,c=!1;break;case"!=":case"not-in":l=Eo}qx({value:i,inclusive:s},{value:l,inclusive:c})>0&&(i=l,s=c)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];qx({value:i,inclusive:s},{value:l,inclusive:t.inclusive})>0&&(i=l,s=t.inclusive);break}}return{value:i,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e,t=null,i=[],s=[],a=null,l="F",c=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=s,this.limit=a,this.limitType=l,this.startAt=c,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function JN(n,e,t,i,s,a,l,c){return new Rs(n,e,t,i,s,a,l,c)}function Zu(n){return new Rs(n)}function $x(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function L0(n){return n.collectionGroup!==null}function yu(n){const e=Ee(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new Et(qt.comparator);return l.filters.forEach((f=>{f.getFlattenedFilters().forEach((h=>{h.isInequality()&&(c=c.add(h.field))}))})),c})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new df(a,i))})),t.has(qt.keyField().canonicalString())||e.Ie.push(new df(qt.keyField(),i))}return e.Ie}function Xn(n){const e=Ee(n);return e.Ee||(e.Ee=nz(e,yu(n))),e.Ee}function nz(n,e){if(n.limitType==="F")return pv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new df(s.field,a)}));const t=n.endAt?new Lo(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Lo(n.startAt.position,n.startAt.inclusive):null;return pv(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function gv(n,e){const t=n.filters.concat([e]);return new Rs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function up(n,e,t){return new Rs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Nf(n,e){return Rf(Xn(n),Xn(e))&&n.limitType===e.limitType}function WN(n){return`${za(Xn(n))}|lt:${n.limitType}`}function eu(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((s=>jN(s))).join(", ")}]`),Cf(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((s=>Du(s))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((s=>Du(s))).join(",")),`Target(${i})`})(Xn(n))}; limitType=${n.limitType})`}function Pf(n,e){return e.isFoundDocument()&&(function(i,s){const a=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):ye.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(n,e)&&(function(i,s){for(const a of yu(i))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(i,s){for(const a of i.filters)if(!a.matches(s))return!1;return!0})(n,e)&&(function(i,s){return!(i.startAt&&!(function(l,c,f){const h=Bx(l,c,f);return l.inclusive?h<=0:h<0})(i.startAt,yu(i),s)||i.endAt&&!(function(l,c,f){const h=Bx(l,c,f);return l.inclusive?h>=0:h>0})(i.endAt,yu(i),s))})(n,e)}function QN(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function XN(n){return(e,t)=>{let i=!1;for(const s of yu(n)){const a=iz(s,e,t);if(a!==0)return a;i=i||s.field.isKeyField()}return 0}}function iz(n,e,t){const i=n.field.isKeyField()?ye.comparator(e.key,t.key):(function(a,l,c){const f=l.data.field(a),h=c.data.field(a);return f!==null&&h!==null?Vo(f,h):Se(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Se(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[s,a]of i)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[t]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){$o(this.inner,((t,i)=>{for(const[s,a]of i)e(s,a)}))}isEmpty(){return DN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rz=new Rt(ye.comparator);function di(){return rz}const ZN=new Rt(ye.comparator);function wd(...n){let e=ZN;for(const t of n)e=e.insert(t.key,t);return e}function e1(n){let e=ZN;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function zr(){return qd()}function t1(){return qd()}function qd(){return new Ns((n=>n.toString()),((n,e)=>n.isEqual(e)))}const sz=new Rt(ye.comparator),oz=new Et(ye.comparator);function $e(...n){let e=oz;for(const t of n)e=e.add(t);return e}const az=new Et(Be);function O0(){return az}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rf(e)?"-0":e}}function n1(n){return{integerValue:""+n}}function i1(n,e){return TN(e)?n1(e):U0(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(){this._=void 0}}function lz(n,e,t){return n instanceof ku?(function(s,a){const l={fields:{[VN]:{stringValue:kN},[ON]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Gp(a)&&(a=zp(a)),a&&(l.fields[LN]=a),{mapValue:l}})(t,e):n instanceof Ha?s1(n,e):n instanceof $a?o1(n,e):(function(s,a){const l=r1(s,a),c=jx(l)+jx(s.Ae);return fv(l)&&fv(s.Ae)?n1(c):U0(s.serializer,c)})(n,e)}function uz(n,e,t){return n instanceof Ha?s1(n,e):n instanceof $a?o1(n,e):t}function r1(n,e){return n instanceof Vu?(function(i){return fv(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class ku extends $p{}class Ha extends $p{constructor(e){super(),this.elements=e}}function s1(n,e){const t=a1(e);for(const i of n.elements)t.some((s=>Qr(s,i)))||t.push(i);return{arrayValue:{values:t}}}class $a extends $p{constructor(e){super(),this.elements=e}}function o1(n,e){let t=a1(e);for(const i of n.elements)t=t.filter((s=>!Qr(s,i)));return{arrayValue:{values:t}}}class Vu extends $p{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function jx(n){return Ut(n.integerValue||n.doubleValue)}function a1(n){return cf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,t){this.field=e,this.transform=t}}function cz(n,e){return n.field.isEqual(e.field)&&(function(i,s){return i instanceof Ha&&s instanceof Ha||i instanceof $a&&s instanceof $a?Au(i.elements,s.elements,Qr):i instanceof Vu&&s instanceof Vu?Qr(i.Ae,s.Ae):i instanceof ku&&s instanceof ku})(n.transform,e.transform)}class dz{constructor(e,t){this.version=e,this.transformResults=t}}class Bt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Bt}static exists(e){return new Bt(void 0,e)}static updateTime(e){return new Bt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Lm(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class jp{}function l1(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new tc(n.key,Bt.none()):new ec(n.key,n.data,Bt.none());{const t=n.data,i=On.empty();let s=new Et(qt.comparator);for(let a of e.fields)if(!s.has(a)){let l=t.field(a);l===null&&a.length>1&&(a=a.popLast(),l=t.field(a)),l===null?i.delete(a):i.set(a,l),s=s.add(a)}return new Ps(n.key,i,new ci(s.toArray()),Bt.none())}}function fz(n,e,t){n instanceof ec?(function(s,a,l){const c=s.value.clone(),f=Yx(s.fieldTransforms,a,l.transformResults);c.setAll(f),a.convertToFoundDocument(l.version,c).setHasCommittedMutations()})(n,e,t):n instanceof Ps?(function(s,a,l){if(!Lm(s.precondition,a))return void a.convertToUnknownDocument(l.version);const c=Yx(s.fieldTransforms,a,l.transformResults),f=a.data;f.setAll(u1(s)),f.setAll(c),a.convertToFoundDocument(l.version,f).setHasCommittedMutations()})(n,e,t):(function(s,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function Bd(n,e,t,i){return n instanceof ec?(function(a,l,c,f){if(!Lm(a.precondition,l))return c;const h=a.value.clone(),_=Jx(a.fieldTransforms,f,l);return h.setAll(_),l.convertToFoundDocument(l.version,h).setHasLocalMutations(),null})(n,e,t,i):n instanceof Ps?(function(a,l,c,f){if(!Lm(a.precondition,l))return c;const h=Jx(a.fieldTransforms,f,l),_=l.data;return _.setAll(u1(a)),_.setAll(h),l.convertToFoundDocument(l.version,_).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((E=>E.field)))})(n,e,t,i):(function(a,l,c){return Lm(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c})(n,e,t)}function hz(n,e){let t=null;for(const i of n.fieldTransforms){const s=e.data.field(i.field),a=r1(i.transform,s||null);a!=null&&(t===null&&(t=On.empty()),t.set(i.field,a))}return t||null}function Kx(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Au(i,s,((a,l)=>cz(a,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class ec extends jp{constructor(e,t,i,s=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ps extends jp{constructor(e,t,i,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function u1(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function Yx(n,e,t){const i=new Map;Ce(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let s=0;s<t.length;s++){const a=n[s],l=a.transform,c=e.data.field(a.field);i.set(a.field,uz(l,c,t[s]))}return i}function Jx(n,e,t){const i=new Map;for(const s of n){const a=s.transform,l=t.data.field(s.field);i.set(s.field,lz(a,l,e))}return i}class tc extends jp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class F0 extends jp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(e,t,i,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&fz(a,e,i[s])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Bd(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Bd(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=t1();return this.mutations.forEach((s=>{const a=e.get(s.key),l=a.overlayedDocument;let c=this.applyToLocalView(l,a.mutatedFields);c=t.has(s.key)?null:c;const f=l1(l,c);f!==null&&i.set(s.key,f),l.isValidDocument()||l.convertToNoDocument(Ne.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),$e())}isEqual(e){return this.batchId===e.batchId&&Au(this.mutations,e.mutations,((t,i)=>Kx(t,i)))&&Au(this.baseMutations,e.baseMutations,((t,i)=>Kx(t,i)))}}class B0{constructor(e,t,i,s){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=s}static from(e,t,i){Ce(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=(function(){return sz})();const a=e.mutations;for(let l=0;l<a.length;l++)s=s.insert(a[l].key,i[l].version);return new B0(e,t,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mz{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mn,st;function c1(n){switch(n){case Q.OK:return Se(64938);case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0;default:return Se(15467,{code:n})}}function d1(n){if(n===void 0)return nn("GRPC error has no .code"),Q.UNKNOWN;switch(n){case mn.OK:return Q.OK;case mn.CANCELLED:return Q.CANCELLED;case mn.UNKNOWN:return Q.UNKNOWN;case mn.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case mn.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case mn.INTERNAL:return Q.INTERNAL;case mn.UNAVAILABLE:return Q.UNAVAILABLE;case mn.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case mn.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case mn.NOT_FOUND:return Q.NOT_FOUND;case mn.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case mn.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case mn.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case mn.ABORTED:return Q.ABORTED;case mn.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case mn.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case mn.DATA_LOSS:return Q.DATA_LOSS;default:return Se(39323,{code:n})}}(st=mn||(mn={}))[st.OK=0]="OK",st[st.CANCELLED=1]="CANCELLED",st[st.UNKNOWN=2]="UNKNOWN",st[st.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",st[st.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",st[st.NOT_FOUND=5]="NOT_FOUND",st[st.ALREADY_EXISTS=6]="ALREADY_EXISTS",st[st.PERMISSION_DENIED=7]="PERMISSION_DENIED",st[st.UNAUTHENTICATED=16]="UNAUTHENTICATED",st[st.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",st[st.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",st[st.ABORTED=10]="ABORTED",st[st.OUT_OF_RANGE=11]="OUT_OF_RANGE",st[st.UNIMPLEMENTED=12]="UNIMPLEMENTED",st[st.INTERNAL=13]="INTERNAL",st[st.UNAVAILABLE=14]="UNAVAILABLE",st[st.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pz=new Ao([4294967295,4294967295],0);function Wx(n){const e=f1().encode(n),t=new rN;return t.update(e),new Uint8Array(t.digest())}function Qx(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Ao([t,i],0),new Ao([s,a],0)]}class z0{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Sd(`Invalid padding: ${t}`);if(i<0)throw new Sd(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Sd(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Sd(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ao.fromNumber(this.ge)}ye(e,t,i){let s=e.add(t.multiply(Ao.fromNumber(i)));return s.compare(pz)===1&&(s=new Ao([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Wx(e),[i,s]=Qx(t);for(let a=0;a<this.hashCount;a++){const l=this.ye(i,s,a);if(!this.we(l))return!1}return!0}static create(e,t,i){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new z0(a,s,t);return i.forEach((c=>l.insert(c))),l}insert(e){if(this.ge===0)return;const t=Wx(e),[i,s]=Qx(t);for(let a=0;a<this.hashCount;a++){const l=this.ye(i,s,a);this.Se(l)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Sd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,t,i,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const s=new Map;return s.set(e,kf.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Mf(Ne.min(),s,new Rt(Be),di(),$e())}}class kf{constructor(e,t,i,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new kf(i,t,$e(),$e(),$e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,t,i,s){this.be=e,this.removedTargetIds=t,this.key=i,this.De=s}}class h1{constructor(e,t){this.targetId=e,this.Ce=t}}class m1{constructor(e,t,i=Yt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=s}}class Xx{constructor(){this.ve=0,this.Fe=Zx(),this.Me=Yt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=$e(),t=$e(),i=$e();return this.Fe.forEach(((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:i=i.add(s);break;default:Se(38017,{changeType:a})}})),new kf(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=Zx()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ce(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class gz{constructor(e){this.Ge=e,this.ze=new Map,this.je=di(),this.Je=gm(),this.He=gm(),this.Ye=new Rt(Be)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Se(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,i=e.Ce.count,s=this.ot(t);if(s){const a=s.target;if(ap(a))if(i===0){const l=new ye(a.path);this.et(t,l,Mt.newNoDocument(l,Ne.min()))}else Ce(i===1,20013,{expectedCount:i});else{const l=this._t(t);if(l!==i){const c=this.ut(e),f=c?this.ct(c,e,l):1;if(f!==0){this.it(t);const h=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:a=0}=t;let l,c;try{l=Ss(i).toUint8Array()}catch(f){if(f instanceof MN)return Wr("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{c=new z0(l,s,a)}catch(f){return Wr(f instanceof Sd?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return c.ge===0?null:c}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let s=0;return i.forEach((a=>{const l=this.Ge.ht(),c=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.et(t,a,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((a,l)=>{const c=this.ot(l);if(c){if(a.current&&ap(c.target)){const f=new ye(c.target.path);this.It(f).has(l)||this.Et(l,f)||this.et(l,f,Mt.newNoDocument(f,e))}a.Be&&(t.set(l,a.ke()),a.qe())}}));let i=$e();this.He.forEach(((a,l)=>{let c=!0;l.forEachWhile((f=>{const h=this.ot(f);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(i=i.add(a))})),this.je.forEach(((a,l)=>l.setReadTime(e)));const s=new Mf(e,t,this.Ye,this.je,i);return this.je=di(),this.Je=gm(),this.He=gm(),this.Ye=new Rt(Be),s}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Xx,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Et(Be),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Et(Be),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||fe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Xx),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function gm(){return new Rt(ye.comparator)}function Zx(){return new Rt(ye.comparator)}const yz={asc:"ASCENDING",desc:"DESCENDING"},_z={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vz={and:"AND",or:"OR"};class Ez{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function yv(n,e){return n.useProto3Json||Cf(e)?e:{value:e}}function Lu(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function p1(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Tz(n,e){return Lu(n,e.toTimestamp())}function rn(n){return Ce(!!n,49232),Ne.fromTimestamp((function(t){const i=ws(t);return new mt(i.seconds,i.nanos)})(n))}function H0(n,e){return _v(n,e).canonicalString()}function _v(n,e){const t=(function(s){return new et(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function g1(n){const e=et.fromString(n);return Ce(x1(e),10190,{key:e.toString()}),e}function ff(n,e){return H0(n.databaseId,e.path)}function $r(n,e){const t=g1(e);if(t.get(1)!==n.databaseId.projectId)throw new ae(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ae(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ye(v1(t))}function y1(n,e){return H0(n.databaseId,e)}function _1(n){const e=g1(n);return e.length===4?et.emptyPath():v1(e)}function vv(n){return new et(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function v1(n){return Ce(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function eC(n,e,t){return{name:ff(n,e),fields:t.value.mapValue.fields}}function E1(n,e,t){const i=$r(n,e.name),s=rn(e.updateTime),a=e.createTime?rn(e.createTime):Ne.min(),l=new On({mapValue:{fields:e.fields}}),c=Mt.newFoundDocument(i,s,a,l);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function Iz(n,e){return"found"in e?(function(i,s){Ce(!!s.found,43571),s.found.name,s.found.updateTime;const a=$r(i,s.found.name),l=rn(s.found.updateTime),c=s.found.createTime?rn(s.found.createTime):Ne.min(),f=new On({mapValue:{fields:s.found.fields}});return Mt.newFoundDocument(a,l,c,f)})(n,e):"missing"in e?(function(i,s){Ce(!!s.missing,3894),Ce(!!s.readTime,22933);const a=$r(i,s.missing),l=rn(s.readTime);return Mt.newNoDocument(a,l)})(n,e):Se(7234,{result:e})}function wz(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Se(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=(function(h,_){return h.useProto3Json?(Ce(_===void 0||typeof _=="string",58123),Yt.fromBase64String(_||"")):(Ce(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Yt.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&(function(h){const _=h.code===void 0?Q.UNKNOWN:d1(h.code);return new ae(_,h.message||"")})(l);t=new m1(i,s,a,c||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=$r(n,i.document.name),a=rn(i.document.updateTime),l=i.document.createTime?rn(i.document.createTime):Ne.min(),c=new On({mapValue:{fields:i.document.fields}}),f=Mt.newFoundDocument(s,a,l,c),h=i.targetIds||[],_=i.removedTargetIds||[];t=new Om(h,_,f.key,f)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=$r(n,i.document),a=i.readTime?rn(i.readTime):Ne.min(),l=Mt.newNoDocument(s,a),c=i.removedTargetIds||[];t=new Om([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=$r(n,i.document),a=i.removedTargetIds||[];t=new Om([],a,s,null)}else{if(!("filter"in e))return Se(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:a}=i,l=new mz(s,a),c=i.targetId;t=new h1(c,l)}}return t}function hf(n,e){let t;if(e instanceof ec)t={update:eC(n,e.key,e.value)};else if(e instanceof tc)t={delete:ff(n,e.key)};else if(e instanceof Ps)t={update:eC(n,e.key,e.data),updateMask:Rz(e.fieldMask)};else{if(!(e instanceof F0))return Se(16599,{Vt:e.type});t={verify:ff(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(a,l){const c=l.transform;if(c instanceof ku)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Ha)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof $a)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Vu)return{fieldPath:l.field.canonicalString(),increment:c.Ae};throw Se(20930,{transform:l.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:Tz(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Se(27497)})(n,e.precondition)),t}function Ev(n,e){const t=e.currentDocument?(function(a){return a.updateTime!==void 0?Bt.updateTime(rn(a.updateTime)):a.exists!==void 0?Bt.exists(a.exists):Bt.none()})(e.currentDocument):Bt.none(),i=e.updateTransforms?e.updateTransforms.map((s=>(function(l,c){let f=null;if("setToServerValue"in c)Ce(c.setToServerValue==="REQUEST_TIME",16630,{proto:c}),f=new ku;else if("appendMissingElements"in c){const _=c.appendMissingElements.values||[];f=new Ha(_)}else if("removeAllFromArray"in c){const _=c.removeAllFromArray.values||[];f=new $a(_)}else"increment"in c?f=new Vu(l,c.increment):Se(16584,{proto:c});const h=qt.fromServerFormat(c.fieldPath);return new Df(h,f)})(n,s))):[];if(e.update){e.update.name;const s=$r(n,e.update.name),a=new On({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=(function(f){const h=f.fieldPaths||[];return new ci(h.map((_=>qt.fromServerFormat(_))))})(e.updateMask);return new Ps(s,a,l,t,i)}return new ec(s,a,t,i)}if(e.delete){const s=$r(n,e.delete);return new tc(s,t)}if(e.verify){const s=$r(n,e.verify);return new F0(s,t)}return Se(1463,{proto:e})}function Sz(n,e){return n&&n.length>0?(Ce(e!==void 0,14353),n.map((t=>(function(s,a){let l=s.updateTime?rn(s.updateTime):rn(a);return l.isEqual(Ne.min())&&(l=rn(a)),new dz(l,s.transformResults||[])})(t,e)))):[]}function T1(n,e){return{documents:[y1(n,e.path)]}}function I1(n,e){const t={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=y1(n,s);const a=(function(h){if(h.length!==0)return A1(vt.create(h,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const l=(function(h){if(h.length!==0)return h.map((_=>(function(I){return{field:tu(I.field),direction:xz(I.dir)}})(_)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const c=yv(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:s}}function w1(n){let e=_1(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let s=null;if(i>0){Ce(i===1,65062);const _=t.from[0];_.allDescendants?s=_.collectionId:e=e.child(_.collectionId)}let a=[];t.where&&(a=(function(E){const I=S1(E);return I instanceof vt&&V0(I)?I.getFilters():[I]})(t.where));let l=[];t.orderBy&&(l=(function(E){return E.map((I=>(function(k){return new df(nu(k.field),(function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(I)))})(t.orderBy));let c=null;t.limit&&(c=(function(E){let I;return I=typeof E=="object"?E.value:E,Cf(I)?null:I})(t.limit));let f=null;t.startAt&&(f=(function(E){const I=!!E.before,x=E.values||[];return new Lo(x,I)})(t.startAt));let h=null;return t.endAt&&(h=(function(E){const I=!E.before,x=E.values||[];return new Lo(x,I)})(t.endAt)),JN(e,s,l,a,c,"F",f,h)}function Az(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function S1(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=nu(t.unaryFilter.field);return it.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=nu(t.unaryFilter.field);return it.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=nu(t.unaryFilter.field);return it.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=nu(t.unaryFilter.field);return it.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Se(61313);default:return Se(60726)}})(n):n.fieldFilter!==void 0?(function(t){return it.create(nu(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Se(58110);default:return Se(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return vt.create(t.compositeFilter.filters.map((i=>S1(i))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Se(1026)}})(t.compositeFilter.op))})(n):Se(30097,{filter:n})}function xz(n){return yz[n]}function Cz(n){return _z[n]}function bz(n){return vz[n]}function tu(n){return{fieldPath:n.canonicalString()}}function nu(n){return qt.fromServerFormat(n.fieldPath)}function A1(n){return n instanceof it?(function(t){if(t.op==="=="){if(Ux(t.value))return{unaryFilter:{field:tu(t.field),op:"IS_NAN"}};if(Ox(t.value))return{unaryFilter:{field:tu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Ux(t.value))return{unaryFilter:{field:tu(t.field),op:"IS_NOT_NAN"}};if(Ox(t.value))return{unaryFilter:{field:tu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:tu(t.field),op:Cz(t.op),value:t.value}}})(n):n instanceof vt?(function(t){const i=t.getFilters().map((s=>A1(s)));return i.length===1?i[0]:{compositeFilter:{op:bz(t.op),filters:i}}})(n):Se(54877,{filter:n})}function Rz(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function x1(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,t,i,s,a=Ne.min(),l=Ne.min(),c=Yt.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=f}withSequenceNumber(e){return new _s(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e){this.yt=e}}function Nz(n,e){let t;if(e.document)t=E1(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=ye.fromSegments(e.noDocument.path),s=Ka(e.noDocument.readTime);t=Mt.newNoDocument(i,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Se(56709);{const i=ye.fromSegments(e.unknownDocument.path),s=Ka(e.unknownDocument.version);t=Mt.newUnknownDocument(i,s)}}return e.readTime&&t.setReadTime((function(s){const a=new mt(s[0],s[1]);return Ne.fromTimestamp(a)})(e.readTime)),t}function tC(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:cp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=(function(a,l){return{name:ff(a,l.key),fields:l.data.value.mapValue.fields,updateTime:Lu(a,l.version.toTimestamp()),createTime:Lu(a,l.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:ja(e.version)};else{if(!e.isUnknownDocument())return Se(57904,{document:e});i.unknownDocument={path:t.path.toArray(),version:ja(e.version)}}return i}function cp(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ja(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ka(n){const e=new mt(n.seconds,n.nanoseconds);return Ne.fromTimestamp(e)}function ba(n,e){const t=(e.baseMutations||[]).map((a=>Ev(n.yt,a)));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const c=e.mutations[a+1];l.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const i=e.mutations.map((a=>Ev(n.yt,a))),s=mt.fromMillis(e.localWriteTimeMs);return new q0(e.batchId,s,t,i)}function Ad(n){const e=Ka(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Ka(n.lastLimboFreeSnapshotVersion):Ne.min();let i;return i=(function(a){return a.documents!==void 0})(n.query)?(function(a){const l=a.documents.length;return Ce(l===1,1966,{count:l}),Xn(Zu(_1(a.documents[0])))})(n.query):(function(a){return Xn(w1(a))})(n.query),new _s(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Yt.fromBase64String(n.resumeToken))}function b1(n,e){const t=ja(e.snapshotVersion),i=ja(e.lastLimboFreeSnapshotVersion);let s;s=ap(e.target)?T1(n.yt,e.target):I1(n.yt,e.target).ft;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:za(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:s}}function $0(n){const e=w1({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?up(e,e.limit,"L"):e}function S_(n,e){return new G0(e.largestBatchId,Ev(n.yt,e.overlayMutation))}function nC(n,e){const t=e.path.lastSegment();return[n,$n(e.path.popLast()),t]}function iC(n,e,t,i){return{indexId:n,uid:e,sequenceNumber:t,readTime:ja(i.readTime),documentKey:$n(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pz{getBundleMetadata(e,t){return rC(e).get(t).next((i=>{if(i)return(function(a){return{id:a.bundleId,createTime:Ka(a.createTime),version:a.version}})(i)}))}saveBundleMetadata(e,t){return rC(e).put((function(s){return{bundleId:s.id,createTime:ja(rn(s.createTime)),version:s.version}})(t))}getNamedQuery(e,t){return sC(e).get(t).next((i=>{if(i)return(function(a){return{name:a.name,query:$0(a.bundledQuery),readTime:Ka(a.readTime)}})(i)}))}saveNamedQuery(e,t){return sC(e).put((function(s){return{name:s.name,readTime:ja(rn(s.readTime)),bundledQuery:s.bundledQuery}})(t))}}function rC(n){return En(n,Fp)}function sC(n){return En(n,qp)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const i=t.uid||"";return new Kp(e,i)}getOverlay(e,t){return hd(e).get(nC(this.userId,t)).next((i=>i?S_(this.serializer,i):null))}getOverlays(e,t){const i=zr();return $.forEach(t,(s=>this.getOverlay(e,s).next((a=>{a!==null&&i.set(s,a)})))).next((()=>i))}saveOverlays(e,t,i){const s=[];return i.forEach(((a,l)=>{const c=new G0(t,l);s.push(this.St(e,c))})),$.waitFor(s)}removeOverlaysForBatchId(e,t,i){const s=new Set;t.forEach((l=>s.add($n(l.getCollectionPath()))));const a=[];return s.forEach((l=>{const c=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,i+1],!1,!0);a.push(hd(e).Z(lv,c))})),$.waitFor(a)}getOverlaysForCollection(e,t,i){const s=zr(),a=$n(t),l=IDBKeyRange.bound([this.userId,a,i],[this.userId,a,Number.POSITIVE_INFINITY],!0);return hd(e).J(lv,l).next((c=>{for(const f of c){const h=S_(this.serializer,f);s.set(h.getKey(),h)}return s}))}getOverlaysForCollectionGroup(e,t,i,s){const a=zr();let l;const c=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return hd(e).ee({index:CN,range:c},((f,h,_)=>{const E=S_(this.serializer,h);a.size()<s||E.largestBatchId===l?(a.set(E.getKey(),E),l=E.largestBatchId):_.done()})).next((()=>a))}St(e,t){return hd(e).put((function(s,a,l){const[c,f,h]=nC(a,l.mutation.key);return{userId:a,collectionPath:f,documentId:h,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:hf(s.yt,l.mutation)}})(this.serializer,this.userId,t))}}function hd(n){return En(n,Bp)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dz{bt(e){return En(e,P0)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const i=t==null?void 0:t.value;return i?Yt.fromUint8Array(i):Yt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Ut(e.integerValue));else if("doubleValue"in e){const i=Ut(e.doubleValue);isNaN(i)?this.Ft(t,13):(this.Ft(t,15),rf(i)?t.Mt(0):t.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(t,20),typeof i=="string"&&(i=ws(i)),t.xt(`${i.seconds||""}`),t.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Ss(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.Ft(t,45),t.Mt(i.latitude||0),t.Mt(i.longitude||0)}else"mapValue"in e?FN(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Hp(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Se(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const i=e.fields||{};this.Ft(t,55);for(const s of Object.keys(i))this.Ot(s,t),this.Ct(i[s],t)}kt(e,t){var l,c;const i=e.fields||{};this.Ft(t,53);const s=Pu,a=((c=(l=i[s].arrayValue)==null?void 0:l.values)==null?void 0:c.length)||0;this.Ft(t,15),t.Mt(Ut(a)),this.Ot(s,t),this.Ct(i[s],t)}Qt(e,t){const i=e.values||[];this.Ft(t,50);for(const s of i)this.Ct(s,t)}Lt(e,t){this.Ft(t,37),ye.fromName(e).path.forEach((i=>{this.Ft(t,60),this.Ut(i,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Ra.Kt=new Ra;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jl=255;function Mz(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function oC(n){const e=64-(function(i){let s=0;for(let a=0;a<8;++a){const l=Mz(255&i[a]);if(s+=l,l!==8)break}return s})(n);return Math.ceil(e/8)}class kz{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Gt(i.value),i=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Jt(i.value),i=t.next();this.Ht()}Yt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const s=t.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Jt(i);else if(i<2048)this.Jt(960|i>>>6),this.Jt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i);else{const s=t.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const t=this.en(e),i=oC(t);this.tn(1+i),this.buffer[this.position++]=255&i;for(let s=t.length-i;s<t.length;++s)this.buffer[this.position++]=255&t[s]}nn(e){const t=this.en(e),i=oC(t);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let s=t.length-i;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}rn(){this.sn(Jl),this.sn(255)}_n(){this.an(Jl),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(a){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,a,!1),new Uint8Array(l.buffer)})(e),i=!!(128&t[0]);t[0]^=i?255:128;for(let s=1;s<t.length;++s)t[s]^=i?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Jl?(this.sn(Jl),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Jl?(this.an(Jl),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const s=new Uint8Array(i);s.set(this.buffer),this.buffer=s}}class Vz{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class Lz{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class md{constructor(){this.cn=new kz,this.ln=new Vz(this.cn),this.hn=new Lz(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,t,i,s){this.Tn=e,this.In=t,this.En=i,this.dn=s}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,i=new Uint8Array(t);return i.set(this.dn,0),t!==e?i.set([0],this.dn.length):++i[i.length-1],new Na(this.Tn,this.In,this.En,i)}Rn(e,t,i){return{indexId:this.Tn,uid:e,arrayValue:Um(this.En),directionalValue:Um(this.dn),orderedDocumentKey:Um(t),documentKey:i.path.toArray()}}Vn(e,t,i){const s=this.Rn(e,t,i);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function fo(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=aC(n.En,e.En),t!==0?t:(t=aC(n.dn,e.dn),t!==0?t:ye.comparator(n.In,e.In)))}function aC(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(i!==0)return i}return n.length-e.length}function Um(n){return $b()?(function(t){let i="";for(let s=0;s<t.length;s++)i+=String.fromCharCode(t[s]);return i})(n):n}function lC(n){return typeof n!="string"?n:(function(t){const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i})(n)}class uC{constructor(e){this.mn=new Et(((t,i)=>qt.comparator(t.field,i.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const i=t;i.isInequality()?this.mn=this.mn.add(i):this.gn.push(i)}}get pn(){return this.mn.size>1}yn(e){if(Ce(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=sv(e);if(t!==void 0&&!this.wn(t))return!1;const i=Aa(e);let s=new Set,a=0,l=0;for(;a<i.length&&this.wn(i[a]);++a)s=s.add(i[a].fieldPath.canonicalString());if(a===i.length)return!0;if(this.mn.size>0){const c=this.mn.getIterator().getNext();if(!s.has(c.field.canonicalString())){const f=i[a];if(!this.Sn(c,f)||!this.bn(this.fn[l++],f))return!1}++a}for(;a<i.length;++a){const c=i[a];if(l>=this.fn.length||!this.bn(this.fn[l++],c))return!1}return!0}Dn(){if(this.pn)return null;let e=new Et(qt.comparator);const t=[];for(const i of this.gn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")t.push(new Nm(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new Nm(i.field,0))}for(const i of this.fn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new Nm(i.field,i.dir==="asc"?0:1)));return new ip(ip.UNKNOWN_ID,this.collectionId,t,nf.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===i}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(n){var t,i;if(Ce(n instanceof it||n instanceof vt,20012),n instanceof it){if(n instanceof YN){const s=((i=(t=n.value.arrayValue)==null?void 0:t.values)==null?void 0:i.map((a=>it.create(n.field,"==",a))))||[];return vt.create(s,"or")}return n}const e=n.filters.map((s=>R1(s)));return vt.create(e,n.op)}function Oz(n){if(n.getFilters().length===0)return[];const e=wv(R1(n));return Ce(N1(e),7391),Tv(e)||Iv(e)?[e]:e.getFilters()}function Tv(n){return n instanceof it}function Iv(n){return n instanceof vt&&V0(n)}function N1(n){return Tv(n)||Iv(n)||(function(t){if(t instanceof vt&&hv(t)){for(const i of t.getFilters())if(!Tv(i)&&!Iv(i))return!1;return!0}return!1})(n)}function wv(n){if(Ce(n instanceof it||n instanceof vt,34018),n instanceof it)return n;if(n.filters.length===1)return wv(n.filters[0]);const e=n.filters.map((i=>wv(i)));let t=vt.create(e,n.op);return t=dp(t),N1(t)?t:(Ce(t instanceof vt,64498),Ce(Mu(t),40251),Ce(t.filters.length>1,57927),t.filters.reduce(((i,s)=>j0(i,s))))}function j0(n,e){let t;return Ce(n instanceof it||n instanceof vt,38388),Ce(e instanceof it||e instanceof vt,25473),t=n instanceof it?e instanceof it?(function(s,a){return vt.create([s,a],"and")})(n,e):cC(n,e):e instanceof it?cC(e,n):(function(s,a){if(Ce(s.filters.length>0&&a.filters.length>0,48005),Mu(s)&&Mu(a))return $N(s,a.getFilters());const l=hv(s)?s:a,c=hv(s)?a:s,f=l.filters.map((h=>j0(h,c)));return vt.create(f,"or")})(n,e),dp(t)}function cC(n,e){if(Mu(e))return $N(e,n.getFilters());{const t=e.filters.map((i=>j0(n,i)));return vt.create(t,"or")}}function dp(n){if(Ce(n instanceof it||n instanceof vt,11850),n instanceof it)return n;const e=n.getFilters();if(e.length===1)return dp(e[0]);if(zN(n))return n;const t=e.map((s=>dp(s))),i=[];return t.forEach((s=>{s instanceof it?i.push(s):s instanceof vt&&(s.op===n.op?i.push(...s.filters):i.push(s))})),i.length===1?i[0]:vt.create(i,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uz{constructor(){this.Cn=new K0}addToCollectionParentIndex(e,t){return this.Cn.add(t),$.resolve()}getCollectionParents(e,t){return $.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return $.resolve()}deleteFieldIndex(e,t){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,t){return $.resolve()}getDocumentsMatchingTarget(e,t){return $.resolve(null)}getIndexType(e,t){return $.resolve(0)}getFieldIndexes(e,t){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,t){return $.resolve(Ci.min())}getMinOffsetFromCollectionGroup(e,t){return $.resolve(Ci.min())}updateCollectionGroup(e,t,i){return $.resolve()}updateIndexEntries(e,t){return $.resolve()}}class K0{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t]||new Et(et.comparator),a=!s.has(i);return this.index[t]=s.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t];return s&&s.has(i)}getEntries(e){return(this.index[e]||new Et(et.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC="IndexedDbIndexManager",ym=new Uint8Array(0);class Fz{constructor(e,t){this.databaseId=t,this.vn=new K0,this.Fn=new Ns((i=>za(i)),((i,s)=>Rf(i,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const i=t.lastSegment(),s=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const a={collectionId:i,parent:$n(s)};return fC(e).put(a)}return $.resolve()}getCollectionParents(e,t){const i=[],s=IDBKeyRange.bound([t,""],[fN(t),""],!1,!0);return fC(e).J(s).next((a=>{for(const l of a){if(l.collectionId!==t)break;i.push(Gr(l.parent))}return i}))}addFieldIndex(e,t){const i=pd(e),s=(function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map((f=>[f.fieldPath.canonicalString(),f.kind]))}})(t);delete s.indexId;const a=i.add(s);if(t.indexState){const l=Ql(e);return a.next((c=>{l.put(iC(c,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}deleteFieldIndex(e,t){const i=pd(e),s=Ql(e),a=Wl(e);return i.delete(t.indexId).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=pd(e),i=Wl(e),s=Ql(e);return t.Z().next((()=>i.Z())).next((()=>s.Z()))}createTargetIndexes(e,t){return $.forEach(this.Mn(t),(i=>this.getIndexType(e,i).next((s=>{if(s===0||s===1){const a=new uC(i).Dn();if(a!=null)return this.addFieldIndex(e,a)}}))))}getDocumentsMatchingTarget(e,t){const i=Wl(e);let s=!0;const a=new Map;return $.forEach(this.Mn(t),(l=>this.xn(e,l).next((c=>{s&&(s=!!c),a.set(l,c)})))).next((()=>{if(s){let l=$e();const c=[];return $.forEach(a,((f,h)=>{fe(dC,`Using index ${(function(J){return`id=${J.indexId}|cg=${J.collectionGroup}|f=${J.fields.map((se=>`${se.fieldPath}:${se.kind}`)).join(",")}`})(f)} to execute ${za(t)}`);const _=(function(J,se){const de=sv(se);if(de===void 0)return null;for(const le of lp(J,de.fieldPath))switch(le.op){case"array-contains-any":return le.value.arrayValue.values||[];case"array-contains":return[le.value]}return null})(h,f),E=(function(J,se){const de=new Map;for(const le of Aa(se))for(const N of lp(J,le.fieldPath))switch(N.op){case"==":case"in":de.set(le.fieldPath.canonicalString(),N.value);break;case"not-in":case"!=":return de.set(le.fieldPath.canonicalString(),N.value),Array.from(de.values())}return null})(h,f),I=(function(J,se){const de=[];let le=!0;for(const N of Aa(se)){const P=N.kind===0?zx(J,N.fieldPath,J.startAt):Hx(J,N.fieldPath,J.startAt);de.push(P.value),le&&(le=P.inclusive)}return new Lo(de,le)})(h,f),x=(function(J,se){const de=[];let le=!0;for(const N of Aa(se)){const P=N.kind===0?Hx(J,N.fieldPath,J.endAt):zx(J,N.fieldPath,J.endAt);de.push(P.value),le&&(le=P.inclusive)}return new Lo(de,le)})(h,f),k=this.On(f,h,I),V=this.On(f,h,x),B=this.Nn(f,h,E),z=this.Bn(f.indexId,_,k,I.inclusive,V,x.inclusive,B);return $.forEach(z,(G=>i.Y(G,t.limit).next((J=>{J.forEach((se=>{const de=ye.fromSegments(se.documentKey);l.has(de)||(l=l.add(de),c.push(de))}))}))))})).next((()=>c))}return $.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=Oz(vt.create(e.filters,"and")).map((i=>pv(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,i,s,a,l,c){const f=(t!=null?t.length:1)*Math.max(i.length,a.length),h=f/(t!=null?t.length:1),_=[];for(let E=0;E<f;++E){const I=t?this.Ln(t[E/h]):ym,x=this.kn(e,I,i[E%h],s),k=this.qn(e,I,a[E%h],l),V=c.map((B=>this.kn(e,I,B,!0)));_.push(...this.createRange(x,k,V))}return _}kn(e,t,i,s){const a=new Na(e,ye.empty(),t,i);return s?a:a.An()}qn(e,t,i,s){const a=new Na(e,ye.empty(),t,i);return s?a.An():a}xn(e,t){const i=new uC(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next((a=>{let l=null;for(const c of a)i.yn(c)&&(!l||c.fields.length>l.fields.length)&&(l=c);return l}))}getIndexType(e,t){let i=2;const s=this.Mn(t);return $.forEach(s,(a=>this.xn(e,a).next((l=>{l?i!==0&&l.fields.length<(function(f){let h=new Et(qt.comparator),_=!1;for(const E of f.filters)for(const I of E.getFlattenedFilters())I.field.isKeyField()||(I.op==="array-contains"||I.op==="array-contains-any"?_=!0:h=h.add(I.field));for(const E of f.orderBy)E.field.isKeyField()||(h=h.add(E.field));return h.size+(_?1:0)})(a)&&(i=1):i=0})))).next((()=>(function(l){return l.limit!==null})(t)&&s.length>1&&i===2?1:i))}Qn(e,t){const i=new md;for(const s of Aa(e)){const a=t.data.field(s.fieldPath);if(a==null)return null;const l=i.Pn(s.kind);Ra.Kt.Dt(a,l)}return i.un()}Ln(e){const t=new md;return Ra.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const i=new md;return Ra.Kt.Dt(Ga(this.databaseId,t),i.Pn((function(a){const l=Aa(a);return l.length===0?0:l[l.length-1].kind})(e))),i.un()}Nn(e,t,i){if(i===null)return[];let s=[];s.push(new md);let a=0;for(const l of Aa(e)){const c=i[a++];for(const f of s)if(this.Un(t,l.fieldPath)&&cf(c))s=this.Kn(s,l,c);else{const h=f.Pn(l.kind);Ra.Kt.Dt(c,h)}}return this.Wn(s)}On(e,t,i){return this.Nn(e,t,i.position)}Wn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].un();return t}Kn(e,t,i){const s=[...e],a=[];for(const l of i.arrayValue.values||[])for(const c of s){const f=new md;f.seed(c.un()),Ra.Kt.Dt(l,f.Pn(t.kind)),a.push(f)}return a}Un(e,t){return!!e.filters.find((i=>i instanceof it&&i.field.isEqual(t)&&(i.op==="in"||i.op==="not-in")))}getFieldIndexes(e,t){const i=pd(e),s=Ql(e);return(t?i.J(av,IDBKeyRange.bound(t,t)):i.J()).next((a=>{const l=[];return $.forEach(a,(c=>s.get([c.indexId,this.uid]).next((f=>{l.push((function(_,E){const I=E?new nf(E.sequenceNumber,new Ci(Ka(E.readTime),new ye(Gr(E.documentKey)),E.largestBatchId)):nf.empty(),x=_.fields.map((([k,V])=>new Nm(qt.fromServerFormat(k),V)));return new ip(_.indexId,_.collectionGroup,x,I)})(c,f))})))).next((()=>l))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((i,s)=>{const a=i.indexState.sequenceNumber-s.indexState.sequenceNumber;return a!==0?a:Be(i.collectionGroup,s.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,i){const s=pd(e),a=Ql(e);return this.Gn(e).next((l=>s.J(av,IDBKeyRange.bound(t,t)).next((c=>$.forEach(c,(f=>a.put(iC(f.indexId,this.uid,l,i))))))))}updateIndexEntries(e,t){const i=new Map;return $.forEach(t,((s,a)=>{const l=i.get(s.collectionGroup);return(l?$.resolve(l):this.getFieldIndexes(e,s.collectionGroup)).next((c=>(i.set(s.collectionGroup,c),$.forEach(c,(f=>this.zn(e,s,f).next((h=>{const _=this.jn(a,f);return h.isEqual(_)?$.resolve():this.Jn(e,a,f,h,_)})))))))}))}Hn(e,t,i,s){return Wl(e).put(s.Rn(this.uid,this.$n(i,t.key),t.key))}Yn(e,t,i,s){return Wl(e).delete(s.Vn(this.uid,this.$n(i,t.key),t.key))}zn(e,t,i){const s=Wl(e);let a=new Et(fo);return s.ee({index:xN,range:IDBKeyRange.only([i.indexId,this.uid,Um(this.$n(i,t))])},((l,c)=>{a=a.add(new Na(i.indexId,t,lC(c.arrayValue),lC(c.directionalValue)))})).next((()=>a))}jn(e,t){let i=new Et(fo);const s=this.Qn(t,e);if(s==null)return i;const a=sv(t);if(a!=null){const l=e.data.field(a.fieldPath);if(cf(l))for(const c of l.arrayValue.values||[])i=i.add(new Na(t.indexId,e.key,this.Ln(c),s))}else i=i.add(new Na(t.indexId,e.key,ym,s));return i}Jn(e,t,i,s,a){fe(dC,"Updating index entries for document '%s'",t.key);const l=[];return(function(f,h,_,E,I){const x=f.getIterator(),k=h.getIterator();let V=Yl(x),B=Yl(k);for(;V||B;){let z=!1,G=!1;if(V&&B){const J=_(V,B);J<0?G=!0:J>0&&(z=!0)}else V!=null?G=!0:z=!0;z?(E(B),B=Yl(k)):G?(I(V),V=Yl(x)):(V=Yl(x),B=Yl(k))}})(s,a,fo,(c=>{l.push(this.Hn(e,t,i,c))}),(c=>{l.push(this.Yn(e,t,i,c))})),$.waitFor(l)}Gn(e){let t=1;return Ql(e).ee({index:AN,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((i,s,a)=>{a.done(),t=s.sequenceNumber+1})).next((()=>t))}createRange(e,t,i){i=i.sort(((l,c)=>fo(l,c))).filter(((l,c,f)=>!c||fo(l,f[c-1])!==0));const s=[];s.push(e);for(const l of i){const c=fo(l,e),f=fo(l,t);if(c===0)s[0]=e.An();else if(c>0&&f<0)s.push(l),s.push(l.An());else if(f>0)break}s.push(t);const a=[];for(let l=0;l<s.length;l+=2){if(this.Zn(s[l],s[l+1]))return[];const c=s[l].Vn(this.uid,ym,ye.empty()),f=s[l+1].Vn(this.uid,ym,ye.empty());a.push(IDBKeyRange.bound(c,f))}return a}Zn(e,t){return fo(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(hC)}getMinOffset(e,t){return $.mapArray(this.Mn(t),(i=>this.xn(e,i).next((s=>s||Se(44426))))).next(hC)}}function fC(n){return En(n,af)}function Wl(n){return En(n,Ud)}function pd(n){return En(n,N0)}function Ql(n){return En(n,Od)}function hC(n){Ce(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const s=n[i].indexState.offset;C0(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new Ci(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},P1=41943040;class Gn{static withCacheSize(e){return new Gn(e,Gn.DEFAULT_COLLECTION_PERCENTILE,Gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D1(n,e,t){const i=n.store(rr),s=n.store(Cu),a=[],l=IDBKeyRange.only(t.batchId);let c=0;const f=i.ee({range:l},((_,E,I)=>(c++,I.delete())));a.push(f.next((()=>{Ce(c===1,47070,{batchId:t.batchId})})));const h=[];for(const _ of t.mutations){const E=IN(e,_.key.path,t.batchId);a.push(s.delete(E)),h.push(_.key)}return $.waitFor(a).next((()=>h))}function fp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Se(14731);e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gn.DEFAULT_COLLECTION_PERCENTILE=10,Gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gn.DEFAULT=new Gn(P1,Gn.DEFAULT_COLLECTION_PERCENTILE,Gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gn.DISABLED=new Gn(-1,0,0);class Yp{constructor(e,t,i,s){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=s,this.Xn={}}static wt(e,t,i,s){Ce(e.uid!=="",64387);const a=e.isAuthenticated()?e.uid:"";return new Yp(a,t,i,s)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ho(e).ee({index:Ma,range:i},((s,a,l)=>{t=!1,l.done()})).next((()=>t))}addMutationBatch(e,t,i,s){const a=iu(e),l=ho(e);return l.add({}).next((c=>{Ce(typeof c=="number",49019);const f=new q0(c,t,i,s),h=(function(x,k,V){const B=V.baseMutations.map((G=>hf(x.yt,G))),z=V.mutations.map((G=>hf(x.yt,G)));return{userId:k,batchId:V.batchId,localWriteTimeMs:V.localWriteTime.toMillis(),baseMutations:B,mutations:z}})(this.serializer,this.userId,f),_=[];let E=new Et(((I,x)=>Be(I.canonicalString(),x.canonicalString())));for(const I of s){const x=IN(this.userId,I.key.path,c);E=E.add(I.key.path.popLast()),_.push(l.put(h)),_.push(a.put(x,vG))}return E.forEach((I=>{_.push(this.indexManager.addToCollectionParentIndex(e,I))})),e.addOnCommittedListener((()=>{this.Xn[c]=f.keys()})),$.waitFor(_).next((()=>f))}))}lookupMutationBatch(e,t){return ho(e).get(t).next((i=>i?(Ce(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:t}),ba(this.serializer,i)):null))}er(e,t){return this.Xn[t]?$.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((i=>{if(i){const s=i.keys();return this.Xn[t]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=IDBKeyRange.lowerBound([this.userId,i]);let a=null;return ho(e).ee({index:Ma,range:s},((l,c,f)=>{c.userId===this.userId&&(Ce(c.batchId>=i,47524,{tr:i}),a=ba(this.serializer,c)),f.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=xo;return ho(e).ee({index:Ma,range:t,reverse:!0},((s,a,l)=>{i=a.batchId,l.done()})).next((()=>i))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,xo],[this.userId,Number.POSITIVE_INFINITY]);return ho(e).J(Ma,t).next((i=>i.map((s=>ba(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=Pm(this.userId,t.path),s=IDBKeyRange.lowerBound(i),a=[];return iu(e).ee({range:s},((l,c,f)=>{const[h,_,E]=l,I=Gr(_);if(h===this.userId&&t.path.isEqual(I))return ho(e).get(E).next((x=>{if(!x)throw Se(61480,{nr:l,batchId:E});Ce(x.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:x.userId,batchId:E}),a.push(ba(this.serializer,x))}));f.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Et(Be);const s=[];return t.forEach((a=>{const l=Pm(this.userId,a.path),c=IDBKeyRange.lowerBound(l),f=iu(e).ee({range:c},((h,_,E)=>{const[I,x,k]=h,V=Gr(x);I===this.userId&&a.path.isEqual(V)?i=i.add(k):E.done()}));s.push(f)})),$.waitFor(s).next((()=>this.rr(e,i)))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1,a=Pm(this.userId,i),l=IDBKeyRange.lowerBound(a);let c=new Et(Be);return iu(e).ee({range:l},((f,h,_)=>{const[E,I,x]=f,k=Gr(I);E===this.userId&&i.isPrefixOf(k)?k.length===s&&(c=c.add(x)):_.done()})).next((()=>this.rr(e,c)))}rr(e,t){const i=[],s=[];return t.forEach((a=>{s.push(ho(e).get(a).next((l=>{if(l===null)throw Se(35274,{batchId:a});Ce(l.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:l.userId,batchId:a}),i.push(ba(this.serializer,l))})))})),$.waitFor(s).next((()=>i))}removeMutationBatch(e,t){return D1(e.le,this.userId,t).next((i=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),$.forEach(i,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return $.resolve();const i=IDBKeyRange.lowerBound((function(l){return[l]})(this.userId)),s=[];return iu(e).ee({range:i},((a,l,c)=>{if(a[0]===this.userId){const f=Gr(a[1]);s.push(f)}else c.done()})).next((()=>{Ce(s.length===0,56720,{sr:s.map((a=>a.canonicalString()))})}))}))}containsKey(e,t){return M1(e,this.userId,t)}_r(e){return k1(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:xo,lastStreamToken:""}))}}function M1(n,e,t){const i=Pm(e,t.path),s=i[1],a=IDBKeyRange.lowerBound(i);let l=!1;return iu(n).ee({range:a,X:!0},((c,f,h)=>{const[_,E,I]=c;_===e&&E===s&&(l=!0),h.done()})).next((()=>l))}function ho(n){return En(n,rr)}function iu(n){return En(n,Cu)}function k1(n){return En(n,sf)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ya(0)}static cr(){return new Ya(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qz{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const i=new Ya(t.highestTargetId);return t.highestTargetId=i.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Ne.fromTimestamp(new mt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,i){return this.lr(e).next((s=>(s.highestListenSequenceNumber=t,i&&(s.lastRemoteSnapshotVersion=i.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.hr(e,s))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((i=>(i.targetCount+=1,this.Tr(t,i),this.hr(e,i))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Xl(e).delete(t.targetId))).next((()=>this.lr(e))).next((i=>(Ce(i.targetCount>0,8065),i.targetCount-=1,this.hr(e,i))))}removeTargets(e,t,i){let s=0;const a=[];return Xl(e).ee(((l,c)=>{const f=Ad(c);f.sequenceNumber<=t&&i.get(f.targetId)===null&&(s++,a.push(this.removeTargetData(e,f)))})).next((()=>$.waitFor(a))).next((()=>s))}forEachTarget(e,t){return Xl(e).ee(((i,s)=>{const a=Ad(s);t(a)}))}lr(e){return pC(e).get(op).next((t=>(Ce(t!==null,2888),t)))}hr(e,t){return pC(e).put(op,t)}Pr(e,t){return Xl(e).put(b1(this.serializer,t))}Tr(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const i=za(t),s=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let a=null;return Xl(e).ee({range:s,index:SN},((l,c,f)=>{const h=Ad(c);Rf(t,h.target)&&(a=h,f.done())})).next((()=>a))}addMatchingKeys(e,t,i){const s=[],a=yo(e);return t.forEach((l=>{const c=$n(l.path);s.push(a.put({targetId:i,path:c})),s.push(this.referenceDelegate.addReference(e,i,l))})),$.waitFor(s)}removeMatchingKeys(e,t,i){const s=yo(e);return $.forEach(t,(a=>{const l=$n(a.path);return $.waitFor([s.delete([i,l]),this.referenceDelegate.removeReference(e,i,a)])}))}removeMatchingKeysForTargetId(e,t){const i=yo(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(s)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),s=yo(e);let a=$e();return s.ee({range:i,X:!0},((l,c,f)=>{const h=Gr(l[1]),_=new ye(h);a=a.add(_)})).next((()=>a))}containsKey(e,t){const i=$n(t.path),s=IDBKeyRange.bound([i],[fN(i)],!1,!0);let a=0;return yo(e).ee({index:R0,X:!0,range:s},(([l,c],f,h)=>{l!==0&&(a++,h.done())})).next((()=>a>0))}At(e,t){return Xl(e).get(t).next((i=>i?Ad(i):null))}}function Xl(n){return En(n,bu)}function pC(n){return En(n,Ua)}function yo(n){return En(n,Ru)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC="LruGarbageCollector",Bz=1048576;function yC([n,e],[t,i]){const s=Be(n,t);return s===0?Be(e,i):s}class Gz{constructor(e){this.Ir=e,this.buffer=new Et(yC),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();yC(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class V1{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){fe(gC,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ho(t)?fe(gC,"Ignoring IndexedDB error during garbage collection: ",t):await zo(t)}await this.Vr(3e5)}))}}class zz{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return $.resolve(ui.ce);const i=new Gz(t);return this.mr.forEachTarget(e,(s=>i.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>i.Ar(s))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(mC)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),mC):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,s,a,l,c,f,h;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),s=this.params.maximumSequenceNumbersToCollect):s=E,l=Date.now(),this.nthSequenceNumber(e,s)))).next((E=>(i=E,c=Date.now(),this.removeTargets(e,i,t)))).next((E=>(a=E,f=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(h=Date.now(),Zl()<=Ze.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-_}ms
	Determined least recently used ${s} in `+(c-l)+`ms
	Removed ${a} targets in `+(f-c)+`ms
	Removed ${E} documents in `+(h-f)+`ms
Total Duration: ${h-_}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:E}))))}}function L1(n,e){return new zz(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hz{constructor(e,t){this.db=e,this.garbageCollector=L1(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((i=>t.next((s=>i+s))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((i,s)=>t(s)))}addReference(e,t,i){return _m(e,i)}removeReference(e,t,i){return _m(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return _m(e,t)}br(e,t){return(function(s,a){let l=!1;return k1(s).te((c=>M1(s,c,a).next((f=>(f&&(l=!0),$.resolve(!f)))))).next((()=>l))})(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let a=0;return this.Sr(e,((l,c)=>{if(c<=t){const f=this.br(e,l).next((h=>{if(!h)return a++,i.getEntry(e,l).next((()=>(i.removeEntry(l,Ne.min()),yo(e).delete((function(E){return[0,$n(E.path)]})(l)))))}));s.push(f)}})).next((()=>$.waitFor(s))).next((()=>i.apply(e))).next((()=>a))}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return _m(e,t)}Sr(e,t){const i=yo(e);let s,a=ui.ce;return i.ee({index:R0},(([l,c],{path:f,sequenceNumber:h})=>{l===0?(a!==ui.ce&&t(new ye(Gr(s)),a),a=h,s=f):a=ui.ce})).next((()=>{a!==ui.ce&&t(new ye(Gr(s)),a)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function _m(n,e){return yo(n).put((function(i,s){return{targetId:0,path:$n(i.path),sequenceNumber:s}})(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(){this.changes=new Ns((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Mt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?$.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $z{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return wa(e).put(i)}removeEntry(e,t,i){return wa(e).delete((function(a,l){const c=a.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],cp(l),c[c.length-1]]})(t,i))}updateMetadata(e,t){return this.getMetadata(e).next((i=>(i.byteSize+=t,this.Dr(e,i))))}getEntry(e,t){let i=Mt.newInvalidDocument(t);return wa(e).ee({index:Dm,range:IDBKeyRange.only(gd(t))},((s,a)=>{i=this.Cr(t,a)})).next((()=>i))}vr(e,t){let i={size:0,document:Mt.newInvalidDocument(t)};return wa(e).ee({index:Dm,range:IDBKeyRange.only(gd(t))},((s,a)=>{i={document:this.Cr(t,a),size:fp(a)}})).next((()=>i))}getEntries(e,t){let i=di();return this.Fr(e,t,((s,a)=>{const l=this.Cr(s,a);i=i.insert(s,l)})).next((()=>i))}Mr(e,t){let i=di(),s=new Rt(ye.comparator);return this.Fr(e,t,((a,l)=>{const c=this.Cr(a,l);i=i.insert(a,c),s=s.insert(a,fp(l))})).next((()=>({documents:i,Or:s})))}Fr(e,t,i){if(t.isEmpty())return $.resolve();let s=new Et(EC);t.forEach((f=>s=s.add(f)));const a=IDBKeyRange.bound(gd(s.first()),gd(s.last())),l=s.getIterator();let c=l.getNext();return wa(e).ee({index:Dm,range:a},((f,h,_)=>{const E=ye.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;c&&EC(c,E)<0;)i(c,null),c=l.getNext();c&&c.isEqual(E)&&(i(c,h),c=l.hasNext()?l.getNext():null),c?_.j(gd(c)):_.done()})).next((()=>{for(;c;)i(c,null),c=l.hasNext()?l.getNext():null}))}getDocumentsMatchingQuery(e,t,i,s,a){const l=t.path,c=[l.popLast().toArray(),l.lastSegment(),cp(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],f=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return wa(e).J(IDBKeyRange.bound(c,f,!0)).next((h=>{a==null||a.incrementDocumentReadCount(h.length);let _=di();for(const E of h){const I=this.Cr(ye.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);I.isFoundDocument()&&(Pf(t,I)||s.has(I.key))&&(_=_.insert(I.key,I))}return _}))}getAllFromCollectionGroup(e,t,i,s){let a=di();const l=vC(t,i),c=vC(t,Ci.max());return wa(e).ee({index:wN,range:IDBKeyRange.bound(l,c,!0)},((f,h,_)=>{const E=this.Cr(ye.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);a=a.insert(E.key,E),a.size===s&&_.done()})).next((()=>a))}newChangeBuffer(e){return new jz(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return _C(e).get(ov).next((t=>(Ce(!!t,20021),t)))}Dr(e,t){return _C(e).put(ov,t)}Cr(e,t){if(t){const i=Nz(this.serializer,t);if(!(i.isNoDocument()&&i.version.isEqual(Ne.min())))return i}return Mt.newInvalidDocument(e)}}function U1(n){return new $z(n)}class jz extends O1{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Ns((i=>i.toString()),((i,s)=>i.isEqual(s)))}applyChanges(e){const t=[];let i=0,s=new Et(((a,l)=>Be(a.canonicalString(),l.canonicalString())));return this.changes.forEach(((a,l)=>{const c=this.Br.get(a);if(t.push(this.Nr.removeEntry(e,a,c.readTime)),l.isValidDocument()){const f=tC(this.Nr.serializer,l);s=s.add(a.path.popLast());const h=fp(f);i+=h-c.size,t.push(this.Nr.addEntry(e,a,f))}else if(i-=c.size,this.trackRemovals){const f=tC(this.Nr.serializer,l.convertToNoDocument(Ne.min()));t.push(this.Nr.addEntry(e,a,f))}})),s.forEach((a=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,a))})),t.push(this.Nr.updateMetadata(e,i)),$.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((i=>(this.Br.set(t,{size:i.size,readTime:i.document.readTime}),i.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:i,Or:s})=>(s.forEach(((a,l)=>{this.Br.set(a,{size:l,readTime:i.get(a).readTime})})),i)))}}function _C(n){return En(n,of)}function wa(n){return En(n,sp)}function gd(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function vC(n,e){const t=e.documentKey.path.toArray();return[n,cp(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function EC(n,e){const t=n.path.toArray(),i=e.path.toArray();let s=0;for(let a=0;a<t.length-2&&a<i.length-2;++a)if(s=Be(t[a],i[a]),s)return s;return s=Be(t.length,i.length),s||(s=Be(t[t.length-2],i[i.length-2]),s||Be(t[t.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kz{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e,t,i,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(i=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(i!==null&&Bd(i.mutation,s,ci.empty(),mt.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,$e()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=$e()){const s=zr();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,i).next((a=>{let l=wd();return a.forEach(((c,f)=>{l=l.insert(c,f.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const i=zr();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,$e())))}populateOverlays(e,t,i){const s=[];return i.forEach((a=>{t.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(e,s).next((a=>{a.forEach(((l,c)=>{t.set(l,c)}))}))}computeViews(e,t,i,s){let a=di();const l=qd(),c=(function(){return qd()})();return t.forEach(((f,h)=>{const _=i.get(h.key);s.has(h.key)&&(_===void 0||_.mutation instanceof Ps)?a=a.insert(h.key,h):_!==void 0?(l.set(h.key,_.mutation.getFieldMask()),Bd(_.mutation,h,_.mutation.getFieldMask(),mt.now())):l.set(h.key,ci.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((h,_)=>l.set(h,_))),t.forEach(((h,_)=>c.set(h,new Kz(_,l.get(h)??null)))),c)))}recalculateAndSaveOverlays(e,t){const i=qd();let s=new Rt(((l,c)=>l-c)),a=$e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const c of l)c.keys().forEach((f=>{const h=t.get(f);if(h===null)return;let _=i.get(f)||ci.empty();_=c.applyToLocalView(h,_),i.set(f,_);const E=(s.get(c.batchId)||$e()).add(f);s=s.insert(c.batchId,E)}))})).next((()=>{const l=[],c=s.getReverseIterator();for(;c.hasNext();){const f=c.getNext(),h=f.key,_=f.value,E=t1();_.forEach((I=>{if(!a.has(I)){const x=l1(t.get(I),i.get(I));x!==null&&E.set(I,x),a=a.add(I)}})),l.push(this.documentOverlayCache.saveOverlays(e,h,E))}return $.waitFor(l)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,s){return(function(l){return ye.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):L0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,s):this.getDocumentsMatchingCollectionQuery(e,t,i,s)}getNextDocuments(e,t,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,s).next((a=>{const l=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,s-a.size):$.resolve(zr());let c=xu,f=a;return l.next((h=>$.forEach(h,((_,E)=>(c<E.largestBatchId&&(c=E.largestBatchId),a.get(_)?$.resolve():this.remoteDocumentCache.getEntry(e,_).next((I=>{f=f.insert(_,I)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,f,h,$e()))).next((_=>({batchId:c,changes:e1(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next((i=>{let s=wd();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,s){const a=t.collectionGroup;let l=wd();return this.indexManager.getCollectionParents(e,a).next((c=>$.forEach(c,(f=>{const h=(function(E,I){return new Rs(I,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,i,s).next((_=>{_.forEach(((E,I)=>{l=l.insert(E,I)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,i,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,s)))).next((l=>{a.forEach(((f,h)=>{const _=h.getKey();l.get(_)===null&&(l=l.insert(_,Mt.newInvalidDocument(_)))}));let c=wd();return l.forEach(((f,h)=>{const _=a.get(f);_!==void 0&&Bd(_.mutation,h,ci.empty(),mt.now()),Pf(t,h)&&(c=c.insert(f,h))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yz{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return $.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:rn(s.createTime)}})(t)),$.resolve()}getNamedQuery(e,t){return $.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:$0(s.bundledQuery),readTime:rn(s.readTime)}})(t)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jz{constructor(){this.overlays=new Rt(ye.comparator),this.qr=new Map}getOverlay(e,t){return $.resolve(this.overlays.get(t))}getOverlays(e,t){const i=zr();return $.forEach(t,(s=>this.getOverlay(e,s).next((a=>{a!==null&&i.set(s,a)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((s,a)=>{this.St(e,t,a)})),$.resolve()}removeOverlaysForBatchId(e,t,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(i)),$.resolve()}getOverlaysForCollection(e,t,i){const s=zr(),a=t.length+1,l=new ye(t.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const f=c.getNext().value,h=f.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===a&&f.largestBatchId>i&&s.set(f.getKey(),f)}return $.resolve(s)}getOverlaysForCollectionGroup(e,t,i,s){let a=new Rt(((h,_)=>h-_));const l=this.overlays.getIterator();for(;l.hasNext();){const h=l.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>i){let _=a.get(h.largestBatchId);_===null&&(_=zr(),a=a.insert(h.largestBatchId,_)),_.set(h.getKey(),h)}}const c=zr(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((h,_)=>c.set(h,_))),!(c.size()>=s)););return $.resolve(c)}St(e,t,i){const s=this.overlays.get(i.key);if(s!==null){const l=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new G0(t,i));let a=this.qr.get(t);a===void 0&&(a=$e(),this.qr.set(t,a)),this.qr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wz{constructor(){this.sessionToken=Yt.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(){this.Qr=new Et(Sn.$r),this.Ur=new Et(Sn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new Sn(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new Sn(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new ye(new et([])),i=new Sn(t,e),s=new Sn(t,e+1),a=[];return this.Ur.forEachInRange([i,s],(l=>{this.Gr(l),a.push(l.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ye(new et([])),i=new Sn(t,e),s=new Sn(t,e+1);let a=$e();return this.Ur.forEachInRange([i,s],(l=>{a=a.add(l.key)})),a}containsKey(e){const t=new Sn(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Sn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ye.comparator(e.key,t.key)||Be(e.Yr,t.Yr)}static Kr(e,t){return Be(e.Yr,t.Yr)||ye.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qz{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Et(Sn.$r)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,s){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new q0(a,t,i,s);this.mutationQueue.push(l);for(const c of s)this.Zr=this.Zr.add(new Sn(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return $.resolve(l)}lookupMutationBatch(e,t){return $.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=this.ei(i),a=s<0?0:s;return $.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?xo:this.tr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Sn(t,0),s=new Sn(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([i,s],(l=>{const c=this.Xr(l.Yr);a.push(c)})),$.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Et(Be);return t.forEach((s=>{const a=new Sn(s,0),l=new Sn(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,l],(c=>{i=i.add(c.Yr)}))})),$.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1;let a=i;ye.isDocumentKey(a)||(a=a.child(""));const l=new Sn(new ye(a),0);let c=new Et(Be);return this.Zr.forEachWhile((f=>{const h=f.key.path;return!!i.isPrefixOf(h)&&(h.length===s&&(c=c.add(f.Yr)),!0)}),l),$.resolve(this.ti(c))}ti(e){const t=[];return e.forEach((i=>{const s=this.Xr(i);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){Ce(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return $.forEach(t.mutations,(s=>{const a=new Sn(s.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new Sn(t,0),s=this.Zr.firstAfterOrEqual(i);return $.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xz{constructor(e){this.ri=e,this.docs=(function(){return new Rt(ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,s=this.docs.get(i),a=s?s.size:0,l=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return $.resolve(i?i.document.mutableCopy():Mt.newInvalidDocument(t))}getEntries(e,t){let i=di();return t.forEach((s=>{const a=this.docs.get(s);i=i.insert(s,a?a.document.mutableCopy():Mt.newInvalidDocument(s))})),$.resolve(i)}getDocumentsMatchingQuery(e,t,i,s){let a=di();const l=t.path,c=new ye(l.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(c);for(;f.hasNext();){const{key:h,value:{document:_}}=f.getNext();if(!l.isPrefixOf(h.path))break;h.path.length>l.length+1||C0(yN(_),i)<=0||(s.has(_.key)||Pf(t,_))&&(a=a.insert(_.key,_.mutableCopy()))}return $.resolve(a)}getAllFromCollectionGroup(e,t,i,s){Se(9500)}ii(e,t){return $.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new Zz(this)}getSize(e){return $.resolve(this.size)}}class Zz extends O1{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(i)})),$.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e8{constructor(e){this.persistence=e,this.si=new Ns((t=>za(t)),Rf),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.oi=0,this._i=new Y0,this.targetCount=0,this.ai=Ya.ur()}forEachTarget(e,t){return this.si.forEach(((i,s)=>t(s))),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),$.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ya(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,$.resolve()}updateTargetData(e,t){return this.Pr(t),$.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,t,i){let s=0;const a=[];return this.si.forEach(((l,c)=>{c.sequenceNumber<=t&&i.get(c.targetId)===null&&(this.si.delete(l),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)})),$.waitFor(a).next((()=>s))}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return $.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),$.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach((l=>{a.push(s.markPotentiallyOrphaned(e,l))})),$.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),$.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return $.resolve(i)}containsKey(e,t){return $.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(e,t){this.ui={},this.overlays={},this.ci=new ui(0),this.li=!1,this.li=!0,this.hi=new Wz,this.referenceDelegate=e(this),this.Pi=new e8(this),this.indexManager=new Uz,this.remoteDocumentCache=(function(s){return new Xz(s)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new C1(t),this.Ii=new Yz(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Jz,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new Qz(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){fe("MemoryPersistence","Starting transaction:",e);const s=new t8(this.ci.next());return this.referenceDelegate.Ei(),i(s).next((a=>this.referenceDelegate.di(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Ai(e,t){return $.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class t8 extends vN{constructor(e){super(),this.currentSequenceNumber=e}}class Jp{constructor(e){this.persistence=e,this.Ri=new Y0,this.Vi=null}static mi(e){return new Jp(e)}get fi(){if(this.Vi)return this.Vi;throw Se(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),$.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),$.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),$.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((s=>this.fi.add(s.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((a=>this.fi.add(a.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.fi,(i=>{const s=ye.fromPath(i);return this.gi(e,s).next((a=>{a||t.removeEntry(s,Ne.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return $.or([()=>$.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class hp{constructor(e,t){this.persistence=e,this.pi=new Ns((i=>$n(i.path)),((i,s)=>i.isEqual(s))),this.garbageCollector=L1(this,t)}static mi(e,t){return new hp(e,t)}Ei(){}di(e){return $.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((s=>i+s))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return $.forEach(this.pi,((i,s)=>this.br(e,i,s).next((a=>a?$.resolve():t(s)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ii(e,(l=>this.br(e,l,t).next((c=>{c||(i++,a.removeEntry(l,Ne.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),$.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),$.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),$.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=km(e.data.value)),t}br(e,t,i){return $.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return $.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n8{constructor(e){this.serializer=e}k(e,t,i,s){const a=new Up("createOrUpgrade",t);i<1&&s>=1&&((function(f){f.createObjectStore(bf)})(e),(function(f){f.createObjectStore(sf,{keyPath:_G}),f.createObjectStore(rr,{keyPath:Px,autoIncrement:!0}).createIndex(Ma,Dx,{unique:!0}),f.createObjectStore(Cu)})(e),TC(e),(function(f){f.createObjectStore(xa)})(e));let l=$.resolve();return i<3&&s>=3&&(i!==0&&((function(f){f.deleteObjectStore(Ru),f.deleteObjectStore(bu),f.deleteObjectStore(Ua)})(e),TC(e)),l=l.next((()=>(function(f){const h=f.store(Ua),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ne.min().toTimestamp(),targetCount:0};return h.put(op,_)})(a)))),i<4&&s>=4&&(i!==0&&(l=l.next((()=>(function(f,h){return h.store(rr).J().next((E=>{f.deleteObjectStore(rr),f.createObjectStore(rr,{keyPath:Px,autoIncrement:!0}).createIndex(Ma,Dx,{unique:!0});const I=h.store(rr),x=E.map((k=>I.put(k)));return $.waitFor(x)}))})(e,a)))),l=l.next((()=>{(function(f){f.createObjectStore(Nu,{keyPath:CG})})(e)}))),i<5&&s>=5&&(l=l.next((()=>this.yi(a)))),i<6&&s>=6&&(l=l.next((()=>((function(f){f.createObjectStore(of)})(e),this.wi(a))))),i<7&&s>=7&&(l=l.next((()=>this.Si(a)))),i<8&&s>=8&&(l=l.next((()=>this.bi(e,a)))),i<9&&s>=9&&(l=l.next((()=>{(function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")})(e)}))),i<10&&s>=10&&(l=l.next((()=>this.Di(a)))),i<11&&s>=11&&(l=l.next((()=>{(function(f){f.createObjectStore(Fp,{keyPath:bG})})(e),(function(f){f.createObjectStore(qp,{keyPath:RG})})(e)}))),i<12&&s>=12&&(l=l.next((()=>{(function(f){const h=f.createObjectStore(Bp,{keyPath:LG});h.createIndex(lv,OG,{unique:!1}),h.createIndex(CN,UG,{unique:!1})})(e)}))),i<13&&s>=13&&(l=l.next((()=>(function(f){const h=f.createObjectStore(sp,{keyPath:EG});h.createIndex(Dm,TG),h.createIndex(wN,IG)})(e))).next((()=>this.Ci(e,a))).next((()=>e.deleteObjectStore(xa)))),i<14&&s>=14&&(l=l.next((()=>this.Fi(e,a)))),i<15&&s>=15&&(l=l.next((()=>(function(f){f.createObjectStore(N0,{keyPath:NG,autoIncrement:!0}).createIndex(av,PG,{unique:!1}),f.createObjectStore(Od,{keyPath:DG}).createIndex(AN,MG,{unique:!1}),f.createObjectStore(Ud,{keyPath:kG}).createIndex(xN,VG,{unique:!1})})(e)))),i<16&&s>=16&&(l=l.next((()=>{t.objectStore(Od).clear()})).next((()=>{t.objectStore(Ud).clear()}))),i<17&&s>=17&&(l=l.next((()=>{(function(f){f.createObjectStore(P0,{keyPath:FG})})(e)}))),i<18&&s>=18&&$b()&&(l=l.next((()=>{t.objectStore(Od).clear()})).next((()=>{t.objectStore(Ud).clear()}))),l}wi(e){let t=0;return e.store(xa).ee(((i,s)=>{t+=fp(s)})).next((()=>{const i={byteSize:t};return e.store(of).put(ov,i)}))}yi(e){const t=e.store(sf),i=e.store(rr);return t.J().next((s=>$.forEach(s,(a=>{const l=IDBKeyRange.bound([a.userId,xo],[a.userId,a.lastAcknowledgedBatchId]);return i.J(Ma,l).next((c=>$.forEach(c,(f=>{Ce(f.userId===a.userId,18650,"Cannot process batch from unexpected user",{batchId:f.batchId});const h=ba(this.serializer,f);return D1(e,a.userId,h).next((()=>{}))}))))}))))}Si(e){const t=e.store(Ru),i=e.store(xa);return e.store(Ua).get(op).next((s=>{const a=[];return i.ee(((l,c)=>{const f=new et(l),h=(function(E){return[0,$n(E)]})(f);a.push(t.get(h).next((_=>_?$.resolve():(E=>t.put({targetId:0,path:$n(E),sequenceNumber:s.highestListenSequenceNumber}))(f))))})).next((()=>$.waitFor(a)))}))}bi(e,t){e.createObjectStore(af,{keyPath:xG});const i=t.store(af),s=new K0,a=l=>{if(s.add(l)){const c=l.lastSegment(),f=l.popLast();return i.put({collectionId:c,parent:$n(f)})}};return t.store(xa).ee({X:!0},((l,c)=>{const f=new et(l);return a(f.popLast())})).next((()=>t.store(Cu).ee({X:!0},(([l,c,f],h)=>{const _=Gr(c);return a(_.popLast())}))))}Di(e){const t=e.store(bu);return t.ee(((i,s)=>{const a=Ad(s),l=b1(this.serializer,a);return t.put(l)}))}Ci(e,t){const i=t.store(xa),s=[];return i.ee(((a,l)=>{const c=t.store(sp),f=(function(E){return E.document?new ye(et.fromString(E.document.name).popFirst(5)):E.noDocument?ye.fromSegments(E.noDocument.path):E.unknownDocument?ye.fromSegments(E.unknownDocument.path):Se(36783)})(l).path.toArray(),h={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};s.push(c.put(h))})).next((()=>$.waitFor(s)))}Fi(e,t){const i=t.store(rr),s=U1(this.serializer),a=new J0(Jp.mi,this.serializer.yt);return i.J().next((l=>{const c=new Map;return l.forEach((f=>{let h=c.get(f.userId)??$e();ba(this.serializer,f).keys().forEach((_=>h=h.add(_))),c.set(f.userId,h)})),$.forEach(c,((f,h)=>{const _=new An(h),E=Kp.wt(this.serializer,_),I=a.getIndexManager(_),x=Yp.wt(_,this.serializer,I,a.referenceDelegate);return new F1(s,x,E,I).recalculateAndSaveOverlaysForDocumentKeys(new uv(t,ui.ce),f).next()}))}))}}function TC(n){n.createObjectStore(Ru,{keyPath:SG}).createIndex(R0,AG,{unique:!0}),n.createObjectStore(bu,{keyPath:"targetId"}).createIndex(SN,wG,{unique:!0}),n.createObjectStore(Ua)}const mo="IndexedDbPersistence",A_=18e5,x_=5e3,C_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",q1="main";class W0{constructor(e,t,i,s,a,l,c,f,h,_,E=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Mi=a,this.window=l,this.document=c,this.xi=h,this.Oi=_,this.Ni=E,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=I=>Promise.resolve(),!W0.v())throw new ae(Q.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Hz(this,s),this.$i=t+q1,this.serializer=new C1(f),this.Ui=new Hr(this.$i,this.Ni,new n8(this.serializer)),this.hi=new Dz,this.Pi=new qz(this.referenceDelegate,this.serializer),this.remoteDocumentCache=U1(this.serializer),this.Ii=new Pz,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,_===!1&&nn(mo,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ae(Q.FAILED_PRECONDITION,C_);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new ui(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>vm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Ho(e))return fe(mo,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return fe(mo,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return yd(e).get(Kl).next((t=>$.resolve(this.es(t))))}ts(e){return vm(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,A_)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const i=En(t,Nu);return i.J().next((s=>{const a=this.ss(s,A_),l=s.filter((c=>a.indexOf(c)===-1));return $.forEach(l,(c=>i.delete(c.clientId))).next((()=>l))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?$.resolve(!0):yd(e).get(Kl).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,x_)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new ae(Q.FAILED_PRECONDITION,C_);return!1}}return!(!this.networkEnabled||!this.inForeground)||vm(e).J().next((i=>this.ss(i,x_).find((s=>{if(this.clientId!==s.clientId){const a=!this.networkEnabled&&s.networkEnabled,l=!this.inForeground&&s.inForeground,c=this.networkEnabled===s.networkEnabled;if(a||l&&c)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&fe(mo,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[bf,Nu],(e=>{const t=new uv(e,ui.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((i=>this.rs(i.updateTimeMs,t)&&!this.us(i.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>vm(e).J().next((t=>this.ss(t,A_).map((i=>i.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return Yp.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Fz(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Kp.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,i){fe(mo,"Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",a=(function(f){return f===18?GG:f===17?PN:f===16?BG:f===15?D0:f===14?NN:f===13?RN:f===12?qG:f===11?bN:void Se(60245)})(this.Ni);let l;return this.Ui.runTransaction(e,s,a,(c=>(l=new uv(c,this.ci?this.ci.next():ui.ce),t==="readwrite-primary"?this.Hi(l).next((f=>!!f||this.Yi(l))).next((f=>{if(!f)throw nn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new ae(Q.FAILED_PRECONDITION,_N);return i(l)})).next((f=>this.Xi(l).next((()=>f)))):this.Is(l).next((()=>i(l)))))).then((c=>(l.raiseOnCommittedEvent(),c)))}Is(e){return yd(e).get(Kl).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,x_)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ae(Q.FAILED_PRECONDITION,C_)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return yd(e).put(Kl,t)}static v(){return Hr.v()}Zi(e){const t=yd(e);return t.get(Kl).next((i=>this.es(i)?(fe(mo,"Releasing primary lease."),t.delete(Kl)):$.resolve()))}rs(e,t){const i=Date.now();return!(e<i-t)&&(!(e>i)||(nn(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const t=/(?:Version|Mobile)\/1[456]/;Hb()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var t;try{const i=((t=this.Ki)==null?void 0:t.getItem(this._s(e)))!==null;return fe(mo,`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return nn(mo,"Failed to get zombied client id.",i),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){nn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function yd(n){return En(n,bf)}function vm(n){return En(n,Nu)}function Q0(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(e,t,i,s){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=s}static As(e,t){let i=$e(),s=$e();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new X0(e,t.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i8{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Hb()?8:EN(Ht())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,s){const a={result:null};return this.ys(e,t).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.ws(e,t,s,i).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;const l=new i8;return this.Ss(e,t,l).next((c=>{if(a.result=c,this.Vs)return this.bs(e,t,l,c.size)}))})).next((()=>a.result))}bs(e,t,i,s){return i.documentReadCount<this.fs?(Zl()<=Ze.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",eu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),$.resolve()):(Zl()<=Ze.DEBUG&&fe("QueryEngine","Query:",eu(t),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(Zl()<=Ze.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",eu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xn(t))):$.resolve())}ys(e,t){if($x(t))return $.resolve(null);let i=Xn(t);return this.indexManager.getIndexType(e,i).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=up(t,null,"F"),i=Xn(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const l=$e(...a);return this.ps.getDocuments(e,l).next((c=>this.indexManager.getMinOffset(e,i).next((f=>{const h=this.Ds(t,c);return this.Cs(t,h,l,f.readTime)?this.ys(e,up(t,null,"F")):this.vs(e,h,t,f)}))))})))))}ws(e,t,i,s){return $x(t)||s.isEqual(Ne.min())?$.resolve(null):this.ps.getDocuments(e,i).next((a=>{const l=this.Ds(t,a);return this.Cs(t,l,i,s)?$.resolve(null):(Zl()<=Ze.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),eu(t)),this.vs(e,l,t,gN(s,xu)).next((c=>c)))}))}Ds(e,t){let i=new Et(XN(e));return t.forEach(((s,a)=>{Pf(e,a)&&(i=i.add(a))})),i}Cs(e,t,i,s){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Ss(e,t,i){return Zl()<=Ze.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",eu(t)),this.ps.getDocumentsMatchingQuery(e,t,Ci.min(),i)}vs(e,t,i,s){return this.ps.getDocumentsMatchingQuery(e,i,s).next((a=>(t.forEach((l=>{a=a.insert(l.key,l)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0="LocalStore",r8=3e8;class s8{constructor(e,t,i,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new Rt(Be),this.xs=new Ns((a=>za(a)),Rf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new F1(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function G1(n,e,t,i){return new s8(n,e,t,i)}async function z1(n,e){const t=Ee(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let s;return t.mutationQueue.getAllMutationBatches(i).next((a=>(s=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((a=>{const l=[],c=[];let f=$e();for(const h of s){l.push(h.batchId);for(const _ of h.mutations)f=f.add(_.key)}for(const h of a){c.push(h.batchId);for(const _ of h.mutations)f=f.add(_.key)}return t.localDocuments.getDocuments(i,f).next((h=>({Ls:h,removedBatchIds:l,addedBatchIds:c})))}))}))}function o8(n,e){const t=Ee(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const s=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,f,h,_){const E=h.batch,I=E.keys();let x=$.resolve();return I.forEach((k=>{x=x.next((()=>_.getEntry(f,k))).next((V=>{const B=h.docVersions.get(k);Ce(B!==null,48541),V.version.compareTo(B)<0&&(E.applyToRemoteDocument(V,h),V.isValidDocument()&&(V.setReadTime(h.commitVersion),_.addEntry(V)))}))})),x.next((()=>c.mutationQueue.removeMutationBatch(f,E)))})(t,i,e,a).next((()=>a.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(c){let f=$e();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(f=f.add(c.batch.mutations[h].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(i,s)))}))}function H1(n){const e=Ee(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function a8(n,e){const t=Ee(n),i=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const l=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const c=[];e.targetChanges.forEach(((_,E)=>{const I=s.get(E);if(!I)return;c.push(t.Pi.removeMatchingKeys(a,_.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(a,_.addedDocuments,E))));let x=I.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?x=x.withResumeToken(Yt.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):_.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(_.resumeToken,i)),s=s.insert(E,x),(function(V,B,z){return V.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=r8?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0})(I,x,_)&&c.push(t.Pi.updateTargetData(a,x))}));let f=di(),h=$e();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(a,_))})),c.push($1(a,l,e.documentUpdates).next((_=>{f=_.ks,h=_.qs}))),!i.isEqual(Ne.min())){const _=t.Pi.getLastRemoteSnapshotVersion(a).next((E=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,i)));c.push(_)}return $.waitFor(c).next((()=>l.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,f,h))).next((()=>f))})).then((a=>(t.Ms=s,a)))}function $1(n,e,t){let i=$e(),s=$e();return t.forEach((a=>i=i.add(a))),e.getEntries(n,i).next((a=>{let l=di();return t.forEach(((c,f)=>{const h=a.get(c);f.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(c)),f.isNoDocument()&&f.version.isEqual(Ne.min())?(e.removeEntry(c,f.readTime),l=l.insert(c,f)):!h.isValidDocument()||f.version.compareTo(h.version)>0||f.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(f),l=l.insert(c,f)):fe(Z0,"Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",f.version)})),{ks:l,qs:s}}))}function l8(n,e){const t=Ee(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=xo),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function Ou(n,e){const t=Ee(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let s;return t.Pi.getTargetData(i,e).next((a=>a?(s=a,$.resolve(s)):t.Pi.allocateTargetId(i).next((l=>(s=new _s(e,l,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,s).next((()=>s)))))))})).then((i=>{const s=t.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function Uu(n,e,t){const i=Ee(n),s=i.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,(l=>i.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!Ho(l))throw l;fe(Z0,`Failed to update sequence numbers for target ${e}: ${l}`)}i.Ms=i.Ms.remove(e),i.xs.delete(s.target)}function mp(n,e,t){const i=Ee(n);let s=Ne.min(),a=$e();return i.persistence.runTransaction("Execute query","readwrite",(l=>(function(f,h,_){const E=Ee(f),I=E.xs.get(_);return I!==void 0?$.resolve(E.Ms.get(I)):E.Pi.getTargetData(h,_)})(i,l,Xn(e)).next((c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(l,c.targetId).next((f=>{a=f}))})).next((()=>i.Fs.getDocumentsMatchingQuery(l,e,t?s:Ne.min(),t?a:$e()))).next((c=>(Y1(i,QN(e),c),{documents:c,Qs:a})))))}function j1(n,e){const t=Ee(n),i=Ee(t.Pi),s=t.Ms.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",(a=>i.At(a,e).next((l=>l?l.target:null))))}function K1(n,e){const t=Ee(n),i=t.Os.get(e)||Ne.min();return t.persistence.runTransaction("Get new document changes","readonly",(s=>t.Ns.getAllFromCollectionGroup(s,e,gN(i,xu),Number.MAX_SAFE_INTEGER))).then((s=>(Y1(t,e,s),s)))}function Y1(n,e,t){let i=n.Os.get(e)||Ne.min();t.forEach(((s,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),n.Os.set(e,i)}async function u8(n,e,t,i){const s=Ee(n);let a=$e(),l=di();for(const h of t){const _=e.$s(h.metadata.name);h.document&&(a=a.add(_));const E=e.Us(h);E.setReadTime(e.Ks(h.metadata.readTime)),l=l.insert(_,E)}const c=s.Ns.newChangeBuffer({trackRemovals:!0}),f=await Ou(s,(function(_){return Xn(Zu(et.fromString(`__bundle__/docs/${_}`)))})(i));return s.persistence.runTransaction("Apply bundle documents","readwrite",(h=>$1(h,c,l).next((_=>(c.apply(h),_))).next((_=>s.Pi.removeMatchingKeysForTargetId(h,f.targetId).next((()=>s.Pi.addMatchingKeys(h,a,f.targetId))).next((()=>s.localDocuments.getLocalViewOfDocuments(h,_.ks,_.qs))).next((()=>_.ks))))))}async function c8(n,e,t=$e()){const i=await Ou(n,Xn($0(e.bundledQuery))),s=Ee(n);return s.persistence.runTransaction("Save named query","readwrite",(a=>{const l=rn(e.readTime);if(i.snapshotVersion.compareTo(l)>=0)return s.Ii.saveNamedQuery(a,e);const c=i.withResumeToken(Yt.EMPTY_BYTE_STRING,l);return s.Ms=s.Ms.insert(c.targetId,c),s.Pi.updateTargetData(a,c).next((()=>s.Pi.removeMatchingKeysForTargetId(a,i.targetId))).next((()=>s.Pi.addMatchingKeys(a,t,i.targetId))).next((()=>s.Ii.saveNamedQuery(a,e)))}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1="firestore_clients";function IC(n,e){return`${J1}_${n}_${e}`}const W1="firestore_mutations";function wC(n,e,t){let i=`${W1}_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}const Q1="firestore_targets";function b_(n,e){return`${Q1}_${n}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kr="SharedClientState";class pp{constructor(e,t,i,s){this.user=e,this.batchId=t,this.state=i,this.error=s}static Ws(e,t,i){const s=JSON.parse(i);let a,l=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return l&&s.error&&(l=typeof s.error.message=="string"&&typeof s.error.code=="string",l&&(a=new ae(s.error.code,s.error.message))),l?new pp(e,t,s.state,a):(nn(kr,`Failed to parse mutation state for ID '${t}': ${i}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gd{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Ws(e,t){const i=JSON.parse(t);let s,a=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return a&&i.error&&(a=typeof i.error.message=="string"&&typeof i.error.code=="string",a&&(s=new ae(i.error.code,i.error.message))),a?new Gd(e,i.state,s):(nn(kr,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class gp{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const i=JSON.parse(t);let s=typeof i=="object"&&i.activeTargetIds instanceof Array,a=O0();for(let l=0;s&&l<i.activeTargetIds.length;++l)s=TN(i.activeTargetIds[l]),a=a.add(i.activeTargetIds[l]);return s?new gp(e,a):(nn(kr,`Failed to parse client data for instance '${e}': ${t}`),null)}}class eE{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new eE(t.clientId,t.onlineState):(nn(kr,`Failed to parse online state: ${e}`),null)}}class Sv{constructor(){this.activeTargetIds=O0()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class R_{constructor(e,t,i,s,a){this.window=e,this.Mi=t,this.persistenceKey=i,this.Js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new Rt(Be),this.started=!1,this.Xs=[];const l=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.eo=IC(this.persistenceKey,this.Js),this.no=(function(f){return`firestore_sequence_number_${f}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Sv),this.ro=new RegExp(`^${J1}_${l}_([^_]*)$`),this.io=new RegExp(`^${W1}_${l}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${Q1}_${l}_(\\d+)$`),this.oo=(function(f){return`firestore_online_state_${f}`})(this.persistenceKey),this._o=(function(f){return`firestore_bundle_loaded_v2_${f}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const i of e){if(i===this.Js)continue;const s=this.getItem(IC(this.persistenceKey,i));if(s){const a=gp.Ws(i,s);a&&(this.Zs=this.Zs.insert(a.clientId,a))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const i=this.uo(t);i&&this.co(i)}for(const i of this.Xs)this.Ys(i);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((i,s)=>{s.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,i){this.ho(e,t,i),this.Po(e)}addLocalQueryTarget(e,t=!0){let i="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(b_(this.persistenceKey,e));if(s){const a=Gd.Ws(e,s);a&&(i=a.state)}}return t&&this.To.zs(e),this.ao(),i}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(b_(this.persistenceKey,e))}updateQueryState(e,t,i){this.Io(e,t,i)}handleUserChange(e,t,i){t.forEach((s=>{this.Po(s)})),this.currentUser=e,i.forEach((s=>{this.addPendingMutation(s)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return fe(kr,"READ",e,t),t}setItem(e,t){fe(kr,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){fe(kr,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(fe(kr,"EVENT",t.key,t.newValue),t.key===this.eo)return void nn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const i=this.Ro(t.key);return this.Vo(i,null)}{const i=this.mo(t.key,t.newValue);if(i)return this.Vo(i.clientId,i)}}else if(this.io.test(t.key)){if(t.newValue!==null){const i=this.fo(t.key,t.newValue);if(i)return this.po(i)}}else if(this.so.test(t.key)){if(t.newValue!==null){const i=this.yo(t.key,t.newValue);if(i)return this.wo(i)}}else if(t.key===this.oo){if(t.newValue!==null){const i=this.uo(t.newValue);if(i)return this.co(i)}}else if(t.key===this.no){const i=(function(a){let l=ui.ce;if(a!=null)try{const c=JSON.parse(a);Ce(typeof c=="number",30636,{So:a}),l=c}catch(c){nn(kr,"Failed to read sequence number from WebStorage",c)}return l})(t.newValue);i!==ui.ce&&this.sequenceNumberHandler(i)}else if(t.key===this._o){const i=this.bo(t.newValue);await Promise.all(i.map((s=>this.syncEngine.Do(s))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,i){const s=new pp(this.currentUser,e,t,i),a=wC(this.persistenceKey,this.currentUser,e);this.setItem(a,s.Gs())}Po(e){const t=wC(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,i){const s=b_(this.persistenceKey,e),a=new Gd(e,t,i);this.setItem(s,a.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const i=this.Ro(e);return gp.Ws(i,t)}fo(e,t){const i=this.io.exec(e),s=Number(i[1]),a=i[2]!==void 0?i[2]:null;return pp.Ws(new An(a),s,t)}yo(e,t){const i=this.so.exec(e),s=Number(i[1]);return Gd.Ws(s,t)}uo(e){return eE.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);fe(kr,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const i=t?this.Zs.insert(e,t):this.Zs.remove(e),s=this.lo(this.Zs),a=this.lo(i),l=[],c=[];return a.forEach((f=>{s.has(f)||l.push(f)})),s.forEach((f=>{a.has(f)||c.push(f)})),this.syncEngine.Fo(l,c).then((()=>{this.Zs=i}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=O0();return e.forEach(((i,s)=>{t=t.unionWith(s.activeTargetIds)})),t}}class X1{constructor(){this.Mo=new Sv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Sv,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d8{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC="ConnectivityMonitor";class AC{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){fe(SC,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){fe(SC,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Em=null;function Av(){return Em===null?Em=(function(){return 268435456+Math.round(2147483648*Math.random())})():Em++,"0x"+Em.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N_="RestConnection",f8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class h8{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===cv?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(e,t,i,s,a){const l=Av(),c=this.zo(e,t.toUriEncodedString());fe(N_,`Sending RPC '${e}' ${l}:`,c,i);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,s,a);const{host:h}=new URL(c),_=Ku(h);return this.Jo(e,c,f,i,_).then((E=>(fe(N_,`Received RPC '${e}' ${l}: `,E),E)),(E=>{throw Wr(N_,`RPC '${e}' ${l} failed with error: `,E,"url: ",c,"request:",i),E}))}Ho(e,t,i,s,a,l){return this.Go(e,t,i,s,a)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Xu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,a)=>e[a]=s)),i&&i.headers.forEach(((s,a)=>e[a]=s))}zo(e,t){const i=f8[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m8{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bn="WebChannelConnection";class p8 extends h8{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,s,a){const l=Av();return new Promise(((c,f)=>{const h=new sN;h.setWithCredentials(!0),h.listenOnce(oN.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Rm.NO_ERROR:const E=h.getResponseJson();fe(Bn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(E)),c(E);break;case Rm.TIMEOUT:fe(Bn,`RPC '${e}' ${l} timed out`),f(new ae(Q.DEADLINE_EXCEEDED,"Request time out"));break;case Rm.HTTP_ERROR:const I=h.getStatus();if(fe(Bn,`RPC '${e}' ${l} failed with status:`,I,"response text:",h.getResponseText()),I>0){let x=h.getResponseJson();Array.isArray(x)&&(x=x[0]);const k=x==null?void 0:x.error;if(k&&k.status&&k.message){const V=(function(z){const G=z.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(G)>=0?G:Q.UNKNOWN})(k.status);f(new ae(V,k.message))}else f(new ae(Q.UNKNOWN,"Server responded with status "+h.getStatus()))}else f(new ae(Q.UNAVAILABLE,"Connection failed."));break;default:Se(9055,{l_:e,streamId:l,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{fe(Bn,`RPC '${e}' ${l} completed.`)}}));const _=JSON.stringify(s);fe(Bn,`RPC '${e}' ${l} sending request:`,s),h.send(t,"POST",_,i,15)}))}T_(e,t,i){const s=Av(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=uN(),c=lN(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(f.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,t,i),f.encodeInitMessageHeaders=!0;const _=a.join("");fe(Bn,`Creating RPC '${e}' stream ${s}: ${_}`,f);const E=l.createWebChannel(_,f);this.I_(E);let I=!1,x=!1;const k=new m8({Yo:B=>{x?fe(Bn,`Not sending because RPC '${e}' stream ${s} is closed:`,B):(I||(fe(Bn,`Opening RPC '${e}' stream ${s} transport.`),E.open(),I=!0),fe(Bn,`RPC '${e}' stream ${s} sending:`,B),E.send(B))},Zo:()=>E.close()}),V=(B,z,G)=>{B.listen(z,(J=>{try{G(J)}catch(se){setTimeout((()=>{throw se}),0)}}))};return V(E,Id.EventType.OPEN,(()=>{x||(fe(Bn,`RPC '${e}' stream ${s} transport opened.`),k.o_())})),V(E,Id.EventType.CLOSE,(()=>{x||(x=!0,fe(Bn,`RPC '${e}' stream ${s} transport closed`),k.a_(),this.E_(E))})),V(E,Id.EventType.ERROR,(B=>{x||(x=!0,Wr(Bn,`RPC '${e}' stream ${s} transport errored. Name:`,B.name,"Message:",B.message),k.a_(new ae(Q.UNAVAILABLE,"The operation could not be completed")))})),V(E,Id.EventType.MESSAGE,(B=>{var z;if(!x){const G=B.data[0];Ce(!!G,16349);const J=G,se=(J==null?void 0:J.error)||((z=J[0])==null?void 0:z.error);if(se){fe(Bn,`RPC '${e}' stream ${s} received error:`,se);const de=se.status;let le=(function(R){const D=mn[R];if(D!==void 0)return d1(D)})(de),N=se.message;le===void 0&&(le=Q.INTERNAL,N="Unknown error status: "+de+" with message "+se.message),x=!0,k.a_(new ae(le,N)),E.close()}else fe(Bn,`RPC '${e}' stream ${s} received:`,G),k.u_(G)}})),V(c,aN.STAT_EVENT,(B=>{B.stat===iv.PROXY?fe(Bn,`RPC '${e}' stream ${s} detected buffering proxy`):B.stat===iv.NOPROXY&&fe(Bn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{k.__()}),0),k}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z1(){return typeof window<"u"?window:null}function Fm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vf(n){return new Ez(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(e,t,i=1e3,s=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=s,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-i);s>0&&fe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC="PersistentStream";class eP{constructor(e,t,i,s,a,l,c,f){this.Mi=e,this.S_=i,this.b_=s,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new tE(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Q.RESOURCE_EXHAUSTED?(nn(t.toString()),nn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,s])=>{this.D_===t&&this.G_(i,s)}),(i=>{e((()=>{const s=new ae(Q.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{i((()=>this.z_(s)))})),this.stream.onMessage((s=>{i((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return fe(xC,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(fe(xC,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class g8 extends eP{constructor(e,t,i,s,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,s,l),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=wz(this.serializer,e),i=(function(a){if(!("targetChange"in a))return Ne.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Ne.min():l.readTime?rn(l.readTime):Ne.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=vv(this.serializer),t.addTarget=(function(a,l){let c;const f=l.target;if(c=ap(f)?{documents:T1(a,f)}:{query:I1(a,f).ft},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=p1(a,l.resumeToken);const h=yv(a,l.expectedCount);h!==null&&(c.expectedCount=h)}else if(l.snapshotVersion.compareTo(Ne.min())>0){c.readTime=Lu(a,l.snapshotVersion.toTimestamp());const h=yv(a,l.expectedCount);h!==null&&(c.expectedCount=h)}return c})(this.serializer,e);const i=Az(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=vv(this.serializer),t.removeTarget=e,this.q_(t)}}class y8 extends eP{constructor(e,t,i,s,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,s,l),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ce(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ce(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ce(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=Sz(e.writeResults,e.commitTime),i=rn(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=vv(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>hf(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _8{}class v8 extends _8{constructor(e,t,i,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ae(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Go(e,_v(t,i),s,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ae(Q.UNKNOWN,a.toString())}))}Ho(e,t,i,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Ho(e,_v(t,i),s,l,c,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ae(Q.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class E8{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(nn(t),this.aa=!1):fe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ja="RemoteStore";class T8{constructor(e,t,i,s,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((l=>{i.enqueueAndForget((async()=>{jo(this)&&(fe(Ja,"Restarting streams for network reachability change."),await(async function(f){const h=Ee(f);h.Ea.add(4),await nc(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Lf(h)})(this))}))})),this.Ra=new E8(i,s)}}async function Lf(n){if(jo(n))for(const e of n.da)await e(!0)}async function nc(n){for(const e of n.da)await e(!1)}function Wp(n,e){const t=Ee(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),rE(t)?iE(t):rc(t).O_()&&nE(t,e))}function Fu(n,e){const t=Ee(n),i=rc(t);t.Ia.delete(e),i.O_()&&tP(t,e),t.Ia.size===0&&(i.O_()?i.L_():jo(t)&&t.Ra.set("Unknown"))}function nE(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ne.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}rc(n).Y_(e)}function tP(n,e){n.Va.Ue(e),rc(n).Z_(e)}function iE(n){n.Va=new gz({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),rc(n).start(),n.Ra.ua()}function rE(n){return jo(n)&&!rc(n).x_()&&n.Ia.size>0}function jo(n){return Ee(n).Ea.size===0}function nP(n){n.Va=void 0}async function I8(n){n.Ra.set("Online")}async function w8(n){n.Ia.forEach(((e,t)=>{nE(n,e)}))}async function S8(n,e){nP(n),rE(n)?(n.Ra.ha(e),iE(n)):n.Ra.set("Unknown")}async function A8(n,e,t){if(n.Ra.set("Online"),e instanceof m1&&e.state===2&&e.cause)try{await(async function(s,a){const l=a.cause;for(const c of a.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,l),s.Ia.delete(c),s.Va.removeTarget(c))})(n,e)}catch(i){fe(Ja,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await yp(n,i)}else if(e instanceof Om?n.Va.Ze(e):e instanceof h1?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ne.min()))try{const i=await H1(n.localStore);t.compareTo(i)>=0&&await(function(a,l){const c=a.Va.Tt(l);return c.targetChanges.forEach(((f,h)=>{if(f.resumeToken.approximateByteSize()>0){const _=a.Ia.get(h);_&&a.Ia.set(h,_.withResumeToken(f.resumeToken,l))}})),c.targetMismatches.forEach(((f,h)=>{const _=a.Ia.get(f);if(!_)return;a.Ia.set(f,_.withResumeToken(Yt.EMPTY_BYTE_STRING,_.snapshotVersion)),tP(a,f);const E=new _s(_.target,f,h,_.sequenceNumber);nE(a,E)})),a.remoteSyncer.applyRemoteEvent(c)})(n,t)}catch(i){fe(Ja,"Failed to raise snapshot:",i),await yp(n,i)}}async function yp(n,e,t){if(!Ho(e))throw e;n.Ea.add(1),await nc(n),n.Ra.set("Offline"),t||(t=()=>H1(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{fe(Ja,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Lf(n)}))}function iP(n,e){return e().catch((t=>yp(n,t,e)))}async function ic(n){const e=Ee(n),t=Oo(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:xo;for(;x8(e);)try{const s=await l8(e.localStore,i);if(s===null){e.Ta.length===0&&t.L_();break}i=s.batchId,C8(e,s)}catch(s){await yp(e,s)}rP(e)&&sP(e)}function x8(n){return jo(n)&&n.Ta.length<10}function C8(n,e){n.Ta.push(e);const t=Oo(n);t.O_()&&t.X_&&t.ea(e.mutations)}function rP(n){return jo(n)&&!Oo(n).x_()&&n.Ta.length>0}function sP(n){Oo(n).start()}async function b8(n){Oo(n).ra()}async function R8(n){const e=Oo(n);for(const t of n.Ta)e.ea(t.mutations)}async function N8(n,e,t){const i=n.Ta.shift(),s=B0.from(i,e,t);await iP(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await ic(n)}async function P8(n,e){e&&Oo(n).X_&&await(async function(i,s){if((function(l){return c1(l)&&l!==Q.ABORTED})(s.code)){const a=i.Ta.shift();Oo(i).B_(),await iP(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,s))),await ic(i)}})(n,e),rP(n)&&sP(n)}async function CC(n,e){const t=Ee(n);t.asyncQueue.verifyOperationInProgress(),fe(Ja,"RemoteStore received new credentials");const i=jo(t);t.Ea.add(3),await nc(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Lf(t)}async function xv(n,e){const t=Ee(n);e?(t.Ea.delete(2),await Lf(t)):e||(t.Ea.add(2),await nc(t),t.Ra.set("Unknown"))}function rc(n){return n.ma||(n.ma=(function(t,i,s){const a=Ee(t);return a.sa(),new g8(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Xo:I8.bind(null,n),t_:w8.bind(null,n),r_:S8.bind(null,n),H_:A8.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),rE(n)?iE(n):n.Ra.set("Unknown")):(await n.ma.stop(),nP(n))}))),n.ma}function Oo(n){return n.fa||(n.fa=(function(t,i,s){const a=Ee(t);return a.sa(),new y8(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:b8.bind(null,n),r_:P8.bind(null,n),ta:R8.bind(null,n),na:N8.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await ic(n)):(await n.fa.stop(),n.Ta.length>0&&(fe(Ja,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(e,t,i,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=s,this.removalCallback=a,this.deferred=new Un,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,s,a){const l=Date.now()+i,c=new sE(e,t,l,s,a);return c.start(i),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sc(n,e){if(nn("AsyncQueue",`${e}: ${n}`),Ho(n))return new ae(Q.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{static emptySet(e){return new _u(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||ye.comparator(t.key,i.key):(t,i)=>ye.comparator(t.key,i.key),this.keyedMap=wd(),this.sortedSet=new Rt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof _u)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=i.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new _u;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(){this.ga=new Rt(ye.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Se(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class qu{constructor(e,t,i,s,a,l,c,f,h){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=f,this.hasCachedResults=h}static fromInitialDocuments(e,t,i,s,a){const l=[];return t.forEach((c=>{l.push({type:0,doc:c})})),new qu(e,t,_u.emptySet(t),l,i,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==i[s].type||!t[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D8{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class M8{constructor(){this.queries=RC(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const s=Ee(t),a=s.queries;s.queries=RC(),a.forEach(((l,c)=>{for(const f of c.Sa)f.onError(i)}))})(this,new ae(Q.ABORTED,"Firestore shutting down"))}}function RC(){return new Ns((n=>WN(n)),Nf)}async function oE(n,e){const t=Ee(n);let i=3;const s=e.query;let a=t.queries.get(s);a?!a.ba()&&e.Da()&&(i=2):(a=new D8,i=e.Da()?0:1);try{switch(i){case 0:a.wa=await t.onListen(s,!0);break;case 1:a.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(l){const c=sc(l,`Initialization of query '${eu(e.query)}' failed`);return void e.onError(c)}t.queries.set(s,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&lE(t)}async function aE(n,e){const t=Ee(n),i=e.query;let s=3;const a=t.queries.get(i);if(a){const l=a.Sa.indexOf(e);l>=0&&(a.Sa.splice(l,1),a.Sa.length===0?s=e.Da()?0:1:!a.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function k8(n,e){const t=Ee(n);let i=!1;for(const s of e){const a=s.query,l=t.queries.get(a);if(l){for(const c of l.Sa)c.Fa(s)&&(i=!0);l.wa=s}}i&&lE(t)}function V8(n,e,t){const i=Ee(n),s=i.queries.get(e);if(s)for(const a of s.Sa)a.onError(t);i.queries.delete(e)}function lE(n){n.Ca.forEach((e=>{e.next()}))}var Cv,NC;(NC=Cv||(Cv={})).Ma="default",NC.Cache="cache";class uE{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new qu(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=qu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Cv.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L8{constructor(e,t){this.Qa=e,this.byteLength=t}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e){this.serializer=e}$s(e){return $r(this.serializer,e)}Us(e){return e.metadata.exists?E1(this.serializer,e.document,!1):Mt.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return rn(e)}}class O8{constructor(e,t){this.Ua=e,this.serializer=t,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=oP(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++t;const i=et.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,{...this.progress}):null}za(e){const t=new Map,i=new PC(this.serializer);for(const s of e)if(s.metadata.queries){const a=i.$s(s.metadata.name);for(const l of s.metadata.queries){const c=(t.get(l)||$e()).add(a);t.set(l,c)}}return t}async ja(e){const t=await u8(e,new PC(this.serializer),this.Wa,this.Ua.id),i=this.za(this.documents);for(const s of this.Ka)await c8(e,s,i.get(s.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:t}}}function oP(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e){this.key=e}}class lP{constructor(e){this.key=e}}class uP{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=$e(),this.mutatedKeys=$e(),this.eu=XN(e),this.tu=new _u(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new bC,s=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,l=s,c=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((_,E)=>{const I=s.get(_),x=Pf(this.query,E)?E:null,k=!!I&&this.mutatedKeys.has(I.key),V=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let B=!1;I&&x?I.data.isEqual(x.data)?k!==V&&(i.track({type:3,doc:x}),B=!0):this.su(I,x)||(i.track({type:2,doc:x}),B=!0,(f&&this.eu(x,f)>0||h&&this.eu(x,h)<0)&&(c=!0)):!I&&x?(i.track({type:0,doc:x}),B=!0):I&&!x&&(i.track({type:1,doc:I}),B=!0,(f||h)&&(c=!0)),B&&(x?(l=l.add(x),a=V?a.add(_):a.delete(_)):(l=l.delete(_),a=a.delete(_)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const _=this.query.limitType==="F"?l.last():l.first();l=l.delete(_.key),a=a.delete(_.key),i.track({type:1,doc:_})}return{tu:l,iu:i,Cs:c,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,s){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((_,E)=>(function(x,k){const V=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se(20277,{Rt:B})}};return V(x)-V(k)})(_.type,E.type)||this.eu(_.doc,E.doc))),this.ou(i),s=s??!1;const c=t&&!s?this._u():[],f=this.Xa.size===0&&this.current&&!s?1:0,h=f!==this.Za;return this.Za=f,l.length!==0||h?{snapshot:new qu(this.query,e.tu,a,l,e.mutatedKeys,f===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new bC,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=$e(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new lP(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new aP(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=$e();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return qu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ko="SyncEngine";class U8{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class F8{constructor(e){this.key=e,this.hu=!1}}class q8{constructor(e,t,i,s,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Ns((c=>WN(c)),Nf),this.Iu=new Map,this.Eu=new Set,this.du=new Rt(ye.comparator),this.Au=new Map,this.Ru=new Y0,this.Vu={},this.mu=new Map,this.fu=Ya.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function B8(n,e,t=!0){const i=Qp(n);let s;const a=i.Tu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await cP(i,e,t,!0),s}async function G8(n,e){const t=Qp(n);await cP(t,e,!0,!1)}async function cP(n,e,t,i){const s=await Ou(n.localStore,Xn(e)),a=s.targetId,l=n.sharedClientState.addLocalQueryTarget(a,t);let c;return i&&(c=await cE(n,e,a,l==="current",s.resumeToken)),n.isPrimaryClient&&t&&Wp(n.remoteStore,s),c}async function cE(n,e,t,i,s){n.pu=(E,I,x)=>(async function(V,B,z,G){let J=B.view.ru(z);J.Cs&&(J=await mp(V.localStore,B.query,!1).then((({documents:N})=>B.view.ru(N,J))));const se=G&&G.targetChanges.get(B.targetId),de=G&&G.targetMismatches.get(B.targetId)!=null,le=B.view.applyChanges(J,V.isPrimaryClient,se,de);return bv(V,B.targetId,le.au),le.snapshot})(n,E,I,x);const a=await mp(n.localStore,e,!0),l=new uP(e,a.Qs),c=l.ru(a.documents),f=kf.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",s),h=l.applyChanges(c,n.isPrimaryClient,f);bv(n,t,h.au);const _=new U8(e,t,l);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),h.snapshot}async function z8(n,e,t){const i=Ee(n),s=i.Tu.get(e),a=i.Iu.get(s.targetId);if(a.length>1)return i.Iu.set(s.targetId,a.filter((l=>!Nf(l,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Uu(i.localStore,s.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(s.targetId),t&&Fu(i.remoteStore,s.targetId),Bu(i,s.targetId)})).catch(zo)):(Bu(i,s.targetId),await Uu(i.localStore,s.targetId,!0))}async function H8(n,e){const t=Ee(n),i=t.Tu.get(e),s=t.Iu.get(i.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Fu(t.remoteStore,i.targetId))}async function $8(n,e,t){const i=mE(n);try{const s=await(function(l,c){const f=Ee(l),h=mt.now(),_=c.reduce(((x,k)=>x.add(k.key)),$e());let E,I;return f.persistence.runTransaction("Locally write mutations","readwrite",(x=>{let k=di(),V=$e();return f.Ns.getEntries(x,_).next((B=>{k=B,k.forEach(((z,G)=>{G.isValidDocument()||(V=V.add(z))}))})).next((()=>f.localDocuments.getOverlayedDocuments(x,k))).next((B=>{E=B;const z=[];for(const G of c){const J=hz(G,E.get(G.key).overlayedDocument);J!=null&&z.push(new Ps(G.key,J,BN(J.value.mapValue),Bt.exists(!0)))}return f.mutationQueue.addMutationBatch(x,h,z,c)})).next((B=>{I=B;const z=B.applyToLocalDocumentSet(E,V);return f.documentOverlayCache.saveOverlays(x,B.batchId,z)}))})).then((()=>({batchId:I.batchId,changes:e1(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),(function(l,c,f){let h=l.Vu[l.currentUser.toKey()];h||(h=new Rt(Be)),h=h.insert(c,f),l.Vu[l.currentUser.toKey()]=h})(i,s.batchId,t),await Ds(i,s.changes),await ic(i.remoteStore)}catch(s){const a=sc(s,"Failed to persist write");t.reject(a)}}async function dP(n,e){const t=Ee(n);try{const i=await a8(t.localStore,e);e.targetChanges.forEach(((s,a)=>{const l=t.Au.get(a);l&&(Ce(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?Ce(l.hu,14607):s.removedDocuments.size>0&&(Ce(l.hu,42227),l.hu=!1))})),await Ds(t,i,e)}catch(i){await zo(i)}}function DC(n,e,t){const i=Ee(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const s=[];i.Tu.forEach(((a,l)=>{const c=l.view.va(e);c.snapshot&&s.push(c.snapshot)})),(function(l,c){const f=Ee(l);f.onlineState=c;let h=!1;f.queries.forEach(((_,E)=>{for(const I of E.Sa)I.va(c)&&(h=!0)})),h&&lE(f)})(i.eventManager,e),s.length&&i.Pu.H_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function j8(n,e,t){const i=Ee(n);i.sharedClientState.updateQueryState(e,"rejected",t);const s=i.Au.get(e),a=s&&s.key;if(a){let l=new Rt(ye.comparator);l=l.insert(a,Mt.newNoDocument(a,Ne.min()));const c=$e().add(a),f=new Mf(Ne.min(),new Map,new Rt(Be),l,c);await dP(i,f),i.du=i.du.remove(a),i.Au.delete(e),hE(i)}else await Uu(i.localStore,e,!1).then((()=>Bu(i,e,t))).catch(zo)}async function K8(n,e){const t=Ee(n),i=e.batch.batchId;try{const s=await o8(t.localStore,e);fE(t,i,null),dE(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Ds(t,s)}catch(s){await zo(s)}}async function Y8(n,e,t){const i=Ee(n);try{const s=await(function(l,c){const f=Ee(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let _;return f.mutationQueue.lookupMutationBatch(h,c).next((E=>(Ce(E!==null,37113),_=E.keys(),f.mutationQueue.removeMutationBatch(h,E)))).next((()=>f.mutationQueue.performConsistencyCheck(h))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(h,_,c))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,_))).next((()=>f.localDocuments.getDocuments(h,_)))}))})(i.localStore,e);fE(i,e,t),dE(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Ds(i,s)}catch(s){await zo(s)}}async function J8(n,e){const t=Ee(n);jo(t.remoteStore)||fe(Ko,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=await(function(l){const c=Ee(l);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(f=>c.mutationQueue.getHighestUnacknowledgedBatchId(f)))})(t.localStore);if(i===xo)return void e.resolve();const s=t.mu.get(i)||[];s.push(e),t.mu.set(i,s)}catch(i){const s=sc(i,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function dE(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function fE(n,e,t){const i=Ee(n);let s=i.Vu[i.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),i.Vu[i.currentUser.toKey()]=s}}function Bu(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||fP(n,i)}))}function fP(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Fu(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),hE(n))}function bv(n,e,t){for(const i of t)i instanceof aP?(n.Ru.addReference(i.key,e),W8(n,i)):i instanceof lP?(fe(Ko,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||fP(n,i.key)):Se(19791,{wu:i})}function W8(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(fe(Ko,"New document in limbo: "+t),n.Eu.add(i),hE(n))}function hE(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ye(et.fromString(e)),i=n.fu.next();n.Au.set(i,new F8(t)),n.du=n.du.insert(t,i),Wp(n.remoteStore,new _s(Xn(Zu(t.path)),i,"TargetPurposeLimboResolution",ui.ce))}}async function Ds(n,e,t){const i=Ee(n),s=[],a=[],l=[];i.Tu.isEmpty()||(i.Tu.forEach(((c,f)=>{l.push(i.pu(f,e,t).then((h=>{var _;if((h||t)&&i.isPrimaryClient){const E=h?!h.fromCache:(_=t==null?void 0:t.targetChanges.get(f.targetId))==null?void 0:_.current;i.sharedClientState.updateQueryState(f.targetId,E?"current":"not-current")}if(h){s.push(h);const E=X0.As(f.targetId,h);a.push(E)}})))})),await Promise.all(l),i.Pu.H_(s),await(async function(f,h){const _=Ee(f);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>$.forEach(h,(I=>$.forEach(I.Es,(x=>_.persistence.referenceDelegate.addReference(E,I.targetId,x))).next((()=>$.forEach(I.ds,(x=>_.persistence.referenceDelegate.removeReference(E,I.targetId,x)))))))))}catch(E){if(!Ho(E))throw E;fe(Z0,"Failed to update sequence numbers: "+E)}for(const E of h){const I=E.targetId;if(!E.fromCache){const x=_.Ms.get(I),k=x.snapshotVersion,V=x.withLastLimboFreeSnapshotVersion(k);_.Ms=_.Ms.insert(I,V)}}})(i.localStore,a))}async function Q8(n,e){const t=Ee(n);if(!t.currentUser.isEqual(e)){fe(Ko,"User change. New user:",e.toKey());const i=await z1(t.localStore,e);t.currentUser=e,(function(a,l){a.mu.forEach((c=>{c.forEach((f=>{f.reject(new ae(Q.CANCELLED,l))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ds(t,i.Ls)}}function X8(n,e){const t=Ee(n),i=t.Au.get(e);if(i&&i.hu)return $e().add(i.key);{let s=$e();const a=t.Iu.get(e);if(!a)return s;for(const l of a){const c=t.Tu.get(l);s=s.unionWith(c.view.nu)}return s}}async function Z8(n,e){const t=Ee(n),i=await mp(t.localStore,e.query,!0),s=e.view.cu(i);return t.isPrimaryClient&&bv(t,e.targetId,s.au),s}async function eH(n,e){const t=Ee(n);return K1(t.localStore,e).then((i=>Ds(t,i)))}async function tH(n,e,t,i){const s=Ee(n),a=await(function(c,f){const h=Ee(c),_=Ee(h.mutationQueue);return h.persistence.runTransaction("Lookup mutation documents","readonly",(E=>_.er(E,f).next((I=>I?h.localDocuments.getDocuments(E,I):$.resolve(null)))))})(s.localStore,e);a!==null?(t==="pending"?await ic(s.remoteStore):t==="acknowledged"||t==="rejected"?(fE(s,e,i||null),dE(s,e),(function(c,f){Ee(Ee(c).mutationQueue).ir(f)})(s.localStore,e)):Se(6720,"Unknown batchState",{Su:t}),await Ds(s,a)):fe(Ko,"Cannot apply mutation batch with id: "+e)}async function nH(n,e){const t=Ee(n);if(Qp(t),mE(t),e===!0&&t.gu!==!0){const i=t.sharedClientState.getAllActiveQueryTargets(),s=await MC(t,i.toArray());t.gu=!0,await xv(t.remoteStore,!0);for(const a of s)Wp(t.remoteStore,a)}else if(e===!1&&t.gu!==!1){const i=[];let s=Promise.resolve();t.Iu.forEach(((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?i.push(l):s=s.then((()=>(Bu(t,l),Uu(t.localStore,l,!0)))),Fu(t.remoteStore,l)})),await s,await MC(t,i),(function(l){const c=Ee(l);c.Au.forEach(((f,h)=>{Fu(c.remoteStore,h)})),c.Ru.Jr(),c.Au=new Map,c.du=new Rt(ye.comparator)})(t),t.gu=!1,await xv(t.remoteStore,!1)}}async function MC(n,e,t){const i=Ee(n),s=[],a=[];for(const l of e){let c;const f=i.Iu.get(l);if(f&&f.length!==0){c=await Ou(i.localStore,Xn(f[0]));for(const h of f){const _=i.Tu.get(h),E=await Z8(i,_);E.snapshot&&a.push(E.snapshot)}}else{const h=await j1(i.localStore,l);c=await Ou(i.localStore,h),await cE(i,hP(h),l,!1,c.resumeToken)}s.push(c)}return i.Pu.H_(a),s}function hP(n){return JN(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function iH(n){return(function(t){return Ee(Ee(t).persistence).Ts()})(Ee(n).localStore)}async function rH(n,e,t,i){const s=Ee(n);if(s.gu)return void fe(Ko,"Ignoring unexpected query state notification.");const a=s.Iu.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=await K1(s.localStore,QN(a[0])),c=Mf.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Yt.EMPTY_BYTE_STRING);await Ds(s,l,c);break}case"rejected":await Uu(s.localStore,e,!0),Bu(s,e,i);break;default:Se(64155,t)}}async function sH(n,e,t){const i=Qp(n);if(i.gu){for(const s of e){if(i.Iu.has(s)&&i.sharedClientState.isActiveQueryTarget(s)){fe(Ko,"Adding an already active target "+s);continue}const a=await j1(i.localStore,s),l=await Ou(i.localStore,a);await cE(i,hP(a),l.targetId,!1,l.resumeToken),Wp(i.remoteStore,l)}for(const s of t)i.Iu.has(s)&&await Uu(i.localStore,s,!1).then((()=>{Fu(i.remoteStore,s),Bu(i,s)})).catch(zo)}}function Qp(n){const e=Ee(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=dP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=X8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=j8.bind(null,e),e.Pu.H_=k8.bind(null,e.eventManager),e.Pu.yu=V8.bind(null,e.eventManager),e}function mE(n){const e=Ee(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=K8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Y8.bind(null,e),e}function oH(n,e,t){const i=Ee(n);(async function(a,l,c){try{const f=await l.getMetadata();if(await(function(x,k){const V=Ee(x),B=rn(k.createTime);return V.persistence.runTransaction("hasNewerBundle","readonly",(z=>V.Ii.getBundleMetadata(z,k.id))).then((z=>!!z&&z.createTime.compareTo(B)>=0))})(a.localStore,f))return await l.close(),c._completeWith((function(x){return{taskState:"Success",documentsLoaded:x.totalDocuments,bytesLoaded:x.totalBytes,totalDocuments:x.totalDocuments,totalBytes:x.totalBytes}})(f)),Promise.resolve(new Set);c._updateProgress(oP(f));const h=new O8(f,l.serializer);let _=await l.bu();for(;_;){const I=await h.Ga(_);I&&c._updateProgress(I),_=await l.bu()}const E=await h.ja(a.localStore);return await Ds(a,E.Ha,void 0),await(function(x,k){const V=Ee(x);return V.persistence.runTransaction("Save bundle","readwrite",(B=>V.Ii.saveBundleMetadata(B,k)))})(a.localStore,f),c._completeWith(E.progress),Promise.resolve(E.Ja)}catch(f){return Wr(Ko,`Loading bundle failed with ${f}`),c._failWith(f),Promise.resolve(new Set)}})(i,e,t).then((s=>{i.sharedClientState.notifyBundleLoaded(s)}))}class mf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Vf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return G1(this.persistence,new B1,e.initialUser,this.serializer)}Cu(e){return new J0(Jp.mi,this.serializer)}Du(e){return new X1}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}mf.provider={build:()=>new mf};class aH extends mf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ce(this.persistence.referenceDelegate instanceof hp,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new V1(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Gn.withCacheSize(this.cacheSizeBytes):Gn.DEFAULT;return new J0((i=>hp.mi(i,t)),this.serializer)}}class mP extends mf{constructor(e,t,i){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await mE(this.xu.syncEngine),await ic(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return G1(this.persistence,new B1,e.initialUser,this.serializer)}Fu(e,t){const i=this.persistence.referenceDelegate.garbageCollector;return new V1(i,e.asyncQueue,t)}Mu(e,t){const i=new gG(t,this.persistence);return new pG(e.asyncQueue,i)}Cu(e){const t=Q0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?Gn.withCacheSize(this.cacheSizeBytes):Gn.DEFAULT;return new W0(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,Z1(),Fm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new X1}}class lH extends mP{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof R_&&(this.sharedClientState.syncEngine={Co:tH.bind(null,t),vo:rH.bind(null,t),Fo:sH.bind(null,t),Ts:iH.bind(null,t),Do:eH.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async i=>{await nH(this.xu.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))}Du(e){const t=Z1();if(!R_.v(t))throw new ae(Q.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=Q0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new R_(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class pf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>DC(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Q8.bind(null,this.syncEngine),await xv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new M8})()}createDatastore(e){const t=Vf(e.databaseInfo.databaseId),i=(function(a){return new p8(a)})(e.databaseInfo);return(function(a,l,c,f){return new v8(a,l,c,f)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,s,a,l,c){return new T8(i,s,a,l,c)})(this.localStore,this.datastore,e.asyncQueue,(t=>DC(this.syncEngine,t,0)),(function(){return AC.v()?new AC:new d8})())}createSyncEngine(e,t){return(function(s,a,l,c,f,h,_){const E=new q8(s,a,l,c,f,h);return _&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const a=Ee(s);fe(Ja,"RemoteStore shutting down."),a.Ea.add(5),await nc(a),a.Aa.shutdown(),a.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}pf.provider={build:()=>new pf};function kC(n,e=10240){let t=0;return{async read(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):nn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uH{constructor(e,t){this.Bu=e,this.serializer=t,this.metadata=new Un,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((i=>{i&&i.$a()?this.metadata.resolve(i.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i==null?void 0:i.Qa)}`))}),(i=>this.metadata.reject(i)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const t=this.Lu.decode(e),i=Number(t);isNaN(i)&&this.Qu(`length string (${t}) is not valid number`);const s=await this.$u(i);return new L8(JSON.parse(s),e.length+i)}Uu(){return this.buffer.findIndex((e=>e===123))}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const t=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cH{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ae(Q.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(s,a){const l=Ee(s),c={documents:a.map((E=>ff(l.serializer,E)))},f=await l.Ho("BatchGetDocuments",l.serializer.databaseId,et.emptyPath(),c,a.length),h=new Map;f.forEach((E=>{const I=Iz(l.serializer,E);h.set(I.key.toString(),I)}));const _=[];return a.forEach((E=>{const I=h.get(E.toString());Ce(!!I,55234,{key:E}),_.push(I)})),_})(this.datastore,e);return t.forEach((i=>this.recordVersion(i))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new tc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,i)=>{const s=ye.fromPath(i);this.mutations.push(new F0(s,this.precondition(s)))})),await(async function(i,s){const a=Ee(i),l={writes:s.map((c=>hf(a.serializer,c)))};await a.Go("Commit",a.serializer.databaseId,et.emptyPath(),l)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Se(50498,{Gu:e.constructor.name});t=Ne.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new ae(Q.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ne.min())?Bt.exists(!1):Bt.updateTime(t):Bt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ne.min()))throw new ae(Q.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Bt.updateTime(t)}return Bt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dH{constructor(e,t,i,s,a){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=s,this.deferred=a,this.zu=i.maxAttempts,this.M_=new tE(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new cH(this.datastore),t=this.Hu(e);t&&t.then((i=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(i)})).catch((s=>{this.Yu(s)}))))})).catch((i=>{this.Yu(i)}))}))}Hu(e){try{const t=this.updateFunction(e);return!Cf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!c1(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo="FirestoreClient";class fH{constructor(e,t,i,s,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=s,this.user=An.UNAUTHENTICATED,this.clientId=A0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async l=>{fe(Uo,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(i,(l=>(fe(Uo,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Un;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=sc(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function P_(n,e){n.asyncQueue.verifyOperationInProgress(),fe(Uo,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async s=>{i.isEqual(s)||(await z1(e.localStore,s),i=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function VC(n,e){n.asyncQueue.verifyOperationInProgress();const t=await pE(n);fe(Uo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>CC(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,s)=>CC(e.remoteStore,s))),n._onlineComponents=e}async function pE(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){fe(Uo,"Using user provided OfflineComponentProvider");try{await P_(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===Q.FAILED_PRECONDITION||s.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Wr("Error using user provided cache. Falling back to memory cache: "+t),await P_(n,new mf)}}else fe(Uo,"Using default OfflineComponentProvider"),await P_(n,new aH(void 0));return n._offlineComponents}async function Zp(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(fe(Uo,"Using user provided OnlineComponentProvider"),await VC(n,n._uninitializedComponentsProvider._online)):(fe(Uo,"Using default OnlineComponentProvider"),await VC(n,new pf))),n._onlineComponents}function pP(n){return pE(n).then((e=>e.persistence))}function gE(n){return pE(n).then((e=>e.localStore))}function gP(n){return Zp(n).then((e=>e.remoteStore))}function yE(n){return Zp(n).then((e=>e.syncEngine))}function hH(n){return Zp(n).then((e=>e.datastore))}async function Gu(n){const e=await Zp(n),t=e.eventManager;return t.onListen=B8.bind(null,e.syncEngine),t.onUnlisten=z8.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=G8.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=H8.bind(null,e.syncEngine),t}function mH(n){return n.asyncQueue.enqueue((async()=>{const e=await pP(n),t=await gP(n);return e.setNetworkEnabled(!0),(function(s){const a=Ee(s);return a.Ea.delete(0),Lf(a)})(t)}))}function pH(n){return n.asyncQueue.enqueue((async()=>{const e=await pP(n),t=await gP(n);return e.setNetworkEnabled(!1),(async function(s){const a=Ee(s);a.Ea.add(0),await nc(a),a.Ra.set("Offline")})(t)}))}function gH(n,e){const t=new Un;return n.asyncQueue.enqueueAndForget((async()=>(async function(s,a,l){try{const c=await(function(h,_){const E=Ee(h);return E.persistence.runTransaction("read document","readonly",(I=>E.localDocuments.getDocument(I,_)))})(s,a);c.isFoundDocument()?l.resolve(c):c.isNoDocument()?l.resolve(null):l.reject(new ae(Q.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(c){const f=sc(c,`Failed to get document '${a} from cache`);l.reject(f)}})(await gE(n),e,t))),t.promise}function yP(n,e,t={}){const i=new Un;return n.asyncQueue.enqueueAndForget((async()=>(function(a,l,c,f,h){const _=new Xp({next:I=>{_.Nu(),l.enqueueAndForget((()=>aE(a,E)));const x=I.docs.has(c);!x&&I.fromCache?h.reject(new ae(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&I.fromCache&&f&&f.source==="server"?h.reject(new ae(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(I)},error:I=>h.reject(I)}),E=new uE(Zu(c.path),_,{includeMetadataChanges:!0,qa:!0});return oE(a,E)})(await Gu(n),n.asyncQueue,e,t,i))),i.promise}function yH(n,e){const t=new Un;return n.asyncQueue.enqueueAndForget((async()=>(async function(s,a,l){try{const c=await mp(s,a,!0),f=new uP(a,c.Qs),h=f.ru(c.documents),_=f.applyChanges(h,!1);l.resolve(_.snapshot)}catch(c){const f=sc(c,`Failed to execute query '${a} against cache`);l.reject(f)}})(await gE(n),e,t))),t.promise}function _P(n,e,t={}){const i=new Un;return n.asyncQueue.enqueueAndForget((async()=>(function(a,l,c,f,h){const _=new Xp({next:I=>{_.Nu(),l.enqueueAndForget((()=>aE(a,E))),I.fromCache&&f.source==="server"?h.reject(new ae(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(I)},error:I=>h.reject(I)}),E=new uE(c,_,{includeMetadataChanges:!0,qa:!0});return oE(a,E)})(await Gu(n),n.asyncQueue,e,t,i))),i.promise}function _H(n,e){const t=new Xp(e);return n.asyncQueue.enqueueAndForget((async()=>(function(s,a){Ee(s).Ca.add(a),a.next()})(await Gu(n),t))),()=>{t.Nu(),n.asyncQueue.enqueueAndForget((async()=>(function(s,a){Ee(s).Ca.delete(a)})(await Gu(n),t)))}}function vH(n,e,t,i){const s=(function(l,c){let f;return f=typeof l=="string"?f1().encode(l):l,(function(_,E){return new uH(_,E)})((function(_,E){if(_ instanceof Uint8Array)return kC(_,E);if(_ instanceof ArrayBuffer)return kC(new Uint8Array(_),E);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(f),c)})(t,Vf(e));n.asyncQueue.enqueueAndForget((async()=>{oH(await yE(n),s,i)}))}function EH(n,e){return n.asyncQueue.enqueue((async()=>(function(i,s){const a=Ee(i);return a.persistence.runTransaction("Get named query","readonly",(l=>a.Ii.getNamedQuery(l,s)))})(await gE(n),e)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vP(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP="firestore.googleapis.com",OC=!0;class UC{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ae(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=EP,this.ssl=OC}else this.host=e.host,this.ssl=e.ssl??OC;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=P1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Bz)throw new ae(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vP(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ae(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ae(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ae(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,s){return i.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Of{constructor(e,t,i,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new UC({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new UC(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new iG;switch(i.type){case"firstParty":return new aG(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ae(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=LC.get(t);i&&(fe("ComponentProvider","Removing Datastore"),LC.delete(t),i.terminate())})(this),Promise.resolve()}}function TH(n,e,t,i={}){var h;n=ct(n,Of);const s=Ku(e),a=n._getSettings(),l={...a,emulatorOptions:n._getEmulatorOptions()},c=`${e}:${t}`;s&&(Fb(`https://${c}`),qb("Firestore",!0)),a.host!==EP&&a.host!==c&&Wr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...a,host:c,ssl:s,emulatorOptions:i};if(!bo(f,l)&&(n._setSettings(f),i.mockUserToken)){let _,E;if(typeof i.mockUserToken=="string")_=i.mockUserToken,E=An.MOCK_USER;else{_=E3(i.mockUserToken,(h=n._app)==null?void 0:h.options.projectId);const I=i.mockUserToken.sub||i.mockUserToken.user_id;if(!I)throw new ae(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new An(I)}n._authCredentials=new rG(new dN(_,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zn=class TP{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new TP(this.firestore,e,this._query)}},bt=class xd{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Co(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xd(this.firestore,e,this._key)}toJSON(){return{type:xd._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(xf(t,xd._jsonSchema))return new xd(e,i||null,new ye(et.fromString(t.referencePath)))}};bt._jsonSchemaVersion="firestore/documentReference/1.0",bt._jsonSchema={type:gn("string",bt._jsonSchemaVersion),referencePath:gn("string")};let Co=class IP extends Zn{constructor(e,t,i){super(e,t,Zu(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bt(this.firestore,null,new ye(e))}withConverter(e){return new IP(this.firestore,e,this._path)}};function wP(n,e,...t){if(n=Oe(n),x0("collection","path",e),n instanceof Of){const i=et.fromString(e,...t);return xx(i),new Co(n,null,i)}{if(!(n instanceof bt||n instanceof Co))throw new ae(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(et.fromString(e,...t));return xx(i),new Co(n.firestore,null,i)}}function IH(n,e){if(n=ct(n,Of),x0("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ae(Q.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Zn(n,null,(function(i){return new Rs(et.emptyPath(),i)})(e))}function _p(n,e,...t){if(n=Oe(n),arguments.length===1&&(e=A0.newId()),x0("doc","path",e),n instanceof Of){const i=et.fromString(e,...t);return Ax(i),new bt(n,null,new ye(i))}{if(!(n instanceof bt||n instanceof Co))throw new ae(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(et.fromString(e,...t));return Ax(i),new bt(n.firestore,n instanceof Co?n.converter:null,new ye(i))}}function SP(n,e){return n=Oe(n),e=Oe(e),(n instanceof bt||n instanceof Co)&&(e instanceof bt||e instanceof Co)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function AP(n,e){return n=Oe(n),e=Oe(e),n instanceof Zn&&e instanceof Zn&&n.firestore===e.firestore&&Nf(n._query,e._query)&&n.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC="AsyncQueue";class qC{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new tE(this,"async_queue_retry"),this._c=()=>{const i=Fm();i&&fe(FC,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Fm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Fm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Un;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ho(e))throw e;fe(FC,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,nn("INTERNAL UNHANDLED ERROR: ",BC(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=sE.createAndSchedule(this,e,t,i,(a=>this.hc(a)));return this.tc.push(s),s}uc(){this.nc&&Se(47125,{Pc:BC(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function BC(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rv(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const s=t;for(const a of i)if(a in s&&typeof s[a]=="function")return!0;return!1})(n,["next","error","complete"])}class wH{constructor(){this._progressObserver={},this._taskCompletionResolver=new Un,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SH=-1;let sn=class extends Of{constructor(e,t,i,s){super(e,t,i,s),this.type="firestore",this._queue=new qC,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new qC(e),this._firestoreClient=void 0,await e}}};function jn(n){if(n._terminated)throw new ae(Q.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||xP(n),n._firestoreClient}function xP(n){var i,s,a;const e=n._freezeSettings(),t=(function(c,f,h,_){return new $G(c,f,h,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,vP(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new fH(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(c){const f=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(f),_online:f}})(n._componentsProvider))}function AH(n,e){Wr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return CP(n,pf.provider,{build:i=>new mP(i,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function xH(n){Wr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();CP(n,pf.provider,{build:t=>new lH(t,e.cacheSizeBytes)})}function CP(n,e,t){if((n=ct(n,sn))._firestoreClient||n._terminated)throw new ae(Q.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new ae(Q.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},xP(n)}function CH(n){if(n._initialized&&!n._terminated)throw new ae(Q.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Un;return n._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(i){if(!Hr.v())return Promise.resolve();const s=i+q1;await Hr.delete(s)})(Q0(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function bH(n){return(function(t){const i=new Un;return t.asyncQueue.enqueueAndForget((async()=>J8(await yE(t),i))),i.promise})(jn(n=ct(n,sn)))}function RH(n){return mH(jn(n=ct(n,sn)))}function NH(n){return pH(jn(n=ct(n,sn)))}function PH(n,e){const t=jn(n=ct(n,sn)),i=new wH;return vH(t,n._databaseId,e,i),i}function DH(n,e){return EH(jn(n=ct(n,sn)),e).then((t=>t?new Zn(n,null,t.query):null))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zn(Yt.fromBase64String(e))}catch(t){throw new ae(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new zn(Yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:zn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(xf(e,zn._jsonSchema))return zn.fromBase64String(e.bytes)}}zn._jsonSchemaVersion="firestore/bytes/1.0",zn._jsonSchema={type:gn("string",zn._jsonSchemaVersion),bytes:gn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fo=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ae(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let el=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ae(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ae(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ar._jsonSchemaVersion}}static fromJSON(e){if(xf(e,ar._jsonSchema))return new ar(e.latitude,e.longitude)}}ar._jsonSchemaVersion="firestore/geoPoint/1.0",ar._jsonSchema={type:gn("string",ar._jsonSchemaVersion),latitude:gn("number"),longitude:gn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,s){if(i.length!==s.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==s[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:jr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(xf(e,jr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new jr(e.vectorValues);throw new ae(Q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}jr._jsonSchemaVersion="firestore/vectorValue/1.0",jr._jsonSchema={type:gn("string",jr._jsonSchemaVersion),vectorValues:gn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MH=/^__.*__$/;class kH{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ps(e,this.data,this.fieldMask,t,this.fieldTransforms):new ec(e,this.data,t,this.fieldTransforms)}}class bP{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Ps(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function RP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se(40011,{Ac:n})}}class eg{constructor(e,t,i,s,a,l){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=s,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new eg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const t=(s=this.path)==null?void 0:s.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var s;const t=(s=this.path)==null?void 0:s.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return vp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(RP(this.Ac)&&MH.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class VH{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Vf(e)}Cc(e,t,i,s=!1){return new eg({Ac:e,methodName:t,Dc:i,path:qt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function tl(n){const e=n._freezeSettings(),t=Vf(n._databaseId);return new VH(n._databaseId,!!e.ignoreUndefinedProperties,t)}function tg(n,e,t,i,s,a={}){const l=n.Cc(a.merge||a.mergeFields?2:0,e,t,s);SE("Data must be an object, but it was:",l,i);const c=DP(i,l);let f,h;if(a.merge)f=new ci(l.fieldMask),h=l.fieldTransforms;else if(a.mergeFields){const _=[];for(const E of a.mergeFields){const I=Nv(e,E,t);if(!l.contains(I))throw new ae(Q.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);kP(_,I)||_.push(I)}f=new ci(_),h=l.fieldTransforms.filter((E=>f.covers(E.field)))}else f=null,h=l.fieldTransforms;return new kH(new On(c),f,h)}class Uf extends el{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Uf}}function NP(n,e,t){return new eg({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class _E extends el{_toFieldTransform(e){return new Df(e.path,new ku)}isEqual(e){return e instanceof _E}}class vE extends el{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=NP(this,e,!0),i=this.vc.map((a=>nl(a,t))),s=new Ha(i);return new Df(e.path,s)}isEqual(e){return e instanceof vE&&bo(this.vc,e.vc)}}class EE extends el{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=NP(this,e,!0),i=this.vc.map((a=>nl(a,t))),s=new $a(i);return new Df(e.path,s)}isEqual(e){return e instanceof EE&&bo(this.vc,e.vc)}}class TE extends el{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new Vu(e.serializer,i1(e.serializer,this.Fc));return new Df(e.path,t)}isEqual(e){return e instanceof TE&&this.Fc===e.Fc}}function IE(n,e,t,i){const s=n.Cc(1,e,t);SE("Data must be an object, but it was:",s,i);const a=[],l=On.empty();$o(i,((f,h)=>{const _=AE(e,f,t);h=Oe(h);const E=s.yc(_);if(h instanceof Uf)a.push(_);else{const I=nl(h,E);I!=null&&(a.push(_),l.set(_,I))}}));const c=new ci(a);return new bP(l,c,s.fieldTransforms)}function wE(n,e,t,i,s,a){const l=n.Cc(1,e,t),c=[Nv(e,i,t)],f=[s];if(a.length%2!=0)throw new ae(Q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<a.length;I+=2)c.push(Nv(e,a[I])),f.push(a[I+1]);const h=[],_=On.empty();for(let I=c.length-1;I>=0;--I)if(!kP(h,c[I])){const x=c[I];let k=f[I];k=Oe(k);const V=l.yc(x);if(k instanceof Uf)h.push(x);else{const B=nl(k,V);B!=null&&(h.push(x),_.set(x,B))}}const E=new ci(h);return new bP(_,E,l.fieldTransforms)}function PP(n,e,t,i=!1){return nl(t,n.Cc(i?4:3,e))}function nl(n,e){if(MP(n=Oe(n)))return SE("Unsupported field value:",e,n),DP(n,e);if(n instanceof el)return(function(i,s){if(!RP(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,s){const a=[];let l=0;for(const c of i){let f=nl(c,s.wc(l));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),l++}return{arrayValue:{values:a}}})(n,e)}return(function(i,s){if((i=Oe(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return i1(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=mt.fromDate(i);return{timestampValue:Lu(s.serializer,a)}}if(i instanceof mt){const a=new mt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Lu(s.serializer,a)}}if(i instanceof ar)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof zn)return{bytesValue:p1(s.serializer,i._byteString)};if(i instanceof bt){const a=s.databaseId,l=i.firestore._databaseId;if(!l.isEqual(a))throw s.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:H0(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof jr)return(function(l,c){return{mapValue:{fields:{[M0]:{stringValue:k0},[Pu]:{arrayValue:{values:l.toArray().map((h=>{if(typeof h!="number")throw c.Sc("VectorValues must only contain numeric values.");return U0(c.serializer,h)}))}}}}}})(i,s);throw s.Sc(`Unsupported field value: ${Op(i)}`)})(n,e)}function DP(n,e){const t={};return DN(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$o(n,((i,s)=>{const a=nl(s,e.mc(i));a!=null&&(t[i]=a)})),{mapValue:{fields:t}}}function MP(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof mt||n instanceof ar||n instanceof zn||n instanceof bt||n instanceof el||n instanceof jr)}function SE(n,e,t){if(!MP(t)||!mN(t)){const i=Op(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function Nv(n,e,t){if((e=Oe(e))instanceof Fo)return e._internalPath;if(typeof e=="string")return AE(n,e);throw vp("Field path arguments must be of type string or ",n,!1,void 0,t)}const LH=new RegExp("[~\\*/\\[\\]]");function AE(n,e,t){if(e.search(LH)>=0)throw vp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Fo(...e.split("."))._internalPath}catch{throw vp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function vp(n,e,t,i,s){const a=i&&!i.isEmpty(),l=s!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let f="";return(a||l)&&(f+=" (found",a&&(f+=` in field ${i}`),l&&(f+=` in document ${s}`),f+=")"),new ae(Q.INVALID_ARGUMENT,c+n+f)}function kP(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,t,i,s,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new OH(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ng("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class OH extends gf{data(){return super.data()}}function ng(n,e){return typeof e=="string"?AE(n,e):e instanceof Fo?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VP(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ae(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xE{}class Ff extends xE{}function po(n,e,...t){let i=[];e instanceof xE&&i.push(e),i=i.concat(t),(function(a){const l=a.filter((f=>f instanceof CE)).length,c=a.filter((f=>f instanceof ig)).length;if(l>1||l>0&&c>0)throw new ae(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const s of i)n=s._apply(n);return n}class ig extends Ff{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new ig(e,t,i)}_apply(e){const t=this._parse(e);return OP(e._query,t),new Zn(e.firestore,e.converter,gv(e._query,t))}_parse(e){const t=tl(e.firestore);return(function(a,l,c,f,h,_,E){let I;if(h.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ae(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){zC(E,_);const k=[];for(const V of E)k.push(GC(f,a,V));I={arrayValue:{values:k}}}else I=GC(f,a,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||zC(E,_),I=PP(c,l,E,_==="in"||_==="not-in");return it.create(h,_,I)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function UH(n,e,t){const i=e,s=ng("where",n);return ig._create(s,i,t)}class CE extends xE{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new CE(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:vt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,a){let l=s;const c=a.getFlattenedFilters();for(const f of c)OP(l,f),l=gv(l,f)})(e._query,t),new Zn(e.firestore,e.converter,gv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class bE extends Ff{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new bE(e,t)}_apply(e){const t=(function(s,a,l){if(s.startAt!==null)throw new ae(Q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ae(Q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new df(a,l)})(e._query,this._field,this._direction);return new Zn(e.firestore,e.converter,(function(s,a){const l=s.explicitOrderBy.concat([a]);return new Rs(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,t))}}function FH(n,e="asc"){const t=e,i=ng("orderBy",n);return bE._create(i,t)}class rg extends Ff{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new rg(e,t,i)}_apply(e){return new Zn(e.firestore,e.converter,up(e._query,this._limit,this._limitType))}}function qH(n){return pN("limit",n),rg._create("limit",n,"F")}function BH(n){return pN("limitToLast",n),rg._create("limitToLast",n,"L")}class sg extends Ff{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new sg(e,t,i)}_apply(e){const t=LP(e,this.type,this._docOrFields,this._inclusive);return new Zn(e.firestore,e.converter,(function(s,a){return new Rs(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,a,s.endAt)})(e._query,t))}}function GH(...n){return sg._create("startAt",n,!0)}function zH(...n){return sg._create("startAfter",n,!1)}class og extends Ff{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new og(e,t,i)}_apply(e){const t=LP(e,this.type,this._docOrFields,this._inclusive);return new Zn(e.firestore,e.converter,(function(s,a){return new Rs(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,a)})(e._query,t))}}function HH(...n){return og._create("endBefore",n,!1)}function $H(...n){return og._create("endAt",n,!0)}function LP(n,e,t,i){if(t[0]=Oe(t[0]),t[0]instanceof gf)return(function(a,l,c,f,h){if(!f)throw new ae(Q.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const _=[];for(const E of yu(a))if(E.field.isKeyField())_.push(Ga(l,f.key));else{const I=f.data.field(E.field);if(Gp(I))throw new ae(Q.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+E.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(I===null){const x=E.field.canonicalString();throw new ae(Q.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${x}' (used as the orderBy) does not exist.`)}_.push(I)}return new Lo(_,h)})(n._query,n.firestore._databaseId,e,t[0]._document,i);{const s=tl(n.firestore);return(function(l,c,f,h,_,E){const I=l.explicitOrderBy;if(_.length>I.length)throw new ae(Q.INVALID_ARGUMENT,`Too many arguments provided to ${h}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const x=[];for(let k=0;k<_.length;k++){const V=_[k];if(I[k].field.isKeyField()){if(typeof V!="string")throw new ae(Q.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${h}(), but got a ${typeof V}`);if(!L0(l)&&V.indexOf("/")!==-1)throw new ae(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${h}() must be a plain document ID, but '${V}' contains a slash.`);const B=l.path.child(et.fromString(V));if(!ye.isDocumentKey(B))throw new ae(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${h}() must result in a valid document path, but '${B}' is not because it contains an odd number of segments.`);const z=new ye(B);x.push(Ga(c,z))}else{const B=PP(f,h,V);x.push(B)}}return new Lo(x,E)})(n._query,n.firestore._databaseId,s,e,t,i)}}function GC(n,e,t){if(typeof(t=Oe(t))=="string"){if(t==="")throw new ae(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!L0(e)&&t.indexOf("/")!==-1)throw new ae(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(et.fromString(t));if(!ye.isDocumentKey(i))throw new ae(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Ga(n,new ye(i))}if(t instanceof bt)return Ga(n,t._key);throw new ae(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Op(t)}.`)}function zC(n,e){if(!Array.isArray(n)||n.length===0)throw new ae(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function OP(n,e){const t=(function(s,a){for(const l of s)for(const c of l.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ae(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ae(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class RE{convertValue(e,t="none"){switch(ko(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ss(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Se(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return $o(e,((s,a)=>{i[s]=this.convertValue(a,t)})),i}convertVectorValue(e){var i,s,a;const t=(a=(s=(i=e.fields)==null?void 0:i[Pu].arrayValue)==null?void 0:s.values)==null?void 0:a.map((l=>Ut(l.doubleValue)));return new jr(t)}convertGeoPoint(e){return new ar(Ut(e.latitude),Ut(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=zp(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(lf(e));default:return null}}convertTimestamp(e){const t=ws(e);return new mt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=et.fromString(e);Ce(x1(i),9688,{name:e});const s=new Mo(i.get(1),i.get(3)),a=new ye(i.popFirst(5));return s.isEqual(t)||nn(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class jH extends RE{constructor(e){super(),this.firestore=e}convertBytes(e){return new zn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new bt(this.firestore,null,t)}}class ka{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let $i=class UP extends gf{constructor(e,t,i,s,a,l){super(e,t,i,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new zd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(ng("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(Q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=UP._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};$i._jsonSchemaVersion="firestore/documentSnapshot/1.0",$i._jsonSchema={type:gn("string",$i._jsonSchemaVersion),bundleSource:gn("string","DocumentSnapshot"),bundleName:gn("string"),bundle:gn("string")};let zd=class extends $i{data(e={}){return super.data(e)}},lr=class FP{constructor(e,t,i,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new ka(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new zd(this._firestore,this._userDataWriter,i.key,i,new ka(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ae(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((c=>{const f=new zd(s._firestore,s._userDataWriter,c.doc.key,c.doc,new ka(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:f,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((c=>a||c.type!==3)).map((c=>{const f=new zd(s._firestore,s._userDataWriter,c.doc.key,c.doc,new ka(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,_=-1;return c.type!==0&&(h=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),_=l.indexOf(c.doc.key)),{type:KH(c.type),doc:f,oldIndex:h,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(Q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=FP._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=A0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],s=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function KH(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se(61501,{type:n})}}function qP(n,e){return n instanceof $i&&e instanceof $i?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof lr&&e instanceof lr&&n._firestore===e._firestore&&AP(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YH(n){n=ct(n,bt);const e=ct(n.firestore,sn);return yP(jn(e),n._key).then((t=>NE(e,n,t)))}lr._jsonSchemaVersion="firestore/querySnapshot/1.0",lr._jsonSchema={type:gn("string",lr._jsonSchemaVersion),bundleSource:gn("string","QuerySnapshot"),bundleName:gn("string"),bundle:gn("string")};class il extends RE{constructor(e){super(),this.firestore=e}convertBytes(e){return new zn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new bt(this.firestore,null,t)}}function JH(n){n=ct(n,bt);const e=ct(n.firestore,sn),t=jn(e),i=new il(e);return gH(t,n._key).then((s=>new $i(e,i,n._key,s,new ka(s!==null&&s.hasLocalMutations,!0),n.converter)))}function WH(n){n=ct(n,bt);const e=ct(n.firestore,sn);return yP(jn(e),n._key,{source:"server"}).then((t=>NE(e,n,t)))}function QH(n){n=ct(n,Zn);const e=ct(n.firestore,sn),t=jn(e),i=new il(e);return VP(n._query),_P(t,n._query).then((s=>new lr(e,i,n,s)))}function XH(n){n=ct(n,Zn);const e=ct(n.firestore,sn),t=jn(e),i=new il(e);return yH(t,n._query).then((s=>new lr(e,i,n,s)))}function ZH(n){n=ct(n,Zn);const e=ct(n.firestore,sn),t=jn(e),i=new il(e);return _P(t,n._query,{source:"server"}).then((s=>new lr(e,i,n,s)))}function HC(n,e,t){n=ct(n,bt);const i=ct(n.firestore,sn),s=ag(n.converter,e,t);return qf(i,[tg(tl(i),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Bt.none())])}function $C(n,e,t,...i){n=ct(n,bt);const s=ct(n.firestore,sn),a=tl(s);let l;return l=typeof(e=Oe(e))=="string"||e instanceof Fo?wE(a,"updateDoc",n._key,e,t,i):IE(a,"updateDoc",n._key,e),qf(s,[l.toMutation(n._key,Bt.exists(!0))])}function e7(n){return qf(ct(n.firestore,sn),[new tc(n._key,Bt.none())])}function t7(n,e){const t=ct(n.firestore,sn),i=_p(n),s=ag(n.converter,e);return qf(t,[tg(tl(n.firestore),"addDoc",i._key,s,n.converter!==null,{}).toMutation(i._key,Bt.exists(!1))]).then((()=>i))}function BP(n,...e){var f,h,_;n=Oe(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Rv(e[i])||(t=e[i++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Rv(e[i])){const E=e[i];e[i]=(f=E.next)==null?void 0:f.bind(E),e[i+1]=(h=E.error)==null?void 0:h.bind(E),e[i+2]=(_=E.complete)==null?void 0:_.bind(E)}let a,l,c;if(n instanceof bt)l=ct(n.firestore,sn),c=Zu(n._key.path),a={next:E=>{e[i]&&e[i](NE(l,n,E))},error:e[i+1],complete:e[i+2]};else{const E=ct(n,Zn);l=ct(E.firestore,sn),c=E._query;const I=new il(l);a={next:x=>{e[i]&&e[i](new lr(l,I,E,x))},error:e[i+1],complete:e[i+2]},VP(n._query)}return(function(I,x,k,V){const B=new Xp(V),z=new uE(x,B,k);return I.asyncQueue.enqueueAndForget((async()=>oE(await Gu(I),z))),()=>{B.Nu(),I.asyncQueue.enqueueAndForget((async()=>aE(await Gu(I),z)))}})(jn(l),c,s,a)}function n7(n,e){return _H(jn(n=ct(n,sn)),Rv(e)?e:{next:e})}function qf(n,e){return(function(i,s){const a=new Un;return i.asyncQueue.enqueueAndForget((async()=>$8(await yE(i),s,a))),a.promise})(jn(n),e)}function NE(n,e,t){const i=t.docs.get(e._key),s=new il(n);return new $i(n,s,e._key,i,new ka(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i7={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let r7=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=tl(e)}set(e,t,i){this._verifyNotCommitted();const s=To(e,this._firestore),a=ag(s.converter,t,i),l=tg(this._dataReader,"WriteBatch.set",s._key,a,s.converter!==null,i);return this._mutations.push(l.toMutation(s._key,Bt.none())),this}update(e,t,i,...s){this._verifyNotCommitted();const a=To(e,this._firestore);let l;return l=typeof(t=Oe(t))=="string"||t instanceof Fo?wE(this._dataReader,"WriteBatch.update",a._key,t,i,s):IE(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,Bt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=To(e,this._firestore);return this._mutations=this._mutations.concat(new tc(t._key,Bt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ae(Q.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function To(n,e){if((n=Oe(n)).firestore!==e)throw new ae(Q.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s7{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=tl(e)}get(e){const t=To(e,this._firestore),i=new jH(this._firestore);return this._transaction.lookup([t._key]).then((s=>{if(!s||s.length!==1)return Se(24041);const a=s[0];if(a.isFoundDocument())return new gf(this._firestore,i,a.key,a,t.converter);if(a.isNoDocument())return new gf(this._firestore,i,t._key,null,t.converter);throw Se(18433,{doc:a})}))}set(e,t,i){const s=To(e,this._firestore),a=ag(s.converter,t,i),l=tg(this._dataReader,"Transaction.set",s._key,a,s.converter!==null,i);return this._transaction.set(s._key,l),this}update(e,t,i,...s){const a=To(e,this._firestore);let l;return l=typeof(t=Oe(t))=="string"||t instanceof Fo?wE(this._dataReader,"Transaction.update",a._key,t,i,s):IE(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=To(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let o7=class extends s7{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=To(e,this._firestore),i=new il(this._firestore);return super.get(e).then((s=>new $i(this._firestore,i,t._key,s._document,new ka(!1,!1),t.converter)))}};function a7(n,e,t){n=ct(n,sn);const i={...i7,...t};return(function(a){if(a.maxAttempts<1)throw new ae(Q.INVALID_ARGUMENT,"Max attempts must be at least 1")})(i),(function(a,l,c){const f=new Un;return a.asyncQueue.enqueueAndForget((async()=>{const h=await hH(a);new dH(a.asyncQueue,h,c,l,f).ju()})),f.promise})(jn(n),(s=>e(new o7(n,s))),i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l7(){return new Uf("deleteField")}function u7(){return new _E("serverTimestamp")}function c7(...n){return new vE("arrayUnion",n)}function d7(...n){return new EE("arrayRemove",n)}function f7(n){return new TE("increment",n)}(function(e,t=!0){(function(s){Xu=s})(Bo),Po(new Yr("firestore",((i,{instanceIdentifier:s,options:a})=>{const l=i.getProvider("app").getImmediate(),c=new sn(new sG(i.getProvider("auth-internal")),new lG(l,i.getProvider("app-check-internal")),(function(h,_){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ae(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mo(h.options.projectId,_)})(l,s),l);return a={useFetchStreams:t,...a},c._setSettings(a),c}),"PUBLIC").setMultipleInstances(!0)),or(Tx,Ix,e),or(Tx,Ix,"esm2020")})();const h7="@firebase/firestore-compat",m7="0.4.2";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PE(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new ae("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(){if(typeof Uint8Array>"u")throw new ae("unimplemented","Uint8Arrays are not available in this environment.")}function KC(){if(!zG())throw new ae("unimplemented","Blobs are unavailable in Firestore in this environment.")}let GP=class Pv{constructor(e){this._delegate=e}static fromBase64String(e){return KC(),new Pv(zn.fromBase64String(e))}static fromUint8Array(e){return jC(),new Pv(zn.fromUint8Array(e))}toBase64(){return KC(),this._delegate.toBase64()}toUint8Array(){return jC(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dv(n){return p7(n,["next","error","complete"])}function p7(n,e){if(typeof n!="object"||n===null)return!1;const t=n;for(const i of e)if(i in t&&typeof t[i]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g7{enableIndexedDbPersistence(e,t){return AH(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return xH(e._delegate)}clearIndexedDbPersistence(e){return CH(e._delegate)}}class zP{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof Mo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Wr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e={...t,...e},delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,i={}){TH(this._delegate,e,t,i)}enableNetwork(){return RH(this._delegate)}disableNetwork(){return NH(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,hN("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return bH(this._delegate)}onSnapshotsInSync(e){return n7(this._delegate,e)}get app(){if(!this._appCompat)throw new ae("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new zu(this,wP(this._delegate,e))}catch(t){throw Wn(t,"collection()","Firestore.collection()")}}doc(e){try{return new Gi(this,_p(this._delegate,e))}catch(t){throw Wn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Jn(this,IH(this._delegate,e))}catch(t){throw Wn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return a7(this._delegate,t=>e(new HP(this,t)))}batch(){return jn(this._delegate),new $P(new r7(this._delegate,e=>qf(this._delegate,e)))}loadBundle(e){return PH(this._delegate,e)}namedQuery(e){return DH(this._delegate,e).then(t=>t?new Jn(this,t):null)}}class lg extends RE{constructor(e){super(),this.firestore=e}convertBytes(e){return new GP(new zn(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Gi.forKey(t,this.firestore,null)}}function y7(n){tG(n)}class HP{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new lg(e)}get(e){const t=Va(e);return this._delegate.get(t).then(i=>new yf(this._firestore,new $i(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const s=Va(e);return i?(PE("Transaction.set",i),this._delegate.set(s,t,i)):this._delegate.set(s,t),this}update(e,t,i,...s){const a=Va(e);return arguments.length===2?this._delegate.update(a,t):this._delegate.update(a,t,i,...s),this}delete(e){const t=Va(e);return this._delegate.delete(t),this}}class $P{constructor(e){this._delegate=e}set(e,t,i){const s=Va(e);return i?(PE("WriteBatch.set",i),this._delegate.set(s,t,i)):this._delegate.set(s,t),this}update(e,t,i,...s){const a=Va(e);return arguments.length===2?this._delegate.update(a,t):this._delegate.update(a,t,i,...s),this}delete(e){const t=Va(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Wa{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new zd(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new _f(this._firestore,i),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=Wa.INSTANCES;let s=i.get(e);s||(s=new WeakMap,i.set(e,s));let a=s.get(t);return a||(a=new Wa(e,new lg(e),t),s.set(t,a)),a}}Wa.INSTANCES=new WeakMap;class Gi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new lg(e)}static forPath(e,t,i){if(e.length%2!==0)throw new ae("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Gi(t,new bt(t._delegate,i,new ye(e)))}static forKey(e,t,i){return new Gi(t,new bt(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new zu(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new zu(this.firestore,wP(this._delegate,e))}catch(t){throw Wn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Oe(e),e instanceof bt?SP(this._delegate,e):!1}set(e,t){t=PE("DocumentReference.set",t);try{return t?HC(this._delegate,e,t):HC(this._delegate,e)}catch(i){throw Wn(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return arguments.length===1?$C(this._delegate,e):$C(this._delegate,e,t,...i)}catch(s){throw Wn(s,"updateDoc()","DocumentReference.update()")}}delete(){return e7(this._delegate)}onSnapshot(...e){const t=jP(e),i=KP(e,s=>new yf(this.firestore,new $i(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return BP(this._delegate,t,i)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=JH(this._delegate):(e==null?void 0:e.source)==="server"?t=WH(this._delegate):t=YH(this._delegate),t.then(i=>new yf(this.firestore,new $i(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new Gi(this.firestore,e?this._delegate.withConverter(Wa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Wn(n,e,t){return n.message=n.message.replace(e,t),n}function jP(n){for(const e of n)if(typeof e=="object"&&!Dv(e))return e;return{}}function KP(n,e){var i,s;let t;return Dv(n[0])?t=n[0]:Dv(n[1])?t=n[1]:typeof n[0]=="function"?t={next:n[0],error:n[1],complete:n[2]}:t={next:n[1],error:n[2],complete:n[3]},{next:a=>{t.next&&t.next(e(a))},error:(i=t.error)==null?void 0:i.bind(t),complete:(s=t.complete)==null?void 0:s.bind(t)}}class yf{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Gi(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return qP(this._delegate,e._delegate)}}class _f extends yf{data(e){const t=this._delegate.data(e);return this._delegate._converter||nG(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}}class Jn{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new lg(e)}where(e,t,i){try{return new Jn(this.firestore,po(this._delegate,UH(e,t,i)))}catch(s){throw Wn(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Jn(this.firestore,po(this._delegate,FH(e,t)))}catch(i){throw Wn(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Jn(this.firestore,po(this._delegate,qH(e)))}catch(t){throw Wn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Jn(this.firestore,po(this._delegate,BH(e)))}catch(t){throw Wn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Jn(this.firestore,po(this._delegate,GH(...e)))}catch(t){throw Wn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Jn(this.firestore,po(this._delegate,zH(...e)))}catch(t){throw Wn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Jn(this.firestore,po(this._delegate,HH(...e)))}catch(t){throw Wn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Jn(this.firestore,po(this._delegate,$H(...e)))}catch(t){throw Wn(t,"endAt()","Query.endAt()")}}isEqual(e){return AP(this._delegate,e._delegate)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=XH(this._delegate):(e==null?void 0:e.source)==="server"?t=ZH(this._delegate):t=QH(this._delegate),t.then(i=>new Mv(this.firestore,new lr(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=jP(e),i=KP(e,s=>new Mv(this.firestore,new lr(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return BP(this._delegate,t,i)}withConverter(e){return new Jn(this.firestore,e?this._delegate.withConverter(Wa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class _7{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new _f(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Mv{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Jn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new _f(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new _7(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new _f(this._firestore,i))})}isEqual(e){return qP(this._delegate,e._delegate)}}class zu extends Jn{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Gi(this.firestore,e):null}doc(e){try{return e===void 0?new Gi(this.firestore,_p(this._delegate)):new Gi(this.firestore,_p(this._delegate,e))}catch(t){throw Wn(t,"doc()","CollectionReference.doc()")}}add(e){return t7(this._delegate,e).then(t=>new Gi(this.firestore,t))}isEqual(e){return SP(this._delegate,e._delegate)}withConverter(e){return new zu(this.firestore,e?this._delegate.withConverter(Wa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Va(n){return ct(n,bt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(...e){this._delegate=new Fo(...e)}static documentId(){return new DE(qt.keyField().canonicalString())}isEqual(e){return e=Oe(e),e instanceof Fo?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{static serverTimestamp(){const e=u7();return e._methodName="FieldValue.serverTimestamp",new Pa(e)}static delete(){const e=l7();return e._methodName="FieldValue.delete",new Pa(e)}static arrayUnion(...e){const t=c7(...e);return t._methodName="FieldValue.arrayUnion",new Pa(t)}static arrayRemove(...e){const t=d7(...e);return t._methodName="FieldValue.arrayRemove",new Pa(t)}static increment(e){const t=f7(e);return t._methodName="FieldValue.increment",new Pa(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v7={Firestore:zP,GeoPoint:ar,Timestamp:mt,Blob:GP,Transaction:HP,WriteBatch:$P,DocumentReference:Gi,DocumentSnapshot:yf,Query:Jn,QueryDocumentSnapshot:_f,QuerySnapshot:Mv,CollectionReference:zu,FieldPath:DE,FieldValue:Pa,setLogLevel:y7,CACHE_SIZE_UNLIMITED:SH};function E7(n,e){n.INTERNAL.registerComponent(new Yr("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(i,s)},"PUBLIC").setServiceProps({...v7}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T7(n){E7(n,(e,t)=>new zP(e,t,new g7)),n.registerVersion(h7,m7)}T7(xi);const I7={apiKey:"AIzaSyB-jEv9mg1sgY4mSr3kWTbG2Tv5pvMn7eg",authDomain:"pensa-prato.firebaseapp.com",projectId:"pensa-prato",storageBucket:"pensa-prato.appspot.com",messagingSenderId:"1071505894842",appId:"1:1071505894842:web:23d41ab79fab3abf394183",measurementId:"G-1LZ1JFCRSN"};xi.apps.length?xi.app():xi.initializeApp(I7);const w7=xi.auth(),S7=xi.firestore(),ME=new xi.auth.GoogleAuthProvider;ME.addScope("profile");ME.addScope("email");const Io=w7,zt=S7,A7=ME,x7=(n,e)=>n.signInWithPopup(e),C7=(n,e,t)=>n.signInWithEmailAndPassword(e,t),b7=(n,e,t)=>n.createUserWithEmailAndPassword(e,t),R7=n=>n.signOut(),N7=(n,e)=>n.updateProfile(e),P7=(n,e)=>n.sendPasswordResetEmail(e),D7=(n,e)=>n.onAuthStateChanged(e),YC=(n,e)=>n.setPersistence(e),JC=xi.auth.Auth.Persistence.LOCAL,WC=xi.auth.Auth.Persistence.SESSION,YP=(n,e)=>{let t=n;for(const i of e)t.collection?t=t.collection(i):t.doc&&(t=t.doc(i));return t},go=(n,...e)=>YP(n,e),Ti=(n,...e)=>YP(n,e),ou=(n,e,t)=>n.set(e,t),Tm=(n,e)=>n.add(e),D_=(n,e)=>n.update(e),M_=n=>n.delete(),_d=(n,e,t)=>n.onSnapshot(e,t),kE=({className:n="",size:e=48})=>{const t=`logo-gradient-${Math.random().toString(36).substr(2,9)}`;return T.jsxs("div",{className:`relative flex items-center justify-center ${n}`,style:{width:e,height:e},children:[T.jsx("svg",{width:"0",height:"0",className:"absolute",children:T.jsxs("defs",{children:[T.jsxs("linearGradient",{id:t,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[T.jsx("stop",{offset:"0%",stopColor:"#00C853"}),T.jsx("stop",{offset:"100%",stopColor:"#69F0AE"})]}),T.jsx("filter",{id:`${t}-shadow`,x:"-20%",y:"-20%",width:"140%",height:"140%",children:T.jsx("feDropShadow",{dx:"0",dy:"2",stdDeviation:"3",floodOpacity:"0.15"})})]})}),T.jsx("div",{className:"absolute inset-0 bg-white rounded-full shadow-md flex items-center justify-center",style:{boxShadow:"0 4px 12px rgba(0, 200, 83, 0.15)"},children:T.jsxs("div",{className:"relative flex items-center justify-center",children:[T.jsx(Hi,{size:e*.55,stroke:`url(#${t})`,strokeWidth:2.5,className:"relative z-10"}),T.jsx(D5,{size:e*.25,stroke:`url(#${t})`,strokeWidth:2.5,className:"absolute -top-1 -right-3 z-20 animate-pulse",fill:"white"})]})})]})},M7=({onLoginSuccess:n,onNavigateToRegister:e,onNavigateToForgotPassword:t})=>{const[i,s]=ce.useState(""),[a,l]=ce.useState(""),[c,f]=ce.useState(!1),[h,_]=ce.useState(!0),[E,I]=ce.useState(!1),[x,k]=ce.useState(null);ce.useEffect(()=>{const z=localStorage.getItem("pensa_prato_saved_email");z&&(s(z),_(!0))},[]);const V=async()=>{I(!0),k(null);try{await YC(Io,h?JC:WC),await x7(Io,A7),n()}catch(z){console.error("Erro no login com Google:",z),k("Erro ao conectar com o Google. Tente novamente."),I(!1)}},B=async z=>{if(z.preventDefault(),!i||!a){k("Preencha e-mail e senha.");return}I(!0),k(null);try{await YC(Io,h?JC:WC),h?localStorage.setItem("pensa_prato_saved_email",i):localStorage.removeItem("pensa_prato_saved_email"),await C7(Io,i,a),n()}catch(G){console.error("Erro no login:",G),G.code==="auth/user-not-found"||G.code==="auth/wrong-password"||G.code==="auth/invalid-credential"?k("E-mail ou senha incorretos."):G.code==="auth/too-many-requests"?k("Muitas tentativas. Tente novamente mais tarde."):k("Erro ao fazer login. Verifique sua conexo."),I(!1)}};return T.jsxs("div",{className:"min-h-screen bg-white flex flex-col font-sans relative overflow-hidden",children:[T.jsx("div",{className:"absolute top-0 left-0 w-full h-[45vh] bg-gradient-to-br from-emerald-50 via-[#E8F5E9] to-white pointer-events-none z-0 rounded-b-[3rem]"}),T.jsx("div",{className:"absolute top-10 right-10 w-64 h-64 bg-emerald-200/20 rounded-full blur-3xl pointer-events-none"}),T.jsx("div",{className:"absolute top-20 left-0 w-32 h-32 bg-emerald-300/10 rounded-full blur-2xl pointer-events-none"}),T.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-6 w-full max-w-md mx-auto z-10 relative",children:[T.jsxs("div",{className:"text-center mb-8 flex flex-col items-center",children:[T.jsx("div",{className:"p-4 bg-white/60 backdrop-blur-sm rounded-full shadow-lg shadow-emerald-100/50 mb-4 ring-1 ring-white",children:T.jsx(kE,{size:56})}),T.jsxs("h1",{className:"font-bold text-[38px] leading-tight text-gray-900 tracking-tight mb-2",children:["Pensa ",T.jsx("span",{className:"text-[#00C853]",children:"Prato"})]}),T.jsx("p",{className:"text-gray-500 font-medium text-base leading-snug max-w-[260px] mx-auto",children:"Tire uma foto. O app pensa o prato por voc."})]}),T.jsx("button",{onClick:V,disabled:E,className:"w-full bg-white border border-gray-200 rounded-2xl py-4 px-4 flex items-center justify-center gap-3 shadow-sm hover:shadow-md hover:border-emerald-200 hover:bg-emerald-50/30 active:scale-[0.98] transition-all group mb-6",children:E?T.jsx("div",{className:"w-6 h-6 border-2 border-[#00C853] border-t-transparent rounded-full animate-spin"}):T.jsxs(T.Fragment,{children:[T.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[T.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),T.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),T.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.26c.47-1.43 1.15-2.58 1.81-2.58z",fill:"#FBBC05"}),T.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),T.jsx("span",{className:"text-gray-700 font-bold",children:"Continuar com Google"})]})}),T.jsxs("div",{className:"w-full flex items-center gap-4 mb-6 px-2",children:[T.jsx("div",{className:"flex-1 h-px bg-gray-100"}),T.jsx("span",{className:"text-gray-400 text-xs font-bold uppercase tracking-wider",children:"ou entre com e-mail"}),T.jsx("div",{className:"flex-1 h-px bg-gray-100"})]}),T.jsxs("form",{onSubmit:B,className:"w-full space-y-4",children:[T.jsxs("div",{className:"relative group",children:[T.jsx($v,{className:"absolute left-4 top-4 w-5 h-5 text-gray-400 group-focus-within:text-[#00C853]"}),T.jsx("input",{type:"email",name:"email",autoComplete:"email",placeholder:"seu@email.com",value:i,onChange:z=>s(z.target.value),className:"w-full pl-12 pr-4 py-4 bg-gray-50 border border-transparent focus:bg-white focus:border-emerald-100 focus:ring-4 focus:ring-emerald-50 rounded-2xl text-gray-800 placeholder-gray-400 outline-none font-medium",required:!0})]}),T.jsxs("div",{className:"relative group",children:[T.jsx(Mb,{className:"absolute left-4 top-4 w-5 h-5 text-gray-400 group-focus-within:text-[#00C853]"}),T.jsx("input",{type:c?"text":"password",name:"password",autoComplete:"current-password",placeholder:"",value:a,onChange:z=>l(z.target.value),className:"w-full pl-12 pr-12 py-4 bg-gray-50 border border-transparent focus:bg-white focus:border-emerald-100 focus:ring-4 focus:ring-emerald-50 rounded-2xl text-gray-800 placeholder-gray-400 outline-none font-medium",required:!0}),T.jsx("button",{type:"button",onClick:()=>f(!c),className:"absolute right-4 top-4 text-gray-400 hover:text-gray-600",children:c?T.jsx(BU,{className:"w-5 h-5"}):T.jsx(zU,{className:"w-5 h-5"})})]}),T.jsxs("div",{className:"flex justify-between items-center px-1",children:[T.jsxs("button",{type:"button",onClick:()=>_(!h),className:"flex items-center gap-2 text-xs font-bold text-gray-500 hover:text-gray-700",children:[h?T.jsx(k5,{className:"w-4 h-4 text-[#00C853]"}):T.jsx(L5,{className:"w-4 h-4 text-gray-300"}),"Lembrar de mim"]}),T.jsx("button",{type:"button",onClick:t,className:"text-xs font-bold text-gray-400 hover:text-[#00C853]",children:"Esqueceu a senha?"})]}),x&&T.jsx("div",{className:"text-red-500 text-sm text-center bg-red-50 p-3 rounded-2xl border border-red-100",children:x}),T.jsx("button",{type:"submit",disabled:E,className:"w-full bg-[#00C853] hover:bg-[#00b34a] text-white font-bold py-4 rounded-2xl shadow-lg shadow-emerald-200 active:scale-[0.98] transition-all flex items-center justify-center disabled:opacity-70",children:E?"Processando...":T.jsxs(T.Fragment,{children:["Entrar ",T.jsx(Hv,{className:"w-5 h-5 ml-2"})]})})]}),T.jsx("div",{className:"mt-auto pt-8 text-center pb-4",children:T.jsxs("button",{onClick:e,className:"text-sm text-gray-500 hover:text-gray-800 flex items-center gap-1.5 mx-auto px-4 py-2 rounded-xl hover:bg-gray-50",children:["Ainda no tem conta? ",T.jsx("span",{className:"font-bold text-[#00C853]",children:"Criar agora"})]})})]})]})},k7=n=>n.replace(/\D/g,"").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})/,"$1-$2").replace(/(-\d{2})\d+?$/,"$1"),QC=n=>{if(n=n.replace(/[^\d]+/g,""),n==""||n.length!=11||n=="00000000000"||n=="11111111111"||n=="22222222222"||n=="33333333333"||n=="44444444444"||n=="55555555555"||n=="66666666666"||n=="77777777777"||n=="88888888888"||n=="99999999999")return!1;let e=0;for(let i=0;i<9;i++)e+=parseInt(n.charAt(i))*(10-i);let t=11-e%11;if((t==10||t==11)&&(t=0),t!=parseInt(n.charAt(9)))return!1;e=0;for(let i=0;i<10;i++)e+=parseInt(n.charAt(i))*(11-i);return t=11-e%11,(t==10||t==11)&&(t=0),t==parseInt(n.charAt(10))},V7=({onRegisterSuccess:n,onNavigateToLogin:e})=>{const[t,i]=ce.useState(""),[s,a]=ce.useState(""),[l,c]=ce.useState(""),[f,h]=ce.useState(""),[_,E]=ce.useState(!1),[I,x]=ce.useState(null),[k,V]=ce.useState(!1),[B,z]=ce.useState(!1),G=se=>{const de=k7(se.target.value);c(de),de.length>=14?V(!QC(de)):V(!1)},J=async se=>{if(se.preventDefault(),x(null),!t||!s||!f||!l){x("Preencha todos os campos.");return}if(!QC(l)){x("CPF invlido."),V(!0);return}if(f.length<6){x("A senha deve ter pelo menos 6 caracteres.");return}E(!0);try{const le=(await b7(Io,s,f)).user;if(le){await N7(le,{displayName:t});let N=0,P=!1;for(;N<3&&!P;)try{if(N===0&&await new Promise(R=>setTimeout(R,500)),zt)await ou(Ti(zt,"users",le.uid,"family","primary"),{id:"primary",name:t.split(" ")[0],avatar:"",dislikes:"",restrictions:[],isChild:!1}),await ou(Ti(zt,"users",le.uid,"settings","pantry"),{items:[]}),P=!0,console.log("Banco de dados inicializado com sucesso.");else{console.warn("Firestore instance is null");break}}catch(R){console.warn(`Tentativa ${N+1} de gravar no banco falhou:`,R),N++,N<3&&await new Promise(D=>setTimeout(D,1e3))}}E(!1),z(!0),setTimeout(()=>{n()},2e3)}catch(de){console.error(de),de.code==="auth/email-already-in-use"?x("Este e-mail j est cadastrado."):de.code==="auth/invalid-api-key"?x("Erro de configurao do servidor."):x("Erro ao criar conta. Verifique sua conexo."),E(!1)}};return B?T.jsxs("div",{className:"min-h-screen bg-white flex flex-col items-center justify-center font-sans p-6 animate-in fade-in duration-500",children:[T.jsx("div",{className:"w-24 h-24 bg-emerald-100 rounded-full flex items-center justify-center mb-6 animate-bounce",children:T.jsx(vu,{className:"w-12 h-12 text-emerald-600"})}),T.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Cadastro Concludo!"}),T.jsxs("p",{className:"text-gray-500 text-center",children:["Bem-vindo(a) ao Pensa Prato.",T.jsx("br",{}),"Estamos preparando sua cozinha..."]})]}):T.jsxs("div",{className:"min-h-screen bg-white flex flex-col font-sans relative overflow-hidden",children:[T.jsx("div",{className:"absolute top-0 left-0 w-full h-[35vh] bg-gradient-to-b from-emerald-50 via-[#E8F5E9] to-white pointer-events-none z-0"}),T.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-6 w-full max-w-md mx-auto z-10 relative",children:[T.jsx("button",{onClick:e,className:"absolute top-6 left-4 p-3 text-gray-500 hover:text-[#00C853] bg-white/80 backdrop-blur-md shadow-sm border border-gray-100 rounded-full transition-all hover:scale-105 active:scale-95",children:T.jsx(Rb,{className:"w-6 h-6"})}),T.jsxs("div",{className:"text-center mb-8 pt-10",children:[T.jsx("div",{className:"inline-block p-3 bg-white rounded-full shadow-lg shadow-emerald-100 mb-4",children:T.jsx(kE,{size:48})}),T.jsx("h1",{className:"font-bold text-3xl text-gray-900 mb-2",children:"Criar Conta"}),T.jsx("p",{className:"text-gray-500 text-sm font-medium",children:"Junte-se a milhares de chefs caseiros"})]}),T.jsxs("form",{onSubmit:J,className:"w-full space-y-4",children:[T.jsxs("div",{className:"relative group",children:[T.jsx($m,{className:"absolute left-4 top-4 w-5 h-5 text-gray-400 group-focus-within:text-[#00C853] transition-colors"}),T.jsx("input",{type:"text",placeholder:"Nome completo",value:t,onChange:se=>i(se.target.value),className:"w-full pl-12 pr-4 py-4 bg-gray-50 border border-transparent focus:bg-white focus:border-emerald-100 focus:ring-4 focus:ring-emerald-50 rounded-2xl text-gray-800 placeholder-gray-400 outline-none transition-all font-medium",required:!0})]}),T.jsxs("div",{className:"relative group",children:[T.jsx($U,{className:`absolute left-4 top-4 w-5 h-5 transition-colors ${k?"text-red-400":"text-gray-400 group-focus-within:text-[#00C853]"}`}),T.jsx("input",{type:"text",placeholder:"CPF (000.000.000-00)",value:l,onChange:G,maxLength:14,className:`w-full pl-12 pr-4 py-4 bg-gray-50 border focus:bg-white rounded-2xl text-gray-800 placeholder-gray-400 outline-none focus:ring-4 transition-all font-medium ${k?"border-red-200 focus:border-red-400 focus:ring-red-50 bg-red-50/50":"border-transparent focus:border-emerald-100 focus:ring-emerald-50"}`,required:!0}),k&&T.jsx($d,{className:"absolute right-4 top-4 w-5 h-5 text-red-500 animate-pulse"})]}),T.jsxs("div",{className:"relative group",children:[T.jsx($v,{className:"absolute left-4 top-4 w-5 h-5 text-gray-400 group-focus-within:text-[#00C853] transition-colors"}),T.jsx("input",{type:"email",placeholder:"Seu e-mail",value:s,onChange:se=>a(se.target.value),className:"w-full pl-12 pr-4 py-4 bg-gray-50 border border-transparent focus:bg-white focus:border-emerald-100 focus:ring-4 focus:ring-emerald-50 rounded-2xl text-gray-800 placeholder-gray-400 outline-none transition-all font-medium",required:!0})]}),T.jsxs("div",{className:"relative group",children:[T.jsx(Mb,{className:"absolute left-4 top-4 w-5 h-5 text-gray-400 group-focus-within:text-[#00C853] transition-colors"}),T.jsx("input",{type:"password",placeholder:"Criar senha",value:f,onChange:se=>h(se.target.value),className:"w-full pl-12 pr-4 py-4 bg-gray-50 border border-transparent focus:bg-white focus:border-emerald-100 focus:ring-4 focus:ring-emerald-50 rounded-2xl text-gray-800 placeholder-gray-400 outline-none transition-all font-medium",required:!0})]}),I&&T.jsxs("div",{className:"text-red-500 text-sm text-center bg-red-50 p-3 rounded-2xl border border-red-100 flex items-center justify-center gap-2 animate-in slide-in-from-top-2",children:[T.jsx($d,{className:"w-4 h-4"})," ",I]}),T.jsx("button",{type:"submit",disabled:_,className:"w-full bg-[#00C853] hover:bg-[#00b34a] text-white font-bold py-4 rounded-2xl shadow-lg shadow-emerald-200 active:scale-[0.98] transition-all duration-300 mt-6 flex items-center justify-center disabled:opacity-70 disabled:cursor-not-allowed group",children:_?T.jsx("div",{className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"}):T.jsxs("span",{className:"flex items-center gap-2",children:["Criar Conta Grtis",T.jsx(Hv,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})})]}),T.jsxs("p",{className:"mt-8 text-xs text-gray-400 text-center px-6 leading-relaxed",children:["Ao criar uma conta, voc concorda com nossos ",T.jsx("br",{}),T.jsx("button",{className:"text-[#00C853] font-bold hover:underline",children:"Termos de Uso"})," e ",T.jsx("button",{className:"text-[#00C853] font-bold hover:underline",children:"Poltica de Privacidade"}),"."]})]})]})},L7=({onBack:n})=>{const[e,t]=ce.useState(""),[i,s]=ce.useState(!1),[a,l]=ce.useState(null),[c,f]=ce.useState(!1),h=async _=>{if(_.preventDefault(),!e){l("Digite seu e-mail.");return}s(!0),l(null);try{await P7(Io,e),f(!0)}catch(E){console.error(E),E.code==="auth/user-not-found"?l("E-mail no encontrado."):E.code==="auth/invalid-email"?l("E-mail invlido."):l("Erro ao enviar. Tente novamente.")}s(!1)};return c?T.jsxs("div",{className:"min-h-screen bg-white flex flex-col items-center justify-center font-sans p-6 animate-in fade-in duration-500",children:[T.jsx("div",{className:"w-24 h-24 bg-emerald-100 rounded-full flex items-center justify-center mb-6 animate-bounce",children:T.jsx(vu,{className:"w-12 h-12 text-emerald-600"})}),T.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"E-mail Enviado!"}),T.jsx("p",{className:"text-gray-500 text-center max-w-xs mb-8",children:"Verifique sua caixa de entrada (e spam). Enviamos um link para voc redefinir sua senha."}),T.jsx("button",{onClick:n,className:"w-full max-w-sm bg-emerald-600 hover:bg-emerald-700 text-white font-bold py-4 rounded-2xl shadow-lg transition-colors",children:"Voltar para Login"})]}):T.jsxs("div",{className:"min-h-screen bg-white flex flex-col font-sans relative overflow-hidden",children:[T.jsx("div",{className:"absolute top-0 left-0 w-full h-[35vh] bg-gradient-to-b from-blue-50 via-emerald-50/30 to-white pointer-events-none z-0"}),T.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-6 w-full max-w-md mx-auto z-10 relative",children:[T.jsx("button",{onClick:n,className:"absolute top-6 left-4 p-3 text-gray-500 hover:text-emerald-600 bg-white/80 backdrop-blur-md shadow-sm border border-gray-100 rounded-full transition-all hover:scale-105 active:scale-95",children:T.jsx(Rb,{className:"w-6 h-6"})}),T.jsxs("div",{className:"text-center mb-8 pt-10",children:[T.jsx("div",{className:"inline-block p-4 bg-white rounded-full shadow-lg shadow-blue-100 mb-4 ring-1 ring-blue-50",children:T.jsx(QU,{className:"w-10 h-10 text-emerald-500"})}),T.jsx("h1",{className:"font-bold text-3xl text-gray-900 mb-2",children:"Recuperar Senha"}),T.jsx("p",{className:"text-gray-500 text-sm font-medium leading-relaxed max-w-xs mx-auto",children:"No se preocupe. Digite seu e-mail e ns ajudaremos voc a voltar para a cozinha."})]}),T.jsxs("form",{onSubmit:h,className:"w-full space-y-4",children:[T.jsxs("div",{className:"relative group",children:[T.jsx($v,{className:"absolute left-4 top-4 w-5 h-5 text-gray-400 group-focus-within:text-emerald-500 transition-colors"}),T.jsx("input",{type:"email",placeholder:"Seu e-mail cadastrado",value:e,onChange:_=>t(_.target.value),className:"w-full pl-12 pr-4 py-4 bg-gray-50 border border-transparent focus:bg-white focus:border-emerald-200 focus:ring-4 focus:ring-emerald-50 rounded-2xl text-gray-800 placeholder-gray-400 outline-none transition-all font-medium",required:!0})]}),a&&T.jsxs("div",{className:"text-red-500 text-sm text-center bg-red-50 p-3 rounded-2xl border border-red-100 flex items-center justify-center gap-2 animate-in slide-in-from-top-2",children:[T.jsx($d,{className:"w-4 h-4"})," ",a]}),T.jsx("button",{type:"submit",disabled:i,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white font-bold py-4 rounded-2xl shadow-lg shadow-emerald-200 active:scale-[0.98] transition-all duration-300 mt-4 flex items-center justify-center disabled:opacity-70 disabled:cursor-not-allowed group",children:i?T.jsx("div",{className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"}):T.jsxs("span",{className:"flex items-center gap-2",children:["Enviar Link de Recuperao",T.jsx(Hv,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})})]}),T.jsxs("p",{className:"mt-8 text-xs text-gray-400 text-center",children:["Se voc lembrou sua senha, ",T.jsx("button",{onClick:n,className:"text-emerald-600 font-bold hover:underline",children:"faa login aqui"}),"."]})]})]})},O7=({items:n,onAddItem:e,onToggleItem:t,onRemoveItem:i,onEditItem:s,onClearList:a,onBack:l})=>{const[c,f]=ce.useState(""),[h,_]=ce.useState(""),[E,I]=ce.useState(null),[x,k]=ce.useState(""),[V,B]=ce.useState(""),z=(D,O)=>{const L=D.target.value;/^[\d\/.,a-zA-Z\s]*$/.test(L)&&O(L)},G=()=>{if(c.trim()){let D=h.trim();/^\d+$/.test(D)&&(D=`${D}x`),e(c,D),f(""),_("")}},J=D=>{I(D.id),k(D.name),B(D.quantity?D.quantity.replace("x",""):"")},se=()=>{I(null),k(""),B("")},de=()=>{if(E&&x.trim()){let D=V.trim();/^\d+$/.test(D)&&(D=`${D}x`),s(E,x,D),se()}},le=(D,O)=>{D.key==="Enter"&&O()},N=()=>{const D=(n||[]).filter(De=>!De.checked),O=(n||[]).filter(De=>De.checked);let L=` *LISTA DE COMPRAS* - Pensa Prato

`;D.length>0&&(L+=`*Falta Comprar:*
`,D.forEach(De=>{L+=`[ ] ${De.quantity?`_${De.quantity}_ `:""}*${De.name}*
`})),O.length>0&&(L+=`
*J Peguei:*
`,O.forEach(De=>{L+=`[x] ~${De.quantity?`${De.quantity} `:""}${De.name}~
`})),(n||[]).length===0&&(L+="Minha lista est vazia!"),L+=`
_Gerado pelo App Pensa Prato_ `;const M=`https://api.whatsapp.com/send?text=${encodeURIComponent(L)}`;window.open(M,"_blank")},P=(n||[]).filter(D=>!D.checked),R=(n||[]).filter(D=>D.checked);return T.jsxs("div",{className:"min-h-screen bg-gray-50 pb-24 flex flex-col",children:[T.jsx("div",{className:"bg-white shadow-sm pt-4 px-6 pb-4 sticky top-0 z-10",children:T.jsxs("div",{className:"flex items-center justify-between",children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("button",{onClick:l,className:"p-2 -ml-2 hover:bg-gray-100 rounded-full transition-colors",children:T.jsx(Kr,{className:"w-6 h-6 text-gray-600"})}),T.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Lista"})]}),T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsxs("button",{onClick:N,className:"p-2 bg-emerald-50 text-emerald-600 rounded-full hover:bg-emerald-100 transition-colors flex items-center justify-center gap-2 sm:pr-3",title:"Enviar no WhatsApp",children:[T.jsx(s5,{className:"w-5 h-5"}),T.jsx("span",{className:"text-xs font-bold hidden sm:inline",children:"WhatsApp"})]}),T.jsx("button",{onClick:a,className:"p-2 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-full transition-colors",title:"Limpar tudo",children:T.jsx(Sm,{className:"w-5 h-5"})})]})]})}),T.jsxs("div",{className:"flex-1 p-6 max-w-lg mx-auto w-full",children:[T.jsxs("div",{className:"flex gap-2 mb-8 items-stretch",children:[T.jsxs("div",{className:"flex-1 bg-white flex items-center pl-3 pr-2 rounded-2xl border border-gray-200 shadow-sm focus-within:ring-2 focus-within:ring-emerald-100 focus-within:border-emerald-400 transition-all overflow-hidden",children:[T.jsx(Eu,{className:"w-5 h-5 text-gray-400 mr-2 flex-shrink-0"}),T.jsx("input",{type:"text",value:h,onChange:D=>z(D,_),onKeyDown:D=>le(D,G),placeholder:"Qtd",className:"w-16 py-4 bg-transparent outline-none text-gray-800 placeholder-gray-400 font-medium text-center border-r border-gray-100 mr-2"}),T.jsx("input",{type:"text",value:c,onChange:D=>f(D.target.value),onKeyDown:D=>le(D,G),placeholder:"Nome do item...",className:"flex-1 py-4 bg-transparent outline-none text-gray-800 placeholder-gray-400 font-medium min-w-0"})]}),T.jsx("button",{onClick:G,disabled:!c.trim(),className:"bg-emerald-600 hover:bg-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed text-white p-4 rounded-2xl shadow-lg shadow-emerald-200 transition-all active:scale-95 flex-shrink-0",children:T.jsx(Eu,{className:"w-6 h-6"})})]}),P.length===0&&R.length===0?T.jsxs("div",{className:"flex flex-col items-center justify-center py-20 opacity-50",children:[T.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-full flex items-center justify-center mb-6",children:T.jsx(Kv,{className:"w-10 h-10 text-gray-400"})}),T.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Sua lista est vazia"}),T.jsx("p",{className:"text-sm text-gray-500 text-center max-w-[200px] mt-2",children:"Adicione itens manualmente ou direto das receitas."})]}):T.jsxs("div",{className:"space-y-6",children:[P.length>0&&T.jsx("div",{className:"space-y-3",children:P.map(D=>{const O=E===D.id;return T.jsx("div",{className:`flex items-center bg-white p-3 rounded-2xl shadow-sm border border-gray-100 group animate-in slide-in-from-bottom-2 duration-300 ${O?"ring-2 ring-emerald-200":""}`,children:O?T.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[T.jsx("input",{type:"text",value:V,onChange:L=>z(L,B),placeholder:"Qtd",className:"w-12 p-2 bg-gray-50 rounded-lg text-center font-bold text-emerald-600 outline-none focus:ring-1 focus:ring-emerald-300",autoFocus:!0}),T.jsx("input",{type:"text",value:x,onChange:L=>k(L.target.value),onKeyDown:L=>le(L,de),placeholder:"Nome do item",className:"flex-1 p-2 bg-gray-50 rounded-lg outline-none focus:ring-1 focus:ring-emerald-300"}),T.jsx("button",{onClick:de,className:"p-2 bg-emerald-100 text-emerald-600 rounded-lg",children:T.jsx(Hm,{className:"w-4 h-4"})}),T.jsx("button",{onClick:se,className:"p-2 bg-gray-100 text-gray-500 rounded-lg",children:T.jsx(Yd,{className:"w-4 h-4"})})]}):T.jsxs(T.Fragment,{children:[T.jsx("button",{onClick:()=>t(D.id),className:"w-6 h-6 rounded-full border-2 border-gray-300 hover:border-emerald-500 mr-4 flex items-center justify-center transition-colors flex-shrink-0"}),T.jsx("div",{className:"flex-1 min-w-0",children:T.jsxs("span",{className:"font-medium text-gray-800 block truncate",children:[D.quantity&&T.jsx("span",{className:"text-emerald-600 font-bold mr-1",children:D.quantity}),D.name]})}),T.jsxs("div",{className:"flex items-center gap-1 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity",children:[T.jsx("button",{onClick:()=>J(D),className:"text-gray-300 hover:text-emerald-600 hover:bg-emerald-50 rounded-lg transition-colors p-2",children:T.jsx(kb,{className:"w-4 h-4"})}),T.jsx("button",{onClick:()=>i(D.id),className:"text-gray-300 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors p-2",children:T.jsx(Sm,{className:"w-4 h-4"})})]})]})},D.id)})}),R.length>0&&T.jsxs("div",{children:[T.jsxs("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-3 pl-2",children:["Comprados (",R.length,")"]}),T.jsx("div",{className:"space-y-3 opacity-60",children:R.map(D=>T.jsxs("div",{className:"flex items-center bg-gray-50 p-3 rounded-2xl border border-transparent group",children:[T.jsx("button",{onClick:()=>t(D.id),className:"w-6 h-6 rounded-full bg-emerald-500 border-2 border-emerald-500 mr-4 flex items-center justify-center text-white transition-colors flex-shrink-0",children:T.jsx(Hm,{className:"w-3.5 h-3.5"})}),T.jsxs("span",{className:"flex-1 font-medium text-gray-500 line-through decoration-gray-400 decoration-2 truncate",children:[D.quantity&&T.jsx("span",{className:"mr-1",children:D.quantity}),D.name]}),T.jsx("button",{onClick:()=>i(D.id),className:"text-gray-300 hover:text-red-500 transition-colors p-1 ml-2 flex-shrink-0",children:T.jsx(Sm,{className:"w-4 h-4"})})]},D.id))})]})]})]})]})},U7=()=>T.jsxs("div",{className:"fixed inset-0 bg-white z-[9999] flex flex-col items-center justify-center overflow-hidden",children:[T.jsx("div",{className:"absolute top-0 left-0 w-full h-[40vh] bg-gradient-to-b from-emerald-50/50 to-transparent pointer-events-none"}),T.jsxs("div",{className:"relative z-10 flex flex-col items-center animate-in fade-in zoom-in duration-700",children:[T.jsxs("div",{className:"mb-6 relative",children:[T.jsx("div",{className:"absolute inset-0 bg-emerald-200/20 rounded-full blur-xl animate-pulse"}),T.jsx("div",{className:"bg-white p-6 rounded-[2rem] shadow-xl shadow-emerald-100/50 ring-1 ring-emerald-50 relative animate-bounce-slow",children:T.jsx(kE,{size:72})})]}),T.jsxs("h1",{className:"text-2xl font-bold text-gray-900 mb-2 tracking-tight",children:["Pensa ",T.jsx("span",{className:"text-[#00C853]",children:"Prato"})]}),T.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[T.jsx("div",{className:"w-2 h-2 bg-emerald-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),T.jsx("div",{className:"w-2 h-2 bg-emerald-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),T.jsx("div",{className:"w-2 h-2 bg-emerald-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})]}),T.jsx("div",{className:"absolute bottom-8 text-center",children:T.jsx("p",{className:"text-[10px] font-bold text-gray-300 uppercase tracking-widest",children:"Carregando sua cozinha..."})}),T.jsx("style",{children:`
        @keyframes bounce-slow {
          0%, 100% { transform: translateY(-5%); }
          50% { transform: translateY(5%); }
        }
        .animate-bounce-slow {
          animation: bounce-slow 3s infinite ease-in-out;
        }
      `})]});function F7(){const[n,e]=ce.useState(null),[t,i]=ce.useState(!0),[s,a]=ce.useState([]),[l,c]=ce.useState([]),[f,h]=ce.useState([]),[_,E]=ce.useState([]),[I,x]=ce.useState([]),[k,V]=ce.useState(Te.LOGIN),[B,z]=ce.useState(Te.WELCOME),[G,J]=ce.useState([]),[se,de]=ce.useState(_n.ANY),[le,N]=ce.useState(void 0),[P,R]=ce.useState(Te.FAMILY_SELECTION),[D,O]=ce.useState("settings"),[L,M]=ce.useState(null),[De,We]=ce.useState(null),[Z,ne]=ce.useState([]),[ve,je]=ce.useState(null),[Ke,F]=ce.useState(null),[te,_e]=ce.useState(()=>{try{if(typeof window<"u")return localStorage.getItem("pp_demo_mode")==="true"}catch(ue){console.warn("LocalStorage access error:",ue)}return!1}),we=ce.useRef(te);ce.useEffect(()=>{we.current=te},[te]);const[Fe,qe]=ce.useState("analyzing"),Ye=ce.useRef(!0),kt=ce.useRef(k);ce.useEffect(()=>{kt.current=k},[k]),ce.useEffect(()=>D7(Io,me=>{try{if(e(me),me){if(_e(!1),localStorage.removeItem("pp_demo_mode"),zt){const Ve=go(zt,"users",me.uid,"family");_d(Ve,At=>{var Nn;const Rn=At.docs.map(Gt=>({...Gt.data(),id:Gt.id}));if(Rn.length===0){const Gt={id:"primary",name:((Nn=me.displayName)==null?void 0:Nn.split(" ")[0])||"Voc",avatar:me.photoURL||"Chef",dislikes:"",restrictions:[],isChild:!1};ou(Ti(zt,"users",me.uid,"family","primary"),Gt),a([Gt])}else a(Rn)},At=>console.warn("Family sync error",At));const at=go(zt,"users",me.uid,"favorites");_d(at,At=>c(At.docs.map(Rn=>({...Rn.data(),_firestoreId:Rn.id}))),At=>console.warn("Fav sync error",At));const ei=go(zt,"users",me.uid,"history");_d(ei,At=>h(At.docs.map(Rn=>Rn.data())),At=>console.warn("History sync error",At));const oc=go(zt,"users",me.uid,"shopping");_d(oc,At=>E(At.docs.map(Rn=>({...Rn.data(),id:Rn.id}))),At=>console.warn("Shopping sync error",At));const rl=Ti(zt,"users",me.uid,"settings","pantry");_d(rl,At=>{var Nn;const Rn=typeof At.exists=="function"?At.exists():At.exists;x(Rn?((Nn=At.data())==null?void 0:Nn.items)||[]:[])},At=>console.warn("Pantry sync error",At))}Ye.current&&V(Te.WELCOME)}else we.current?Ye.current&&V(Te.WELCOME):V(Te.LOGIN)}catch(Ve){console.error("Auth initialization error:",Ve),V(Te.LOGIN)}finally{Ye.current&&(Ye.current=!1),i(!1)}}),[]),ce.useEffect(()=>{if(n&&s.length>0)try{const ue=localStorage.getItem(`active_profiles_${n.uid}`);if(ue&&G.length===0){const me=JSON.parse(ue);Array.isArray(me)&&J(s.filter(Ve=>me.includes(Ve.id)))}}catch(ue){console.warn("Failed to parse active profiles from local storage",ue),localStorage.removeItem(`active_profiles_${n.uid}`)}},[n,s]),ce.useEffect(()=>{G.length>0&&s.length>0&&J(ue=>{const me=ue.map(Ve=>s.find(at=>at.id===Ve.id)).filter(Boolean);return ue.length!==me.length?me:ue})},[s]),ce.useEffect(()=>{n&&G.length>0&&localStorage.setItem(`active_profiles_${n.uid}`,JSON.stringify(G.map(ue=>ue.id)))},[G,n]);const pt=()=>{localStorage.removeItem("pp_demo_mode"),R7(Io)},bi=async ue=>{n&&await ou(Ti(zt,"users",n.uid,"settings","pantry"),{items:ue})},ge=async ue=>{if(te){a(me=>me.some(at=>at.id===ue.id)?me.map(at=>at.id===ue.id?ue:at):[...me,{...ue,id:Date.now().toString()}]),k===Te.PROFILE_EDITOR&&V(P);return}if(n){try{const me=!ue.id||ue.id.startsWith("temp-");if(ue.id==="primary")await ou(Ti(zt,"users",n.uid,"family","primary"),ue,{merge:!0});else if(!me&&ue.id!=="default-user")await ou(Ti(zt,"users",n.uid,"family",ue.id),ue,{merge:!0});else{const{id:Ve,...at}=ue;await Tm(go(zt,"users",n.uid,"family"),at)}}catch(me){console.error("Error saving member",me)}k===Te.PROFILE_EDITOR&&V(P)}},Ae=async ue=>{if(te){c(me=>me.some(at=>at.title===ue.title)?me.filter(at=>at.title!==ue.title):[...me,ue]);return}if(n)try{const me=l.find(Ve=>Ve.title===ue.title);if(me){const Ve=me._firestoreId;Ve&&await M_(Ti(zt,"users",n.uid,"favorites",Ve))}else{const Ve={...ue,image:ue.image||`https://picsum.photos/seed/${ue.title.replace(/\s/g,"")}/600/400`};delete Ve._firestoreId,await Tm(go(zt,"users",n.uid,"favorites"),Ve)}}catch(me){console.error(me)}},be=async ue=>{if(te){h(me=>[...me,ue]);return}if(n)try{const me={...ue,cookedAt:Date.now(),image:ue.image||`https://picsum.photos/seed/${ue.title.replace(/\s/g,"")}/600/400`};delete me._firestoreId,await Tm(go(zt,"users",n.uid,"history"),me)}catch(me){console.error(me)}},Le=async(ue,me)=>{if(!te&&n)try{const Ve=l.find(at=>at.title===ue.title);if(Ve){const at=Ve._firestoreId;at&&await D_(Ti(zt,"users",n.uid,"favorites",at),{rating:me})}else ve&&ve.title===ue.title&&je(at=>at?{...at,rating:me}:null)}catch(Ve){console.error(Ve)}},ke=async(ue,me="")=>{if(te){E(Ve=>[...Ve,{id:Date.now().toString(),name:ue,quantity:me,checked:!1}]);return}if(n)try{await Tm(go(zt,"users",n.uid,"shopping"),{name:ue,quantity:me,checked:!1,createdAt:Date.now()})}catch(Ve){console.error(Ve)}},ot=async ue=>{if(te){E(me=>me.map(Ve=>Ve.id===ue?{...Ve,checked:!Ve.checked}:Ve));return}if(n)try{const me=_.find(Ve=>Ve.id===ue);me&&await D_(Ti(zt,"users",n.uid,"shopping",ue),{checked:!me.checked})}catch(me){console.error(me)}},Qt=async(ue,me,Ve)=>{if(te){E(at=>at.map(ei=>ei.id===ue?{...ei,name:me,quantity:Ve}:ei));return}if(n)try{await D_(Ti(zt,"users",n.uid,"shopping",ue),{name:me,quantity:Ve})}catch(at){console.error(at)}},Cn=async ue=>{if(te){E(me=>me.filter(Ve=>Ve.id!==ue));return}if(n)try{await M_(Ti(zt,"users",n.uid,"shopping",ue))}catch(me){console.error(me)}},Ct=async()=>{if(te){E([]);return}if(n)try{const ue=_.map(me=>M_(Ti(zt,"users",n.uid,"shopping",me.id)));await Promise.all(ue)}catch(ue){console.error(ue)}},Vt=async ue=>{if(!(!n&&!te)){M(URL.createObjectURL(ue)),qe("analyzing"),V(Te.ANALYZING),F(null);try{const me=await mU(ue);We(me),V(Te.RESULTS)}catch(me){console.error(me);const Ve=me.message||"No foi possvel analisar a imagem. Tente novamente.";F(Ve),V(Te.UPLOAD)}}},bn=async ue=>{qe("recipes"),V(Te.ANALYZING),te&&M(null);try{let me=[];te?(await new Promise(Ve=>setTimeout(Ve,1500)),me=H_()):me=await gU(ue,G,se,I),ne(me),V(Te.RECIPES)}catch(me){console.error(me),F("Erro ao gerar receitas. Tente novamente."),V(Te.RESULTS)}},Yo=s.find(ue=>ue.id==="primary")||s[0],dr=![Te.LOGIN,Te.REGISTER,Te.FORGOT_PASSWORD,Te.ANALYZING,Te.RECIPE_DETAIL,Te.PROFILE_EDITOR].includes(k);return t?T.jsx(U7,{}):T.jsxs("div",{className:"min-h-screen bg-white font-sans antialiased text-gray-900 relative",children:[k===Te.LOGIN&&T.jsx(M7,{onLoginSuccess:()=>{},onNavigateToRegister:()=>V(Te.REGISTER),onNavigateToForgotPassword:()=>V(Te.FORGOT_PASSWORD)}),k===Te.REGISTER&&T.jsx(V7,{onRegisterSuccess:()=>V(Te.WELCOME),onNavigateToLogin:()=>V(Te.LOGIN)}),k===Te.FORGOT_PASSWORD&&T.jsx(L7,{onBack:()=>V(Te.LOGIN)}),k===Te.WELCOME&&T.jsx(r3,{onSelectAny:()=>{J([]),V(Te.COOKING_METHOD)},onSelectFamily:()=>V(Te.FAMILY_SELECTION)}),k===Te.FAMILY_SELECTION&&T.jsx(s3,{members:s,selectedMembers:G,onToggleMember:ue=>J(me=>me.some(Ve=>Ve.id===ue.id)?me.filter(Ve=>Ve.id!==ue.id):[...me,ue]),onSelectAll:()=>J(G.length===s.length?[]:[...s]),onContinue:()=>V(Te.COOKING_METHOD),onEditMember:ue=>{N(ue),R(Te.FAMILY_SELECTION),V(Te.PROFILE_EDITOR)},onAddNew:()=>{N(void 0),V(Te.PROFILE_EDITOR)},onBack:()=>V(Te.WELCOME)}),k===Te.COOKING_METHOD&&T.jsx(l3,{onSelectMethod:ue=>{de(ue),V(Te.UPLOAD)},onBack:()=>V(G.length>0?Te.FAMILY_SELECTION:Te.WELCOME)}),k===Te.PROFILE_EDITOR&&T.jsx(a3,{initialMember:le,onSave:ge,onCancel:()=>V(P)}),k===Te.UPLOAD&&T.jsx(J5,{onFileSelected:Vt,onDemoClick:()=>{_e(!0),localStorage.setItem("pp_demo_mode","true"),We(z_()),V(Te.RESULTS)},onProfileClick:()=>V(Te.PROFILE),activeProfiles:G,cookingMethod:se,onChangeContext:()=>V(Te.WELCOME),error:Ke,onBack:()=>V(Te.COOKING_METHOD)}),k===Te.SHOPPING_LIST&&T.jsx(O7,{items:_,onAddItem:ke,onToggleItem:ot,onRemoveItem:Cn,onEditItem:Qt,onClearList:Ct,onBack:()=>V(B)}),k===Te.PROFILE&&T.jsx(n3,{userProfile:Yo,pantryItems:I,onUpdatePantry:bi,onSaveProfile:ge,onBack:()=>V(De?Te.RESULTS:Te.UPLOAD),favorites:l,onSelectRecipe:ue=>{je(ue),V(Te.RECIPE_DETAIL)},initialTab:D,onLogout:pt,recipesCount:f.length}),k===Te.ANALYZING&&T.jsx(Q5,{imagePreview:L,mode:Fe}),k===Te.RESULTS&&De&&T.jsx(Z5,{result:De,onFindRecipes:bn,onRetake:()=>{M(null),We(null),V(Te.UPLOAD)}}),k===Te.RECIPES&&T.jsx(e3,{recipes:Z,onBack:()=>V(Te.RESULTS),onSelectRecipe:ue=>{je(ue),V(Te.RECIPE_DETAIL)},favorites:l,onToggleFavorite:Ae,cookingMethod:se}),k===Te.RECIPE_DETAIL&&ve&&T.jsx(t3,{recipe:ve,onBack:()=>V(Te.RECIPES),isFavorite:l.some(ue=>ue.title===ve.title),onToggleFavorite:()=>Ae(ve),onRate:ue=>Le(ve,ue),shoppingList:_,onAddToShoppingList:ke,cookingMethod:se,onFinishCooking:()=>be(ve)}),dr&&T.jsx(u3,{currentView:k,activeTab:D,onNavigate:(ue,me)=>{me&&O(me),V(ue)}})]})}class q7 extends ZC.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("React Error Boundary Caught:",e,t)}render(){var e;return this.state.hasError?T.jsxs("div",{style:{padding:"2rem",textAlign:"center",fontFamily:"sans-serif"},children:[T.jsx("h1",{style:{color:"#ef4444"},children:"Ops, algo deu errado."}),T.jsx("p",{style:{color:"#6b7280"},children:"Ocorreu um erro ao carregar a aplicao."}),T.jsx("pre",{style:{marginTop:"1rem",padding:"1rem",background:"#f3f4f6",borderRadius:"0.5rem",overflow:"auto",textAlign:"left",fontSize:"0.75rem",color:"#374151",border:"1px solid #e5e7eb"},children:(e=this.state.error)==null?void 0:e.message})]}):this.props.children}}const JP=document.getElementById("root");if(!JP)throw new Error("Could not find root element to mount to");const B7=L2.createRoot(JP);B7.render(T.jsx(ZC.StrictMode,{children:T.jsx(q7,{children:T.jsx(F7,{})})}));
